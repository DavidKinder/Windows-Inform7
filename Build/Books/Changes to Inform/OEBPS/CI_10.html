<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Generated by indoc on 11 Aug 2016 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc.css" rel="stylesheet" type="text/css" />
<title>Chapter 10: Maintenance</title>
</head>
<body class="paper papertint"><p class="chapterheading">Chapter 10: Maintenance</p>
<p class="chaptercontents"><a href="CI_10.html#s1" class="standardlink"><span class="chaptercontentsitem">§10.1. Core Inform maintenance</span></a>; <a href="CI_10.html#s2" class="standardlink"><span class="chaptercontentsitem">§10.2. Uncategorisable</span></a>; <a href="CI_10.html#s3" class="standardlink"><span class="chaptercontentsitem">§10.3. Source text and punctuation</span></a>; <a href="CI_10.html#s4" class="standardlink"><span class="chaptercontentsitem">§10.4. Headings</span></a>; <a href="CI_10.html#s5" class="standardlink"><span class="chaptercontentsitem">§10.5. Extensions</span></a>; <a href="CI_10.html#s6" class="standardlink"><span class="chaptercontentsitem">§10.6. Assertions and creations</span></a>; <a href="CI_10.html#s7" class="standardlink"><span class="chaptercontentsitem">§10.7. Model world</span></a>; <a href="CI_10.html#s8" class="standardlink"><span class="chaptercontentsitem">§10.8. Properties</span></a>; <a href="CI_10.html#s9" class="standardlink"><span class="chaptercontentsitem">§10.9. Relations</span></a>; <a href="CI_10.html#s10" class="standardlink"><span class="chaptercontentsitem">§10.10. Actions</span></a>; <a href="CI_10.html#s11" class="standardlink"><span class="chaptercontentsitem">§10.11. Activities</span></a>; <a href="CI_10.html#s12" class="standardlink"><span class="chaptercontentsitem">§10.12. Rules and rulebooks</span></a>; <a href="CI_10.html#s13" class="standardlink"><span class="chaptercontentsitem">§10.13. Lists</span></a>; <a href="CI_10.html#s14" class="standardlink"><span class="chaptercontentsitem">§10.14. Tables</span></a>; <a href="CI_10.html#s15" class="standardlink"><span class="chaptercontentsitem">§10.15. Scenes</span></a>; <a href="CI_10.html#s16" class="standardlink"><span class="chaptercontentsitem">§10.16. Kinds and typechecking</span></a>; <a href="CI_10.html#s17" class="standardlink"><span class="chaptercontentsitem">§10.17. Phrases and functional programming</span></a>; <a href="CI_10.html#s18" class="standardlink"><span class="chaptercontentsitem">§10.18. Equations, units and arithmetic</span></a>; <a href="CI_10.html#s19" class="standardlink"><span class="chaptercontentsitem">§10.19. Understanding</span></a>; <a href="CI_10.html#s20" class="standardlink"><span class="chaptercontentsitem">§10.20. Glulx issues, file I/O, figures, sounds</span></a>; <a href="CI_10.html#s21" class="standardlink"><span class="chaptercontentsitem">§10.21. I6 template layer and inclusions</span></a>; <a href="CI_10.html#s22" class="standardlink"><span class="chaptercontentsitem">§10.22. Text, spacing and printing</span></a>; <a href="CI_10.html#s23" class="standardlink"><span class="chaptercontentsitem">§10.23. Indexing</span></a>; <a href="CI_10.html#s24" class="standardlink"><span class="chaptercontentsitem">§10.24. Testing commands</span></a>; <a href="CI_10.html#s25" class="standardlink"><span class="chaptercontentsitem">§10.25. Releasing, bibliographic data, and cBlorb</span></a>; <a href="CI_10.html#s26" class="standardlink"><span class="chaptercontentsitem">§10.26. Extension maintenance</span></a>; <a href="CI_10.html#s27" class="standardlink"><span class="chaptercontentsitem">§10.27. Examples maintenance</span></a>; <a href="CI_10.html#s28" class="standardlink"><span class="chaptercontentsitem">§10.28. Interpreter maintenance</span></a></p><p class="sectionheading"><a id="s1"></a>§10.1. Core Inform maintenance</p>
<p>More than 400 bug fixes are made in this build, addressing almost every known defect in its predecessors.</p>
<p>The following lists only the more significant bug fixes: it excludes those categorised by the bug tracker as &quot;cosmetic&quot;, mostly small improvements to problem messages, or which affect only the documentation. I'm nevertheless grateful to all those who submitted these bugs, and in particular this build benefits from reports 0000409, 0000461, 0000527, 0000661, 0000674, 0000679, 0000701, 0000782, 0000785, 0000789, 0000791, 0000796, 0000797, 0000798, 0000805, 0000815, 0000816, 0000820, 0000821, 0000822, 0000823, 0000833, 0000854, 0000862, 0000864, 0000867, 0000869, 0000875, 0000881, 0000893, 0000917, 0000920, 0000933, 0000936, 0000941, 0000944, 0000948, 0000952, 0000964, 0000965, 0000984, 0000985, 0000996, 0001009, 0001022, 0001027, 0001028, 0001030, 0001032, 0001043, 0001053, 0001058, 0001066, 0001071, 0001068, 0001074, 0001082, 0001089, 0001096, 0001098, 0001102, 0001115, 0001118, 0001140, 0001141, 0001173, 0001174, 0001180, 0001182, 0001194, 0001196, 0001198, 0001201, 0001205, 0001208, 0001211, 0001220. See also suggestion 4858913.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s2"></a>§10.2. Uncategorisable</p>
<p>Bug fixed (0000999) whereby, on some platforms, an accented character in the directory path to an Inform project would cause translation to fail, usually with a problem message about failure to create the debugging log, or the .materials folder.</p>
<p>Bug fixed (0000916) whereby &quot;any&quot; could not be use used as a determiner, e.g. in a condition such as &quot;if any animal is in the Observatory&quot;.</p>
<p>Bug fixed (0000479) - or, clarification made, perhaps - so that &quot;almost all&quot; will no longer apply to a situation in which all but one item qualifies when there are four or fewer items.</p>
<p>Bug fixed (0000480) whereby the determiners &quot;all but&quot; and &quot;all except&quot; were not being recognised, contrary to the documentation's claim that they are legal. (They are.)</p>
<p>Bug fixed (0001060) whereby the determiners &quot;less than&quot; and &quot;greater than&quot; measured &lt;= and &gt;=, not &lt; and &gt;. (&quot;More than&quot; and &quot;fewer than&quot; did work. They're now synonymous in the context of determiners.)</p>
<p>Bug fixed (0000632) whereby certain awkward double relationships involving known objects would be misread, e.g. in the cases of</p>
<!-- START CODE "c299" -->
<a id="c299"></a><blockquote class="code"><p class="quoted">
(1) things enclosing the player that encloses something
<br />(2) things that enclose something enclosed by the player
</p></blockquote>
<!-- END CODE -->
<p>Now (1) chooses the x such that x -&gt; player -&gt; (a thing), whereas (2) chooses the x such that player -&gt; x -&gt; (a thing).</p>
<p>Bug fixed (0001065), if it's a bug exactly, to move problem message text from &quot;stdout&quot; to &quot;stderr&quot; when I7 is being run as a command-line tool.</p>
<p>Bug fixed (0000863) whereby Inform would fail with I6 errors if the system clock were set to a date before AD 2000; which sounds harmless enough, but on laptops with failed batteries, or after some kinds of hard crash, it's not unknown for Mac OS X to boot into the year 1969.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s3"></a>§10.3. Source text and punctuation</p>
<p>Bug fixed (0000412) whereby a semicolon placed at the end of a sentence consisting otherwise of a double-quoted text, and followed by another sentence, which Inform therefore (correctly) read as one joined-up but incorrectly written sentence, led to an unhelpful problem message.</p>
<p>Bug fixed (0000553, 0001056) whereby the apostrophe quotation mark rule would not be applied properly with letters from extended Latin alphabets.</p>
<p>Bug fixed (0000588) whereby a missed full stop after one sentence ending with a double-quoted text and before another one referring to the same thing, e.g.:</p>
<!-- START CODE "c300" -->
<a id="c300"></a><blockquote class="code"><p class="quoted">
&quot;It has printed name &quot;Large cavern&quot; It is west from Low passageway.&quot;
</p></blockquote>
<!-- END CODE -->
<p>...could lead to an internal error.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s4"></a>§10.4. Headings</p>
<p>Bug fixed (0000553) whereby apostrophes written ['] couldn't be used inside the double-quoted story title at the start of the source text.</p>
<p>Bug fixed (0000635) whereby sections couldn't be marked both as unindexed and also &quot;in place of&quot; other sections.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s5"></a>§10.5. Extensions</p>
<p>Bug fixed (0000377) whereby extension documentation which contains paste buttons would sometimes omit the closure &quot;-)&quot; of any I6 inclusion syntax included in the source text being demonstrated.</p>
<p>Bug fixed (0000379) whereby extensions could contain spurious sentences after the &quot;ends here&quot; line, sometimes leading to internal errors; a problem message is now issued.</p>
<p>Bug fixed (0000847) whereby run-time problems arising in extensions would be reported only as being in &quot;the source text&quot;, rather than identifying which extension is at fault.</p>
<p>Bug fixed (0000781) whereby documentation would not be correctly generated for extensions whose title, or author name, included certain non-ASCII characters.</p>
<p>Problem message added (0001126) to catch the case of a heading replacement subordinate to another heading replacement, so that its destination is at best ambiguous.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s6"></a>§10.6. Assertions and creations</p>
<p>Bug fixed (0000549) whereby using &quot;Here&quot; to place something abstract, e.g., &quot;X is a kind of value. Here is an X.&quot;, would produce an internal error. It now produces a philosophical sort of problem message.</p>
<p>Bug fixed (0000582) whereby incorrect assertions in the form</p>
<!-- START CODE "c301" -->
<a id="c301"></a><blockquote class="code"><p class="quoted">
Let A be the B that relates to C by D.
</p></blockquote>
<!-- END CODE -->
<p>(which really could hardly be more wrong) might in some cases lead to a compiler crash rather than a problem message.</p>
<p>Bug fixed (0000671) whereby incorrect assertions like</p>
<!-- START CODE "c302" -->
<a id="c302"></a><blockquote class="code"><p class="quoted">
The description of Y during X is &quot;&quot;.
</p></blockquote>
<!-- END CODE -->
<p>(incorrect because properties can't be given values specific to the duration of scenes) might, in the case where X is ambiguous, lead to an internal error instead of a problem message.</p>
<p>Bug fixed (0000703) whereby creating a new value whose name coincides with that of an existing variable would sometimes lead to an internal error as well a problem message.</p>
<p>Bug fixed (0000735) whereby declaring &quot;Every X incorporates a Y&quot;, when Y is not a kind, led to an unhelpful problem message.</p>
<p>Bug fixed (0000778) whereby Inform issued an internal error when trying to implicitly create a rulebook via a relation it has to an existing rulebook (which is entirely legal).</p>
<p>Bug fixed (0000794) whereby creating one half of a pair of opposed directions in an implicit way crashed the compiler.</p>
<p>Bug fixed (0001117) and problem message improved for circular creations which cause something to be indirectly a part of itself.</p>
<p>Bug fixed (0000932) and problem messages added for assertions involving &quot;nothing&quot;, such as &quot;Nothing is in the box.&quot;, and for &quot;nothing&quot; said to be &quot;here&quot;, as in &quot;Here is nothing.&quot;</p>
<p>Bug fixed (0001083 mentions this) whereby calling a room (say) &quot;storage&quot; or some other keyword with an internal meaning might lead to problems.</p>
<p>Bug fixed (0001038) whereby an assembly of a part of a nameless object could crash Inform while it was trying to work out a name for the part.</p>
<p>Bug fixed (0001116) whereby creations such as the following would fail:</p>
<!-- START CODE "c303" -->
<a id="c303"></a><blockquote class="code"><p class="quoted">
A colour is a kind of value. The colours are red and blue.
<br />A tile is a kind of thing. A tile has a colour.
<br />Workshop is a room. Workshop contains a red tile.
</p></blockquote>
<!-- END CODE -->
<p>Bug fixed (0000888) whereby declarations like so:</p>
<!-- START CODE "c304" -->
<a id="c304"></a><blockquote class="code"><p class="quoted">
The filter is a description of numbers that varies.
</p></blockquote>
<!-- END CODE -->
<p>would be misread as an attempt to set a &quot;description&quot; property value.</p>
<p>Bug fixed (0000521) whereby multiple sentences in succession of the form &quot;South is nowhere. East is nowhere.&quot;, etc., would sometimes give problem messages for all but the first.</p>
<p>Bug fixed (0001040), or you could argue this is a small feature added, so that</p>
<!-- START CODE "c305" -->
<a id="c305"></a><blockquote class="code"><p class="quoted">
Ideal Home Exhibition is a region. A kitchen is a kind of room.
<br />A kitchen is always in the Ideal Home Exhibition.
</p></blockquote>
<!-- END CODE -->
<p>will work. (&quot;All kitchens are in the Ideal Home Exhibition&quot; already worked; this hangs on the difference between &quot;always&quot; as a measure of likelihood and &quot;always&quot; as quantification.)</p>
<p>Bug fixed (0001128, 0001169) whereby assembled objects attached to proper-named objects would sometimes cause I6 run-time errors on trying to print their capitalised names.</p>
<p>Bug fixed (0000803) whereby plurals would be oversensitive about articles, in that &quot;The plural of a vertex is vertices.&quot; would fail to pluralise &quot;vertex&quot;. This is now equivalent to &quot;The plural of vertex is vertices.&quot;</p>
<p>Bug fixed (0000769) whereby it was possible to redefine an existing constant value (say, a rulebook) as also being a kind of value, in such a way that problem messages would crop up later and a bit misleadingly, rather than straight away.</p>
<p>Bug fixed (0000861) whereby directions would sometimes have their uses as objects and as relative clauses confused, so that e.g.:</p>
<!-- START CODE "c306" -->
<a id="c306"></a><blockquote class="code"><p class="quoted">
A direction can be planar. A direction is usually planar.
<br />Up, down, inside, outside are not planar.
</p></blockquote>
<!-- END CODE -->
<p>would cause Inform to think &quot;inside , outside&quot; was a reference to something being inside &quot;, outside&quot;.</p>
<p>Bug fixed (0000924) whereby the source could define verbs with capitalised words (&quot;To Hoover implies...&quot;), but these verbs wouldn't then be parsed correctly. There's now a problem message to catch this.</p>
<p>Bug fixed (0001219) whereby attempted proper nouns misread as spatial locations would sometimes produce internal errors rather than problem messages.</p>
<p>Bug fixed (0001217) whereby &quot;action of X&quot;, when used as a noun phrase in an assertion, would require the word &quot;trying&quot; to be used if the actor in question wasn't the player, whereas in other contexts Inform would allow &quot;trying&quot; to be omitted. For example, the following would work only if &quot;trying&quot; were inserted between &quot;Pete&quot; and &quot;waiting&quot;:</p>
<!-- START CODE "c307" -->
<a id="c307"></a><blockquote class="code"><p class="quoted">
The best idea yet is a stored action that varies.
<br />The best idea yet is the action of Pete waiting.
</p></blockquote>
<!-- END CODE -->
<p>Bug fixed (0001156) whereby a contradiction would be reported between &quot;A K is always improper-named.&quot;, where K is a kind of object, and &quot;X is a K&quot;, where X has no article; Inform correctly inferred that X is probably proper-named, but then incorrectly didn't overrule this with the certain knowledge it ought to have about all Ks being improper-named.</p>
<p>Bug fixed (0000693) whereby naming a room Something would lead to confusion with the determiner &quot;something&quot;.</p>
<p>Bug fixed (0000638, 0001142) whereby assertions about &quot;the player&quot; wouldn't always refer to Fred if the sentence &quot;The player is a man called Fred&quot; occurred in certain places in the source.</p>
<p>Bug fixed (0000655) to do with assemblies applying to a player which had been changed to a named character with a kind more specific than &quot;person&quot;: for example, if &quot;The player is a man called Robert.&quot; then assemblies applying to men but not people in general might not properly be applied to Robert, and even if they were, they might be misnamed.</p>
<p>Bug fixed (0000824) whereby &quot;There is... called...&quot; would sometimes get confused by prepositions in the first clause.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s7"></a>§10.7. Model world</p>
<p>Bug fixed (0000589) whereby defining a one-sided door so that its exit direction was the same as its entry direction caused a misworded problem message.</p>
<p>Bug fixed (0000852, 0001007) whereby it was possible for the player to be created as, changed into, or made a part of something else. This is not allowed, and breaks many assumptions. There's now a problem message and a runtime problem.</p>
<p>Bug fixed (0001031) whereby it was possible to have the player get on top of a supporter, or inside a container, and then move that off-stage, leaving the player indirectly in limbo. This is not allowed, and now produces the run-time problem &quot;Attempt to move the player off-stage&quot;. (That unfortunately breaks version 5 and earlier of the extension &quot;Transit System by Emily Short&quot;, so you'll need version 6 or better.)</p>
<p>Infelicity fixed (0000598) whereby an attempt by an actor to enter himself failed the &quot;can't enter what's already entered rule&quot;, rather than the &quot;can't enter what's not enterable rule&quot;.</p>
<p>Bug fixed (0000723) whereby &quot;resume the story&quot; could not undo a story end once the final question (&quot;Would you like to RESTART, RESTORE a saved game, ...&quot;) had been asked.</p>
<p>Bug fixed (0000602) whereby UNDO would be forbidden on the second command if the first command produced an out-of-world action; but OOW actions can indeed be undone, so this was needlessly restrictive.</p>
<p>Bug fixed (0000376) whereby implicit searches through possible enclosing objects (that is, those which satisfy the enclosure relation) would search only things, not rooms.</p>
<p>Bug fixed (0000604) whereby a player in a vehicle being driven by another character would move rooms without &quot;location&quot; being immediately updated, causing problems in some cases for light, two-sided doors and so on.</p>
<p>Bug fixed (0001168) whose report begins &quot;If an object is on a supporter inside a closed transparent container that is part of a backdrop...&quot; and goes on that way, but concerns the rules on touchability.</p>
<p>Bug fixed (0000806) whereby if an action is tried in the before rules for an exiting action, and that first action causes a transition from darkness into light, then the report of the player's new location after the exiting will spuriously mention darkness and then immediately correct itself.</p>
<p>Bug fixed (0000807) whereby if the player begins the story as a named character who is in darkness inside a closed container, then darkness remains even when he or she emerges.</p>
<p>Bug fixed (0000827) whereby the missing nouns supplied by default for the commands LISTEN and SMELL would always be the location, even if the player is within a sealed container in that location. They now supply the outermost object which the player can touch from the inside.</p>
<p>Bug fixed (0001164) whereby non-player people can sometimes not touch a two-sided door when on the other side of it from the player.</p>
<p>Bug fixed (0000870) whereby the phrase &quot;direction of D from R&quot; would give misleading answers if D is a two-sided door whose facing directions are not opposite to each other, e.g., for:</p>
<!-- START CODE "c308" -->
<a id="c308"></a><blockquote class="code"><p class="quoted">
The red rock stair is east of the Orchard and above the Undertomb.
</p></blockquote>
<!-- END CODE -->
<p>&quot;direction of the red rock stair from the Undertomb&quot; would evaluate to &quot;west&quot;, not &quot;down&quot; as it probably should (and now does).</p>
<p>Bug fixed (0000565) whereby changing the player from a nameless default &quot;yourself&quot; to somebody else renders that other person unable to refer to &quot;former self&quot; in commands.</p>
<p>Bug fixed (0001042) to clarify the meaning of &quot;X is regionally in R&quot; when X is a backdrop or two-sided door: it's now true if and only if X is in any one of the rooms contained in the region R. In particular, note that a two-sided door can be regionally in two different regions at once.</p>
<p>Bug fixed (0000694) to make the &quot;front side&quot; and &quot;back side&quot; of a door the first and second rooms it connects to in source text sequence, rather than in inference priority sequence (which is often but not always the same).</p>
<p>Bug fixed (0001069) whereby an object can be said to be &quot;here&quot; more than once in the source text, which may implicitly lead to contradictions, since &quot;here&quot; may have a different meaning in different sentences.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s8"></a>§10.8. Properties</p>
<p>Bug fixed (0000374) whereby Inform wasn't properly checking that condition properties shared between different, not-inheriting-from-each-other kinds were being consistently defined for each kind.</p>
<p>Bug fixed (0000435) whereby Inform's problem message for giving a property the same name as its own kind was unhelpful. (&quot;Movie has a theme called theme.&quot;)</p>
<p>Bug fixed (0000517) whereby Inform's problem message for trying to give an object a nameless number or text property was unhelpful.</p>
<p>Bug fixed (0001103) whereby creating a nameless property whose kind is a proper subkind of object would fail.</p>
<p>Bug fixed (0000567) whereby attempts to give one of the three properties mentioned, privately-named or pushable between rooms to a kind of value as well as a kind of object would lead to I6 errors. (For complicated run-time reasons this would be rather difficult; a specific problem message now catches this. No other properties are affected.)</p>
<p>Bug fixed (0000590) whereby Inform's problem message for giving a property an unspecific kind (such as &quot;relation&quot;) did not reference the source text at fault.</p>
<p>Bug fixed (0000669) whereby declaring an either/or property with the name of an article (such as &quot;a&quot; or &quot;the&quot;) would lead to an internal error as well as a (deserved) problem message.</p>
<p>Bug fixed (0000712) whereby usages such as &quot;the X of a random Y&quot;, where Y is not a kind but a single object, or a non-existent object, would lead to an internal error as well as a (deserved) problem message.</p>
<p>Bug fixed (0001154) to do with adding relations as properties fixed. (This looks like, but is not quite, 0000582, which is also fixed.)</p>
<p>Bug fixed (0000539) whereby adding properties to new enumerated kinds, i.e., before any values were enumerated, would wrongly cause a problem message saying that the kind couldn't have properties. (Bug 0000523 was, though not obviously, a duplicate.)</p>
<p>Bug fixed (0001063) whereby adjectives defined by measuring property values would sometimes fail if the kind in question was (e.g.) a list. For example, &quot;Definition: a thing is fooey if its foo is {28, 34}.&quot; would perform the wrong test.</p>
<p>Bug fixed (0001192) whereby testing such adjectives on constant values might fail, either giving a wrong answer or throwing I6 errors.</p>
<p>Bug fixed (0000854) whereby defining the same adjective twice over the same domain now throws a problem message if both definitions occur in the source text, or both in the same extension. If not, the source text version always prevails. This means you can, for example, write</p>
<!-- START CODE "c309" -->
<a id="c309"></a><blockquote class="code"><p class="quoted">
Definition: a number is positive if it is -6.
</p></blockquote>
<!-- END CODE -->
<p>in the source text, and override the definition in the Standard Rules, if you really, really want to. But you can't write:</p>
<!-- START CODE "c310" -->
<a id="c310"></a><blockquote class="code"><p class="quoted">
Definition: A thing is a doggie-snack if it is edible.
<br />Definition: A thing is a doggie-snack if it is the newspaper.
</p></blockquote>
<!-- END CODE -->
<p>Bug fixed (0000434, 0000498) whereby declaring that a further kind can have an existing either/or property, but giving them the wrong way around, would disrupt the working of the property on the original kind.</p>
<p>Bug fixed (0000935) whereby it was possible to make kind-unsafe property assertions in relation to the kinds room, container, supporter and thing. For example, the following is actually incorrect, because Inform isn't told either implicitly or explicitly that &quot;House&quot; is a room, and so it's a thing; but the bug meant that no problem message was produced, and instead an unsafe value was stored in &quot;home of Martha&quot;.</p>
<!-- START CODE "c311" -->
<a id="c311"></a><blockquote class="code"><p class="quoted">
The Garden is a room. A person has a room called the home.
<br />Martha is a woman. The home of Martha is House.
</p></blockquote>
<!-- END CODE -->
<p>Bug fixed (0000459) whereby the values of &quot;printed name&quot;, for anonymous objects, would sometimes mysteriously fail to be equal to each other even when their texts looked the same.</p>
<p>Bug fixed (0000533) whereby defining an adjective over two domains, one a specific object of kind K and another a kind L which is not K or a kind of K, would produce a spurious problem message about the domain being unrecognised.</p>
<p>Bug fixed (0000576), or problem message improved, really, for certain attempts to use the same adjective both as an either/or property and as one value in a many-valued condition.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s9"></a>§10.9. Relations</p>
<p>Bug fixed (0000515) whereby making use of various-to-one relations of things to values could sometimes lead the compiler to crash when constructing the initial state of play, though only in unusual cases.</p>
<p>Bug fixed (0000779) whereby problem messages, arising from a description value involving a relationship to another value held only in a local variable about to go out of scope, were unhelpful.</p>
<p>Bug fixed (0000925) whereby a relation set up with a wrongly named property would sometimes crash rather than issue a problem message.</p>
<p>Bug fixed (0000568, 0000581, 0001113) whereby relations would in some cases be looked up back to front as seen by phrases like &quot;the X which relates to Y by R&quot;.</p>
<p>Bug fixed (0000578) whereby fast route finding, if enabled, would sometimes get the wrong answer when searching a source-defined relation.</p>
<p>Bug fixed (0000670) whereby relations involving specific kinds of object would not be very well defended against usage with the wrong kind of object at run-time. For example, if:</p>
<!-- START CODE "c312" -->
<a id="c312"></a><blockquote class="code"><p class="quoted">
Application relates various devices to one thing.
<br />The verb to be applied to implies the application relation.,
</p></blockquote>
<!-- END CODE -->
<p>then at run-time &quot;now the noun is applied to the second noun&quot; (say) would produce mysteriously wrong results, I6 programming errors, etc., if the noun and second noun were objects other than a device and a thing. It is now safe to read the relation for any kind of object, but the result is &quot;false&quot; if the kind is wrong. It causes a run-time problem to write the relation for the wrong kinds.</p>
<p>Bug fixed (0000994) whereby relations asserted between values which, though nouns, could also be used adjectivally, would fail. For example,</p>
<!-- START CODE "c313" -->
<a id="c313"></a><blockquote class="code"><p class="quoted">
Faction is a kind of value. The factions are friendly, passive, hostile.
<br />Hating relates various factions to various factions.
<br />The verb to hate implies the hating relation.
<br />A person has a faction.
<br />Hostile hates friendly.
</p></blockquote>
<!-- END CODE -->
<p>would produce a spurious problem message on the last sentence, because Inform misconstrued &quot;hostile&quot; and &quot;friendly&quot; as adjectives applying to people, not as nouns of kind &quot;faction&quot;.</p>
<p>Bug fixed (0000726) whereby relations used as property values, as initial values of global variables, etc., would not be mutable.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s10"></a>§10.10. Actions</p>
<p>Bug fixed (0000512) whereby, when an action failed at the Instead stage, the &quot;reason the action failed&quot; would sometimes wrongly implicate another rulebook when looked at from entirely outside the action machinery.</p>
<p>Bug fixed (0000560) whereby creating action or rulebook variables without specifying their names would cause an internal error rather than a problem message.</p>
<p>Bug fixed (0000583) whereby &quot;Instead of jumping for fewer than 4 turns&quot; (say) wouldn't be accepted, but &quot;...less than...&quot; would. Both are legal.</p>
<p>Bug fixed (0000401) whereby attaching variables to actions, and marking them as &quot;(matched as X)&quot;, would result in them being matchable in practice only if the kind of the variable was &quot;object&quot; or one of its subkinds.</p>
<p>Bug fixed (0000908) whereby a description of an action using an optional matched-by clause would not be accepted as part of the definition of a kind of action. For example, this would fail to define &quot;leaving town&quot;:</p>
<!-- START CODE "c314" -->
<a id="c314"></a><blockquote class="code"><p class="quoted">
Going west from Example is leaving town.
</p></blockquote>
<!-- END CODE -->
<p>Bug fixed (0001148) whereby a description of an action applied to a region would sometimes be tested on objects by seeing if the object was in that region, rather than seeing if it was equal to it.</p>
<p>Bug fixed (0001044), or perhaps it's more of a clarification of the design: it's legal, though probably unwise, for an out-of-world action to &quot;try&quot; an in-world action, and that action will indeed be in-world, and subject to the full in-world action processing. This slightly affects the GONEAR testing command, which runs as out-of-world but tries looking; it therefore now runs (e.g.) the after rules for looking, which previous builds did not. However, it doesn't run the &quot;every turn&quot; rules.</p>
<p>Bug fixed (0000872) whereby the &quot;standard implicit taking rule&quot; would print clarifying text like &quot;(the fox first taking the eggs)&quot; if an implicit take was caused by something like &quot;try the fox eating the eggs&quot; even when the fox could not be seen by the player at the time.</p>
<p>Bug fixed (0000506, 0000937) whereby a requested action which, when accepted, caused an action to be transferred back to the player by conversion, would sometimes run the wrong check and carry out rules. (E.g., on the command DAPHNE, ASK ME FOR BRENNA, with Daphne and Brenna both being people, there would mysteriously be no text indicating that Brenna has not in fact been taken.)</p>
<p>Bug fixed (0001099, 0001107) whereby a calling in a condition which fails can leave the variable in question holding a kind-unsafe value. For example,</p>
<!-- START CODE "c315" -->
<a id="c315"></a><blockquote class="code"><p class="quoted">
if attacking a device (called the mechanism): ...
</p></blockquote>
<!-- END CODE -->
<p>when the current action is &quot;attacking Peter&quot;, the condition will fail because Peter is not a device, but the &quot;mechanism&quot; variable would hold Peter anyway - despite its kind being &quot;device&quot;. It now reverts to &quot;nothing&quot; in this case.</p>
<p>Bug fixed (0000956) whereby a description of an action containing a name which could refer either to a variable or a constant would always be resolved in favour of the constant, which could lead to some strange effects: notably, the rule here -</p>
<!-- START CODE "c316" -->
<a id="c316"></a><blockquote class="code"><p class="quoted">
Player Alice is a person.
<br />Instead of examining the player: ...
</p></blockquote>
<!-- END CODE -->
<p>would fire on examining Alice, because &quot;player&quot; could refer either to the global variable, or to player Alice. Inform already gave priority to local variables, and now gives priority to global ones too.</p>
<p>Problem message added (0001186) to catch conditions like this:</p>
<!-- START CODE "c317" -->
<a id="c317"></a><blockquote class="code"><p class="quoted">
if we have examined the grail for the fifth time:
</p></blockquote>
<!-- END CODE -->
<p>which are impossible to satisfy since &quot;we have examined the grail&quot; is false until it's true, and then stays true forever, so that there cannot be five distinct periods of time in which it's true. Since this does not conform to our ordinary English understanding of this condition, and since the condition cannot be useful, a problem message seems the best response. (Previously there was a hacky workaround for this, giving the condition a different meaning, but it had too many demerits and caused confusion as to what &quot;for the fifth time&quot; meant.)</p>
<p>Due to a mistype in its catalogue of irregular English verbs, Inform previously believed the participles &quot;spinning&quot; and &quot;spining&quot; had past forms &quot;spinned&quot; and &quot;spun&quot; respectively; it now realises they are &quot;spun&quot; and &quot;spined&quot;.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s11"></a>§10.11. Activities</p>
<p>Bug fixed (0001083) whereby an activity rule applied to an internal keyword such as &quot;storage&quot; would cause an internal error.</p>
<p>Bug fixed (0000884) whereby a rule with a while condition which refers to an activity with a non-thing kind attached would fail to compile.</p>
<p>Bug fixed (0000885) whereby a rule with a while condition relating to an activity would handle &quot;(called X)&quot; in a bogus way; in fact, for the moment anyway, Inform can't handle this, and it now issues a problem message saying so.</p>
<p>Bug fixed (0000453) whereby Inform would allow the creation of activities on values of an indefinite kind, such as:</p>
<!-- START CODE "c318" -->
<a id="c318"></a><blockquote class="code"><p class="quoted">
Enunciating something is an activity on values.
</p></blockquote>
<!-- END CODE -->
<p>Bug fixed (0001112) whereby the list-writing activities would sometimes fail to say &quot;nothing&quot; when a list of objects was empty only because none of the (at least one) possible candidates qualified, rather than because there were no candidates. (For example, when opening a container to reveal only invisible scenery objects, this bug caused odd messages like &quot;You open the box, revealing .&quot;)</p>
<p>Bug fixed (0000634) whereby, similarly, when such a list was &quot;nothing&quot; the &quot;prefacing with is/are&quot; option would sometimes be ignored.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s12"></a>§10.12. Rules and rulebooks</p>
<p>Bug fixed (0000513) whereby passing the number 0 (only) to a number based rulebook (only) using &quot;consider&quot; would in some cases pass a different number instead.</p>
<p>Bug fixed (0000543, 0000484) whereby a rule referencing the past in terms of a temporary value which didn't exist in the past would produce a problem message, correctly, but then crash.</p>
<p>Bug fixed (0000619) whereby Inform crashed when comparing the specificity of two rules, in quite unusual circumstances.</p>
<p>Bug fixed (0001077) whereby Inform produced an I6 error if a rule name included the @ character. (Which is perfectly legal, if odd.)</p>
<p>Problem message added (0001139) to be more explanatory about why &quot;This is the rule:&quot; is not allowed.</p>
<p>Bug fixed (0000894) whereby large numbers of rules attached to the same rulebook and having usage tests - say, 5000 copies of &quot;Before eating when yourself is yourself: do nothing.&quot; - would in some cases cause memory usage and/or running time to spike dramatically, though Inform would still produce correct code in the end.</p>
<p>Bug fixed (0001181) whereby attempting to place a rule before or after itself in a rulebook would cause an internal error, rather than a problem message.</p>
<p>Bug fixed (0000763) whereby attempting to change the default outcome of some action-specific check, carry out or report rulebooks would not in fact change their default outcomes (though for others it would).</p>
<p>Bug fixed (0000500) whereby rules which ambiguously contain &quot;when&quot; in their conditions, but where it isn't in fact a condition but part of a noun, would cause problem messages.</p>
<p>Bug fixed (0001006) whereby the &quot;no outcome&quot; rulebook outcome couldn't be printed using &quot;say&quot;.</p>
<p>Bug fixed (0000550) whereby some name-clashes between rulebook variables and other named constants would be disallowed unnecessarily, which made it possible for the Standard Rules not to compile in some cases.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s13"></a>§10.13. Lists</p>
<p>Bug fixed (0000662) whereby duplicate problem messages would sometimes be issued for unrecognized list elements.</p>
<p>Bug fixed (0000836, 0001190) whereby phrases dealing with lists which were never in fact used, since the source never contained any lists, would fail to compile in I6.</p>
<p>Bug fixed (0001052) whereby sorting would sometimes get the wrong answer with high values due to numerical overflows; this would probably not have been seen on Glulx, but could more easily happen on Z.</p>
<p>Bug fixed (0001047) whereby use of a temporary variable in a list constant passed out of its scope would result in an internal error rather than a problem message.</p>
<p>Bug fixed (0000968) whereby the list L in a &quot;repeat with X running through L&quot; loop would be recalculated each time around, which besides being a little inefficient would also go wrong if the expression for L was not deterministic - e.g., if it made a random selection, or if it altered as a result of side effects of what was being done in the loop body.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s14"></a>§10.14. Tables</p>
<p>Bug fixed (0000444) whereby Inform would sometimes ignore an explicit kind declaration for a column and impose the kind &quot;object&quot; if that declared kind was a subkind of object (such as &quot;person&quot;).</p>
<p>Bug fixed (0000446) whereby Inform would not allow some kinds of value in parenthetical kind declarations for columns, wrongly considering them to be bad syntax.</p>
<p>Bug fixed (0000448, 0001049) to do with Inform not always correctly inferring the kind stored in a column when its only examples had differing kinds (e.g. man, woman) which could only be implicitly united under a single kind (e.g. thing).</p>
<p>Bug fixed (0000931) whereby the kind of a column would be weakened to &quot;object&quot;, etc., if it were given only as a general description in the top row, rather than an explicit declaration in the heading.</p>
<p>Bug fixed (0000537) to do with Inform being over-finicky about the kind of a column indicated only by a rule used as a value.</p>
<p>Bug fixed (0000571) whereby tables could not be given alphanumeric names such as Table C2, which was a bit embarrassing, given that the documentation used exactly that as an example Table name.</p>
<p>Bug fixed (0000587) whereby long text entries in certain tables were sometimes truncated; this showed up in use of the Basic Help Menu extension, but was not otherwise related to it.</p>
<p>Bug fixed (0000690) whereby names of kinds could sometimes appear where names of things were expected, in table cells, with no problem being reported.</p>
<p>Bug fixed (0000716) whereby the problem message for an empty table would sometimes be followed by an internal error if that table in fact also had a continuation table.</p>
<p>Bug fixed (0000718) whereby the problem message for an empty table lacked a reference to the source location.</p>
<p>Bug fixed (0001010) whereby an internal error rather than a problem message resulted from an improper column name - e.g. one using brackets, commas, consisting only of an article, etc.</p>
<p>Bug fixed (0000707) to do with looking up text vs indexed text entries in tables, though this is now moot since text and indexed text are now the same kind.</p>
<p>Bug fixed (0000624) whereby blanking out entries containing stored actions would sometimes obscurely fail.</p>
<p>Bug fixed (0001195) whereby blanking out entries corresponding to values in another column would sometimes zero them, not blank them.</p>
<p>Bug fixed (0001222) whereby a table column whose name consists only of an article would result in an internal error, not a problem message.</p>
<p>Bug fixed (0000939) - or maybe it's a suggestion - providing a problem message for the table column name &quot;location&quot;, since people sometimes wrongly use this thinking it will determine the initial position of things; whereas in fact it overrides the meaning of many of the Standard Rules.</p>
<p>Bug fixed (0000407, 0000708) whereby looking text, stored actions, etc., up in a table containing blanks would sometimes cause the Z-machine to throw a &quot;programming error&quot;, or cause Glulx to halt.</p>
<p>Bug fixed (0000683) whereby the run-time problem for accessing a nonexistent table entry would sometimes not appear in time to prevent an illegal memory access.</p>
<p>Bug fixed (0000801) whereby an attempt to set an entry which was a list, or indexed text, etc., corresponding to another value, would sometimes fail with a &quot;deep copy failed&quot; error at run-time.</p>
<p>Bug fixed (0000802) whereby text allocation would allocate too little memory. Though not really to do with tables, it manifested itself only when looking up indexed text in a table.</p>
<p>Bug fixed (0000696) whereby items created by table would sometimes not allow figure names as property values if those figures had yet to be declared.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s15"></a>§10.15. Scenes</p>
<p>Bug fixed (0000856, and cf. 0001147) whereby a rule firing &quot;When a scene ends&quot; would fire twice if a scene ended in a specialised way. To clarify, the following shows what ought to happen, but previously the &quot;happen last&quot; text appeared twice.</p>
<!-- START CODE "c319" -->
<a id="c319"></a><blockquote class="code"><p class="quoted">
Once Upon a Time is a scene.
<br />Once Upon a Time begins when play begins.
<br />Once Upon a Time ends bouncily when jumping.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c320" -->
<a id="c320"></a><blockquote class="code"><p class="quoted">
When Once Upon a Time ends:
<br />&#160;&#160;&#160;&#160;say &quot;This should happen second.&quot;;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c321" -->
<a id="c321"></a><blockquote class="code"><p class="quoted">
When Once Upon a Time ends bouncily:
<br />&#160;&#160;&#160;&#160;say &quot;This should happen first.&quot;;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c322" -->
<a id="c322"></a><blockquote class="code"><p class="quoted">
When a scene ends:
<br />&#160;&#160;&#160;&#160;say &quot;This should happen last.&quot;;
</p></blockquote>
<!-- END CODE -->
<p>Problem message improved (see bug report 0000575) for attempts to mix scene ending conditions.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s16"></a>§10.16. Kinds and typechecking</p>
<p>Bug fixed (0000445) whereby the run-time problem message for attempts to set a variable to the wrong kind of value would be issued with the text of a quite different problem message as explanation.</p>
<p>Bug fixed (0000493) whereby text didn't always dynamically expand as it should in Glulx projects.</p>
<p>Bug fixed (0000497, 0000617) whereby Inform checks the kinds of what a relation relates better, so that problems can be reported earlier and in a more explanatory way.</p>
<p>Bug fixed (0000644) whereby some legal if exotic kinds such as</p>
<!-- START CODE "c323" -->
<a id="c323"></a><blockquote class="code"><p class="quoted">
a phrase (phrase number -&gt; (phrase number -&gt; number)) -&gt; nothing
</p></blockquote>
<!-- END CODE -->
<p>would fail to be recognised and lead to a spurious problem message.</p>
<p>Bug fixed (0000727) whereby Inform produced an internal error when invited to create a &quot;let&quot; variable whose value was the name of a property having a complex kind (such as &quot;relation of things to numbers&quot;).</p>
<p>Bug fixed (0000728) whereby problem messages would sometimes talk about the misworded name of a relation as if it were a property, because in fact that misworded name was the correctly worded name of the property used to store the relation data; such problems have been clarified.</p>
<p>Bug fixed (0000739) whereby problems for concatenated phrases which involved a potential mismatch of kinds at an intermediate stage were not as helpful as they might be.</p>
<p>Bug fixed (0000750) whereby problems involving kind mismatches of the basis of a rule were not as helpful as they might be.</p>
<p>Big fixed (0000751) whereby some assignments of property names to variables holding property names led to mis-compiled I6 code.</p>
<p>Bug fixed (0000809) whereby use of a phrase which produces an object, in a context where some more specific kind of object is required, would produce I6 errors if the phrase usage in question involved double-quoted text as one of its arguments.</p>
<p>Bug fixed (0000967) whereby Inform would sometimes allow conditions like</p>
<!-- START CODE "c324" -->
<a id="c324"></a><blockquote class="code"><p class="quoted">
Instead of going to a room when the room is not visited: ...
</p></blockquote>
<!-- END CODE -->
<p>in which &quot;the room&quot; intends to refer back to the one implicitly referred to by &quot;a room&quot;, but where Inform misread it as:</p>
<!-- START CODE "c325" -->
<a id="c325"></a><blockquote class="code"><p class="quoted">
Instead of going to a room when a room is not visited: ...
</p></blockquote>
<!-- END CODE -->
<p>with misleading results. Inform now issues a problem message in such cases. (See suggestion 754190. It would, of course, be better to attempt to understand &quot;the room&quot; in line with the writer's expectations, but this begins to take us into the notorious &quot;donkey anaphora&quot; problem in structural linguistics. The sentence above is not very hard, but we're wary of trickier cases. So for now, at least, this kind of anaphoric reference produces an explanatory Problem message.)</p>
<p>Bugs fixed (0000906, 0000907, 0000911) and problem messages added to stop people making the fundamental spatial kinds &quot;thing&quot;, &quot;direction&quot;, &quot;region&quot; and &quot;room&quot; not fundamental any more: for example, &quot;A room is a kind of door.&quot; has chaotic results since it means in particular that a room is also a thing. (It also causes the indexing code to hang, which was the specific cause of 0000911.)</p>
<p>Bug fixed (0001110) whereby one implicit reference to a loop which contains another, such as &quot;whether or not a random thing unlocks a door&quot;, would under some circumstances fail to kind-check properly, and in others might crash the compiler.</p>
<p>Bug fixed (0001097, 0001121) whereby it was possible to increment or decrement non-arithmetic kinds of value, generating either bad I6 code or an internal error; there's now a problem message to pick this up.</p>
<p>Bug fixed (0000366, 0001004), relatedly, whereby Inform would allow instructions to change lists or texts which are constant: &quot;remove 2 from {1, 2, 3}&quot;, for instance. There's a problem message for this, too.</p>
<p>Bug fixed (0000834) whereby a case value &quot;-- V&quot; in an &quot;if&quot; construction would not always be typechecked if it were defined by a polymorphic phrase whose arguments were wrong; in particular if V is some text making no sense but containing the word &quot;before&quot; or &quot;after&quot; in the middle, then Inform would throw an internal error rather than explain why this is wrong.</p>
<p>Bug fixed (0000759, 0001095) whereby phrases in the Standard Rules to do with rules would not accept nothing-based rulebooks, so that e.g. &quot;follow the after reading a command rules&quot; would not work.</p>
<p>Bug fixed (0000838) whereby global variables and properties couldn't be created of the kind &quot;rulebook outcome&quot; unless their explicit values were given.</p>
<p>Bug fixed (0000839) whereby &quot;rulebook outcome&quot; wasn't listed in the Kinds index. In fact this was intentional, since users aren't really intended to make use of &quot;rulebook outcome&quot;; but in view of 0000838...</p>
<p>Bug fixed (0000621) whereby the kind of a rule, treated as a constant, was sufficiently vague that &quot;let&quot; (for example) couldn't use it as a value.</p>
<p>Bug fixed (0000452) whereby oddball conditions like &quot;if an object is an object&quot; would throw a run-time problem claiming that Inform &quot;can't implicitly repeat through the values of this kind&quot;.</p>
<p>Bug fixed (0001070) whereby &quot;nowhere&quot; used as a value of kind &quot;description of rooms&quot; would sometimes be read as if it were &quot;somewhere&quot;; and, relatedly, problem message added to catch attempts to quantify over a range within a single value, such as writing &quot;three rooms&quot;.</p>
<p>Bug fixed (0000436) whereby text, stored action, list, etc., variables created inside loops and given no explicit value would not be found to be initialised to their default values on iterations after the first.</p>
<p>Problem messages improved or added to clarify that descriptions can't be used as first-class literal values (yet); see bug reports 0000899, 0000887, 0000888, 0000889, 0000891.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s17"></a>§10.17. Phrases and functional programming</p>
<p>A refined method for resolving ambiguous phrase usage gets several cases of apparent name clashes better (e.g., 0000599, 0000613).</p>
<p>Bug fixed (0000360) whereby the problem message for a case of an &quot;if&quot; missing its colon wasn't as helpful as it might be.</p>
<p>Infelicity fixed (0000442) whereby the generated I6 code for some deferred propositional tests included spurious commas, which looked strange, and were ignored by I6 anyway.</p>
<p>Bug fixed (0000490) whereby the problem message for using a local variable which had gone out of scope wasn't as helpful as it might be.</p>
<p>Bug fixed (0000491) whereby the problem message for using too many local variables in a phrase would in some cases be followed by a spurious internal error too.</p>
<p>Bug fixed (0000501) whereby the problem message for indenting a Python-style phrase entirely right of the margin wasn't as helpful as it might be.</p>
<p>Bug fixed (0000557) whereby the problem message for an &quot;otherwise:&quot; used to follow a single-line rather than blocked &quot;if&quot; wasn't as helpful as it might be.</p>
<p>Bug fixed (0000628) whereby the problem message for a malformed &quot;every turn&quot; condition was reported at the wrong line of the source text.</p>
<p>Bug fixed (0000777) whereby Inform crashed at the I6 stage if asked to define a phrase with a synonym consisting of a double-quotation mark.</p>
<p>Bug fixed (0000813) whereby use of &quot;[any thing]&quot; as a value of kind &quot;topic&quot; in a phrase argument would issue a misleading problem message about the past tense if used other than in a rule definition. (The correct behaviour is to issue no problem at all: this is quite legal.)</p>
<p>Bug fixed (0000877) whereby a mysterious internal error about &quot;binding and substitution&quot; would sometimes appear in response to conditions which require multiple substitutions when their logical form is being simplified: e.g. &quot;if X which is related-in-some-way to Y is Z&quot; where the nature of the relation implies knowledge about X given Y.</p>
<p>Bug fixed (0001153) whereby a complex &quot;now&quot;, involving searching or systematic changes, which involed a text substitution in some way, would sometimes lead to a &quot;Too late for further text substitutions&quot; internal error. Such phrases now correctly compile.</p>
<p>Bug fixed (0001057) involving the use of &quot;called&quot; to identify phrase arguments whose kind involved parentheses.</p>
<p>&quot;Bug&quot; fixed (0000473, 0000946) whereby phrases to decide a condition would have the kind &quot;phrase X -&gt; nothing&quot; - really this was a poor design decision, not a bug as such; anyway, the kind is now &quot;phrase X -&gt; truth state&quot;. (It's consequently legal to return in such phrases with &quot;decide on T&quot; for a truth state T, as an alternative to &quot;decide yes&quot; or &quot;decide no&quot;.)</p>
<p>Bug fixed (0000688) whereby a phrase to decide a value, which in fact took no decision, would result in the value internally stored as 0, which was not always kind-safe. It now results in the default value for the kind in question.</p>
<p>Bug fixed (0000825, 0000830) whereby ambiguous phrases such as &quot;dispatch based on item&quot;, given multiple definitions to go on where one involved a qualified description, e.g.:</p>
<!-- START CODE "c326" -->
<a id="c326"></a><blockquote class="code"><p class="quoted">
To dispatch based on (X - a thing): say &quot;Fail.&quot;
<br />To dispatch based on (X - a thing that is yourself): say &quot;Pass.&quot;
</p></blockquote>
<!-- END CODE -->
<p>...would result in correct code being generated the first time they arise, but not subsequent times, when the qualified case (here &quot;thing that is yourself&quot;) would be overlooked.</p>
<p>Bug fixed (0001079) to clarify that it's not legal to overload the return kind of a phrase, so that:</p>
<!-- START CODE "c327" -->
<a id="c327"></a><blockquote class="code"><p class="quoted">
To decide what number is my special value: decide on 4.
<br />To decide what person is my special value: decide on the player.
</p></blockquote>
<!-- END CODE -->
<p>is a conflict which now produces a problem message.</p>
<p>Bug fixed (0000591) whereby the use of slashes to give alternative wording would cause the definitions of say phrases to lose case sensitivity.</p>
<p>Bug fixed (0000584) whereby the condition &quot;if ... for 0 turns&quot; would be miscompiled to something which is always true when the condition holds, rather than only true if it has only just become true.</p>
<p>Bug fixed (an offshoot of 0000818) whereby adjectives used as filters on lists would sometimes be read as applying to the wrong kind of value, if no kind was explicitly given.</p>
<p>Bug fixed (0000362, 0000747) whereby phrases with inline I6 definitions could nevertheless be given names as constants; this resulted in I6 compilation errors. It now causes an explanatory problem message.</p>
<p>Bug fixed (0000753, and see also 0000648) whereby phrases could be given definitions whose kinds could not in practice be determined through their usage, e.g. &quot;To decide what value is bar: ...&quot;.</p>
<p>Bug fixed (0000904) whereby phrases involving kind variables could be invoked with kinds which could not be worked out by supplying them with the empty list written as a constant.</p>
<p>Bug fixed (0000768, 0000771) whereby a phrase to decide a topic, which returned what looked like constant text, would indeed return that and not a topic at all.</p>
<p>Bug fixed (0000452) - or, really, it suggested that Inform should have tighter syntax, which is now provided - so that using a kind variable as if it were a noun produces a problem message. For example, &quot;if K is L&quot; throws this problem; but &quot;if a K is an L&quot; doesn't, because &quot;a K&quot; is a description matching multiple values, whereas &quot;K&quot; on its own looks as if it might be a single value.</p>
<p>Bug fixed (related to 0001001) whereby definitions which give a return kind in terms of unset kind variables weren't being rejected - for example,</p>
<!-- START CODE "c328" -->
<a id="c328"></a><blockquote class="code"><p class="quoted">
To decide which K is acclaimed by (x - value of kind J): do nothing.
</p></blockquote>
<!-- END CODE -->
<p>does not determine K, and presumably the author meant J. This now produces a problem message.</p>
<p>Bug fixed (0000998) whereby phrases marked with &quot;instead&quot; wouldn't always quit their rules if they required run-time kind checking to perform.</p>
<p>Bug fixed (0000873) whereby a generic phrase whose tokens contained stipulations about property provision, as in this example:</p>
<!-- START CODE "c329" -->
<a id="c329"></a><blockquote class="code"><p class="quoted">
To say foo (C - sayable value that provides the property
<br />indefinite article):
</p></blockquote>
<!-- END CODE -->
<p>...would not always correctly be applied.</p>
<p>Bug fixed (0001080) whereby a selection of overlapping phrase definitions distinguished only by descriptions of one or more tokens would sometimes be given incorrect mutual precedences.</p>
<p>Bug fixed (0000799) whereby the looking-up of a random value involving callings would result in those callings not being made, e.g., after</p>
<!-- START CODE "c330" -->
<a id="c330"></a><blockquote class="code"><p class="quoted">
let foo be a random person in a room (called bar);
</p></blockquote>
<!-- END CODE -->
<p>&quot;foo&quot; would be set but not &quot;bar&quot;. They now both are.</p>
<p>Bug fixed (0000368) whereby phrases whose tokens were required to be specific other phrases would not always be correctly called.</p>
<p>Bug fixed (0000817) whereby descriptions of phrases would not always be accepted as filters on lists of phrases.</p>
<p>Bug fixed (0000463) whose circumstances were obscure, but which seemed to occur when named say phrases were used as terms in a relation.</p>
<p>Bug fixed (0000469) whereby &quot;break&quot; did not, as claimed, escape the innermost loop but would instead escape an &quot;if X is... -- V: ...&quot; construction (i.e., a switch case) if that were innermost.</p>
<p>Bug fixed (0001101) whereby local variables with the same name as a kind would be misunderstood in descriptions of actions.</p>
<p>Bug fixed (related to 0001101) whereby local variables were allowed to have some pretty strange names - punctuation, say.</p>
<p>Bug fixed (0000410) whereby rules taking effect on some condition which involves rulebook variables would sometimes cause spurious problem messages when in the presence of other rules in the same rulebook of an apparently similar logical priority.</p>
<p>Bug fixed (0000417) whereby two rule headers in a row, where the first therefore had no body to define it, would misleadingly be legal.</p>
<p>Bug fixed (0000900) to do with misreading ambiguous names of variables: see bug 0000956 below, though they aren't quite duplicates.</p>
<p>Bug fixed (0001106) whereby &quot;(called X)&quot; could be added after a token in a phrase which wanted only the name of a kind, not an instance of that kind.</p>
<p>Problem message added to catch creations of variables which have such a short life-span that they vanish immediately they're made - as in the following example (if X does not already exist):</p>
<!-- START CODE "c331" -->
<a id="c331"></a><blockquote class="code"><p class="quoted">
if the location is the Casimir Effect Demo Area, let X be 1;
</p></blockquote>
<!-- END CODE -->
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s18"></a>§10.18. Equations, units and arithmetic</p>
<p>Bug fixed (0001021) whereby square roots of integers with the top non-sign-bit set would be incorrectly evaluated as -1.</p>
<p>Bug fixed (0000850) to do with rounding negative numbers to the nearest value.</p>
<p>Bug fixed (0000548) to do with choosing an appropriate literal notation to print negative values of a unit.</p>
<p>Bug fixed (0000441) whereby arithmetic performed on times could push them out of range. This arose semi-intentionally, because Inform slightly improperly but conveniently uses the same kind for times of day as for durations, and a duration of &quot;minus 10 minutes&quot; makes sense but a time of day of -10 doesn't. Inform now renormalises the result of all arithmetic on times to force them into range.</p>
<p>Accuracy slightly improved when printing awkwardly-scaled units using only 16-bit integer arithmetic (see 0000547).</p>
<p>Problem message added (0000399) to catch attempts to solve an equation for a constant rather than a variable.</p>
<p>Problem message added (0000737) to catch integer scalings of units so wide that they can't safely be represented in the 16-bit Z-machine.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s19"></a>§10.19. Understanding</p>
<p>Bug fixed (0000561, 0000485) whereby Problems in conditions attached to Understand sentences would misreport type-checking errors.</p>
<p>Bug fixed (0000564) whereby Problems from sentences like &quot;Understand &quot;fooble&quot; as the player.&quot; would be unhelpful.</p>
<p>Bugs fixed (0000647, 0001075) whereby using a &quot;[something related by...]&quot; token in an Understand sentence produced an internal error rather than problem messages when the relation was to a value rather than a thing. (0001075 occurs slightly differently, but was fixed at the same time.)</p>
<p>Bug fixed (0000698) whereby sentences like &quot;Understand the P property as describing X&quot; sometimes caused internal errors rather than problem messages if P is a value rather than either/or property.</p>
<p>Bug fixed (0000808) whereby placing items in scope could cause a hang at run-time when trying to match the name of something visible only if something is visible.</p>
<p>Bug fixed (0000957) whereby a too-many-activities run time problem could be generated from Understand grammar such as:</p>
<!-- START CODE "c332" -->
<a id="c332"></a><blockquote class="code"><p class="quoted">
Understand &quot;[person] spot&quot; as the parking spot.
</p></blockquote>
<!-- END CODE -->
<p>since this would mean that no object name could be parsed without checking to see whether it was the parking spot by this rule; but then, first the text must be checked to see if it begins &quot;[person]&quot;; and that would mean parsing an object name, which... and so on. Inform now checks that the &quot;[person]&quot; condition applies before rather than after parsing for it, which means that in the case of the parking spot object - which is not a person - no recursion occurs, and all is well.</p>
<p>Bug fixed (0000719) whereby the token &quot;[something related by reversed wearing]&quot; or &quot;[something related by reversed carrying]&quot; (but no others) would fail, in some cases causing a hang.</p>
<p>Bug fixed (0000636) whereby, at run-time, the response to incomplete commands (and where no &quot;does the player mean&quot; rule supplied suggestions) would be unhelpful (&quot;I didn't understand...&quot;) rather than asking a clarificatory question.</p>
<p>Bug fixed (0001160) whereby, relatedly but differently, incomplete commands endin with multiple bogus prepositions (e.g. &quot;DROP ROCK ON INTO&quot;) gave strange replies (&quot;What do you want to drop the rock on those things?&quot;).</p>
<p>Bug fixed (0000767) whereby testing whether a command includes a snippet would sometimes fail if that snippet contained alternatives marked with a slash, and where the test occurred in a rule condition rather than in a phrase.</p>
<p>Bug fixed (0000814) whereby passing a topic as a phrase argument, which contains one of the special tokens such as &quot;[someone]&quot;, would produce a spurious problem message about &quot;[text]&quot; not being allowed.</p>
<p>Bug fixed (0000437) - or, arguably, small feature added - so that it's now legal to have a range of aliases for objects or values, in which some aliases produce values, and others don't. For example:</p>
<!-- START CODE "c333" -->
<a id="c333"></a><blockquote class="code"><p class="quoted">
Colour is a kind of value. The colours are red and blue.
<br />A cube is a kind of thing.
<br />Understand &quot;[colour]&quot; as a cube.
<br />Understand &quot;box&quot; as a cube.
</p></blockquote>
<!-- END CODE -->
<p>allows &quot;red&quot;, &quot;blue&quot; and &quot;box&quot; all to refer to any cube. Previously, this would have thrown a problem message as being inconsistent, because one alias works out a value (&quot;[colour]&quot;) and another doesn't (&quot;box&quot;).</p>
<p>Bug fixed (0000433, 0001054) whereby the &quot;deciding whether all includes&quot; wasn't being consulted when only one object qualified for &quot;all&quot;. It's arguable whether this is a bug, but the change makes the activity stronger, and better able to reject &quot;DROP ALL&quot; inferring the player when there's nothing else around, for example.</p>
<p>Bug fixed (0000865) whereby the snippet &quot;player's command&quot; would sometimes omit words added to the command as a result of followup disambiguation questions.</p>
<p>Bug fixed (0000765) whereby use of the token &quot;[any D]&quot;, where D is a description of a kind which is otherwise not called for by any other token, would result in an I6 compilation error.</p>
<p>Bug fixed (0000700) to do with the names of things described by numerical properties.</p>
<p>Bug fixed (0000633, 0000943) whereby apparently unnecessary disambiguation questions were issued when trying to parse &quot;put X in/on Y&quot;, with &quot;does the player mean&quot; rules not being properly consulted.</p>
<p>Bug fixed (0001002) whereby &quot;does the player mean&quot; rules would not always be consulted if a command ended with a full stop (&quot;examine green.&quot; instead of &quot;examine green&quot;, say).</p>
<p>Bug fixed (0000744) whereby &quot;does the player mean&quot; rules would not always be consulted on an ambiguous noun where the second token of the line consisted of &quot;[text]&quot; rather than an object.</p>
<p>Bug fixed (0000835) whereby what look like numbers, followed by a full stop, would sometimes not be read as objects even when that's what they are - e.g., if &quot;one&quot; could mean issue 1 of a magazine, &quot;take one.&quot; would fail even though &quot;take one&quot; would work.</p>
<p>Bug fixed (0001011) whereby verbless commands with full stops dividing them could, sooner or later, cause crashes or hangs at run-time.</p>
<p>Bug fixed (0000642, 0000959) whereby matching text against tokens involving the names of objects could cause the value of &quot;noun&quot; to be corrupted, thus causing rulebook processing to go wrong.</p>
<p>Bug fixed (0000489) whereby literal patterns set up with an optional minus sign in front, and which could have two or more parts, would have the minus sign accepted but ignored by Understand tokens.</p>
<p>Bug fixed (0000680) whereby disambiguation questions would sometimes give the choices of object in the opposite order to that expected.</p>
<p>Bug fixed (0000396) whereby apparently incomplete commands beginning with a direction (and thus with a &quot;go&quot; implied) could be wrongly reported back by the parser error &quot;I only understood you as far as...&quot;; the text of which has also been improved in this case.</p>
<p>Bug fixed (0000800) whereby &quot;GET ALL FROM X&quot; would sometimes produce a peculiar reply if nothing was in X, but exactly one item had been explicitly placed in scope by a &quot;deciding the scope&quot; rule in the source text.</p>
<p>Bug fixed (0001134) whereby some &quot;PERSON, SOMETHING&quot; commands would not properly interrupt a disambiguation question.</p>
<p>Bug fixed (0000942), or at any rate the algorithm improved, so that Inform is better able to parse ambiguously worded properties by which objects are to be understood.</p>
<p>Bug fixed (0000460) whereby parsing names identified by number properties would sometimes, when it failed, cause a misleading choice of parser error.</p>
<p>Infelicity fixed (0001216) whereby I7 compiled references to the I6 variable &quot;parser_trace&quot; even in Release builds, where it's always 0.</p>
<p>Problem and run-time problem message added (in response to 0000580) to tell the player why one can't have &quot;[text]&quot; followed by something more flexible than fixed wording.</p>
<p>Problem message added (0000745) for an attempt to &quot;Understand the command ... as ...&quot; with a multiple-word command given. Previously this was accepted but did nothing, which could mislead authors.</p>
<p>Problem message added (0000555) to help prevent newcomers from writing sentences like:</p>
<!-- START CODE "c334" -->
<a id="c334"></a><blockquote class="code"><p class="quoted">
Understand &quot;yourself&quot; as Bob while asking Bob to try doing anything.
</p></blockquote>
<!-- END CODE -->
<p>where the condition depends on an action which has yet to be fully parsed, so that the condition can never meaningfully test anything.</p>
<p>Problem message added (0001204) to catch multiple uses of the &quot;things&quot; tokens in a single command line, as in:</p>
<!-- START CODE "c335" -->
<a id="c335"></a><blockquote class="code"><p class="quoted">
Understand &quot;put [things] in [things]&quot; as inserting it into.
</p></blockquote>
<!-- END CODE -->
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s20"></a>§10.20. Glulx issues, file I/O, figures, sounds</p>
<p>Bug fixed (0000756) whereby asking an &quot;if the player consents&quot; question would not update the status line first on Glulx, even though it would do on the Z-machine. (It now does on both.)</p>
<p>The template's embedded copy of &quot;infglk.h&quot; is now updated to one which was generated automatically for Glk API 0.7.4. (See bug 0001215, though this really wasn't a bug.)</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s21"></a>§10.21. I6 template layer and inclusions</p>
<p>Bug fixed (0000487) whereby the problem message for a reference to an unknown I7 noun in (+ ... +) markers inside an I6 inclusion gives a source text reference to the wrong place.</p>
<p>Bug fixed (0000748) whereby a Z/Glulx opcode written in I6's @notation and placed on column 1 of its file would cause an internal error rather than a problem message.</p>
<p>Bug fixed (0000882) whereby the &quot;ineffectual&quot; use option had the effect of causing code to fail to compile in I6; it should of course have no effect.</p>
<p>Infelicity fixed (0000754) whereby the Parser.i6t routine I7_ExtendedTryNumber was never called. It's now removed.</p>
<p>Infelicity fixed (0000757) whereby some template code in letter (E) of Parser.i6t was redundantly duplicated.</p>
<p>Infelicity fixed (0000760) whereby calls to FollowRulebook in Parser.i6t were written misleadingly.</p>
<p>Infelicity fixed (0000626) whereby usages of the deprecated I6 syntax &quot;for (;;)&quot; were still used in the template code.</p>
<p>Problem messages added in place of internal errors for misapplication of certain undocumented internal syntaxes. (See e.g. bugs 0000775 and 0000831.)</p>
<p>Bug fixed (0000883) whereby problem messages citing an I6 inclusion (-...-) would, in the words of the reporter, &quot;shortchange the author one smiley cyclops&quot;.</p>
<p>Bug fixed (0001104) whereby I6 code inserted after the last named part of a template file would lead to a problem message rather than the code actually being inserted.</p>
<p>Bug fixed (0000832) whereby use options with numerical values spelled out in words rather than numerals would be 0, not the value given.</p>
<p>Bug fixed (0000618) whereby Inform wasn't checking that the meaning of a &quot;Use ... translates as ...&quot; is meant to be just a single fragment of I6.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s22"></a>§10.22. Text, spacing and printing</p>
<p>Bug fixed (0000849) whereby Inform wouldn't complain at out of place &quot;[otherwise]&quot; or &quot;[otherwise if]&quot; substitutions.</p>
<p>Bug fixed (0000845, 0000912) whereby Unicode output on Glulx would bypass glulx's filter mechanism, which Inform doesn't use directly, but which authors willing to do some glulx assembly in I6 inclusions might use.</p>
<p>Bug fixed (0000384) whereby looking up a value decided by a rulebook could cause a spurious newline to be printed; this manifested itself in blanking out the status line, for example.</p>
<p>Bug fixed (0000743) whereby silent actions tried while a line of printed text was still incomplete would sometimes produce newlines even when they generated no text themselves, having worked.</p>
<p>Bug fixed (0000715) - or if not a bug, this was a request to clarify and make consistent the handling of tabs and newlines inside quoted text. The change made is that two or more newlines followed by tabs or spaces are now interpreted as a paragraph break, just as they would be if they weren't followed by tabs or spaces. So, for example:</p>
<!-- START CODE "c336" -->
<a id="c336"></a><blockquote class="code"><p class="quoted">
say &quot;Hello
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c337" -->
<a id="c337"></a><blockquote class="code"><p class="quoted">
there.&quot;
</p></blockquote>
<!-- END CODE -->
<p>was always read as a paragraph break inside the text; and</p>
<!-- START CODE "c338" -->
<a id="c338"></a><blockquote class="code"><p class="quoted">
say &quot;Hello
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c339" -->
<a id="c339"></a><blockquote class="code"><p class="quoted">
&#160;&#160;&#160;&#160;indented a little.&quot;
</p></blockquote>
<!-- END CODE -->
<p>is now also read that way. (The white space following the newlines is soaked up.)</p>
<p>Bug fixed (0000605) whereby use of character class escapes in ranges in regular expressions would match either their meaning or their letter code, so e.g. &quot;&lt;x\p&gt;&quot; would match an &quot;x&quot;, a punctuation character, or a &quot;p&quot;. It now matches just &quot;x&quot; or the punctuation character.</p>
<p>Bug fixed (0001155) whereby the &quot;printing the name of&quot; activity would sometimes get confused about indefinite articles if a rule needed to use the indefinite article of something else in the course of its work.</p>
<p>Bug fixed (0001046) whereby relations arising from properties of the kinds &quot;room&quot;, &quot;region&quot; or &quot;direction&quot; would not be searched properly by an implicit search.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s23"></a>§10.23. Indexing</p>
<p>Bug fixed (0000502) whereby the World page didn't properly map backdrops in their locations.</p>
<p>Bug fixed (0000577) whereby Inform would halt with a file-system error if the Index subfolder of a project had been manually removed between runs. Inform now repairs the thing with the silent patience of a saint.</p>
<p>Bug fixed (0000826) whereby the Contents page of the index would take too much memory and time to render, especially on Windows, if there were more than 1000 or so figures. Inform now displays thumbnails only for the first 50 figures by default, but provides the use option &quot;Use index figure thumbnails of at least X.&quot; to raise this as needed.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s24"></a>§10.24. Testing commands</p>
<p>Bug fixed (0000871) whereby the RULES ALL testing command wouldn't list some rules whose conditions of applicability failed.</p>
<p>Bug fixed (0000505) whereby the RULES testing command wouldn't list rules with no applicability tests. This was actually a deliberate decision, the idea being that you didn't need to be told, but I now think the added verbosity is worth it for the sake of consistency.</p>
<p>Bug fixed (0000356) whereby the RELATIONS testing command would give wrong answers or, in some cases, crash on a one K to various texts relation.</p>
<p>Bug fixed (0000860) whereby &quot;does the player mean&quot; rules would not always be run for some commands in a TEST script.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s25"></a>§10.25. Releasing, bibliographic data, and cBlorb</p>
<p>I'm grateful to David Griffith for supplying a little code to allow cBlorb to produce I6 constant declarations like those generated by the older tool perlblorb, for the benefit of I6 projects developed outside the I7 framework.</p>
<p>Bug fixed (0000551) whereby releasing with source text after including some extensions (notably the GPL3 licence one) caused cblorb release errors.</p>
<p>Bug fixed (0000597) whereby releasing with source text including a multiline footnote with extra white space would lead to badly formatted website.</p>
<p>Bug fixed (0000615) whereby releasing a project whose title ends in a question mark failed (though on Windows only).</p>
<p>Bug fixed (0000714) whereby releasing with an existing Z-code story file caused I6 errors related to &quot;VPH_Class&quot;.</p>
<p>Bug fixed, or suggestion adopted (0000746), to do with values of the bibliographic variables &quot;release number&quot;, &quot;story headline&quot; and &quot;story genre&quot; when these are not set by the source text.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s26"></a>§10.26. Extension maintenance</p>
<p>All of the built-in extensions have been made adaptive (see above).</p>
<p>A new extension, Inanimate Listeners by Emily Short, has been added to the built-in selection to provide for objects like microphones which, though inanimate, can be talked to.</p>
<p>(See suggestion 750934.)</p>
<p>A new extension, Skeleton Keys by Emily Short, has been added to the built-in selection to provide  the built-in implementation of locking (a one thing to various things relation) with a more generous but memory-consuming implementation (various things to various things). This means that it is possible to have multiple keys that open the same lock. It is compatible with, but does not require, the new version 12 of Locksmith by Emily Short.</p>
<p>(See suggestion 819431.)</p>
<p>Metric Units by Graham Nelson has been completely rewritten to use real arithmetic, and now performs more accurate physical calculations.</p>
<p>A new extension, Approximate Metric Units by Graham Nelson, is essentially the previous version of Metric Units under a new name, and performs calculations with scaled integer arithmetic as before.</p>
<p>Complex Listing by Emily Short: misleading code in second example improved.</p>
<p>Bug fixed (0000929) making lists of rooms fail to &quot;prepare&quot; in Complex Listing by Emily Short.</p>
<p>Bug fixed (0001003) causing period removal to fail in Punctuation Removal by Emily Short (on Glulx only, and with different symptoms on different interpreters).</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s27"></a>§10.27. Examples maintenance</p>
<p>Nine new Examples have been added to demonstrate new features: &quot;Fun With Participles&quot;, &quot;Greater Variety&quot;, &quot;History Lab&quot;, &quot;Narrative Register&quot;, &quot;Olfactory Settings&quot;, &quot;Relevant Relations&quot;, &quot;Responsive&quot;, &quot;Variety&quot; and &quot;Wesponses&quot;. Contrariwise, &quot;Odins&quot; has been removed, since it demonstrated adaptive text tricks now done much more easily with features built in to the language.</p>
<p>Of the 447 Examples in the previous build, some 114 have been slightly tweaked to make better use of modern Inform syntax; procedural rules have been removed, and so forth. An itemised list would be tiresome.</p>
<p>The sense of &quot;Verbosity&quot; has been reversed: it used to demonstrate how to make room descriptions verbose, but now that conventions have changed, it instead demonstrates how to make them not verbose.</p>
<p>Bug fixed (0000687) whereby the beverages in &quot;Disenchantment Bay 12&quot; would respond to OPEN with a run-time problem.</p>
<p>Bug fixed (0000689) whereby the hats in &quot;Hatless 3&quot; would sometimes appear to miss one of the quartet out, because the remaining hat would be placed on the player's head instead.</p>
<p>Bug fixed (0000697) whereby the &quot;Circle Of Misery&quot; baggage carousel was inadvertently portable.</p>
<p>Bug fixed (0000720) in &quot;Lanista 2&quot; whereby a run-time problem was produced just as the player died upon the sands.</p>
<p>Infelicity fixed (0000721) in &quot;Odyssey&quot; to remove side-effects on &quot;every turn&quot;.</p>
<p>&quot;Bogart&quot;, &quot;Persephone&quot; and &quot;What Not To Wear&quot; given slightly better modified inventory rules, in case people borrow these for their own stories. (Suggestion 5252251).</p>
<p>Minor bugs, turned up by 0000967, removed from &quot;U-Stor-It&quot;, &quot;Otranto&quot;, &quot;Reflections&quot;, &quot;Shipping Trunk&quot;, &quot;Trachypachidae Maturin 1803&quot;.</p>
<p>Bug fixed (0001055) whereby TAKE ALL in &quot;Low Light&quot; would pick up the shadow.</p>
<p>Bug fixed (0001146) whereby &quot;MRE&quot; allowed multiple foods to interfere with each other's nutritional value.</p>
<p>Bug fixed (0001176) whereby the light-meter in &quot;Unblinking&quot; did not always disappear after use.</p>
<p>Bugs fixed (0001202, 0001212) to do with commentary in &quot;Terror of the Sierra Madre&quot; and &quot;The Facts Were These&quot;.</p>
<p>Finally, from the department of might-have-been, Emily Short's epic espionage game Counterfeit Monkey came out: http://www.emshort.com/counterfeit_monkey Which we mention here since it began life in 2008 as what was going to be a three-star Inform example.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s28"></a>§10.28. Interpreter maintenance</p>
<p>Inform comes with browser interpreters built in, so that it can act on release instructions such as &quot;Release along with an interpreter.&quot;, which tell Inform to make a website in which the current story is immediately playable.</p>
<p>** Parchment, by Dannii Willis (the interpreter for projects with the Z-machine setting):</p>
<p>Updated to &quot;Parchment for Inform 7 (2014-04-21)&quot;. This replaces the old Gnusto interpreter core with a new one, ifvms.js, which is both faster and smaller, and is now licenced under a new BSD licence (rather than the GPL as it was before.)</p>
<p>Any updates to Parchment made between builds of Inform 7 can be found at: https://github.com/curiousdannii/parchment/</p>
<p>** Quixe, by Andrew Plotkin (the interpreter for projects with the Glulx setting):</p>
<p>Updated version to &quot;Quixe for Inform 7 (v. 1.3.1)&quot;. Supports accelerated functions, access to real date and time, line input terminator keys, line input echo control, and resource streams; also various bug fixes and optimizations.</p>
<p>Any updates to Quixe made between builds of Inform 7 can be found at: http://eblong.com/zarf/glulx/quixe/</p>
<p>** Vorple, by Juhana Leinonen (a Z-machine interpreter for projects using the Vorple suite of extensions for multimedia):</p>
<p>This is included with the main Inform distribution for the first time, as part of what we hope will be much greater integration in future. See vorple-if.com for more.</p>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
