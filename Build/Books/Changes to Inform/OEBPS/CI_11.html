<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Generated by indoc on 11 Aug 2016 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc.css" rel="stylesheet" type="text/css" />
<title>Chapter 11: Earlier builds</title>
</head>
<body class="paper papertint"><p class="chapterheading">Chapter 11: Earlier builds</p>
<p class="chaptercontents"><a href="CI_11.html#s1" class="standardlink"><span class="chaptercontentsitem">§11.1. What was new in builds 6E59 and 6G60 (June and December 2010)</span></a>; <a href="CI_11.html#s2" class="standardlink"><span class="chaptercontentsitem">§11.2. What was new in build 5Z71 (April 2009)</span></a>; <a href="CI_11.html#s3" class="standardlink"><span class="chaptercontentsitem">§11.3. What was new in build 5U92 (September 2008)</span></a>; <a href="CI_11.html#s4" class="standardlink"><span class="chaptercontentsitem">§11.4. What was new in build 5T18 (April 2008)</span></a>; <a href="CI_11.html#s5" class="standardlink"><span class="chaptercontentsitem">§11.5. What was new in build 5J39 (December 2007)</span></a>; <a href="CI_11.html#s6" class="standardlink"><span class="chaptercontentsitem">§11.6. What was new in build 5G67 (November 2007)</span></a>; <a href="CI_11.html#s7" class="standardlink"><span class="chaptercontentsitem">§11.7. What was new in build 4X60 (August 2007)</span></a>; <a href="CI_11.html#s8" class="standardlink"><span class="chaptercontentsitem">§11.8. What was new in build 4W37 (July 2007)</span></a>; <a href="CI_11.html#s9" class="standardlink"><span class="chaptercontentsitem">§11.9. What was new in build 4U65 (April 2007)</span></a>; <a href="CI_11.html#s10" class="standardlink"><span class="chaptercontentsitem">§11.10. What was new in build 4S08 (March 2007)</span></a></p><p class="sectionheading"><a id="s1"></a>§11.1. What was new in builds 6E59 and 6G60 (June and December 2010)</p>
<p><img alt="apr10.jpg" src="images/apr10.jpg" class="floating" /> As this release was being prepared, the world's largest census was taken, in India; the Eyjafjallajökull volcano in Iceland cut off air routes to Europe; in Ireland, pubs in Limerick opened on Good Friday, and a grey seal which had escaped from London Zoo was found in the seaside town of Skerries; element 117, ununseptium, was created inside atomic reactors; the Vatican declared that the Turin Shroud was not a forgery, but a mystery beyond human artistry; Lactococcus lactis became Wisconsin's official State Microbe following the passing of Assembly Bill 556 (Wisconsin's State Dance, incidentally, is the polka); Lady Gaga became the first singer to break one billion plays on YouTube, while Rukidi IV of Toro came of age and inherited his kingdom; and Cambridge had its revenge in the 156th Boat Race, defeating Oxford.</p>
<p>In the world of Inform, the Release mechanism was improved, with better feedback and a new ability to generate websites in which the project can be played in-browser. The system of kinds was made much more flexible and expressive, and phrase definitions gained in power as a result. A new chapter on Advanced Phrases was added to the manual, covering functional and generic programming. Properties, assemblies and relations were all reworked to be applicable much more consistently across the whole range of values, rather than being restricted only to objects, simplifying the language. Limits on the lengths of names of relations, verbs, prepositions, and directions were all lifted. The documentation and the Phrasebook index were revised and harmonised.</p>
<p>The 6G60 build followed six months later, to correct bugs and improve the Index, but the language itself did not change.</p>
<hr /><pre class="changelog">6E59 (12 June 2010)

This is a major release of Inform: the first in a little over a year, and
with a change log well over double the previous record size - large enough
to need a table of contents for the first time. Inform has new icons, and
a slightly revised design; more than 250 bug reports have been closed, so
that it currently has no issues open. There are minor surface enhancements
right across the language, and these are (mainly) the result not of fiddling
but of substantial rewrites of the underlying compiler. Many exceptions
have gone, and the language's design is more uniform as a result. 6E59
contains many changes from 5Z71 and it may take authors a day or two to
adapt their existing source text to these changes, but it should also prove
a stronger and more reliable Inform to work with. For the first time there
was a substantial third-party exercise in beta-testing the release, and
as from this build we are also launching a public suggestions forum and
an open bug-tracker.


Contents:
	1. INFORM FOR OS X
	2. INFORM FOR WINDOWS
	3. INFORM FOR GNOME ON LINUX
	4. RELEASING
	5. RELATIONS
	6. ASSEMBLIES
	7. KINDS
	8. MAP, FILTER AND REDUCE
	9. GENERIC PHRASES
	10. PROPERTIES
	11. SCENES
	12. RULEBOOKS
	13. INFLECTIONS
	14. MINOR NEW FEATURES
	15. WORD LIMITS ON RELATIONS, VERBS, PREPOSITIONS AND DIRECTIONS
	16. ACTIONS IN THE STANDARD RULES
	17. DOCUMENTATION, PROBLEMS AND INDEX
	18. DEPRECATED PHRASES
	19. MAINTENANCE
	20. EXAMPLES
	21. BUILT-IN EXTENSIONS
	22. A NOTE ABOUT FIGURE AND SOUND NAMES
	23. A NOTE ABOUT EXTERNAL FILES


1. INFORM FOR OS X

The user interface has been tidied up in a number of small but, we hope,
pleasing ways, and the menu structure should be easier to navigate,
especially for newcomers:

	File  Edit  Format  Play  Replay  Release  Window  Help

The preferences have similarly been reorganised, and the Settings panel is
more explanatory. Numerous features useful only for I6 projects are now
invisible for I7 projects, which makes the system much easier to learn.
(But it won't take experienced users long to find everything again.)

A new setting, for Randomness, makes it possible to fix the random numbers
generated within Inform so that repeat runs produce the same &quot;random&quot; outcomes,
which sometimes makes testing easier. (This only applies within the application,
and it's switched off by default; it never affects a Released story file.)


2. INFORM FOR WINDOWS

The code for the source tabs has been rewritten to make use of the open
source text editing component &quot;Scintilla&quot;. This allows a number of missing
features to be implemented, and will allow further changes to support all
of the features available in the OS X version of the application.

Making a selection in the contents pane now causes the source pane to show
that selection only. The old behaviour, of showing the whole source but
going to the selection, can be obtained by holding down the shift key when
selecting.

Wrapped lines are now slightly indented by default, and new lines start
auto-indented to the same extent as the line above: both these options can
be disabled from the preferences dialog.

The new Format menu allows lines to be indented left and right.

Editing the skein now marks the project as being changed.

The background colours in the transcript now follow the same logic as
for the OS X application. The left hand column, showing the output
from the game, is coloured light blue if the output is the same as the
previous run-through of the game, and light red if the output now differs.
The right hand column, showing the &quot;blessed&quot; transcript, is coloured blue
if the transcript matches the game's output, red if it differs, and
yellow if it differs but only due to trivial whitespace changes.

The &quot;Replay Commands Blessed in Transcript&quot; option, which is on the new
Replay menu, now plays all skein threads that contain at least one blessed
knot. After playing, if any blessed knots fail to match, the skein shows
the first such knot.

On the new Replay menu are commands to show the last played command in
the skein and the transcript, and to change the selected knot in the
transcript to step through changed commands and commands for which the
transcript does not match the blessed text.

The new Release menu has commands to open the Materials folder in a new
Explorer window, and to export the game's iFiction record to a new file.

The Window menu has been re-arranged so that access to all tabs, and all
the Index sub-tabs, is available from sub-menus and shortcut keys.

Pressing F4 now shows the whole of the source text in the Source tab. This
is equivalent to bringing up the Contents view and clicking on the very
top heading.


3. INFORM FOR GNOME ON LINUX

The menus and dialogs have undergone various rearrangements similar to
those of the OS X version.

The Glulxe and Git interpreters that run in the Game tab have been updated
to version 0.4.5 and 1.2.6 respectively. Likewise, the Gargoyle system that
runs them has been updated to a more recent revision, which supports
hyperlinks, and copying and pasting from the Game tab.

The Documentation tabs now always show scrollbars, to prevent the &quot;next&quot;
arrow from changing places when you are paging through the documentation
quickly and land on a section that is short enough to fit on one page.

If an error message references an extension, then clicking on the arrow
next to it will now open the extension and highlight the offending line.

Various minor bugs and memory leaks have been fixed.


4. RELEASING

Feedback after clicking the &quot;Release&quot; button has been much improved, with
Inform either producing a report on what has happened or a legible list of
problems. Inform has always been able to release a project with supplementary
material added, right up to a mini-website for housing it, and in this build
we add the ability to create a web page making the project playable
in-browser. The new syntax:

	Release along with an interpreter.

causes Inform to bundle up a customised copy of a Javascript interpreter,
along with a suitably encoded story file, so that the eventual player can
just visit the page in any modern browser and begin playing. We believe that
giving Inform a one-click way to make such web pages will help IF authors
to reach out to casual gamers on the web.

There has been great interest in browser-based story file interpretation
recently; as recently as a few years ago this would have been prohibitively
slow, but continuing increases in processor speed - and intensive work by
browser manufacturers in optimising Javascript performance - have made this
a genuinely workable option today. Projects such as &quot;Silverglulxe&quot;, &quot;Leaflet&quot;
and &quot;Parchment&quot; have made considerable progress, and we would like Inform to
help this development.

Inform ships with &quot;Parchment&quot; built in. At present this supports only
projects using the Z-machine story file format, but we have made every effort
to help Inform to accommodate future developments, and to enable it to be
used with other interpreters, too:

(a) Interpreters are stored by Inform in almost exactly the same way as
website templates are. Each must have a name; the default is &quot;Parchment&quot;,
just as the default website template is called &quot;Standard&quot;, but it's easy
to specify something different:

	Release along with the &quot;Urbzig&quot; interpreter.

(b) Exactly as with website templates, Inform looks for these first in the
&quot;Templates&quot; subfolder of the current project's &quot;Materials&quot; folder; then in
the &quot;Templates&quot; subfolder of the Inform folder on the user's computer (the
details vary with platform, but for instance on Mac OS X this is the folder
&quot;~/Library/Inform&quot;, where &quot;~&quot; is the user's home folder); and lastly in its
own built-in stock, hidden away inside the Inform application. &quot;Parchment&quot;
is undergoing rapid development; placing any new copy of it in one of the
two locations above enables the user to get its benefits straight away,
without having to wait for some future build of Inform to incorporate the
update.

(c) An interpreter is stored as a folder of Javascript and/or CSS files
and/or images, together with a file called &quot;(manifest).txt&quot; which describes
it and how Inform should put together a story file for it to play. The
manifest for &quot;Parchment&quot; is heavily commented, and should help provide a
model for other interpreter-writers to use. We very much hope that authors
of other Javascript-based interpreters will find it straightforward to use
this system, and we will be very happy to look at any problems they have.

Another notable change is that &quot;Release&quot; now always releases the story
file into the &quot;Release&quot; subfolder of the project's &quot;Materials&quot; folder -
creating these if they do not already exist. In previous builds, it almost
always did so; but would put up a Save... dialogue box if the release
contained only the story file and nothing else. In practice, most
serious releases are going to involve at least some material beyond the
story file, and for consistency's sake we've got rid of the Save...
dialogue box and gone for the &quot;Release&quot; folder in all cases.

Miscellaneous small changes have been made to the &quot;Release&quot; mechanism
throughout; for example, a problem to do with Skein files which have lines
over 10K in length has been removed (the threshold was raised to 50K and
warnings about trimming have replaced errors), and a more serious bug to
do with projects containing around 500 or more images (which affected
Windows users but not OS X or Linux) has been fixed.


5. RELATIONS

Relations are central to Inform. Every verb's meaning is a relation, and
Inform's model of the world is based on relationships holding between objects
and/or other values.

This build makes it possible to define relations on any kinds of value (not,
as before, only on finite kinds and even then with petty restrictions); to
use relations as first-class values in their own right; and to create
relations on a temporary basis.

(a) Relations on any kinds of value:

We can now define relations between more or less anything:
	
	Partnership relates various texts to various texts.
	
	The verb to belong with (he belongs with, they belong with) implies the
	partnership relation.
	
	&quot;cheese&quot; belongs with &quot;crackers&quot;.
	&quot;clam&quot; belongs with &quot;chowder&quot;.

And this allows us to create large and varied data structures. A relation is a
natural generalisation of an associative array (an &quot;associative hash&quot; in Perl,
a &quot;dictionary&quot; in Python, a &quot;table&quot; in Lua, and so on - the idea goes back
at least to Smalltalk and the mid-1970s). In fact, an associative array is
exactly a various-to-one relation in Inform terms.

There are two caveats:

	(i) Previous builds would have rejected this because the domain
	(texts) is simply too big. The new build makes use of hash tables
	dynamically built in allocated memory to cope with this (using
	run-time code generously contributed by Jesse McGrew) - as such it
	really only works efficiently when the Settings for the project
	are set to the Glulx virtual machine.

	(ii) Inform isn't good at reasoning with relations when the domains
	are too big to make search loops practicable, so some constructions
	like &quot;if 5 tallies with an even number&quot; - where &quot;tallies with&quot; means
	a various-to-various relation of numbers to numbers - aren't allowed.
	But see below.

(b) Extracting values from relations:

Suppose we've defined the example partnership relation above. How could we
find out what, if anything, &quot;caviar&quot; belongs with? It would be impractical
to keep trying

	if &quot;caviar&quot; belongs with &quot;aardvarks&quot;, ...
	if &quot;caviar&quot; belongs with &quot;abacuses&quot;, ...
	...

Instead:

	if &quot;caviar&quot; relates to a text by the partnership relation, ...

tests whether or not it relates to anything; and if it does,

	a text which &quot;caviar&quot; relates to by the partnership relation

will produce one such text. Of course, there might be many: so

	list of texts which &quot;caviar&quot; relates to by the partnership relation

will produce them all. And we can also look at this the other way round:

	if a text relates to &quot;caviar&quot; by the partnership relation, ...
	a text which relates to &quot;caviar&quot; by the partnership relation
	list of texts which relate to &quot;caviar&quot; by the partnership relation

Still more interesting are the slightly tongue-twister-like:

	list of texts which the partnership relation relates
	list of texts which the partnership relation relates to

If we had written:

	&quot;cheese&quot; belongs with &quot;crackers&quot;.
	&quot;clam&quot; belongs with &quot;chowder&quot;.

then these lists might be { &quot;cheese&quot;, &quot;clam&quot; } and { &quot;crackers&quot;, &quot;chowder&quot; }
respectively. (For efficiency reasons, there are no guarantees about what
order the lists have - but they can of course always be sorted when found.)

(c) Relations as themselves values:

Relations have always been values, but in past builds their kind was simply
&quot;relation&quot;, which made it impossible to distinguish, say, the visibility
relation (can one person see another?) from, say, these:
	
	Parity relates a number (called N) to a number (called M) when N minus M
	is even.

	Joint magnitude relates a number (called N) to a number (called M) when
	N plus M is greater than 7.

In any case, little could usefully be done with relations as values, because
there was no good way to test or assert them other than explicitly.

In this build, a relation has the kind &quot;relation of K to L&quot;, where K and L are
the kinds of the two things it relates. For instance, &quot;joint magnitude relation&quot;
has the kind &quot;relation of numbers to numbers&quot;; though it's also allowed to
write just &quot;relation of numbers&quot;, because Inform assumes both kinds are the
same if only one is given. We can now write, say:

	To chart (R - a relation of numbers):
		repeat with N running from 1 to 5:
			repeat with M running from 1 to 5:
				if R relates N to M, say &quot;[N] &lt;=&gt; [M]   &quot;;
			say &quot;[line break]&quot;;

and now &quot;chart parity relation&quot; will work nicely, but &quot;chart visibility
relation&quot; will be rejected (as it should be). More ambitiously:

	When play begins:
		let L be { parity relation, joint magnitude relation };
		repeat with R running through L:
			chart R;

Here the kind of L is &quot;list of relations of numbers to numbers&quot;.

In general, we can write

	if R relates X to Y, ...
	now R relates X to Y;
	now R does not relate X to Y;

to test, set and unset a relation R between two values, though of course
Inform checks that the values have the right kind and produces a problem
message if not.

(d) Adjectives applying to relations:

The following are now defined:

	&quot;empty&quot; - nothing relates to anything else
	&quot;symmetric&quot; - by definition X relates to Y if and only if Y relates to X
	&quot;equivalence&quot; - this is a relation &quot;in groups&quot;, or an &quot;equivalence relation&quot;
	&quot;one-to-one&quot; - it relates one K to one L
	&quot;one-to-various&quot; - similarly
	&quot;various-to-one&quot; - similarly
	&quot;various-to-various&quot; - similarly

So for example it's possible to ask

	if R is a symmetric one-to-one relation of texts, ...

With some relations, it's possible to clear them out by writing:

	now R is empty;

and with temporary relations (see below), it's even possible to change their
valencies (one-to-one vs. one-to-various, etc.) using &quot;now&quot;, but only when
they are empty. The exceptions where &quot;empty&quot; can't be used are those which
can't be changed at all, and a few built-in cases such as &quot;support&quot;,
&quot;containment&quot; and &quot;incorporation&quot;, where emptying would dissolve the model
world in a disastrous way.

(e) Making temporary relations:

In past builds of Inform, the relations were all created explicitly by the
source text. The stock of relations which exist at the start of play could
not be changed; the relationships might change - sometimes Red Riding Hood
would be in the Woodcutter's Cottage, sometimes not - but the relations
themselves (in this case, containment) were eternal.

This is no longer true, and it's now easy to create relations as dynamic
data structures, like lists or indexed texts. For example:

	let the password dictionary be a relation of texts;

This makes a purely temporary various-to-various relation between texts,
which lasts as long as the temporary value &quot;password dictionary&quot; lasts.
By default, relations are various-to-various, but we could instead write,
say:

	let the nicknames catalogue be a various-to-one relation of texts;

Such a relation exists only in the current phrase, and is destroyed when
the phrase finishes, like any other &quot;let&quot;. Of course there's no verb whose
meaning in this relation, but that's no obstacle, because we can manipulate
it using &quot;relates&quot;:

	now the nicknames catalogue relates &quot;Trudy&quot; to &quot;Snake-eyes&quot;;

(At present such a relation cannot be used outside its own phrase, but we
hope to enable this in future builds by means of closures.)


6. ASSEMBLIES

Up to now, assemblies like this:

	A signpost is a kind of thing. Every room contains a signpost.

have been deprecated as not always reliable - it was a bad idea to make
constructions on the basic kinds &quot;room&quot;, &quot;container&quot;, &quot;supporter&quot;, &quot;door&quot;
or &quot;thing&quot;, the above being an example of an assembly on &quot;room&quot;. That
restriction is now lifted, and the above works as it looks as if it should.

Assemblies can now involve values as well as objects. For example, if we
start from:

	A colour is a kind of value. The colours are red, green and blue.
	Liking relates various people to various colours.
	The verb to like (he likes, they like, it is liked) implies the liking relation.

then the assembly:

	Every person likes a colour.

will produce an initial situation like so:

	&gt;relations
	Liking relates various people to various colours:
	  You  &gt;=&gt;  your colour
	  Daphne  &gt;=&gt;  Daphne's colour

Here the assembly process has created two new colour values. Had the assembly
instead been written:

	A person likes every colour.

then the result would be:

	Liking relates various people to various colours:
	  The person  &gt;=&gt;  red
	  The person  &gt;=&gt;  green
	  The person  &gt;=&gt;  blue

where this time three new people have been created. Note that these people have
no fancy names. But we can arrange for that with another new feature:

	A person (called its fan) likes every colour.

Which would instead produce:

	Liking relates various people to various colours:
	  Red's fan  &gt;=&gt;  red
	  Green's fan  &gt;=&gt;  green
	  Blue's fan  &gt;=&gt;  blue

Similarly,

	Every person likes a colour (called his favourite colour).

produces:

	Liking relates various people to various colours:
	  You  &gt;=&gt;  your favourite colour
	  Daphne  &gt;=&gt;  Daphne's favourite colour

Just as &quot;its&quot; (or &quot;his&quot; or &quot;her&quot; or &quot;their&quot;) expands out to a possessive form
of the name of the owner, so to speak, so &quot;it&quot; (or &quot;he&quot; or &quot;she&quot; or &quot;they&quot; or
&quot;him&quot; or &quot;them&quot;) expands out to the name itself. Thus:

	A person (called the world's leading fan of it) likes every colour.

produces:

	Liking relates various people to various colours:
	  World's leading fan of red  &gt;=&gt;  red
	  World's leading fan of green  &gt;=&gt;  green
	  World's leading fan of blue  &gt;=&gt;  blue

All of these callings can of course be made for standard assemblies of
objects too; for example,

	Every room contains a vehicle (called its buggy).

would make a whole lot of suitably named buggies.

The rule on what happens if there's no &quot;(called ...)&quot; text might be worth
spelling out exactly:

	(1) If we are assembling a value of kind K, then the calling text is
		taken as if it were &quot;(called its K)&quot; - for instance, &quot;(called its
		colour)&quot; in the first example above, which resulted in names like
		&quot;your colour&quot; and &quot;Daphne's colour&quot;.
		
		However, if that results in a name which already exists, a number
		is suffixed to make it a unique name; for instance, if there were
		six anonymous people, then &quot;Every person likes a colour&quot; would
		result in names like &quot;person's colour 2&quot;, &quot;person's colour 3&quot;, and
		so forth. (It's a bad idea to write assemblies where this could
		ever matter.)

	(2) If we are assembling an object of kind K, then no name is attached
		unless the relationship is incorporation - i.e., being a part of
		something - and the object being attached to already has a name;
		in that case, the calling text is again &quot;(called its K)&quot;.

The reason that the convention differs between objects and values is that
objects are allowed to have names clashing with other objects, or no name at
all, whereas values have to have names belonging to themselves alone.


7. KINDS

As a convenience for debugging awkward phrases, the following:

	showme V;
	
works for any value V, and prints out V, its kind, and then (unless it is a
constant) its current value. For example:

	When play begins:
		showme indigo;
		showme location;
		showme the list of vivid colours;

might open play by printing up:

	colour: indigo
	&quot;location&quot; = object: Lille Conservatoire
	&quot;list of vivid colours&quot; = list of colours: {red, indigo, chartreuse}

This is intended purely for testing. In a Release version, &quot;showme&quot; is always
silent, so that if any &quot;showme&quot; phrases are left in by accident, they'll never
be seen by anyone else.


Almost every kind has a &quot;default value&quot;, that is, a value used when Inform
knows that a variable or table entry should contain something of this kind,
but doesn't know what it is. The phrase

	default value of K

evaluates to this value, for any named kind K. For example,

	showme default value of time;

produces the output:

	&quot;default value of time&quot; = time: 9:00 am

This can be useful when the default value is needed, but has no convenient
natural-language name; for example, &quot;default value of table name&quot;, or
&quot;default value of sound name&quot;.


Enumerated kinds have always had phrases to make it easier to trawl through
their values: for instance,

	the colour after C
	the colour before C
	a random colour
	a random colour between orange and blue
	a random colour from orange to blue

(The last two are synonymous.) To these, we now add:

	the first value of colour
	the last value of colour

If, for example:

	Colour is a kind of value. The colours are red, orange, yellow, green,
	blue, indigo and violet.

then &quot;the first value of colour&quot; produces &quot;red&quot;, and &quot;the last value of colour&quot;
produces &quot;violet&quot;.


It is now possible to change how kinds relate to each other, but only if no
previous statements are contradicted by doing so. For example, the Standard
Rules say that &quot;container&quot; and &quot;supporter&quot; are kinds of &quot;thing&quot;; now supposing
we type:

	An enclosure is a kind of thing.
	A container is a kind of enclosure. A supporter is a kind of enclosure.

This is now allowed. Containers and supporters are still things; they have
merely become more specialised, and there is no contradiction. On the other
hand, this is incorrect:

	An enclosure is a kind of region.
	A container is a kind of enclosure. A supporter is a kind of enclosure.

This is a contradiction, since regions are not things, and Inform rejects
it with a problem message.


The &quot;description&quot; kind has been removed. In its place is a more expressive
one: &quot;description of K&quot; for any kind K - for example, &quot;description of numbers&quot;,
which would be matched by &quot;even numbers&quot;.

This may mean changing a small amount of existing source text; the change
should be as simple as replacing &quot;description&quot; by &quot;description of objects&quot;.
(We apologise for the nuisance, but &quot;description&quot; was always a poor choice
of name, clashing with the property called &quot;description&quot;, for instance.)


Given any two kinds K and L, the kind &quot;relation of K to L&quot; is now a kind.
More concisely, &quot;relation of K&quot; means the same as &quot;relation of K to K&quot;.


Given any two kinds K and L, the kind &quot;phrase K -&gt; L&quot; is now a kind. (This
is meant to look like a mathematical function arrow.) For example, the
phrase defined by

	To decide which number is the square of (N - a number): ...

has the kind &quot;phrase number -&gt; number&quot;. Brackets and commas are used if the
phrase combines several values: thus

	To decide which indexed text is (T - text) repeated (N - a number) times: ...

would have kind &quot;phrase (text, number) -&gt; indexed text&quot;. The word &quot;nothing&quot;
is used if there are no values in, or no value out - thus

	To decide which number is the magic target: ...

has kind &quot;phrase nothing -&gt; number&quot;, and

	To dig (eastward - length) by (northward - length): ...

has the kind &quot;phrase (length, length) -&gt; nothing&quot;.

Thus phrases can be stored in variables, properties and so on. We can give
any phrase a name like so:

	To decide what number is double (N - a number) (this is doubling):
		decide on N plus N.

This is the same syntax used to name rules, and the idea is the same. If we
try &quot;showme doubling&quot;, the result is

	phrase number -&gt; number: doubling

But there's no advantage to storing a phrase if it can't be used, so:

	showme doubling applied to 2;

produces

	&quot;doubling applied to 2&quot; = number: 4

There are versions of &quot;applied to&quot; for phrases applied to 0 to 3 arguments:

	F applied
	F applied to V
	F applied to V and W
	F applied to V and W and X

For phrases which do not produce a value, we use &quot;apply&quot;:

	apply F;
	apply F to V;
	apply F to V and W;
	apply F to V and W and X;

The default value for &quot;phrase K -&gt; L&quot; is a phrase which, no matter what value
of K it applies to, always produces the default value of L. It's a sort of
equivalent of the zero function in mathematics - indeed that's exactly what
it is, if L is &quot;number&quot;. These trivial phrases have no names, but can be
referred to using &quot;default value of...&quot;. Thus:

	let Q be a phrase numbers -&gt; times;
	showme Q;
	showme Q applied to 4;
	showme Q applied to -7;

might produce:

	&quot;q&quot; = phrase number -&gt; time: default value of phrase number -&gt; time
	&quot;q applied to 4&quot; = time: 9:00 am
	&quot;q applied to -7&quot; = time: 9:00 am

Here Q is set to the default phrase because we didn't give it any other
value; it has the name we might expect (&quot;default value of phrase number -&gt; time&quot;)
and it works as advertised, producing 9:00 am no matter what number is fed in.

More ambitiously:

	let R be a phrase numbers -&gt; (phrase numbers -&gt; colours);
	showme R;
	showme R applied to 3;
	showme (R applied to 3) applied to 2;

might produce:

	&quot;r&quot; = phrase number -&gt; (phrase number -&gt; colour): default value of phrase
	number -&gt; (phrase number -&gt; colour)
	&quot;r applied to 3&quot; = phrase number -&gt; colour: default value of phrase number
	-&gt; colour
	&quot;( r applied to 3 ) applied to 2&quot; = colour: red

In the case where L is &quot;nothing&quot;, we get a phrase which does nothing and
produces no value. For example, if we write:

	let S be a phrase numbers -&gt; nothing;

then

	apply S to 17;

does nothing at all, but it's perfectly legal.


Just as phrases now have kinds, the same is true of the other &quot;active&quot; gadgets
within Inform: activities, rules and rulebooks.

For any kind K, &quot;activity on K&quot; is a kind. If we write:

	Tweaking the nose of something is an activity.
	Refreshing the screen is an activity.

then the first is an &quot;activity on objects&quot;, and the second an &quot;activity on
nothing&quot;. That was true in previous builds of Inform, too, though there was
no way to express the difference, and so Inform didn't typecheck it. (Indeed,
it turned out that a minor error in the Standard Rules was going uncaught as a
result.) But we can now write, say:

	Announcing something is an activity on numbers.
	Rule for announcing a number (called N): say &quot;Ladies and gentlemen, [N].&quot;

and then

	carry out the announcing activity with 12.

This won't be useful for many people, but it's more flexible and consistent,
and activities on pictures and sound effects may be a nice interface for
multimedia extensions to provide.

(The word &quot;activity&quot; is now an abbreviation for &quot;activity on value&quot;, that is,
any kind of activity. It's unlikely that anyone will need to change existing
source text.)

Rules and rulebooks now have kinds which can be written as follows:

	rulebook
	K based rulebook
	rulebook producing L
	K based rulebook producing L

(and similarly for &quot;rule&quot;). See the RULEBOOKS section below for more; if you
have source text which makes use of values produced by rulebooks, you will need
to modify it, as those are now typechecked for the first time, and some syntax
changes have been necessary to make this reliable.


Finally, two of Inform's ways to store values are similarly extended, though
in practice it's rare to mention kinds of either sort explicitly in source
text, so people will mainly not notice.

	K valued property
	K valued table column

As a piece of syntactic sugar, writing &quot;either/or property&quot; is equivalent to
writing &quot;truth state valued property&quot;.


Given that Inform now has seven constructions on kinds - lists, descriptions,
relations, activities, rules, rulebooks and phrases - some interesting
combinations are now open:

	phrase (relation of numbers to colours, number) -&gt; list of colours

Brackets can be used to clarify matters:

	phrase (phrase number -&gt; (phrase number -&gt; number)) -&gt; nothing

Nothing will make that a simple idea, but it's unambiguous and can be puzzled
out with practice.


The following sentences now have identical effect:

	Concept is a kind.
	Concept is a kind of object.

Previously Inform rejected the second form, but it's now being allowed for the
sake of consistency of syntax. Similarly:

	The green leather sofa is an object.

is now allowed; previously Inform would have demanded that it be said to be
a thing, a door, etc. (In the absence of other information, it will come out
as a thing, in fact.)


The kind &quot;table name&quot; can now be the kind of a variable whose value is not
explicitly declared.


The kind &quot;action name&quot; can now be repeated through, which means it's now
legal to form, say, &quot;the list of action names&quot;.


The kind &quot;use option&quot; can similarly now be repeated through, and can be said,
for the first time. Two new adjectives have been defined for use options:
&quot;active&quot; and &quot;inactive&quot;, with the obvious meanings. This means it's possible
to describe the current options with something like:

	say &quot;We're currently using: [list of active use options].&quot;;

The result might be, say,

	We're currently using: dynamic memory allocation option [8192], maximum 
	indexed text length option [1024], maximum things understood at once
	option [100], American dialect option and fast route-finding option.

This may be useful for testing purposes.

The former condition &quot;using O&quot;, true if the option O is active, false
if not, has not yet been withdrawn but is now deprecated, and may be
removed in future builds, since it is redundant and less flexible; please
write &quot;if O is active&quot; instead of &quot;if using O&quot;.


In the early days of Inform, built-in kinds of value had to have single word
names. That has long ceased to be true, but some of those awkward names
remained - for example, we had &quot;indexed text&quot; (two words) but &quot;table-name&quot;
(hyphenated to make it one word). All of those hyphenated kinds of value
are now written out in words, with the hyphens removed: thus

	table name    figure name    sound name    action name    equation name
	external file    Unicode character    use option    table column

The traditional hyphenated names are still recognised (table-name, figure-name
and so on), except for the hardly ever used &quot;table-column&quot;, but the documentation
and Index pages always prefer the new unhyphenated forms.


The following kinds, always intended for internal use only, have been withdrawn:

	domain-description    miscellaneous-value    text-routine    boxed-quotation
	rule-outcome    abstract-relation


8. MAP, FILTER AND REDUCE

When a mass of computations has to be done, the traditional approach is to work
through them in a &quot;repeat&quot; loop. One modern alternative, growing in popularity,
is to form a list of inputs; then apply the same computation to each input in
turn to form a list of results (this is called &quot;mapping&quot;); throw out any
bad or unwanted results (&quot;filtering&quot;); and then combine the surviving results
into a single composite answer (&quot;reducing&quot;, though some programming languages
call this &quot;folding&quot; or &quot;accumulation&quot;; it's a much-reinvented idea).

Inform provides all three of these fundamental list-processing operations. There
is no special term for a &quot;map&quot;, because Inform treats it as another case of
&quot;applied to&quot;. Thus:

	doubling applied to {2, 3, 4};

produces the list {4, 6, 8}. More divertingly, suppose we define:

	To decide what indexed text is the longhand form of (N - a number)
		(this is spelling out):
		decide on &quot;[N in words]&quot;.

	To decide what indexed text is the consonant form of (T - indexed text)
		(this is txtng):
		replace the regular expression &quot;&lt;aeiou&gt;&quot; in T with &quot;&quot;;
		decide on T.

Then we can write a chain:

	txtng applied to spelling out applied to doubling applied to {3, 8, 4, 19, 7}

to produce the value {&quot;sx&quot;, &quot;sxtn&quot;, &quot;ght&quot;, &quot;thrty-ght&quot;, &quot;frtn&quot;}.

Next, filtering. Here we make use of descriptions, in order to say what values
will be allowed through the filter. Thus:

	filter to even numbers of {3, 8, 4, 19, 7}

produces {8, 4}, with the values 3, 19, and 7 failing to make it through. (A
sufficiently fine filter may well thin out a list to a single entry, or even
no entries at all, but the result is always a list.) To get the full effect of
filtering, we probably need to define an adjective or two:

	Definition: an indexed text (called T) is lengthy if the number of
		characters in it is greater than 6.

so that we can then write, say:

	filter to lengthy indexed texts of spelling out applied to {15, 2, 20, 29, -4}

which produces {&quot;fifteen&quot;, &quot;twenty-nine&quot;, &quot;minus four&quot;}.

Lastly, reduction. In order to combine a whole list of values, we need a phrase
to combine any two. Here are some samples:

	To decide what number is the larger of (N - number) and (M - number)
		(this is maximizing):
		if N &gt; M, decide on N;
		decide on M.
	
	To decide what number is the sum of (N - number) and (M - number)
		(this is summing):
		decide on N + M.
	
	To decide what indexed text is the concatenation of (X - indexed text) and
		(Y - indexed text) (this is concatenation):
		decide on &quot;[X][Y]&quot;.

And here are some sample reductions:

	let X be the maximization reduction of {3, 8, 4, 19, 7};
	let Y be the summing reduction of {3, 8, 4, 19, 7};
	let Z be the concatenation reduction of txtng applied to spelling out
		applied to doubling applied to {3, 8, 4, 19, 7};

sets X to 19, the highest of the values, Y to 41, their sum, and Z to the
indexed text &quot;sxsxtnghtthrty-ghtfrtn&quot;. In each case a list has been reduced
to a single value which somehow combines the contents.

Is map/filter/reduce always a good idea? Devotees point out that almost any
computation can be thought of in this way, and in systems where the work has
to be distributed around multiple processors it can be a very powerful tool.
(There are programming languages without loops where it's essentially the only
tool.) At its best, it reads very elegantly: one assembles all of the tools
needed - definitions of doubling, lengthy, spelling out, concatenation and
so on - and then each actual task is expressed in a single line at the end.

On the other hand, there are also times when this is a needlessly complicated
disguise for what could more easily be done with a &quot;repeat&quot; loop, and also
more efficiently since assembling and dismantling lists in memory does take
some overhead time. So these list operations are not a panacea, but it's good
to have them available.


9. GENERIC PHRASES

The following looks quite innocent:

	To say (V - value) twice: say &quot;[V]. [V], I say!&quot;;

It's clear what we intend it to do, but previous builds of Inform would have
rejected it. &quot;Value&quot; is not itself a kind - it's too big and unspecific. For
instance, if we were to allow a variable to be just &quot;a value&quot;, we could freely
set it to 12 one minute and to &quot;dahlias&quot; the next, and such a variable would
be dangerously useless since we would never know what could safely be done
with it.

So &quot;value&quot; is not a kind, but a kind of kind. Inform has quite a few of these:

	value, pointer value, word value, arithmetic value, enumerated value,
	sayable value

Most Inform users never notice these, since they belong to the eight-tenths
of the iceberg which is underwater, but they act as ways to say &quot;a value of
any kind matching this can go here&quot;. For example, &quot;value&quot; is a way to say
&quot;any kind at all&quot;; &quot;arithmetic value&quot; is any kind which arithmetic can be
performed on (any kind with the little calculator icon in the Kinds index);
and so on. If we write:

	To double (V - arithmetic value): say &quot;[V times 2].&quot;;

the restriction to &quot;arithmetic value&quot; means that although &quot;double 3&quot;, &quot;double
6 kg&quot;, etc., would be matched, &quot;double the Entire Game&quot; would not - you can't
perform arithmetic on scenes. Similarly, it would have been tidier to write:

	To say (V - sayable value) twice: say &quot;[V]. [V], I say!&quot;;

because then Inform will make it clearer why &quot;say X twice&quot; won't work if X
is one of those rare values which it can't say (an activity, for instance).

Inform has always used generic definitions like these to set up the built-in
stock of phrases (though only with so-called inline bodies, that is, with
direct translations to Inform 6 code). In this build, it's now possible to
write generic definitions using proper Inform source text - so that both of
the above definitions are accepted, and they work just as they look as if
they should.


But those are toy examples. Notice the way &quot;double&quot; just said the answer,
instead of returning it - the trouble was that, not knowing the kind of V,
we couldn't say what the kind of its double would be. We needed a way of
saying &quot;the same kind comes out as went in&quot;. This is how Inform expresses that:

	To decide which K is triple (original - arithmetic value of kind K):
		decide on 3 times the original.

Here, K stands for any kind which matches &quot;arithmetic value&quot;. Inform supports
exactly 26 of these symbols, which are written A to Z, but it's customary to
use K and L. (They can be written in the plural if we like: e.g., &quot;list of
Ks&quot;. But they must always use a capital letter: &quot;list of k&quot; is not allowed.)

Each symbol we use has to be declared in exactly one of the bracketed
ingredients for the phrase - here, the declaration is &quot;arithmetic value of
kind K&quot;. That creates K and says that it has to be arithmetic; if we'd just
said &quot;value of kind K&quot;, it could have been anything.

For a more ambitious example, here is the definition in the Standard Rules
of the mapping operation described above:

	To decide what list of L is (function - phrase K -&gt; value of kind L)
		applied to (original list - list of values of kind K):
		let the result be a list of Ls;
		repeat with item running through the original list:
			let the mapped item be the function applied to the item;
			add the mapped item to the result;
		decide on the result.

Here we needed two symbols to explain the complicated way that the values
going in and out have to match up to each other. Note also the way that the
temporary variable &quot;result&quot; is created:

	let the result be a list of Ls;

Ordinarily, of course, &quot;L&quot; is not a kind. But within the body of a phrase
definition, it means the kind which L matched. For instance, if we try

	showme spelling out applied to {3, 7, 11};

then in this usage &quot;L&quot; becomes &quot;indexed text&quot;, because spelling out is a
phrase whose kind is &quot;phrase number -&gt; indexed text&quot;.


Sometimes a phrase needs to know what kind it's to work on, but isn't going
to be given any particular value of it. For example:

	To assay (name of kind of value K):
		repeat with item running through Ks:
			say &quot;There's [item].&quot;

Note that there's no hyphen, and no name for the bracketed token - it only
sets K. We can then have, say:

	assay colours;
	assay vehicles;

(But &quot;assay texts;&quot; would throw a problem message, because we can't repeat
through all possible texts.)


When a symbol occurs several times in the same definition, subtle differences
can arise according to which appearance is the declaration. These are not
quite the same:

	To hunt for (V - value of kind K) in (L - list of Ks): ...
	To hunt for (V - K) in (L - list of values of kind K): ...

Consider:

	let T be &quot;[location]&quot; in title case;
	hunt for T in {&quot;Greater London&quot;, &quot;Greater Basildon&quot;};

Here T is an indexed text, but the list is of texts; and a text can be used in
place of an indexed text, but not vice versa. This will match the first
definition, because K is set to &quot;indexed text&quot;, but it won't match the second,
where K is set to &quot;text&quot;.


10. PROPERTIES

The handling of properties has been simplified and made more systematic in
this build, removing a number of tiresome exceptions. In particular, eight
ways in which &quot;object&quot; differed from other kinds have been removed:

(a) It's possible to give properties to &quot;object&quot;, and indeed the Standard
Rules now include:

	An object has a text called printed name.
	An object can be plural-named or singular-named. An object is usually
	singular-named.

Previously one had to specify them each time for each of the fundamental kinds
in turn (thing, room, direction, region), which was tiresome. The problem
was essentially that &quot;object&quot; did not behave as if it were a property-owning
kind; now it does.

(b) Relations in groups, one to various relations, various to one relations,
and one to one relations are no longer restricted to objects - they can be
defined over all kinds. Again, objects are no longer a special case.

(c) Properties have always been able to be held by several kinds of object
independently - for example &quot;matching key&quot; is held by both doors and
containers - but in previous builds that wasn't true for more general kinds.
A property of a scene couldn't be a property of anything else. This is no
longer true. (Indeed, scenes now have the &quot;description&quot; property, just as
objects do.)

(d) Any value which can have properties at all can now have a condition
property, e.g., thus:

	Colour is a kind of value. The colours are red, green and white.
	A colour can be bright, neutral or flat. Green is neutral.

Condition properties were previously restricted to objects only.

(e) Implications can now be written for any values capable of holding
properties, not only for objects. Thus:

	Colour is a kind of value. The colours are red, green and blue.
	A colour can be zesty or flat. A colour can be bright or dull.
	Red and blue are bright. Blue is flat.
	
	A bright colour is usually zesty.

results in red being zesty, but blue and green being flat; blue because the
source text explicitly says so (which trumps the &quot;usually&quot;), and green because
this isn't a bright colour, so the implication doesn't arise. Again, all of
this works exactly as it does already for objects.

(f) Inform has always allowed a piece of double-quoted text, as a complete
sentence all by itself, to set a description for the object currently being
talked about. This now works for a named value, too, provided that the
value is of a kind which has the &quot;description&quot; property. For example,
the Standard Rules now include the following:

	A scene has a text called description.
	When a scene (called the event) begins:
		if the description of the event is not &quot;&quot;,
			say &quot;[the description of the event][paragraph break]&quot;.

which enables any scene to have a description text, which is printed when it
begins. For example, we could write:
	
	Arrival is a scene. &quot;There's a flourish of trumpets.&quot;

(g) Adjectives can now be given specific definitions for named values.
(Previously they could be defined for any kind and for any specific object,
but not for specific values in general.) This allows, e.g.:

	A colour is a kind of value. The colours are red, green and blue.
	Definition: red is subtle if the player is a woman.
	Definition: a colour is subtle if it is blue.

The first definition here takes precedence, of course, since it has the
more specific domain. If the player's a woman, the subtle colours are red
and blue; if not, just blue.

(h) The pronoun &quot;it&quot; can now mean either an object or a named value, whereas
previously it could only be an object. Thus:

	Colour is a kind of value. A colour can be zesty or flat.
	Mauve is a colour. It is zesty.

makes mauve a zesty colour. (The restriction to named values is because we
really don't want &quot;it&quot; to mean 63, or the text &quot;frog&quot;, etc., just because
such a value has been mentioned in a previous sentence.)


It's now possible to have a topic valued property, that is, a property whose
content is a topic. (This is possibly useful when defining things or values
using a table, one of whose columns holds topics.)


The kinds &quot;figure name&quot;, &quot;sound name&quot; and &quot;external file&quot; can all now have
properties. For example:

	File format is a kind of value. The file formats are plain
	text, HTML and CSS. An external-file has a file format.
	
	The File of Ghosts is HTML.

Similarly, all three can be understood in commands. This is likely to be
useful only for testing purposes, but that's a good enough reason to
provide it.


The either/or property &quot;initially carried&quot; is withdrawn, though sentences
such as:
	
	The umbrella is initially carried.
	
continue to work, so it's likely that nobody will notice any difference. (The
word &quot;initially&quot; is redundant here; this property goes back to the early
days of Inform, when sentences mentioning the player were more restricted.)


Previously, certain core Inform properties had the anomalous behaviour that
if they were not explicitly defined then they could be read but not written,
and would show up as not provided - for instance, the &quot;description&quot; of a
thing, or the &quot;carrying capacity&quot; of a container. The same wasn't true for
new properties created within the source text. This anomaly, which came out
of Inform 6 memory economies now of very little purpose, is revoked. For
example, a thing with nothing special about it now has the description &quot;&quot;
(an empty text) rather than not providing a description at all; this means
that, for example, the test

	if the description of R is &quot;&quot;, ...

will now work correctly in the case where R is a room whose description has
never been specified.


It used to be legal, but deprecated, to create a property like so:

	An elevator has a number that varies called maximum capacity.

The &quot;that varies&quot; is redundant here, and confusingly similar to the syntax
for creating variables. None of the Examples has ever used this syntax, and
most users probably weren't aware it was allowed. Well, it isn't any more.


Inconsistencies to do with inherited properties of values are now more
consistently checked: e.g.,

	Colour is a kind of value. The colours are red, blue and green. A colour
	can be vivid or drab. A colour is always vivid. Green is drab.

now produces a problem message, as it clearly should.


11. SCENES

Up to now, every scene has had a &quot;when S begins&quot; and &quot;when S ends&quot; rulebook,
but there has been no way to express rules generalising about scenes. We
can now write, e.g.:

	A scene can be bright or dim. A scene is usually dim. Dawn is a bright scene.

	When a scene which is bright ends: say &quot;So passes the bright [scene being changed].&quot;

	When a recurring scene begins: say &quot;Groundhog Day!&quot;


Scenes can now be understood in commands, which may be useful for testing. 


The built-in Entire Game is not supposed to be modifiable - that is, it can't
be made to begin or end when other scenes do. This is now enforced with a
problem message.


The Scenes index is now more helpful in explaining Entire Game, and also marks
which scenes are recurring (and this now includes Entire Game).


12. RULEBOOKS

&quot;When... begins&quot; and &quot;when... ends&quot; are scene based rulebooks, meaning that they
take a parameter which is a scene. Inform has always had object based rulebooks,
but in the past that's been the only kind allowed here; Inform now allows, e.g.:

	Grading is a number based rulebook.
	
	Grading 5: say &quot;It's five. What can I say?&quot; instead.	
	Grading an odd number (called N): say &quot;There's something odd about [N].&quot; instead.
	Grading a number (called N): say &quot;Just [N].&quot; instead.
	
	When play begins:
	repeat with N running from 1 to 10:
		say &quot;Grading [N]: &quot;;
		consider the grading rulebook for N.

which produces:

	Grading 1: There's something odd about 1.
	Grading 2: Just 2.
	Grading 3: There's something odd about 3.
	Grading 4: Just 4.
	Grading 5: It's five. What can I say?
	Grading 6: Just 6.
	Grading 7: There's something odd about 7.
	Grading 8: Just 8.
	Grading 9: There's something odd about 9.
	Grading 10: Just 10.

(A technicality: The familiar IF rulebooks like &quot;instead&quot; are all based on
actions, not values, so it looks as if they can't fit into this system; but
they can, because the Inform kinds system treats that as being based on
the kind &quot;action name&quot;.)


There used to be three ways to describe rulebooks:

	rulebook    object-based rulebook   action-based rulebook

(though the last two could only be used at the moment of creation). But now
we ought to use one of these forms:

	rulebook
	K based rulebook
	rulebook producing L
	K based rulebook producing L

Here K is the kind of value we're basing the rulebook on. If this is omitted,
a test like &quot;(R - rulebook)&quot; will match any basis; and a creation like
&quot;Drum summons rules is a rulebook.&quot; will use the basis &quot;action name&quot; - in other
words, will make an action-based rulebook. L is the kind of value produced
(see below) - again if this is unspecified in matching, it can be anything;
if it's unspecified at creation time, it will be &quot;nothing&quot;. Thus

	Drum summons rules is a rulebook.

is equivalent to

	Drum summons rules is an action name based rulebook producing nothing.

The old syntaxes &quot;object-based rulebook&quot; and &quot;action-based rulebook&quot;, with
hyphens, are still allowed, to avoid breaking existing source text. But
&quot;object based rulebook&quot; and simply &quot;rulebook&quot; are now preferred.


The other kind associated with a rulebook is the kind of value it produces,
though for the great majority of rulebooks this is &quot;nothing&quot; - they don't
produce values. (None of the rulebooks created by the Standard Rules do, and
there's only one such across the whole of the Examples.) In past builds, this
produced value has to be an object, but that wasn't checked, making this
little-used feature decidedly rickety.

Making it safe has meant changing the syntax, and that will mean altering
any existing source text which uses such rulebooks. The one Example we had
to change (&quot;Feline Behavior&quot;) read, in part:

	The cat behavior rules is a rulebook.
	[...]

	Every turn:
		consider the cat behavior rules;
		if rule succeeded:
			let the destroyed object be the result of the rule;
			[...]

It now reads:

	The cat behavior rules is a rulebook producing an object.
	[...]
	
	Every turn:
		let the destroyed object be the object produced by the cat behavior rules;
		if the destroyed object is not nothing:
			[...]

Put more formally, the following phrases have been withdrawn:

	rule fails with result (O - an object)
	rule succeeded with result (O - an object)
	rule failed with result (O - an object)
	result of the rule

A rulebook can now only produce a value if it succeeds; and only if it was
declared as producing a value; that value can have any kind, and this is
enforced by Inform; and it can only be obtained if the rulebook is considered
using the new phrases

	the K produced by RB
	the K produced by RB for V

(the second being used if the rulebook RB is based on some value, and V is
the one being supplied here).


It used to be the case that a rule was not allowed to use a named rulebook
outcome unless it was filed in a rulebook which recognised this. What's now
true is that it's not allowed to use a named outcome if it's filed in a
rulebook which doesn't recognise this. The difference is subtle, but it
means that this combination:

	Does the player mean removing something not worn by the player from
		(this is the unlikely to mean removing unworn things rule):
		it is unlikely.

	The unlikely to mean removing unworn things rule is not listed in any rulebook. 

...is now legal, whereas previously it would have thrown problem messages.


Finally, and unrelatedly, the logic Inform uses to decide what order to place
rules into rulebooks has been slightly improved. This is something we're
always wary of tinkering with, but the change means that a domain consisting
of a kind K together with one or more adjectives will now be considered
more specific than a kind L together with the same adjectives, if K is itself
a kind of L. For example, suppose we write:

	An envelope is a kind of container.

We then write:

	[R1] Before printing the name of a closed envelope while listing contents:
		do nothing instead.

	[R2] Before printing the name of a closed container while listing contents:
		say &quot;closed &quot;.

In previous builds of Inform, [R1] and [R2] were considered to have equal
specificity, so that the order of their effect would be the order in which
they were defined; in other words, they will only have the effect intended
by the writer of the above (Kathleen Fischer, as it happens) one way around.
In this build, [R1] is considered more specific than [R2], and always takes
precedence over it, regardless of definition order in the source text.


13. INFLECTIONS

(a) Previous builds generated plurals with a very crude algorithm (for instance,
&quot;day&quot; pluralised as &quot;daies&quot;); this sloppiness was mitigated by the face that
the user can specify plurals explicitly:

	The plural of ox is oxen.

Inform's default pluralisation method is now a form of Conway's algorithm,
and this should make most uses of &quot;The plural of...&quot; redundant now. For
example, the following now work:

	A wolf is a kind of animal. Two wolves are in the Stable.

and similarly for oxen, geese (but mongooses), sheep, wildebeest, bream and so
forth among animals alone; Inform constructs plurals such as vertebrae, quartos,
wharves, phenomena, jackanapes and smallpox correctly. In cases where a noun has
both a modern and classical plural, Inform prefers the modern form, so brothers,
not brethren, and cows, not kine. In the spirit of old-school interactive
fiction, Inform uses Tolkien's invention dwarves, not dwarfs, as plural of dwarf.

&quot;The plural of...&quot; continues to work, of course, and is still useful for
cases such as:

	The plural of brother in law is brothers in law.

Another improvement is that the new pluralizer respects capitalization, which
the old one did not:

	A Rolex is a kind of thing. The player carries two Rolexes.

would be understood, but an inventory listing would print as &quot;two rolexes&quot;.
It now prints as &quot;two Rolexes&quot;.

(b) In similar vein, a more careful algorithm derived from a pronunciation
dictionary is now used for choosing between &quot;a&quot; and &quot;an&quot; when Inform has to
make a guess; thus an honorary doctorate, an FBI windcheater, a U-boat,
a ouija board, a ukiyo-e print, among many others. But this change will be
less visible since Inform doesn't often have to guess; it will mainly show
in problem messages (where Inform will no longer complain that a value
should have been &quot;an use option&quot; or &quot;an Unicode character&quot;, for example).

(c) Finally, the method used to guess past participles from present participles
has been improved by the inclusion of some 460 irregular verbs; for example,
catching to caught, fleeing to fled, crossbreeding to crossbred. This means
that the &quot;with past participle...&quot; syntax in action definitions now won't
be needed anywhere near so often, though of course it still works. For
example,

	Weaving is an action with past participle woven, applying to one thing.

can now simply be

	Weaving is an action applying to one thing.

A few cases are ambiguous; Inform prefers &quot;got&quot; to &quot;gotten&quot;, but it's unlikely
to arise since in most IF situations &quot;getting&quot; is not an action - instead
&quot;get&quot; is synonymous with &quot;take&quot; and &quot;taking&quot; is the action.


14. MINOR NEW FEATURES

The interpretation of conditions which combine Inform's two past-tense syntaxes
has been changed. Thus,

	Every turn when we have waved the candle at least twice: ...

is legal, but - reading strictly by the specification, as previous builds did -
&quot;we have waved the candle at least twice&quot; could never be true; it implied
two or more distinct periods in which it was true that &quot;we have waved the
candle&quot; was true, with at least one intervening period in which it was false.
Such a situation can never come about. In this build of Inform, we read the
condition &quot;we have waved the candle at least twice&quot; to be counting actions,
not counting periods, which is far, far more likely to be what was meant.


It has always been possible to indicate map connections using the direction
alone (the origin being understood as the room being discussed), but up to
now, only in the form &quot;Direction is Target&quot;, like the second sentence here:

	The Temple is a room. North is the Approach. The Sphinx is east.

The third sentence now works as expected: the Sphinx being east of the Temple.


The serial comma is now allowed in sentences like:

	A room can be lofty, regular, or poky.


Inform provides two ways to make headings hold source text whose use relates
to an extension. One is to say something like

	Part 1a - Alternative Leaps (in place of Part 1 - Leaps in Jumping by Eric Eve)

which says that what follows should be used instead of what's in the extension;
the other is

	Chapter 1P - Sidling (for use with Plurality by Emily Short)
	...
	Chapter 1NP - Sidling (for use without Plurality by Emily Short)
	...

giving source text to be used depending on whether the extension is being
included or not. In past builds, these two features were forbidden to &quot;nest&quot;;
in this build, it's only the first kind which can't &quot;nest&quot;. (That is, once
a chunk of text has been used in place of an extension's text, it can still
contain subheadings &quot;for use with&quot; or &quot;for use without&quot;; but it can't contain
subheadings &quot;in place of&quot;.)


In previous builds, the &quot;Options.txt&quot; file (if present) was allowed only to
contain use options - that is, sentences such as &quot;Use American dialect.&quot;
It is now allowed also to contain &quot;Test ...&quot;s and release instructions, so
for example the following is now a valid &quot;Options.txt&quot;:

	Use American dialect.
	Test fish with &quot;fish/fish with pole/angle&quot;.
	Release along with source text.

To recap, &quot;Options.txt&quot; is intended mainly for classroom use, in setting
up a standard configuration on multiple machines. Here the instructor can
make sure the Release button will do what she would like, and can arrange
for each student's copy of Inform to respond to given Test commands: for
instance, if the class has an assignment to create a simulation of a camera,
the instructor could set up &quot;Options.txt&quot; so that TEST CAMERA would run
through some commands the camera ought to respond to.

(The bug causing &quot;Options.txt&quot; to obstruct the bibliographic titling sentence
at the top of the visible source text has also been fixed; and a problem
message has been added for trying to do forbidden things with &quot;Options.txt&quot;.)


The participles &quot;worn&quot;, &quot;carried&quot; and &quot;held&quot; are now given additional
definitions in the Standard Rules as adjectives applying to things:

	Definition: a thing is worn if the player is wearing it.
	Definition: a thing is carried if the player is carrying it.
	Definition: a thing is held if the player is holding it.

Previous builds allowed some adjectival uses but not others, a little
inconsistently; for example, the following now works, but previously did not:

	A diamond bracelet is here. It is wearable. The description is
	&quot;It sparkles [if worn]on your wrist[otherwise if carried]in your
	hand[end if].&quot;


The adjectives &quot;on-stage&quot; and &quot;off-stage&quot; can now be made true using &quot;now&quot;,
so, for instance, &quot;now the diamonds are off-stage&quot; is equivalent to &quot;remove
the diamonds&quot;. (If we say &quot;now the diamonds are on-stage&quot; and they already
were, nothing happens; if they weren't, they are moved to the current
location.)


There are three new forms of &quot;[one of]&quot;:

	&quot;Maybe the victim is [one of]Adam[or]Bertrand[or]Carlos[then purely at
		random].&quot;
	&quot;Maybe the murderer is [one of]Colonel Mustard[or]Professor Plum[or]Cardinal
		Cerise[then at random].&quot;

The first means that the alternatives are chosen in sequence until all have
been seen, but that after that they are chosen uniformly randomly. The
second is similar, except that once randomness is reached, care is taken to
avoid the same choice coming up twice running.

The third is really a shorthand form:

	&quot;The screen door squeaks loudly as when you open it. [first time]Well,
	you'll get used to it eventually. [only]&quot;

This is exactly equivalent to

	&quot;The screen door squeaks loudly as when you open it. [one of]Well,
	you'll get used to it eventually. [or][stopping]&quot;;

but easier to read.


Inform, like Python and some other languages, uses indentation from the left
margin to show how phrases are grouped. In past builds, the practical limit
was 9 tab stops in, though this wasn't very clearly explained and the problem
message if exceeded was cryptic. The limit is now raised to 25 and a better
problem message has been created.


The phrase &quot;repeat with V running from X to Y&quot; previously worked only when X
and Y were numbers; it's now allowed for any arithmetic or enumerated values,
so

	repeat with counter running from 1 to 10:
		...
	repeat with counter running from 4 PM to 4:07 PM:
		...
	repeat with counter running from orange to indigo:
		...

are all allowed (supposing that we have a colour kind whose values are, say,
red, orange, yellow, green, blue, indigo and violet).


The phrases for making entries in a table blank have been made more consistent:

	blank out (table entry)
	blank out the whole row
	blank out the whole (column) of (table)
	blank out the whole of (table)

(The last two abilities are new.)


The phrases for altering the length of a list are worded using &quot;entries&quot;;
for example, &quot;truncate L to 10 entries&quot;. It's now legal to use the singular,
&quot;truncate L to 1 entry&quot;, too.


Previous builds allowed rules in the &quot;printing a parser error&quot; activity to
test which error had occurred using rather clumsy fixed-wording phrases:

	if parser error is can only do that to something animate: ...

These have been withdrawn. For this build, the following should be used
instead:

	if the latest parser error is the can only do that to something animate
		error: ...

This is tidier since it is a standard comparison. A new kind of value,
&quot;command parser error&quot;, exists to hold the possibilities; &quot;can only do that to
something animate error&quot; is one of these. (The others are listed on the Kinds
index page. They are all worded exactly as before, with the addition of the
word &quot;error&quot; at the end, as in this case.) The advantage of the new system,
aside from getting rid of 19 clumsy phrases, is that &quot;latest parser error&quot;
is now a variable; the value can be said, or stored, and so on. This is all
much more flexible.


In the startup rulebook, the first two rules - in fact, the first two rules
every Inform story file runs - have been transposed. So the initialise memory
rule now happens before the virtual machine startup rule, not vice versa.
Because the latter rule runs the &quot;starting the virtual machine&quot; activity, the
effect is that we sacrifice a little bit of that activity's ability to be
the very first thing run; but we gain the ability for this activity to use
indexed text, stored actions, and similarly complex data, since those depend
on memory having been initialised.


There is now a way to define an adjective in terms of an Inform 6 routine
which is more capable, since it can not only be tested, but also made true
or false using &quot;now&quot;. For example:

	Definition: a scene is crucial if I6 routine &quot;SceneCrucial&quot; makes it so
		(it is essential to winning).

This is very similar to the existing syntax:

	Definition: a scene is vital if I6 routine &quot;SceneVital&quot; says so
		(it is essential to winning).

(a) Whereas &quot;SceneVital&quot; is just a test, &quot;SceneCrucial&quot; is called with two
arguments: SceneCrucial(S, -1) tests whether the scene is crucial or not and
returns true or false; SceneCrucial(S, true) must make it true; and
SceneCrucial(S, false) must make it false.

(b) If the adjective is defined over a kind of values stored in block form
on the heap, S is passed as a pointer to the block, not as a fresh copy.


Inform's automatically generated documentation on included extensions has
always listed names of kinds, objects, variables and so on; it now also lists
names of use options.


The maximum complexity of a single &quot;say&quot; - basically, the maximum number of
chunks it can contain, some being fixed text, others being substitutions -
has been increased from about 400 to about 4000. (In practice this removes the
limit altogether, since the maximum length of a single quoted text gets in
the way first. Having any maxima at all is unfortunate, of course, but it
enables the compiler to run faster, and makes it easier to catch punctuation
mistakes in the source.)


When Problem messages are reported inside an extension, Inform typically says
under what headings they occur, but doesn't make clear which extension is
involved, which can be a nuisance if many extensions are in use. In this build,
Inform explicitly names the extension.


A new use option, &quot;Use no deprecated features&quot;, puts Inform into a mode where
it issues problem messages for syntaxes which are currently allowed but which
we expect to withdraw in future. At present this is used only with phrases;
see the Phrasebook index, where deprecated usages are marked with a red
warning triangle.


15. WORD LIMITS ON RELATIONS, VERBS, PREPOSITIONS AND DIRECTIONS

Most constructions in Inform can have quite long names. But in previous
builds, much tighter limits were placed on relation names, parts of verbs,
the wording of prepositions, and the names of directions.

					Example         Old maximum     New maximum
Relation name       containment     1               X - 1
Part of verb        wears           1               X - 4
Preposition         across from     3               X - 2
Direction           northwest       3               X - 2

The intention is that there should be no practical limit in any of these
cases; the current value of X is 32, which it's very difficult to see any
plausible source text ever needing to exceed.

For example, this is now allowed:

	The verb to cover oneself with (he covers himself with, they cover themselves
	with, he covered himself with, he is covering himself with) implies the
	wearing relation.

	Peter is covering himself with a tent-like raincoat.

Here each part of the verb is three words long; the maximum is now 28.
Similarly:

	The verb to be very far away from implies...

is a preposition four words long, which previous builds would have rejected.
The limit is now 30.

	Adept sensitivity relates one person to one vehicle.
	The verb to imagine (he imagines, they imagine) implies the adept sensitivity
	relation.
	Peter imagines the Astral Chariot.

Here we have a relation, &quot;adept sensitivity&quot;, which is two words long; the
limit is now 31.

And if you should want:

	Just the tiniest smidge off magnetic north is a direction. The opposite of
	just the tiniest smidge off magnetic north is just the tiniest smidge
	off magnetic south.
	Just the tiniest smidge off magnetic south is a direction. The opposite of
	just the tiniest smidge off magnetic south is just the tiniest smidge
	off magnetic north.

then knock yourself out.

&gt;--&gt; Note that when a direction is created, a relation is automatically created
to represent being in that direction; for instance, &quot;north&quot; creates what is
now called the &quot;mapping north relation&quot;. It used to be called the &quot;mapping-north
relation&quot;, with a hyphen, to squeeze into the former requirement that relations
have one-word names. It's unlikely that much source text makes direct use of
these relations by name, so the change will probably not be noticed.


16. ACTIONS IN THE STANDARD RULES

Some of the small design decisions about actions in the Standard Rules go back
to accidents of implementation in the early 1990s (if not earlier still), and
have no rationale except custom and practice. We are very conservative about
changing them, all the same, since anything done here will affect essentially
every source text compiled with Inform. But for this build we have made a
systematic search for small changes, unlikely to cause much disruption, but
which will improve the playing experience.

(a) In its earliest works, Infocom introduced the now-traditional commands
VERBOSE, BRIEF and SUPERBRIEF for the player to choose how much detail to
see in room descriptions: the whole thing, even for a room revisited; the
whole thing the first time, but an abbreviated form after that; or always
only the abbreviated form. The default mode was BRIEF, the middle of these
positions.

In 1993, when Inform made its debut, this was still conventional, but since
then authors and players have increasingly found VERBOSE mode more natural.
Even a tiny iPhone screen shows more text that a 1980s micro did, and printing
time is now essentially zero, whereas a long description could take five to
ten seconds to print back then. Inform's fellow IF development system TADS
has long since used VERBOSE as the default; from this build, Inform is finally
following suit. So, farewell to default BRIEF mode (1981-2010).

Three new use options exist to set the default behaviour:

	Use VERBOSE room descriptions.
	Use BRIEF room descriptions.
	Use SUPERBRIEF room descriptions.

So if this change causes problems, simply add &quot;Use BRIEF room descriptions.&quot;
to restore the old behaviour. For us, it changed the blessed transcripts of
45 out of about 440 examples, but never such that we minded the change.

(b) Inform has always been liberal in how it reads the word ALL in commands
typed by players - TAKE ALL really does mean all - but has given authors
the option to change this by writing rules for the &quot;deciding whether all
includes&quot; activity. As from this build, the Standard Rules include three
such rules to strike out people, scenery and things fixed in place. Thus:

	Studio is a room. Jenna is a woman in the Studio. Kenneth is a man in the
	Studio. The peacock, the script and the stage set are in the Studio.
	The stage set is fixed in place. The curtains are scenery in Studio.

the traditional reply to TAKE ALL would be:

	Jenna: I don't suppose Jenna would care for that.
	Kenneth: I don't suppose Kenneth would care for that.
	peacock: Taken.
	script: Taken.
	stage set: That's fixed in place.
	curtains: That's hardly portable.

With the new default conventions, it's just:

	peacock: Taken.
	script: Taken.

The new rules are named, of course, and can be cancelled if unwanted (see the
Rules index):

	exclude scenery from take all rule
	exclude people from take all rule
	exclude fixed in place things from take all rule

(c) In this release, the Inform parser changes the default way in which it
asks what is meant by an ambiguous noun such as FROST. It can ask the
question in two different forms:

	(1) Who do you mean, Jack Frost or Jill Frost?
	(2) Which do you mean, Jack Frost or Jill Frost?

In the past it has used form (1) if the token being parsed was &quot;[someone]&quot;,
and (2) otherwise. This wasn't very accurate, as plenty of other tokens might
expect a person rather than a thing to be typed; but in English, it didn't
matter very much, because &quot;which&quot; wasn't too bad for people. In German, it
made a bigger difference, and at Christian Blümke's suggestion we are
incorporating a change worked out by German Inform users: message (1) is used
if all of the possible meanings refer to people, and message (2) otherwise.

(d) We have withdrawn the:

	examine undescribed containers rule

and replaced it with two new rules:

	examine containers rule
	examine supporters rule

The original rule converted the action of examining a container which had
no description text into a searching action instead. Sometimes this was a
sensible idea, but not always. Examining and searching are different actions,
and why should it make a difference whether there's any description or not?
(The original idea was to avoid a misleading &quot;You see nothing special about...&quot;
reply about a container which, in fact, contained interesting items. But
however pragmatic that is, it's not very convincing as a reason.) Moreover,
examining something requires only a line of sight to it, whereas searching
requires that the actor can touch the item in question; so converting one
into the other violates the spatial world model in some cases.

The new rules are (equivalent to) this:

	Carry out examining (this is the examine containers rule):
		if the noun is a container:
			if the noun is open or the noun is transparent:
				if something is in the noun:
					if the description of the noun is not &quot;&quot;:
						say &quot;[the description of the noun][paragraph break]&quot;;
					say &quot;In [the noun] [is-are a list of things in the noun].&quot;;
					stop the action.

and similarly for supporters, but without transparency being an issue.

(e) We have withdrawn the:

	examine described devices rule
	examine undescribed devices rule

and replaced them with the:

	examine devices rule

which works much as the rules for containers and supporters do: the
description paragraph first, if there is one, then the status of the device
(&quot;The hot tap is switched on.&quot;).

(f) The command &quot;switch [something]&quot; is now understood as switching off if the
item in question is currently a device switched on, and vice versa. (Previously
it would always be understood as switching on.)

(g) The command &quot;fix&quot; is no longer a synonym for &quot;tie&quot;. (There is too much
confusion of the two senses - &quot;fix&quot; in the sense of affix may mean &quot;tie&quot;, but
&quot;fix&quot; in the sense of repair does not.)

(h) The command &quot;get down&quot; is now understood as exiting. (A natural thing to
type when, say, at the top of a library stepladder.)

(i) The command &quot;get in&quot; is now understood as equivalent to typing just
&quot;enter&quot;. In general &quot;enter&quot; requires a noun - there could well be a choice
of enterable things available - but a rule new in this build, the

	find what to enter rule

automatically infers an enterable noun in the current location, if one is
available. (It has no effect if the player has typed something explicit, such
as &quot;enter cage&quot;.)

(j) The command &quot;look [something]&quot; is understood as examining, as if it had
read &quot;look at [something]&quot;. (This is not so much aimed at retro gaming fans
who want to recreate the full 1982 experience, but at novices, who often seem
to type commands like this.)

(k) In previous builds, the going action would be stopped by the

	can't go through closed doors rule

if the actor would need to pass through a closed door. That remains true, but
if the door is openable then the rule now tries opening the door first - thus
allowing players to walk through ordinary doors without having to type
explicit &quot;open door&quot; commands. (The popular &quot;Locksmith&quot; extension has always
provided this; anyone using that extension will see no change.)

(l) A new rule for the going action, the

	stand up before going rule

causes an actor to try getting off a supporter before going in a given
direction. (A rule which was previously an optional extra, demonstrated by the
&quot;Hagia Sophia&quot; Example. Use of the &quot;Rideable Vehicles&quot; extension unlists this
rule, i.e., abolishes it, since this extension makes supporters into mobile
things which can indeed be used to go from place to place.)

(m) The &quot;putting it on&quot; and &quot;inserting it into&quot; actions require the item
being put or inserted to be held by the actor; if it isn't, one of the rules:

	can't put what's not held rule
	can't insert what's not held rule

will stop the action. In this build, they first try to take the item, and
only stop the action if that fails.

(n) A quaint convention going back to the mid-1980s is that an inventory
listing changes the meaning of pronouns like &quot;it&quot;. Thus

	&gt; INV
	You are carrying a pineapple.
	&gt; EAT IT

...would result in &quot;it&quot; meaning the pineapple. We think it's time to give up
on this convention, which causes nothing but confusion. Accordingly, we have
deleted the rule responsible:

	use inventory to set pronouns rule

(o) The run-time parser's handling of commands with commas in has been
changed; previously, a command such as

	&gt; FRED, GO NORTH

would be parsed as an instruction for Fred to do something only because
FRED was not recognisable as a verb. This turned out to be unfortunate for
story files with Japanese characters called Takemoto (&quot;Take&quot; for short), or
for anyone called Don (a verb for putting on clothes), and so on. The
parser now considers the command to be an instruction provided that the
text up to the comma matches the name of a possible actor; this avoids
(most) false positives such as

	&gt; TAKE BELL, BOOK AND CANDLE

(p) The &quot;exiting&quot; action has long had a variable called the &quot;container
exited from&quot;, so that it's possible to write rules depending on what is
being got out of. This can now be referred to using &quot;from&quot;, as in the
following example:

	After exiting from the Mini Cooper:
		say &quot;You painstakingly unpack your limbs from the tiny car.&quot;

(q) The &quot;giving&quot; action has a new rule, imitating a similar one for dropping:

	can't give clothes being worn rule

(r) The &quot;removing it from&quot; action has an exemption in the &quot;can't remove from
people rule&quot;, so that in the event that the actor is trying to remove something
from himself, this is converted to a taking off action. (For instance, if the
player is involuntarily wearing a monkey on his back, and types REMOVE
MONKEY FROM ME.)

(s) The commands TAKE ... OFF and PUT ... ON are now understood as taking off
and wearing, respectively, just as the commands TAKE OFF ... and PUT ON ...
always have been.


(Translators may need to note that as a result of these changes three library
messages, going action number 3, 4 and 5, have been removed; but there are
also three new ones, going action number 27 and 28, and Miscellany 75, which
is &quot; The End &quot; in English, and is used to provide a generic ending message.)


17. DOCUMENTATION, PROBLEMS AND INDEX

Problem messages reformatted to give more information in case of complicated
ambiguities to do with phrases; and problems suppressed when they are
follow-on problems arising only because variables weren't created properly.
For example, this source text:

	Every turn:
		repeat with X running from 1 to &quot;fish&quot;:
			say &quot;Hello! [X].&quot;;
			let Y be X plus X;
			increase score by Y;

would throw four problem messages in previous builds, but now it throws only
one. Inform realises that the author intends to create X, and even though he
botched it, Inform suppresses what would otherwise be problem messages in the
next two lines; it further realises that the idea is to create Y as well, and
suppresses the problem message that the last line would otherwise lead to.


The Phrasebook index has been redesigned. Each phrase is now provided with
a &quot;plus&quot; icon which, when clicked, reveals full documentation of what that
phrase does, along with a link to the relevant page in the manual; and the
manual has similarly been redesigned to match the Phrasebook.

The Kinds index has been reorganised to reflect the new structure of the
kinds system in Inform.

The Contents index now includes links to the documentation for any extensions
included in the project being indexed.

Timed events have moved from the obscure sub-panel of the Rules index, where
they had previously languished unnoticed, to the Scenes index. They now
include cross-references for each event to the points in the source text
which trigger them.

The Scenes index now marks which scenes are recurring, and clarifies the role
of the special Entire Game scene.


18. DEPRECATED PHRASES

With this build, we take a first step towards removing a few features of the
Inform language which, in the light of experience, we regret having introduced.
A few syntaxes change with every major release, of course, but we plan a
bigger change next time, and are now preparing the way for this.

There are some 367 built-in phrase definitions in the Standard Rules. The
great majority will stay, of course, but we intend to remove 34 of these
phrases in the next big release of Inform. This will inevitably cause a
little disruption, so we've done three things to ease the way:

(a) Each phrase due to be removed is now officially &quot;deprecated&quot;, and marked
with a red warning triangle in the Phrasebook and in the documentation.
The documentation explains what to use instead.

(b) Deprecated phrases are not used in the Examples, except for a very few
cases where the only purpose of the Example is to show how to use the phrase
in question. They are similarly avoided by built-in Extensions, including the
Standard Rules.

(c) A new use option has been added:

	Use no deprecated features.

With this set, Inform will reject any of the deprecated phrases; so setting
this is a good way to see whether any existing source text is likely to give
trouble after the next release.

The deprecated phrases are a mixed bunch:

	say &quot;[contents of object]&quot;
	say &quot;[the contents of object]&quot;
	change (a stored value) to (value)
	change (object) to (property)
	change (object) to (enumerated value)
	delete (a table entry)
	if using the/-- (use option):
	if (a condition) then (a phrase)
	while (a condition) repeatedly (a phrase)
	while (a condition), (a phrase)
	ignore (rule)
	reinstate (rule)
	reject the result of (rule)
	accept the result of (rule)
	substitute (rule) for (rule)
	restore the original (rule)
	move (rule) to before (rule)
	move (rule) to after (rule)
	end the game in death
	end the game in victory
	end the game saying (text)
	resume the game
	if game is in progress:
	if game is over:
	if game ended in death:
	if game ended in victory:
	if it is before (time):
	if it is after (time):
	change the/-- player to (object)
	if in (object):
	award (number) point/points
	set pronouns from possessions of the player

Some of these are very familiar-looking, but almost all simply duplicate more
general constructions. &quot;award 5 points&quot;, for instance, is exactly the same as
&quot;increase the score by 5&quot;; &quot;change the time of day to 10 PM&quot; is the same as
&quot;now the time of day is 10 PM&quot;. Exotic forms of &quot;if&quot; and &quot;while&quot; are being
removed for simplicity's sake: people didn't use them much in practice.
That leaves two clusters of phrases - those for ending the game, and those
for procedural rules. With ending the game, we have adopted a more uniform
style of wording, and abolished the idea of &quot;death&quot; and &quot;victory&quot;:

	end the story
	end the story finally
	end the story saying (text)
	end the story finally saying (text)
	if story has ended:
	if story has ended finally:
	if story has not ended:
	if story has not ended finally:
	resume the story

The difference between ending and ending finally is that a final ending is
one where we don't expect the reader to play again, and can safely show him
menu options such as Infocom's traditional AMUSING (which suggests alternative
unlikely possible plays). Thus &quot;game&quot; becomes &quot;story&quot;, &quot;death&quot; becomes merely
the &quot;end&quot; and victory the &quot;final end&quot;. In the process, we gain the ability to
have a final ending with wording other than &quot;You have won&quot;; and the default
ending text is now &quot;The End&quot;, not &quot;You have died&quot;. Sic transit gloria mundi.

Procedural rules, on the other hand, definitely do provide functionality
which is not available otherwise by a simple rewording. When they go, they
will be a small loss. But after four years of Inform 7's public use, we
find that very few people use them, and then almost always in situations
where it would be just as good to use &quot;not listed in&quot; sentences instead -
the main use of procedural rules is to abolish some built-in rule, but
that can be done just as well by unlisting it.

The reason for removing procedural rules is that it will enable optimisations
of the code generated by Inform to get faster run-time performance, which we
expect to become a more significant issue in future - the time may come when
the majority of IF players are running the story file in a browser; perhaps
even a browser on a relatively slow-CPU mobile device, such as an iPad. We
also hope to bring down the writeable memory usage at run-time, which is an
issue for story files running on the Z-machine (though not for Glulx, where
memory is essentially unlimited). Besides this, procedural rules often
confused authors (hardly anybody knows the difference between &quot;follow&quot; and
&quot;consider&quot; - a difference which will be abolished), and they made the Index
a little misleading, since it displayed the structure as it was before
being manipulated.

So we have swallowed our medicine, and deprecated procedural rules. They
were cool, but not worth the cost.


19. MAINTENANCE

There are so many bug fixes that a miscellaneous list has become unwieldy,
so here they are categorised under the headings used by our new bug-tracker.
Note that the following list excludes fixes to built-in extensions such
as Locksmith or Metric Units: for those, see below.

19.1. Source text and punctuation

(*) Bogus times of day such as &quot;minus 6:23 PM&quot; are no longer recognised; &quot;minus&quot;
can only be used with relative times, as in &quot;minus six minutes&quot;.

(*) The I6 template reader has been made more forgiving of what it considers
malformed headings - marked by the use of an &quot;@&quot; character in the leftmost
column; some users ran into this by accidentally placing Z-machine or Glulx
assembly language, also marked by an &quot;@&quot; in I6, unindented on the left
margin of material included using &quot;(-&quot; and &quot;-)&quot;. The template reader will
now handle any such material correctly, and a more helpful problem message
is produced if it nevertheless runs into trouble because of a stray &quot;@&quot;.

19.2. Headings

(*) Bug fixed whereby it's impossible to use a heading to replace an existing
heading in an extension if that existing heading contains the words &quot;in&quot;
or &quot;by&quot; in its name; and problem messages related to heading tricks made
more explanatory.

(*) Part 3 of the Standard Rules now has slightly better section divisions,
making it easier to replace smaller chunks.

19.3. Extensions

-- -- --

19.4. Assertions and creations

(*) Bug fixed whereby &quot;There are ...&quot; sentences might fail if a number of things
were created with some modifying adjective, e.g. &quot;There are four closed doors.&quot;

(*) Bug fixed whereby a player declared to be a particular person would not
always be placed into relationships asserted for &quot;the player&quot;. For example,

	The player is a woman called Edna Marsh. The player holds a wrench.

...not resulting in Edna carrying the wrench.

(*) Problem message added to explain oddball mistakes like &quot;A thing is a waiting
receptacle if it is an open container.&quot;, which in previous builds were met
with a rather vague and unhelpful complaint.

19.5. Model world

(*) Bug fixed whereby generalising about the &quot;map region&quot; property could cause
an internal error; for instance,

	The map region of a room is usually Jaguar Creek Valley.

Setting &quot;map region&quot; is not the preferred way to put rooms into regions,
but the above did work in past builds (and the &quot;Permission to Visit&quot; extension
apparently made use of that); the practice is hereby legalised, and the World
index now properly maps the result.

(*) Bug fixed whereby the fast route-finding algorithm for finding routes through
the map (the default route-finder in Glulx, but only used if the &quot;Use fast
route-finding&quot; option is chosen in the Z-machine) would always use doors,
even when not allowed to, and would return 0 rather than -1 for a count of
the number of steps of an impossible route.

(*) Bug fixed whereby the fast route-finding algorithm for finding routes through
the map would sometimes return &quot;north&quot; as the &quot;best route from X to Y&quot; in cases
where no route exists, rather than returning &quot;nothing&quot;.

(*) Bug fixed whereby sudden movements of the player from a dark room into a
lighted one, which happen other than by the usual actions, could result in
the new room's description being shown twice over.

(*) Bug fixed (if it was really a bug) whereby the &quot;maximum score&quot; could not be
changed during play.

(*) Bug fixed whereby UNDO would be disallowed in a story where the &quot;advance
time rule&quot; had been unlisted, with Inform thinking that (since no time had
passed) there was nothing to UNDO back to.

(*) Problem message added to catch unused timed events. This is an arguable case,
because perhaps it could be said that it's legal to create timed events which
are never used. But it's a better idea to catch mistakes like this:

	At the time when supply of the air tank is -4: 
		end the game saying &quot;You have suffocated.&quot;

where the author believes incorrectly that the rule will fire when the
condition is true, whereas actually he has created a timed event with the
exotic name of &quot;supply of the air tank is -4&quot;.

(*) Problem message added (in place of internal error) when a door is said to
be &quot;south of nowhere&quot;, or for other such formulations involving &quot;nowhere&quot; as
the source of a map connection.

(*) Problem message added for non-thing objects being created inside or on top
of other objects. (The world model requires that the contents of a room must
be things, but earlier builds didn't check this; at run-time, strange things
could then occur.)

(*) Problem message added (in place of internal error) for making a direction
whose opposite does exist, but isn't a direction.

(*) Problem message added for misunderstandings like &quot;When the play begins...&quot;
instead of &quot;When play begins...&quot;.

19.6. Properties

(*) Bug fixed whereby Inform confuses a property of an object with a use of a
value phrase containing the word &quot;of&quot; - for example, misreading &quot;room
illustration of the location&quot; as an attempt to use the phrase &quot;room D of R&quot;
(for looking up the map) rather than an attempt to access a property called
&quot;room illustration&quot;.

(*) Bug fixed whereby property declarations such as &quot;A room that is dark can be
dangerous.&quot; would wrongly be accepted, but would have adjectives or qualifiers
such as &quot;that is dark&quot; ignored. (It's incorrect to make a declaration like
this because the owner of a property has to own it all of the time, no
matter what; it can't have it only when it's dark.)

(*) Bug fixed whereby adjectives declared in the form &quot;...if its P is V&quot; (which
check that a property P has value V) would always be false for text properties;
thus, &quot;Definition: a childhood memory is forgotten if its recollection is &quot;&quot;.&quot;
would fail to work.

(*) Bug fixed whereby antonyms of adjectives declared in a way which laid them
out as phrases, like so...

	Definition: A thing (called the item) is handy rather than useless:
		if the item is openable, decide yes;
		decide no.

...would fail to work: &quot;handy&quot; would work perfectly, but not &quot;useless&quot;, which
would in some circumstances produce I6 errors.

(*) Bug fixed whereby descriptions implicitly given to kinds are now taken as
being likely but not certain; as a result, the following is now possible,
whereas previously it was reported as a contradiction:

	A folding metal chair is a kind of supporter.
	&quot;The chair looks only moderately uncomfortable.&quot; 
	The small chair is a folding metal chair in test room.
	&quot;The chair looks painful to sit in.&quot;

(*) Problem message added for definitions which try to use &quot;or more&quot; or &quot;or less&quot;
with non-arithmetic values, e.g.,

	Definition: a person is cool if his callsign is &quot;dude&quot; or more.

(*) Problem message added to catch attempts to give properties to a set of owners
which changes during play, e.g.,

	Colour is a kind of value. The colours are red and green.
	A thing has a colour.
	Taste is a kind of value. The tastes are sweet and sour.
	A thing has a taste.
	The taste of a red thing is usually sweet.

(*) Problem message added (in place of internal error) for understanding a
property in the description of something, when the property is one whose
value is an object of a kind outside the usual spatial model (i.e., neither
room, thing, region nor direction).

(*) Problem message added (in place of what was in some circumstances an internal
error) when an either/or property is assigned using &quot;has&quot; instead of &quot;is&quot;,
e.g., &quot;The teddy bear has fuzzy.&quot;

19.7. Relations

-- -- --

19.8. Actions

(*) Bug fixed whereby variable declarations for actions whose names include the
words &quot;with&quot; or &quot;having&quot; (either not at the end, or not after &quot;it&quot;) would
produce spurious problem messages.

(*) Bug fixed whereby an action in which the player asks someone else to do
something, which then fails because the persuasion rules halt the process,
would result in &quot;reason the action failed&quot; not properly being set. (It's now
set to the identity of the persuasion rule which stopped the action.)

(*) Bug fixed whereby Inform would fail to recognise actions involving actors
whose names include words with an &quot;-ing&quot; suffix, and where the longhand
&quot;trying&quot; syntax isn't being used. Thus if somebody's full name is &quot;Regional
Training Officer Tina&quot;, Inform was failing to recognise &quot;Tina examining the
clipboard&quot; as an action, simply because of the word &quot;Training&quot; in her full
name. Inform now allows such readings in any case except where the action
verb is itself part of the actor's full name; thus, if there were an action
called &quot;training&quot;, Inform wouldn't like &quot;Tina training Kevin&quot;, which would
look to Inform like a row of names of people; and the author would have
to rephrase in the longhand form, &quot;Tina trying training Kevin&quot;.

(*) Bug fixed whereby actions out of world applying to a topic would have the
topic noun empty, rather than containing the text of the topic as they
should; for instance, in this combination:

	Helping is an action out of world applying to one topic.
	Understand &quot;help [text]&quot; as helping.

the command HELP RICHARD STRAUSS would fail to have the noun set to the
snippet RICHARD STRAUSS of the command, as would happen for an action
in world. This wasn't a deliberate restriction - it was a bug.

(*) Bug fixed whereby out of world actions in one pass of the turn sequence
rules could sometimes cause the next pass of the turn sequence to begin
as if we were still out of world, making it difficult to try in-world
actions before a command had been typed; this caused the following not
to work -

	This is the Luciano's actions rule: try Luciano singing.
	The Luciano's actions rule is listed before the parse command rule
	in the turn sequence rules.

- in the turn after a command like VERSION or VERBOSE.

(*) Bug fixed (or perhaps it's really that Inform's specification has been
clarified) so that a rule like this:

	Every turn jumping for three turns: say &quot;A demon appears!&quot;

does take effect if the player jumps twice, types SAVE, and then jumps a
third time; that is, the saving the game action does not interrupt the
count up to three. (Because saving the game is out-of-world, and so doesn't
take up a turn.) On the other hand, a rule like this is fine:

	Check requesting the pronoun meanings for the first time:
		say &quot;The PRONOUNS command is very useful. To explain: ...&quot;;
		continue the action.

since although &quot;requesting the pronoun meanings&quot; happens out-of-world and
can't take place for a number of turns, it does take place for a number
of times.

(*) Bug fixed whereby references to things having happened &quot;for exactly 0 turns&quot;
would fail to work, e.g.:

	if the rose has been visible for exactly 0 turns

(*) Bug fixed whereby &quot;try&quot;, when used to cause an out-of-world action by the
player during an existing action by somebody else, could sometimes cause a
consecutive in-world action by that other person to be misconstrued as
being out-of-world. For example:

	Instead of an actor waiting:
		try requesting the pronoun meanings;
		try the actor saying yes.

might result in the &quot;saying yes&quot; action being rejected as out-of-world and
thus unavailable to an actor other than the player.

(*) Bug fixed whereby before, instead or after rules would sometimes be included
on the Index pages for out-of-world actions, despite the fact that they
cannot affect these.

(*) Bug fixed whereby lists of actions would sometimes be misread if entries
were ambiguous as to which action was meant, e.g.,

	Instead of doing something other than waiting or examining or taking
	inventory or looking: ...

was misread as if &quot;taking inventory&quot; were simply &quot;taking&quot;.

(*) Problem message added to catch attempts to file rules about out-of-world
actions into the before, instead or after rulebooks (where they can have no
effect under any circumstances, since these aren't consulted for OOW actions).

(*) Problem message added to catch mixtures of in-world and out-of-world actions:

	Instead of requesting the pronoun meanings or taking inventory: ...

(*) Bug fixed whereby a stored action which involved a value would sometimes be
said incorrectly (though in other ways it was okay): for example,

	Factoring is an action applying to one number.
	...
		let the best idea be the action of factoring 15;
		say &quot;You consider [the best idea].&quot;;

would say the action as &quot;factoring -23145&quot;, or some other mysterious number.

19.9. Activities

(*) Bug fixed whereby global variables could not appear in &quot;... while ...&quot;
clauses to do with activities, so that this for instance would not work:

	For printing the name of the banana while listing contents of the player:
		say &quot;yummy banana&quot;.

...whereas the same thing with &quot;yourself&quot; instead of &quot;the player&quot; would work.
They now both do.

19.10. Rules and rulebooks

(*) A minor change which looks like a bug fix, but isn't, strictly speaking:
when a bare adjective is used as a condition attached to an action, as here -

	Instead of doing something when off-stage:
		say &quot;After the thrill of the spotlight, life seems not to exist.&quot;

- the adjective is now assumed to apply to the person performing the action.
(In this case that's the player, who can never be off-stage, so that the
message can't be said. But the principle is the important thing.)

(*) Bug fixed whereby compound conditions which included spurious additional
&quot;when&quot; or &quot;while&quot; words could cause Inform to hang, or crash; for example,

	Test Scene begins when the player is in the First Room or when the
	player is in the Second Room.

(It should be just &quot;or the player...&quot;, not &quot;or when the player...&quot;. Inform
now catches this with a more on-point problem message.)

(*) Bug fixed whereby rules using &quot;going nowhere in R&quot; for some room R, or
&quot;going somewhere in R&quot;, would fail to be matched correctly; so that this, for
example, wouldn't work:

	Instead of going nowhere in the Home: say &quot;You'd just get homesick.&quot;

(*) For clarity's sake: rules written thus...

	Instead of yourself going: ...

where the actor is explicitly named as &quot;yourself&quot; (or &quot;the player&quot;), now work
as the writer might expect (i.e., as if it just read &quot;Instead of going: ...&quot;).
Hard to know whether this is a bug fix or not - arguably it's less consistent
this way, because the convention is that an action is by the player unless
a specific actor is named. But what matters is that the sense should
be right for the reader.

(*) Bug fixed whereby rules depending on something in the past tense being true
over a period which is itself in the past would sometimes not fire. For
example,

	Before doing something when the hat has been worn for three turns: ...

(*) Bug fixed whereby an I7 name given to a rule defined by an I6 routine would
sometimes be confused with the name of a new object, if used as the value
of a property, or in some other assertion sentence contexts.

(*) Problem message added (in place of sometimes mysterious other problem
message(s)) to catch attempts to use &quot;called&quot; to make a name which already
has another meaning and where confusion may occur. For example, an attempt
to write:

	Instead of giving something (called the number): ...

cannot possibly end well, but Inform would previously allow the calling, then
throw problem messages later on when it was used.

19.11. Lists

(*) Bug fixed whereby lists of lists of indexed texts (and similar constructions)
could lose their identities when printed.

(*) Bug fixed whereby accesses of entries from very long lists, when performed
repeatedly, could become unacceptably slow.

(*) Bug fixed whereby sorting a list of objects using &quot;sort L in P order&quot;,
where P is a property whose value is an indexed text, would produce
incorrect results.

(*) Bug fixed whereby sorting a list of indexed text initialised from a list
of literal texts would produce incorrect answers. (Actually it was the list
which was incorrect, but in a way which only affected sorting.)

(*) Bug fixed whereby peculiar messages about being unable to cast or copy block
values would sometimes appear when passing a list of K to a phrase which
expects its token to have kind &quot;list of objects&quot;, but where K is something
more specific; for example, passing a list of rooms where a list of objects
was expected.

(*) Two bugs fixed whereby Inform would be picky about whether or not the contents
of, say, a constant list of things were valid, in cases where the entries
were not obviously things but would be proved to be by the end of compilation;
this affected initial values of properties and of global variables. For
example, the following threw a spurious problem message in earlier builds:

	The Place is a room. Hall is south of the Place.
	The destination wishlist is a list of rooms that varies.
	The destination wishlist is { the Place, the Hall }.

The problem here was that the Hall wasn't known to be a room at the time when
the constant list was read; this has now been resolved.

19.12. Tables

(*) The maximum number of columns per table has been raised from 20 to 99.
(There are run-time implementation reasons why a maximum has to exist, but
99 ought to be enough.)

(*) Bug fixed whereby table entries containing literal values would sometimes be
confused with names of objects, if they could also be read as part of an
object's name: for example, if an object called False Door existed, then the
table entry &quot;false&quot; might be misread as this object rather than as the
truth state for falsity.

(*) Bug fixed whereby tables used to define things or values could not have
a column which contained stored actions, e.g., like so:

	A task is a kind of value. Some tasks are defined by the Table of
	Unfinished Tasks.
	
	Table of Unfinished Tasks
	task				relevant action
	boulder-touching	touching the large boulder
	boulder-recovering	taking the large boulder

(*) Bug fixed whereby, on Glulx only and then only sometimes, looking up a
value corresponding to another value would produce spurious &quot;programming
errors&quot; on screen in cases where the column looked at included blank entries.

(*) Bug fixed whereby attempts to use &quot;an X listed in table T&quot;, in the context
of a value, would wrongly be allowed even where this doesn't identify which
value is meant.

(*) Bug fixed whereby the &quot;number of rows in T&quot; would produce a more or less
random answer if T were the empty table used as a default value of the
&quot;table name&quot; kind; and this could cause &quot;number of filled rows in T&quot; to
hang, in unlucky cases.

(*) Bug fixed whereby increasing or decreasing a table entry by a given amount
in fact set it to that amount (but only in cases where the entry was looked
up with &quot;corresponding to&quot;).

(*) Bug fixed whereby various sorting tricks with tables would fail if the
column sorted on contained indexed text. Inform now requires such tables
to be sorted before being iterated through using &quot;repeat through T in
C order&quot;, where C is a column holding indexed text, and issues a helpful
run-time problem message explaining what to do; previously it simply gave
incorrect results.

(*) Bug fixed whereby sorting tables in random order would be slow if they
contained large numbers of blank rows.

(*) Bug fixed whereby sorting a table on a column which contained some blank
entries (other than as part of blank rows) would move these to the top,
rather than to the bottom, of the table.

(*) Problem message added for attempts to look up a value corresponding to a
key in a table when the kind of the column concerned makes that impossible,
e.g., for &quot;the price corresponding to a shopkeeper of 4 in Table 1&quot; where
the shopkeeper column doesn't contain numbers, so that 4 can't possibly be
there.

19.13. Scenes

(*) Bug fixed whereby scene endings predicated on the player's command would
sometimes fail on the initial pre-turn, before anything had been typed, e.g.:

	Act I ends when the player's command includes &quot;bug/bugs&quot;.

(*) Problem message added to catch mistakes like this:

	Happiness is a kind of value. Disappointment is a scene.
	Disappointment begins when happiness ends.

19.14. Kinds and typechecking

(*) Bug fixed whereby defining more than 50 new kinds could sometimes cause
Inform 6 errors or other aberrant behaviour, in a not-very-repeatable way.

(*) Bug fixed whereby nested bracketed compound phrases failed to be read
properly. It's often poor prose style to write messy phrases full of brackets
to disambiguate them, but it ought to work, and it seems that this long-standing
bug made Inform a little unpredictable here.

(*) Bug fixed whereby spurious problem messages would sometimes be produced
when matching adjective-qualified descriptions in the tokens for a phrase;
for instance, in matching &quot;analyse X&quot; against

	To analyse (N - even number): ...

...in cases where X is clearly a number, but may or may not be even.

(*) Bug fixed whereby temporary variables made with &quot;let&quot; or &quot;repeat&quot; whose names
clashed with valid descriptions would be disallowed. This doesn't sound
problematic, but actually it was: for example, if you write

	let held item be ...

in an extension, say, you don't want this to work most of the time, but then
to fail when somebody uses the extension with a story including an object
called &quot;item&quot; (because then &quot;held item&quot; is a valid description - it means
the item when in a state of being held).

(*) Bug fixed whereby &quot;some&quot; used as an indefinite article inside a condition
might be confused with &quot;some&quot; as a determiner, e.g., in the &quot;now&quot; here:

	Some tea is in the kitchen.
	When play begins: now the player has some tea.

(*) Bug fixed whereby spurious kind mismatch problems would be produced when
named objects were used as cases, where a particular kind was needed. For
instance,

	To decide if (D - a direction) looks to windward:
		if D is:
			-- northeast:
				decide no;

(*) Bug fixed whereby an attempt to really violate dimensional rules about the
way numerical values combine could, in some circumstances, throw an internal
error; for example, using the Metric Units extension to set up standard SI
units, but then adding &quot;A force times a mass specifies a force.&quot;, thus making
mass dimensionless. (Newton's Laws become not just invalid but inexpressible
in such a universe... but that's no reason for Inform to fold up its tent.)

(*) Problem message added (in place of run-time problem) when a variable is
created with kind &quot;list of topics&quot;, or other such constructions. (Variables
of kind &quot;topic&quot; are forbidden; it was an oversight that these more complex
variations weren't rejected at compile-time in earlier builds. They were let
through, but didn't work at run-time.)

19.15. Phrases and functional programming

(*) Perhaps this was a bug fix, perhaps a small new feature, but it likely won't
be controversial: local variable names (created by &quot;let&quot;, and such) now take
precedence over global names of physical objects even in descriptions of
essentially physical situations. For example, in the fragment

	To sweep (staircase - a supporter):
		let the debris be a random thing that is supported on the staircase;

...Inform now reads &quot;staircase&quot; as the supporter appearing as a token in the
expansion of &quot;sweep&quot;, even if there is an object in the world called &quot;the
staircase&quot;.

(*) Bug fixed whereby implicit attempts to repeat through a domain which can't
be iterated through would produce incorrect results at run-time. What now
happens is that a run-time problem message is generated. For example,
&quot;let L be the list of texts&quot; can't be done because the possible texts
can't be iterated through. (In general not all descriptions are used for
iteration, which is why this isn't caught with a problem message in the
compiler.)

(*) Bug fixed whereby a small number of obviously true conditions would produce
Inform 6 errors in compilation: for example,

	if 1 is a number, say &quot;Hi.&quot;

would fail. (What happens here is that Inform simplifies the proposition
until it becomes universal truth, then compiles that to an empty string of
Inform 6 code; which is correct for doing nothing, but not for testing nothing,
since it isn't a valid I6 condition. It now tests universal truth as &quot;if (true)&quot;.)

(*) Bug fixed whereby spurious problem messages, apparently though not actually
the result of memory being corrupted, would sometimes appear if there were
large numbers of very memory-costly definitions such as this one:

	To dribble/drabble an/-- image-map in (WIN - a number) at (X1 - a
		number) by/x (Y1 - a number) using (WDT - a number) wide data
		of/from/-- from (IMG_MAP - a list of figure names) with tile-width
		(W - a number) by/x tile-height (H - a number) pixel/pixels/px/--:
		do nothing.

(It's quite expensive on memory to write definitions like this: it has nearly
200 possible wordings.)

(*) Bug fixed whereby using &quot;whether or not...&quot; in a &quot;now&quot; would sometimes
cause a spurious internal error: e.g., setting a truth state variable &quot;T&quot; with

	now T is whether or not location is Stage.

(*) Bug fixed whereby the &quot;Runtime problems&quot; pages displayed in the user interface
have title numbers which are out by one. Thus the explanation page for
&quot;P17 - Can't divide by zero&quot; was headed &quot;P18 - Can't divide by zero&quot;; which
was needlessly confusing, though it did no harm otherwise.

(*) Bug fixed whereby definitions of phrases given as inline I6 code would not
properly cast word values to pointer values where necessary. For example...

	To announce (event - indexed text):
		(- print &quot;I declare &quot;, (INDEXED_TEXT_TY_Say) {event}, &quot;.^&quot;; -).
	When play begins, announce &quot;Saturnalia&quot;.

...would not work because &quot;Saturnalia&quot; would be expanded into {event} as
text rather than indexed text. This looks like an obscure bug, but in fact
caused some phrase definitions in the Standard Rules to go wrong, e.g.,

	let L be a list of indexed text;
	let L be {&quot;oranges&quot;, &quot;apples&quot;, &quot;bananas&quot;};
	add &quot;pears&quot; to L;

would create L having three indexed texts and then one unindexed one, because
the inline definition of &quot;add ... to ...&quot; was failing.

(*) Problem message added (in place of internal error) when a declaration
contains only variables, e.g., &quot;To (N - a number): ...&quot;.

(*) Problem message added (in place of internal error) for a malformed inline
Inform 6 phrase definition with redundant text after the &quot;-)&quot; marker.

(*) The (+ ... +) syntax for embedding I7 source text within I6 code was previously
not allowed in I6 inline definitions of phrases, which was an odd anomaly,
because it was allowed in other I6 inclusions. It's allowed now.

(*) Bug fixed whereby the literal Inform 6-to-7 escape &quot;(+ V +)&quot;, where V is a
value stored on the heap, produced an attempt to block-copy an independent
instance of V, rather than producing a pointer to the existing instance;
this, in particular, making it difficult to use the notation for global
variables holding indexed text, and the like.

(*) Bug fixed whereby the literal Inform 6-to-7 escape &quot;(+ A +)&quot;, where A is an
adjective, would produce I6 code which failed to compile, rather than the
name of the routine to test the adjective. Since Inform 6 is typeless,
there's no good way to choose which sense of the adjective is meant, if
several exist for different kinds of value (as for instance with the
adjective &quot;empty&quot;). The convention is: the meaning for objects, if there
is one; and otherwise the first-declared meaning.

19.16. Equations, units and arithmetic

(*) Bug fixed whereby printing units scaled by factors which aren't powers of 10
tended to produce somewhat wildly approximate results - for example, that
printing the value &quot;90 min&quot; in the unit &quot;hours&quot; would produce &quot;1.36 hr&quot;.
Integer arithmetic makes this necessarily only an approximation, but the
new algorithm is better; for example, 90 seconds is rendered as 0.0010418
days, the true figure being 0.0010416666...

(*) Bug fixed whereby numerical parts of literals which were both optional and
had optional preamble would sometimes match if the preamble was there but
the number wasn't, and would sometimes not respect the optionality: for example,

	A die roll is a kind of value. 3d20+9 specifies a die roll with
	parts dice, sides (without leading zeros), adds (without leading zeros,
	optional, preamble optional).

...would allow &quot;2D6+2&quot; and &quot;2D6+&quot; but not &quot;2D6&quot; in typed commands; it now
allows &quot;2D6+2&quot; and &quot;2D6&quot; but not &quot;2D6+&quot;.

(*) Bug fixed whereby units given in singular and plural forms would sometimes
have only the singular form used in saying, e.g.,

	An age is a kind of value. 1 year old (singular) or 2 years old (plural)
	specifies an age. Every person has an age. Suzie is a woman. Suzie is
	8 years old.

would result in &quot;[the age of Suzie]&quot; being &quot;8 year old&quot;, not &quot;8 years old&quot;.

(*) Problem message added (in place of internal error) when attempting to solve
an equation which is given as the result of some further calculation, rather
than being explicitly named.

19.17. Understanding

(*) Bug fixed whereby commands using numbers spelled out in digits as noun
phrase determiners wouldn't always work: e.g., TAKE FIFTEEN PLANTS would
be recognised, but not TAKE 15 PLANTS.

(*) Bug fixed whereby the Understand token &quot;[any ...]&quot; would ignore any
constraint made about visibility in the &quot;...&quot; part; for example, &quot;[any
person who is not visible]&quot; would be read as &quot;[any person]&quot;.

(*) Bug fixed whereby the pronoun IT would sometimes wrongly be set during
play to the identity of a backdrop item which, though present, was not
explicitly mentioned; for instance, IT might be set to the sun in some
outdoor room.

(*) Bug fixed whereby understanding units which contained mixed case lettering
in their notations didn't always work on the Z-machine; for instance,

	100kHz specifies a frequency.

would lead to commands like &quot;tune to 79kHz&quot; not being recognised.

(*) Bug fixed whereby an empty player's command (resulting from the player simply
pressing enter instead of typing), which then produces an empty snippet, would
result in run-time problem messages if this were matched against. That made
it difficult to write rules like:

	Rule for printing a parser error when the player's command includes
	&quot;please&quot;: ...

(*) Problem message added (in place of internal error) when a circularity is
asked for by using &quot;[something related by equality]&quot;, e.g.:

	Understand &quot;[something related by equality]&quot; as a person.

19.18. Glulx issues, file I/O, figures, sounds

(*) Bug fixed whereby handling of external files with the Glulx setting would
tend not to work after a game had been saved and then restored. (Particular
thanks to Erik Temple and Andrew Plotkin for helping with this.)

(*) Formatting improved on the Problems page for the case of running out of
readable memory in the Z-machine. In 5Z71 the message for this was, due to
a text editor accident, full of words run together without spaces; which
&quot;creates the alarming impression of a nervous breakdown&quot; (Eric Eve).

19.19. Spacing and printing

(*) Bug fixed whereby a serial comma would wrongly be used when saying a list
which contained exactly two items, if the &quot;Use the serial comma.&quot; option
is in force - thus &quot;Starsky, and Hutch&quot;.

(*) Bug fixed whereby printing numbers in excess of 1,000,000 &quot;in words&quot; would
describe them in thousands; Inform now uses the words &quot;million&quot; and &quot;billion&quot;
as necessary. (This only affects Glulx games, since the Z-machine can't hold
numbers that high.)

19.20. Indexing

(*) Bug fixed whereby links to extension documentation inside the application
would be broken if the extension's name or author included an apostrophe
(as in the case of &quot;Poor Man's Mistype by Aaron Reed&quot;).

(*) Bug fixed whereby rules such as &quot;Instead of doing something other than
singing...&quot; would appear in the Actions Index as if they affected singing but
not other actions, the exact reverse of the truth.

(*) Bug fixed whereby certain built-in adjectives would have their indexed
Phrasebook definitions truncated by one word, though surprisingly often they
still made sense that way.

(*) Bug fixed whereby tool-tips displayed when the mouse arrow hovers above a
map connection in the World index would show garbled names of rooms or
directions when these included accented characters.

19.21. Testing commands

(*) Bug fixed whereby the &quot;Use predictable randomisation.&quot; option caused I6
errors in build 5Z71; it works again now.

(*) The trace file has been abolished; in trace mode, Inform copies the same
information to the debugging log instead. (Only affects Inform maintainers.)

19.22. Releasing, bibliographic data, and cBlorb

(*) Bug fixed whereby, similarly, pasted code from extension documentation
examples would come out with accented characters garbled in the paste process.
Sorry about this: it was particularly bad for examples like &quot;Cursillo Mini
Juego&quot;, supplied with the documentation for Sebastian Arg's Spanish extension.

(*) Bug fixed whereby releasing with a website would sometimes produce web pages
with the wrong character encoding; typically with UTF-8 for the source text,
but with ISO Latin-1 headings.

(*) Bug fixed whereby releasing with template websites was not working unless
the template was placed inside the application, which users should never
have to do.

(*) Problem message added (in place of Inform 6 errors) to catch attempts to
change the bibliographic data for a story during play. A shame, this; it
would be coolly interactive to be able to change the story's title and
author halfway through, but it would make the Library Card, the IFDB entry,
and so on, wrong.

(*) Problem message added (in place of internal error) when the title, author,
or other bibliographic data for a project contains a text substitution -
again, these have to be fixed text.

(*) Problem message added for attempts to release along with an existing story
file when in Glulx mode: Inform supports this for Z-machine story files, but
not Glulx, at present. (There are so few Glulx story files not generated by
I7 that it's never seemed worth it, but get in touch if you do need this.)


20. EXAMPLES

&quot;Entrevaux&quot; added to demonstrate a system of scenes where each scene has a
	list of props, a location, and some starting text, and scenes are set up
	and struck automatically.
&quot;Wainwright Acts&quot; added to demonstrate a quirk of using doors with NPCs.
&quot;Number Study&quot; added to demonstrate conditional relations between numbers. 
&quot;For Demonstration Purposes&quot; added to show the use of relations applying to
	stored action names.
&quot;The Undertomb 2&quot; added to demonstrate properties of values.
&quot;Finality&quot; added to demonstrate how to strip out the offer of UNDO.
&quot;Pot of Petunias&quot; added to demonstrate &quot;set pronouns from...&quot; and point to
	the more abstruse methods available in Plurality, if the author needs them.
&quot;Unblinking&quot; added to demonstrate the use of best route through...
	described rooms, and to explain a tricky point about determining light
	levels in a room.
&quot;Lethal Concentration 2&quot; edited to produce more attractive grids.
&quot;Bic&quot; modified to reflect the new behavior of description properties.
&quot;Kiwi&quot; revised to be more accurate about when it prints its parser error.
&quot;Waterworld&quot; extended to show how to add new accessibility rules. (The old
	version of this example was simple but not the most trustworthy 
	implementation.)
&quot;Stately Gardens&quot; revised to handle &quot;look towards [something]&quot; better, and
	to print a response to looking towards a room that contains nothing notable.
&quot;Paddington&quot;, &quot;Sushi&quot; and &quot;Crusoe&quot; slightly rewritten to account for changes
	to the carry out examining rulebook (see above).
&quot;Ferragamo Again&quot;: removed bug whereby it was possible to get &quot;You sighs
	heavily.&quot; as output.
&quot;Bowler Hats and Baby Geese&quot;: removed bug that caused the eggs still to be
	visible after they were made into the omelet.
&quot;Pine 4&quot;: removed bug that made the brothers invisible because they were
	not starting in the Woodcutter's Shack.
&quot;Strictly Ballroom&quot;: removed bug that made it possible for one of the other
	characters to dance with &quot;yourself&quot;.
&quot;Entrapment&quot;: made a very slight tweak to syntax to clarify what is
	happening at one point for the reader.
&quot;Tilt 3&quot;: removed a comment that pasted incorrectly into the main window,
	causing compilation to fail when compiling for Glulx.
&quot;The Cow Exonerated&quot;: removed a bug such that the game text always assumed
	you'd been burning multiple matches.
&quot;Further Reasons All Poets Are Liars&quot;: added tweaks to prevent moving the
	box while standing on the bed, and to give a more sensible response to PUSH
	BOX alone (formerly this gave &quot;It is fixed in place.&quot;, which was clearly
	wrong).
&quot;Hayes Code&quot;: revised to add an indefinite article (&quot;a thong&quot;, &quot;a
	pin-striped suit&quot;) rather than the inexplicably bare version given before.
	Also, it should have been &quot;Hays Code&quot; all along. Oops.
&quot;Under Contract&quot;: revised to include a test for the situation in which the
	player tries giving her dress to Clark. This actually tests an improvement
	to the Standard Rules.
&quot;The Cactus Will Outlive Us All&quot;: tweaked to replace the somewhat
	disappointing message &quot;Nothing obvious happens&quot; after we pull the cactus to
	kill Luckless Luke.
&quot;AARP-Gnosis&quot;: bug fixed whereby taking all but one of the volumes from the
	encyclopedia would produce a delay of one turn before proper collection
	descriptions kicked in.
&quot;Cloves&quot;: modified to automatically list the adverbs that the game knows
	rather than hard-coding the list, now that this is possible.
&quot;Bumping Into Walls&quot; very slightly revised because the previous phrasing
	would create output like &quot;From here, the only way out is to the down&quot;
	if vertical directions were included.
&quot;Whence?&quot; and &quot;Whither?&quot; simplified considerably thanks to the use of
	built-in phrases about door directions.
&quot;Boston Cream&quot;, &quot;Text Foosball&quot;, &quot;Patient Zero&quot;, &quot;Nickel and Dimed&quot;, &quot;Four
	Stars&quot; tweaked to include the &quot;end the story finally saying...&quot; phrase to
	mark successful endings apart from unsuccessful ones.
&quot;Patient Zero&quot; edited to excise an unused phrase definition.
&quot;The Facts Were These&quot; edited to deal more gracefully with the problem of
	giving items that are on the ground, if no other items not on the ground match. 
&quot;Cave-Troll&quot;, &quot;Kiwi&quot;, and &quot;WXPQ&quot; edited to handle new treatment of parser errors.

Recipe Book:

Modifications to &quot;Ending the Game&quot; (now called &quot;Ending the Story&quot;) to
reflect new syntax and to explain the Table of Final Question Options more
fully.


21. BUILT-IN EXTENSIONS

The definition of kHz in &quot;Metric Units&quot; was wrong: it thought 1 kHz was a
	thousandth of a Hz, not a thousand Hz.
&quot;Locksmith&quot; advanced to version 9:
	Additional rules so that the player can learn the function of a passkey
		by using it to lock or observing it being used to lock. (Formerly only
		unlocking identified the passkey.)
	Name given to one rule for which a name had been omitted. (Sorry about that.)
Tweak to &quot;Basic Screen Effects&quot; to get rid of a bug to do with the styles of
	status text in Glulx when an extended status bar was employed (thanks to
	Erik Temple for the patch). Version advanced to 6.
&quot;Plurality&quot; advanced to version 8:
	A couple of minor bugs expunged.
	Extension documentation improved to show how to check the plural status of
	objects.
	Adjusted to use the phrase &quot;set pronouns from...&quot;.
	Deprecates phrases using &quot;Cap ...&quot;, as in &quot;Cap it-they&quot;, instead allowing
	the author to capitalize normally for the same effect (&quot;It-they&quot;).
	Adds a contracted 's-'re form in addition to is-are, and extends the example
	in the documentation.
&quot;Glulx Text Effects&quot;: minor changes to the documentation to clear up some
	confusion in the discussion of colors as rendered in hex; and revised to
	allow the user to modify the built-in styles. Version number advanced to 4.
&quot;Glulx Entry Points&quot; given a new example and better explanation of what the
	gestalt checks about multimedia ability will actually do. Version number
	increased to 8.


22. A NOTE ABOUT FIGURE AND SOUND NAMES

Figure names and sound names are the standard Inform kinds for representing
pictures and sound effects. In this build they gain in functionality (they
can have properties now, can be repeated through, and so on), but to achieve
this we needed to change their data representation at the Inform 6 level.

This only affects I6 code included into I7 source text, but the practical
side-effects run wider, because many people use Glulx extensions for doing
ingenious things with (especially) images; and those extensions tend to rely
on the old representation.

This means they will need to be updated in order to work with this new build
of Inform.

Previously, a figure name and a sound name were each represented in I6 by
the resource ID number of the picture or sound resource inside the blorbed
story file. These would usually be small numbers, and would be different from
each other (i.e. no picture would have the same ID number as a sound).

From this build, figure name and sound name are enumerated kinds, meaning
that they are each independently stored as the I6 level as 1, 2, 3, ... in
order of creation. These are typically off by one, or some other small amount,
from resource ID numbers, but don't rely on that. To convert to a resource
ID number, indirect through the word arrays:

	ResourceIDsOfFigures--&gt;N
	ResourceIDsOfSounds--&gt;N

In other words, whereas in an I6 inclusion

	(+ figure of Space Shuttle +)

would previously have produced the resource ID number as an I6 value, you
now need to say

	ResourceIDsOfFigures--&gt;((+ figure of Space Shuttle +))

and similarly for sounds. We apologise for the inconvenience of changing
this, but from the long-term point of view, it's the right thing to do.


23. A NOTE ABOUT EXTERNAL FILES

Prior to March of 2010, the Glk reference materials and interpreters
incorrectly specified the underlying code for appending text to
external files. This means that, on most interpreters, external file
handling did not work correctly. The major interpreters, including
WinGlulxe, WinGit, and Gargoyle, were patched in mid-March. (Zoom was
not affected.) Authors should be aware of this when testing and
recommending or packaging interpreters for games that utilize external
files.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s2"></a>§11.2. What was new in build 5Z71 (April 2009)</p>
<p><img alt="apr09.jpg" src="images/apr09.jpg" class="floating" /> As this release was being prepared, the Indian Ocean island of Mayotte voted to rejoin France, which in turn rejoined NATO; Sweden, Vermont and Iowa legalised gay marriage; Fermilab discovered the Y(4140) particle, composed (some said) of charm and anticharm; the Proctor and Gamble soap opera &quot;Guiding Light&quot; was cancelled after 72 years of family struggles, uplifting sermons, and the legendary Reva, twice believed dead but in fact an amnesiac taken in by the Amish who returned to find her husband living with a clone of her called Dolly, who in remorse took her own life with aging serum, leaving Reva free to become a San Cristobelian Queen and travel in time, and... so on; Oxford, with its heaviest rowing crew in centuries, won the annual Boat Race against Cambridge; and Barack Obama's first hundred days coincided with a hundred days of hair-tearing by the makers of the new Inform website.</p>
<p>In the world of Inform, miscellaneous benefits came out of a substantial internal reform in logic and the handling of kinds of value. Many of those lifted niggling restrictions - see the full change log for details. Build 5Z71 uses around a third as much memory as 5U92, does much less file-handling, is a little faster, and can handle projects unlimited in size. Dimensional checking became much more flexible, allowing Inform authors to model the world with quantitative physics, and a new built-in extension, &quot;Metric Units by Graham Nelson&quot;, defines all the kinds of value needed. Equations, imitating those in books and papers, were added to the language. The release mechanism was also rewritten, allowing much better CSS-friendly websites to be produced by the Release button. The Recipe Book was expanded and rewritten in its coverage of actions and commands. Lastly but most visibly, the Index was redesigned and the Problem messages relaid to incorporate links to relevant documentation. All 132 issues arising from bug reports since build 5U92 were closed out.</p>
<hr /><pre class="changelog">5Z71 (18 April 2009)

INFORM FOR OS X

A new option on the Advanced panel of the Preferences allows the user to
	choose between Git and Glulxe as the interpreter used in the Game panel
	to play back Glulx-format projects.
A new option on the Format menu, &quot;Enable elastic tabs&quot;, causes Tables in the
	Source to be shown with elastic-width tabbed columns, which are the
	right width for their content. (Typing a single tab is enough to mark
	the end of the contents of a table entry; it's as if the tab is made
	of something elastic, because it stretches as needed.)
Various minor bugs have been removed.

INFORM FOR WINDOWS

The spell check dialog now lets the user choose the dictionary language, and
	whether or not all text is checked, or just the text in quotes.
Spell check dictionaries for different languages can be installed by copying
	the &quot;.aff&quot; and &quot;.dic&quot; files into the &quot;Dictionaries&quot; sub-directory of
	the Inform 7 installation. Dictionaries can be downloaded from the
	OpenOffice project at
		http://wiki.services.openoffice.org/wiki/Dictionaries
In the Source tab's Replace dialog, selecting &quot;Replace All&quot; will also replace
	the currently selected word, if it matches.
The interpreter in the Game tab can now play MOD music files.
Sounds playing in a game in the Game tab are stopped when the game stops.
Interpreter command files (containing a list of commands entered by the user
	into a game, as recorded by a game interpreter such as Frotz) can be
	imported into the skein with the File menu item &quot;Import into Skein&quot;.
There is now a choice of Glulx interpreters for the Game tab: either Glulxe
	or Git. If there are any problems with games under Git that do not
	show up under Glulxe, we would be interested to hear of it.
The directory that Inform uses to store extensions, documentation, etc, which
	defaults to the user's &quot;My Documents&quot; folder, can be changed by
	creating a text file &quot;home.txt&quot; in the same directory as the Inform
	executable, containing the path to the required home directory.
More options added to the preferences dialog.
Alt-cursor left and right are now mapped onto the tab's back and forward
	actions, rather than the web browser's history.

INFORM FOR GNOME ON LINUX

Colour now works in the Game tab.
The Game tab now has a choice of two Glulx interpreters: in addition to
	the traditional Glulxe, which has been brought up to date with version 0.4.4,
	one can now test one's Glulx projects in Git 1.2.2.
&quot;Elastic tabstops&quot; have been added as an optional way to display the source
 	text - this makes table columns the right width regardless of where tab
 	positions lie. This feature can be enabled in the Preferences window.

INDEX

The most visible change in this build is that the Index for a project now
has a new look, and has been reworked throughout. We now have much more
experience of working with large projects, and have more feedback from users
about what they found helpful and not in the old Index.

In general, we have tried to improve navigation within the Index pages - each
of which contains several different tables or charts - to pack more information
into the existing tables, where sensibly possible, and to improve its visual
recognisability - to make it easier to see at a glance where you are. Being
lost in the Index is no better than being lost in the source text, the whole
problem it's supposed to address.

There are too many changes to itemise, but briefly:

	links to extensions from the Index pages now have a new icon (in place of
		the old footnotes like [E1]); clicking them jumps to the documentation
		for the extension;
	a new use option, &quot;Use numbered rules&quot;, indexes rules with identifying
		numbers alongside their names, and causes the testing command RULES ALL
		to show these numbers at run-time - which may help in debugging when
		&quot;Use memory economy&quot; is enforced, so that RULES ALL is unable to quote
		rule names in full.

CBLORB

This build includes version 1.1 of &quot;cblorb&quot;, and matching improvements to
Inform's system for releasing projects. &quot;cblorb&quot; is an internal tool which is
run at the end of the translation process, but only when the Release button
rather than the Go or Replay buttons was clicked. It has two main jobs: to
bind up the translated project, together with any pictures, sounds, or cover
art, into a single file called a &quot;blorb&quot; which can be given to players on
other machines to play; and to produce associated websites, solution files
and so on as demanded by &quot;Release...&quot; instruction(s) in the source text.

Previous builds of Inform included a minimal implementation of &quot;cblorb&quot;
which, although it mostly worked, was really only a prototype: it was not
really flexible or reliable enough to be used in the final system. We have
long intended to replace it with a better implementation, and version 1.1
is our first draft of that. It is much faster (running in order N time,
where N is the line count of the source text, not order N-cubed), and
produces much better HTML. This also gave us the opportunity to reform
how &quot;Release&quot; works, and to make it easier to produce tidy collections of
release material.

Almost all of the size or complexity limits have been taken out, and in
particular:

	the number of audiovisual files embedded in the blorb, previously limited
		to about 495 (depending on circumstances), is now limited only by the
		Blorb specification limit of 32765;
	the number of auxiliary files, previously at most 50, is now unlimited;
	the numbers of tables and headings in a project released with source in a
		website, previously 250 each, are now unlimited;
	the number of knots in the Skein of a project released with a solution,
		previously at most 10000, is now unlimited;
	the story description length, previously at most 1000 characters, is now
		at most 2047 characters;
	and all filenames can be up to 2047 characters long, which should help
		if the project is very, very deep in the file system tree.

Various minor bugs have been removed, of which the most important was a
tendency to trim 8 bytes from the end of some audio files when embedding
them, which caused some Ogg Vorbis files to be unplayable. The rendering of
source text on an accompanying website is also improved somewhat, with
various bugs to do with nested comments removed, and support for verbatim
I6 code added; text substitutions are also now styled, and hanging
indentation for code makes it much easier to read. Particular thanks to
David Kinder, who diagnosed the Ogg Vorbis fault, and to Stephen Granade,
whose &quot;i7htmltidy.pl&quot; script was a most effective critique of the original
&quot;cblorb&quot;.

Internal changes include:

	there are several new placeholders:
		[PAGENUMBER] and [PAGEEXTENT], for pages in the multi-page source
		web pages, are such that &quot;page [PAGENUMBER] of [PAGEEXTENT]&quot; produces
		text such as &quot;page 2 of 7&quot;;
		[TEMPLATE] is the name of the web template in current use;
		[SMALLCOVER] is the filename of the thumbnail-sized version of the
		cover art file. (Compare [BIGCOVER], which already exists, and is the
		filename of the real thing.)
		[STORYFILE] becomes the &quot;leafname&quot; of the story file, e.g., &quot;Bronze.gblorb&quot;
		[GENERATOR] becomes the name of the program generating the website, e.g.,
			&quot;cblorb 1.2&quot;
		[TIMESTAMP] and [DATESTAMP] are the time and date at which cblorb runs
	new command-line arguments &quot;-trace&quot;, &quot;-help&quot;;
	the user interface is now expected to call with the first option
		being &quot;-osx&quot;, &quot;-windows&quot;, or &quot;-unix&quot; as appropriate;
	a new &quot;style&quot; command in Blurb locates the relevant CSS file to
		use when releasing with a website;
	&quot;&lt;img ...&gt;&quot; tags generated by &quot;cblorb&quot; are now self-closing (&quot;&lt;img ... /&gt;&quot;);
	&quot;&lt;br&gt;&quot; tags generated by &quot;cblorb&quot; are now self-closing (&quot;&lt;br/&gt;&quot;);
	footnote anchors are now closed, preventing link style from spilling;
	paragraphs generated by &quot;cblorb&quot; are now always in matching
		&quot;&lt;p&gt;...&lt;/p&gt;&quot; tags;
	links in the lists of links are now in &quot;&lt;li&gt;...&lt;/li&gt;&quot; list item tags in
		a surrounding &quot;&lt;ul&gt;...&lt;/ul&gt;&quot;, and similarly for the contents listing
		in a source website, where nested &lt;ul&gt;s are now used to show the
		headings hierarchy;
	&quot;halign&quot; and &quot;valign&quot; markers are not used in tables if a CSS file is
		present to handle table styling better;
	auxiliary file sizes displayed better, and file size displayed for the
		Blorb itself;
	cblorb no longer generates temporary files in the project's Build
		directory, so it no longer leaves debris behind for the user interface
		to tidy up.

RELEASING

There are six corresponding changes in Inform itself.

(1) &quot;Release along with...&quot; has a new option - &quot;library card&quot;, which is
the iFiction record for the project, an XML file conforming to the Treaty
of Babel for bibliographic data.

(2) In &quot;Release along with...&quot; sentences, the adjectives &quot;private&quot; and
&quot;public&quot; can be used when we release along with any of:
	source text, solution, library card
&quot;Public&quot; means that if we release along with a website then the item in
question will appear in the links from the home page; &quot;private&quot; means it
will be produced but not be mentioned or linked on the website. If neither
one is specified, source text is public but everything else is private,
which conforms to Inform's traditional practice. If we aren't releasing
along with a website, public vs. private makes no difference.

(3) Suppose Release is clicked in the Inform user interface, and everything
works without problem messages. If there are no &quot;Release along with...&quot;
sentences in the source text, then the release consists only of a single
blorb file. The user interface displays a Save As... dialogue box asking the
user where to put this file. But if there are &quot;Release along with...&quot;
sentences, then Inform needs to release multiple files, and it puts those
in the &quot;Materials&quot; folder for the project. (If the project is, say,
&quot;Apricot.inform&quot; then this would be a folder called &quot;Apricot Materials&quot; in
the same place.)

All of that is how Inform has always worked. What's new is that the released
material is now all put in a subfolder of &quot;Apricot Materials&quot; called &quot;Release&quot;.
Anything in &quot;Release&quot; can be thrown away at any time, as it can all be
replaced; equally, to upload a website to a server, we only need to copy the
contents of the &quot;Release&quot; folder. This is much tidier than the old
arrangement, in which released files mingled with other working documents in
the root of &quot;Apricot Materials&quot;, so that it wasn't easy to see at a glance
what was part of the released website and what wasn't.

Inform automatically generates the Materials folder and its Release subfolder
as necessary if they don't already exist.

(4) Inform has always generated websites using what it calls &quot;templates&quot;,
and it has always been supplied with a single built-in template called
&quot;Standard&quot;. This continues to be true, but the new &quot;Standard&quot; is a more
modern design, making use of CSS. (The old look is preserved as &quot;Classic&quot;,
also built-in, in case anyone really wants to keep using it, or needs to
generate a website which makes no use of CSS.)

The form of templates has however changed. A template was previously a pair
of HTML files - for instance, &quot;Platinum.html&quot; and &quot;Platinum-Source.html&quot; -
containing placeholder text like &quot;[AUTHOR]&quot; where the author's name should
appear, and so on. A template is now a folder - &quot;Platinum&quot;, say - which can
contain any of the following four files:

	index.html - the template for the home page
	source.html - the template for source text pages
		(used only when &quot;Release along with a website&quot; is used)
	style.css - the CSS styles needed by the HTML files
	(extras).txt - a catalogue of any other files to be added

If any of these is missing, Inform uses the one in &quot;Standard&quot; instead.
In practice, this means the easiest way to create a new template is to
supply just a new CSS file, which can change the colour, font, type size,
and position of more or less everything in the site.

The optional &quot;(extras).txt&quot; file - note brackets - is a text file which
contains a list of named extras to throw in. For instance:

	easter.html
	egg.png

These named files need to be present in the template folder. Files with the
extension &quot;.html&quot; go through the placeholder expansion process just like the
index and source pages; all other files are copied verbatim. (Extras allow
for images, movies, etc., to be added to the template.)

See 22.12 and 22.13 in the documentation, which have been rewritten.

(5) Inform knows templates only by their titles (&quot;Standard&quot;, say, or
&quot;Platinum&quot;). When it needs to find one, it searches the following places
in sequence:

	(a) the &quot;Templates&quot; subfolder of the project's Materials folder, if this
		subfolder should exist;
	(b) the &quot;Templates&quot; folder in the user's own library - on Mac OS X, this is:
			~/Library/Inform/Templates
		and on Windows:
			My Documents\Inform\Templates
	(c) the built-in stock of templates, currently &quot;Standard&quot; and &quot;Classic&quot;.

(6) A file released without cover art now has a generic cover image applied.
Most people releasing Inform 7 works do now include cover art, and we would
like future interpreters and website designs to be able to assume that an
image of some kind can be associated with any I7-produced blorb.

INDEX AND PROBLEMS

It would not be useful to itemise the changes here, but the design of the
Index pages has been heavily revised. The aim is to present more information,
but more clearly, and with better navigation and labelling. We'd suggest
that anyone used to the old Index might find it worthwhile to explore the
new one.

A process of trying to improve the quality of problem messages is under way,
though it's certainly not complete. Here the aim has been to be clearer and
more direct, with hints typographically separated from their messages to
reduce the tendency of long paragraphs to resist the tired eye. Most problem
messages are now accompanied by blue documentation-link icons to relevant
passages of the manual.

KINDS OF VALUE

Activity names can now be stored in variables.
In previous builds, indexed texts, stored actions and lists could not be
	properties of values - though they could be properties of objects. This
	anomaly is removed.
Inform now makes more apparent that it allows arithmetic on some kinds of
	value (numbers, times, etc.) but not others (text, scenes, etc.). The
	new Kinds index page should clarify which.
The rounding-off notation &quot;V to the nearest D&quot; now works for any numerical
	value V, not just for times, as in previous builds. Thus, for instance:
		the pressurised volume to the nearest 100 cu m
		the score to the nearest 25
Two new operations also act on any numerical value:
		cube root of V
		square root of V
	The results will necessarily be approximate. Square roots of negative
	numbers throw a run-time problem.
It's now legal to declare multiplication rules for any numerical kinds of
	value, provided this is done consistently. E.g.:

		Bus Stop is a room.	
		Frequency is a kind of value. 40/min specifies a frequency.
		Bus frequency is a frequency that varies. Bus frequency is 2/min.
		A frequency times a time specifies a number.
			When play begins:
			say &quot;You can expect [bus frequency times 10 minutes] buses to turn
				up in the next ten minutes.&quot;

	This would previously have been rejected as involving the built-in KOVs
	&quot;time&quot; and &quot;number&quot;, which Inform was rather over-protective towards.

SCIENTIFIC UNITS AND SCALED ARITHMETIC

Inform now allows a spread of alternative notations for units:

	A weight is a kind of value. 10kg specifies a weight. 1 tonne specifies a
	weight scaled up by 1000. 1g specifies a weight scaled down by 1000.

This enables notations such as &quot;0.45kg&quot; to be used, and causes weights to be
stored to an accuracy of 1g. These scale factors are kept consistent in all
arithmetic, and in particular when different units are multiplied together
or divided.

There can be equivalents on a different scale altogether:

	1 ounce specifies a weight equivalent to 0.028kg.
	1 pound specifies a weight equivalent to 16 ounce.

We can also mark some notations as singular or plural, and give them names:

	1 tonne (singular, in tonnes) or 2 tonnes (plural, in tonnes) specifies a
	weight scaled up by 1000.

That enables us to say &quot;[weight of the tank in tonnes]&quot;, for instance.

A new built-in extension, &quot;Metric Units by Graham Nelson&quot;, makes definitions
of kinds of value for most of the scientific quantities needed to make models
of the real world:

	length, mass, elapsed time, electric current, temperature, luminosity,
	angle, frequency, force, energy, pressure, power, electric charge, voltage,
	luminance, area, volume, velocity, acceleration, momentum, density, heat
	capacity, specific heat capacity

The extension defines SI standard notations for all of these, allowing both
European and American spellings, and gives them the proper dimensional rules
for multiplication (for instance, length times length is an area). &quot;Elapsed
time&quot; is much more precise than the built-in &quot;time&quot; kind of value - it measures
from 1 centisecond up to about 35 weeks, rather than being a count of minutes
in the course of a single day. Use of &quot;Metric Units&quot; requires the Glulx story
file format rather than the Z-machine, simply in order to hold large enough
numbers to make sensible scientific calculations.

EQUATIONS

As trailed, somewhat speculatively, in the January 2007 discussion document,
Inform now supports displayed equations. Inform imitates the conventions of
printed scientific books and papers, just as it does with tables of data.
For example:

	Equation - Newton's Second Law
		F=ma
	where F is a force, m is a mass, a is an acceleration.

	Equation - Principle of Conservation of Energy
			mgh = mv^2/2
	where m is a mass, h is a length, v is a velocity, and g is the
	acceleration due to gravity.

(These equations are dimensionally checked for correctness.) Inform can then
solve them to calculate whatever unknown is missing. For instance,

	let v be given by the Principle of Conservation of Energy, where h = 10m;

is sufficient to determine &quot;v&quot; provided that the quantities other than &quot;v&quot; and
&quot;h&quot; are known.

In cases where we simply want a quick way to write an elaborate one-off
formula, we don't need to declare an equation - we can just write it in directly:

	let f be given by V = fL;

LOGIC

It is now legal to use &quot;now&quot; in a way involving more than one varying quantity
	at a time. For example:
	
		Trail Shelter is a room. Fred and George are men in Trail Shelter. The
		possum, the skunk and the weasel are animals. Dixville Notch is north
		of the Shelter. Earl is a man in Dixville Notch.
		
		Suspecting relates various people to various people.
		The verb to suspect (he suspects, they suspect, he suspected, it is
		suspected, he is suspecting) implies the suspecting relation.
		
		Earl suspects the possum.
		
		Instead of waiting:
			say &quot;A sinister odour begins to make itself felt.&quot;;
			now every person in Trail Shelter suspects every animal which is not
				suspected by Earl.
		
		Test me with &quot;relations / z / relations&quot;.
	
	Previous builds would have rejected this use of &quot;now&quot; as too complex.

It's now legal to test if something is &quot;everywhere&quot;; this will only be true
	for backdrops which are indeed everywhere.

The Standard Rules now define:

		The verb to provide (he provides, they provide, he provided, it is provided,
		he is providing) implies the provision relation.

	This in general is a relation. The following are equivalent:

		if carrying capacity is provided by the player
		if the player provides carrying capacity

	For clarity, &quot;the property ...&quot; can be used, and this is compulsory for
	either/or properties, since those are otherwise adjectives not nouns:

		if the player provides the property male
		if the player provides the property carrying capacity

	This makes &quot;to provide&quot; a full verb, whereas previously it was only imitated
		by a definition of &quot;X provides the property P&quot; in the Standard Rules.

It's now legal to assert value relations in relative clauses, e.g.:

	Laboratory is a room. Peter is in the laboratory.
	Colour is a kind of value. Aquamarine is a colour.
	Annoying relates various colours to various people. The verb to annoy (he
	annoys, they annoy, it is annoyed, he is annoying) implies the annoying
	relation.
	Aquamarine is a colour which annoys Peter.

MINOR NEW FEATURES

A new use option allows the parser to handle large numbers of objects better.
For instance,

	Use maximum things understood at once of 200.

enables the parser to handle commands like TAKE ALL to work well in situations
where up to 200 items are within view at once. (This number was always 64 in
previous builds, and the default level has been raised to 100.)

Inform has for some time had the phrase

	the room north from the Ballroom

to look up map connections; it now recognises &quot;north of the Ballroom&quot; as being
synonymous. This reports the room which somebody would get to if they could
go, in an unimpeded way, north from the Ballroom - perhaps through a door.
The result is always a room, or nothing. In similar vein, the new phrase:

	the door D from/of R

produces the door which lies in direction D from room R, or else nothing if
there's no door there.

It's now legal to set values that vary &quot;usually&quot;. For instance:

	The speed limit is a speed that varies. The speed limit is usually 100 mph.

This should help extension writers who are nervous of setting values which
their users might want to alter.

Inform usually allows &quot;while&quot; as synonymous with &quot;when&quot;, but until now an
exception has been that it insists on &quot;Understand... when...&quot; rather than
&quot;Understand... while...&quot;. Both wordings are now allowed.

Build 5U92 was rather strict about not allowing colons in text substitutions.
Usually that's a good thing, as it catches various accidents, and in general
text substitutions shouldn't contain punctuation. But that overlooked times
of day written with colons, as here:
	&quot;The stage is [if the time of day is after 8:00 PM]filled[else]empty[end if].&quot;
So colons have been allowed again if used in explicit times of day.

New rules have been added to the Standard Rules:

	standard report preferring abbreviated room descriptions rule
	standard report preferring sometimes abbreviated room descriptions rule
	standard report preferring unabbreviated room descriptions rule
	standard report switching score notification on rule
	standard report switching score notification off rule

so that these out of world actions are reported by the report rules, which
can then be modified or pre-empted, just as the corresponding rules can for
ordinary actions.

In previous builds, and in keeping with ancient Infocom customs, &quot;leave&quot; was
synonymous with &quot;go&quot; when typed as a command. On balance, though, this leads
to confusion - especially since &quot;go&quot; often has the sense of &quot;enter&quot;, exactly
reversing the meaning of &quot;leave&quot;. &quot;Leave&quot; is now synonymous with &quot;exit&quot;.

Perhaps this is really a bug fix: the phrase option &quot;if absent&quot; for the phrase
&quot;add V at entry N in L&quot; (for adding a value to a list in a given position) was
claimed to work in the documentation for previous builds, but in fact it has
only just been implemented in this build. (Previous builds did allow &quot;if absent&quot;
in the case where V is a list, but not where it is a single entry; and in the
case where no entry position is specified.)

PERFORMANCE

The Inform 7 compiler is now more economical on memory usage. Previously
it consumed around 43MB on a small run, and 78MB on &quot;Bronze&quot;, a typically-sized
complete work; those figures are now 9MB and 25MB respectively. (This may
make Inform more viable on low-memory netbooks.)

Inform's use of temporary files is more or less abolished in this build;
thus a typical problem-free run on a large source text now involves around
100 file writes, almost all index pages, where previous builds might make
around 1400 file writes. (This may speed Inform up on slow media such as
memory sticks.) Internally, Inform now makes use of flexible-sized memory
buffers instead, and as a side-effect it should be much harder for
maliciously-constructed source text to crash Inform by means of buffer
overruns - though nobody at present is trying this, so far as we know.

The upper limit of 500,000 words of source text has been removed; there is
now no upper limit. This once seemed unthinkably large, but the recent
release of Aaron Reed's 385,000-word &quot;Blue Lacuna&quot; changed our minds.
&quot;A la recherche du temps perdu&quot; is about 1,500,000 words, &quot;Clarissa&quot; about
1,000,000, and &quot;War and Peace&quot; about 500,000, so it's not impossible for
novels to grow to such sizes.

&quot;Blue Lacuna&quot; provided some real-world profiling information on how Inform
handled very large source texts. Although no major bottlenecks were found,
a little tuning produced about a 10% speed gain on these larger projects.

Inform now takes advantage of a March 2009 extension to the Glulx virtual
machine specification which causes certain I6 veneer routines (called very
frequently during play) to be implemented natively rather than in Glulx
emulation. This can result in speed-ups of a factor of 2 or 3, though those
gains will only be realised on a Glulx interpreter which supports the new
&quot;acceleration&quot; feature. (The Glulx interpreters built into Inform as the
Game panel do support it, and work is under way in making stand-alone Glulx
interpreters support this too.)

OPTIONS AND TELEMETRY

When Inform starts up, it now looks for a file called Options.txt inside
the user's home folder for Inform. (On Mac OS X, this is &quot;~/Library/Inform&quot;;
on Windows, &quot;My Documents\Inform&quot;, and so on.) If the file is present, then
the text in it is added to the source text of everything Inform translates.

This should be used only to set use options, and given the potential for
confusion (it's easy to forget that the Options.txt file is there), should
only be used if really necessary.

A new use option, &quot;Use telemetry recordings.&quot;, causes Inform to copy its
outcome and problem messages to files in the home folder (see above) as
they occur. These files are dated, so that for instance

	Telemetry 2009-03-25.txt

contains all of the recorded activity on 25 March 2009. Telemetry only
records the contents of the &quot;Problems&quot; panel - notes of success or failure,
and problem messages - and (see below) nothing is transmitted via any network,
so it isn't really surveillance. The user can deliberately add a note to
the current telemetry file by writing something like this in source text:

	* &quot;I don't get it! What's a kind? Why can't the lamp be lighted?&quot;

(This is a way to make a note for the benefit of someone who will read the
telemetry file - for instance, to comment on a problem message that has just
appeared. Note the double-quotes. Otherwise, it's meant to look like the
standard way that beta-testers mark up IF transcripts.)

These two features have been added in response to requests from education
users. Let's suppose that Mr Lebling, who teaches 5th grade in Minnesota,
wants to set things up just right for his class. He installs Inform on the
ten computers they will use, and also copies an Options.txt file from his
memory stick onto each one. The Options.txt file reads:

	Use serial comma.
	Use American dialect.
	Use telemetry recordings.

Now Mr Lebling's class won't be confronted with English spellings, and
so on. And most of the kids are happy, but Mr Lebling gets the feeling that
young Marc wasn't really paying attention, so after class he checks that day's
Telemetry file for that computer to see what Marc was up to, and whether he
was stuck on something.

(The Telemetry feature was originally devised to help with testing the
response of real users to problem messages, and to find out which problems
are most often generated. Telemetry systems like this are often built in to
large applications - for instance, Microsoft Word - and the name implies
that data can be sent back to the manufacturers, who thus get to look over
their users' shoulders. But Inform transmits nothing at all, even if the
use option is set, which by default it is not. So this feature really can't
invade anyone's privacy. But we would, if people are willing, be very
interested to see telemetry files resulting from genuine classroom use, and
use by complete newcomers - we'd really like to know which problem messages
puzzle people, and what the stumbling blocks are.)


MAINTENANCE

It's hard to say whether this is a bug fix or not; more a slight change in
	philosophical outlook. Inform previously rejected this sort of thing:
		Before taking something:
			if a block is larger than the noun, say &quot;Look out!&quot;
	on the grounds that it couldn't know whether the noun was comparable in
	size to blocks - it would be if the noun were a block, but not otherwise.
	This generated a problem message. What now happens is that the above
	compiles to run-time checking, and a run-time problem is generated if
	the noun ever turns out not to be a block. (This is done because we
	often have a situation where the source text does guarantee things about
	the kinds of objects involved, but which Inform is unable to see.)
Another one that is arguably a change of design rather than a bug fix:
	subject-verb inversion in assertions has been withdrawn for prepositions
	which are also participles. In previous builds, Inform would accept the
	somewhat Yoda-like sentence
		Holding the light sabre is the young Jedi.
	which is an inversion of
		The young Jedi is holding the light sabre.
	...yet has the same meaning. Inversions are often perfectly natural in
	English:
		On the table is a jar of marmalade.
	So we don't want to rule them out altogether. But we do want to prevent
	these sentences from being misread as inversions:
		Holding Area is a room.
		Wearing something is good manners.
The order of testing the conditions on when a rule applies has been reversed.
	That sounds a more dramatic change than it really is; it means that a rule
	such as
		Instead of X when Y: ...
	will test to see if the action is X before testing whether condition Y is
	also true, rather than vice versa, as happened in previous builds. The
	main reason for this is so that a rule like
		Before printing the name of a vehicle (called the car) when the
			traffic warden cannot see the car: ...
	works properly, because the &quot;car&quot; variable is set during the test of X
	(that the &quot;printing the name&quot; activity is being applied to &quot;a vehicle
	(called the car)&quot;), and so is available for use in condition Y
	(&quot;the traffic warden cannot see the car&quot;).
When one rule is &quot;listed instead of&quot; another one in the same rulebook,
	previous builds of Inform duplicated the first rule to provide the
	replacement; this had some advantages but broke the principle, implicit
	in the syntax and usually helpful (not to mention announced in the manual)
	that a rule can only occur once in the same rulebook. This build moves
	rather than duplicates the build. There was some debate about this on
	rec.arts.int-fiction in February 2009, and opinions were divided; we
	changed our own minds in the making of this new build; but in end, what
	lawyers call a bright-line test - a simple easily-stated principle - seemed
	for the best.
When an actor other than the player tries an action which needs him to be able
	to touch one of the objects involved, Inform normally applies the basic
	accessibility rule (and thence the accessibility rulebook) to make the
	decision about whether this should be allowed, just as it would if the
	player tried the same thing. In previous builds, an exception was made
	for doors and backdrops, whose ability to be present in multiple rooms
	made it difficult to determine accessibility for third parties. Erring
	on the side of caution, the item would be assumed accessible. In this
	build, that leniency is narrowed so that it applies only in the case
	of third-party actors in a different location from the player.
When Inform tests to see if an action applies, and it finds a region where it
	might have expected a room, it reads this as any room in that region.
	This is why:
		Instead of going from the Great Tundra, ...
	matches going from any room in the Great Tundra region, and since an
	action cannot apply to a region, there's no ambiguity here. But 5U92 also
	applied the same room to activities, which _can_ apply meaningfully to
	regions in their own right, and this was a bug. It has been fixed.
In previous builds, it was legal but futile to try actions like this one:
		try asking Xerxes about &quot;Athenians&quot;;
	- futile because command text is always reduced to lower case, so that
	the capital A in Athenians makes it guaranteed not to match anything
	Xerxes knows about. In this build, command snippets like this in a &quot;try&quot;
	are automatically reduced to lower case.
Attempts to determine &quot;the time since Alien Landing began&quot; or &quot;the time when
	World Obliteration ended&quot; are not possible if these scenes have, in fact,
	never begun or ended. In previous builds, these questions would produce
	misleading answers. They now produce run-time problem messages.
Problem message added to explain why doors cannot be &quot;part of&quot; other things,
	and how to achieve the same effect in other ways.
Problem message added, in place of an internal error, if directions are created
	by complex rather than simple sentences (in defiance of the instruction
	in the documentation not to do this).
Problem message added, in place of an internal error, if the source tries to
	assign properties to all kinds (e.g. by &quot;A kind can be cool or lame.&quot;).
Problem message clarified when the source tries to use the name of a kind
	of value as a 'let' variable name (e.g., &quot;let the number be 10&quot;).
Problem messages improved when lists are rejected because the spacing before
	commas is missing.
Problem message added to be more helpful if &quot;out of play&quot; is used instead of
	&quot;off-stage&quot;.
Problem messages added when Inform 6 code is Included in place of template
	files which don't exist, or parts of them which don't exist.
Problem message added, in place of an internal error, for attempts to
	construct a phrase in a vague way, like so:
		The factorial of a number is a phrase.
Problem message added, in place of an I6 error, when a property name containing
	bizarre textual matter is created, usually as a result of missed punctuation:
	for instance, because of the missing full stop after &quot;climbed&quot; in:
		The Tree can be climbed &quot;There is a tree in the middle of the lawn.&quot; 
Problem message added, in place of an internal error, for attempts to give
	definitions to phrases like &quot;To try (the feat - an action): ...&quot; which
	treat &quot;feat&quot; as if it were a value. (Inline definitions can use this,
	but not as a value, and nobody else can use it all. &quot;Stored action&quot; would
	be fine, as the problem message explains.)
Problem message added to catch attempts to say that whole kinds of backdrop
	are &quot;everywhere&quot;. (You can say a backdrop is everywhere, but only one
	backdrop at a time.)
Problem message added to catch certain name-clashes between new values
	created as table entries, and other values already existing.
Problem message added to catch &quot;a random X&quot; where X describes something with
	a domain which can't sensibly be searched - &quot;a random text&quot;, for instance.
Problem message added to prevent defining a rulebook, activity or action
	variable with a name which already has a meaning as something else.
Bug fixed whereby a hidden limit of 255 grammatically different command verbs
	was being applied. Exceedingly this limit (which is quite hard, in fact)
	resulted previously in inexplicable mix-ups between the command verbs at
	run-time, clearly a very bad thing. Inform now enforces the limit on the
	Z-machine, where it's inherent, and lifts it on Glulx, where there can
	now be 65535 grammatically different command verbs. (Applying this fix
	required changes to the I6 compiler; we'd like to thank Brian Rapp, who
	posted issue C63010 to the I6 support pages, for putting us on the right
	track.)
Bug fixed whereby releasing an existing story file (for instance to publish
	an old I6 project with new cover art and bibliographic data) would
	generate a spurious I6 error.
Bug fixed whereby a bogus &quot;too many activities&quot; run-time problem message would
	appear once an &quot;[any ...]&quot; token in parsing produced a particular kind of
	parser error message on more than 20 different turns during play.
Bug fixed whereby a condition property with three or more names, which was
	also given an explicit property name, would have the last name wrongly
	taken down: thus
		A fruit can be unripened, ripe, overripe, or mushy (this is its
		squishiness property).
	would lead to &quot;mushy&quot; not properly being defined.
Bug fixed whereby lengths of time (though not times of day) mixed up hours
	and minutes, so that
		let T be 8 hours 3 minutes;
	would in fact set T to 3 hours 8 minutes. (Blushes all round.)
Bug fixed whereby route-finding wasn't working through one-to-one relations.
	(It seems we just forgot this case: one-to-various, various-to-one, and
	various-to-various all worked.)
Bug fixed whereby, if two actions look the same except that one takes two
	objects rather than one, then check/carry out/report rules can sometimes
	apply to the wrong one. For instance, given actions &quot;tying&quot; and &quot;tying it
	to&quot;, a rule such as &quot;Check tying something to: ...&quot; could wrongly apply
	to the one-object form &quot;tying&quot; rather than to the two-object form.
Bug fixed whereby a stored action property attached to a kind of object will
	be such that all instances of that kind which do not define their own
	value for this property will forever after share the default value, even
	if it is changed for some instances and not others.
Bug fixed whereby mysterious run-time problems to do with your former self
	not having properties would appear in situations where the player is named
	as a character, and a property has been given to all people.
Bug fixed whereby a list of ordinary texts being copied into a list of indexed
	texts would lose their contents, or be corrupted.
Bug fixed whereby it would sometimes be possible to reach inside a closed
	container, if that container were part of something else which could be
	touched by the person concerned.
Bug fixed whereby a person asked to perform an out of world action will
	silently do nothing. The reply is now something like this:
		&gt; CLARK, SAVE
		[That command asks to do something outside of play, so it can only
		make sense from you to me. Clark cannot be asked to do this.]
	(This is a new library message - Miscellany number 74.)
Bug fixed whereby &quot;does the player mean&quot; rules would sometimes not apply in
	several cases where the grammar in question involves two nouns, and the
	second noun either follows immediately on the first or has some stipulation
	applied to it (such as that it be &quot;[someone]&quot;), or where the first noun
	has some stipulation applied but which the second noun does not share.
Bug fixed whereby, relatedly, the definition of the &quot;block tying rule&quot; in the
	Standard Rules was loosely worded and could catch one-object forms of
	tying, as well as the two-object form in the Standard Rules for which it
	was intended.
Bug fixed whereby Glulx programmers creating additional Glk windows would find
	that sound channels were improperly created, and that random-number
	generation would not necessarily be &quot;fixed&quot; on debugging runs. (Many
	thanks to Eliuk Blau, for both finding and correcting this.)
Bug fixed whereby units set up to imitate decimal places would print values
	wrongly if in between 0 and -1; e.g., given &quot;A weight is a kind of value.
	-99.999 specifies a weight.&quot;, the value &quot;-0.123&quot; would print as &quot;0.123&quot;.
Bug fixed whereby table entries initially set to unspecified lists, with a
	column entry described only as (say) &quot;a list of times&quot;, would then during
	run-time appear sometimes to be lists of numbers regardless of what they
	had been intended to contain.
Bug fixed whereby optional clauses in descriptions of actions would not always
	be checked for sense - or rather, they would, but would fail with an
	internal error instead of a helpful problem message.
Bug fixed whereby setting or testing the &quot;to be through&quot; relation, for talking
	about the far side of one-sided doors, silently failed during play.
Bug fixed whereby a various-to-various relation where one of the two domains
	was a kind with no instances would sometimes produce I6 errors in
	translation.
Bug fixed whereby, if the player gets into an enterable container on top of
	a pushable between rooms enterable supporter, and then tries to push that
	supporter to another room, a spurious programming error is displayed as
	well as the (thoroughly merited) reproof.
Bug fixed whereby a supporter which held only an undescribed item would
	sometimes be mentioned in a broken-off sentence in a room description; e.g.
		An easel is a supporter in the studio. &quot;An old fashioned easel is
		here.&quot; A painting is on the easel. It is undescribed.
	would produce
		An old fashioned easel is here.
		On the easel .
Bug fixed whereby confusion could occur between actions which have similar
	names except that one takes two nouns and the other only one, e.g., as
	between &quot;pointing at&quot; and &quot;pointing it at&quot;.
Bug fixed whereby the use of brackets in heading names - e.g. &quot;Section 2(c)1&quot; -
	could cause bracketed stipulations like &quot;(for use with...)&quot; to be
	unrecognised.
Bug fixed whereby matching the names of extensions in headings (those &quot;for
	use with E by A&quot;, for instance) was performed case-sensitively - so that
	unless the exactly correct casing was used, the heading would behave
	unexpectedly. (Sorry: some people thought this was us being pedantic,
	but in fact it was an accident.)
Bug fixed whereby the SHOWME testing command would incorrectly claim that
	some items were &quot;initially carried&quot;.
Bug fixed whereby the serial comma would be missed out of some lists produced
	by &quot;say&quot;, even when &quot;Use serial comma&quot; was in force.
Bug fixed whereby mapping tips given to improve the World index map would not
	always work where room names included the words &quot;of&quot; or &quot;from&quot;.
Bug fixed whereby the Kinds index would sometimes doubly list an either/or
	property (&quot;Usually... drab not colorful, colorful not drab&quot;).

EXAMPLES

Added &quot;The Speed of Thought&quot; to demonstrate unit conversions.
Added &quot;Hatless&quot; to spell out some details of how &quot;now&quot; works with randomness.
Added &quot;Slogar's Revenge&quot; to demonstrate unlocking a door with a key can be
	worn instead of carried (and thus how to manipulate the carrying
	requirements rules)
Added &quot;The Facts Were These&quot; to demonstrate giving multiple objects at once,
	with different results than if the player offered them separately
Added &quot;Oyster Wide Shut&quot; to offer an alternate (and more flexible) way to
	handle the inventory listing of properties such as &quot;(closed)&quot;; it also
	allows the author to add his own properties to the standard list.
Added &quot;Whither?&quot; to illustrate letting the player refer to a door as &quot;the
	west door&quot; or &quot;the east door&quot; under the appropriate circumstances.
Added &quot;Widget Enterprises&quot; to demonstrate equations.
&quot;The Abolition of Love&quot; and &quot;What Not To Wear&quot; changed to reflect the new
	flexibility of &quot;now&quot;.
&quot;Zorb&quot; updated to deal with a sentence of explanation that stopped without
	ending, and also to make it possible for the player to ride in the Zorb.
&quot;Identity Theft&quot; given extra commentary to explain the different effects of
	compiling under Z- or Glulx.
&quot;Four Cheeses&quot; improved with more refinement of scope-handling for interacting
	with a distant person who should not be visible.
&quot;Verbosity&quot; slightly tweaked to give more information about how defaults work.
&quot;Verbosity 2&quot; added to demonstrate how to *force* the player always to use
	full-length room descriptions (rather than merely setting the default and
	allowing him to modify it).
&quot;Only You&quot; simplified and moved to an earlier section because Inform now
	pre-defines the adjective &quot;even&quot;.
&quot;Channel 2&quot; typo fixed.
&quot;Peeled 2&quot; error fixed, and the documentation slightly expanded.
&quot;Dinner is Served&quot; revised to make the sample code more safely portable into
	a larger game, and to remove a procedural rule that is no longer necessary.
&quot;Puncak Jaya&quot; edited to improve behavior with revised accessibility rules,
	and to deal with the case where a ghost is the second noun rather than
	the noun.

BUILT-IN EXTENSIONS

New built in extension, &quot;Metric Units&quot;: see above.
Documentation for &quot;Menus&quot; substantially rewritten and the version number
	advanced to 3.
&quot;Basic Screen Effects&quot; and &quot;Complex Listing&quot; adjusted to be more safely
	compatible with &quot;Case Management&quot;: all three were defining a printed_text
	array but not consistently, with the result that some compilation effects
	varied depending on which extension was included first.
&quot;Rideable Vehicles&quot; tidied up to be more consistent in handling how actors
	other than the player are treated; version number advanced to 3. The rules
	here have been more cleanly arranged, but with some renamings as a result -
	for instance, the &quot;no person mounting a mounted animal rule&quot; used to
	apply only to non-player actors, while the corresponding rule for the
	player was anonymous. There is now a single &quot;can't mount when mounted on
	an animal rule&quot;. So any source text making use of the old rule names in this
	extension will need tidying up, or will need to use version 2. The actual
	functionality of the extension has not changed except that commands like
	&quot;tanya, get on mystery&quot; are now correctly understood; a cosmetic blemish in
	descriptions when multiple people are riding the same animal has been fixed.

RECIPE BOOK

Slightly expanded the section on start up features in order to include the
	idea of doing some game initialization, as necessary.
Added a section &quot;Other Built-in Actions&quot; to the Commands section, which
	provides some explanation and cross-referencing for a number of types
	of action.
Extensively rewrote the &quot;Actions on Multiple Objects&quot; section to provide a
	clearer explanation of how the multiple objects list works.
Expanded the &quot;Modifying Existing Commands&quot; section to explain more clearly
	how to change the carrying requirements and related rules, and
	cross-referenced this segment from &quot;Barter and Exchange&quot;, &quot;Taking,
	Dropping, Inserting and Putting&quot;, and several sections that pertain to
	locking or placement.
&quot;Room Descriptions&quot; section added to the &quot;Place&quot; chapter, which mostly
	contains material formerly under &quot;Commands &gt; Looking&quot;. Looking now points
	to this section; this organization change is due to assorted user
	feedback about where people were looking for material most often (and
	not finding it).
&quot;Going, Pushing things between rooms&quot; expanded to explain the behavior of
	pushing more clearly; to offer more examples of how to write conditional
	rules governing pushing; and to lay out the details of meddling on room
	descriptions produced specifically in the context of going actions (as
	opposed to in response to LOOK). The previously under-documented &quot;the
	room-describing action&quot; variable used by the looking rulebooks is also
	explained in this section.
&quot;Scoring&quot; expanded to explain the NOTIFY ON and NOTIFY OFF commands, to
	exemplify how to modify their behavior, and to refer the player to
	default message extensions in order to change the wording of such
	messages as &quot;[Your score has just gone up by two points.]&quot;
&quot;Saving and Undoing&quot; expanded to mention undo prevention and warn against
	some of the dangers of using it.
&quot;Glulx Multimedia Effects&quot; expanded to discuss in more detail what is and
	isn't at least theoretically possible under Glulx, in terms of sounds
	and images. (Several people on the newsgroup have asked recently whether
	it is possible to have multi-channel sounds or fade-ins and fade-outs
	under Glulx. The answer is yes, but it is not easy. The section suggests
	the prospective author check out the latest tools from the Inform
	extensions site.)
&quot;Settings and Status Checks During Play&quot; section added to the Out of World
	chapter; this is largely a pointer to other sections of the manual
	(verbosity under Looking, notification under Scoring), but it also 
	explains the other more obscure out of world actions. This is in response
	to an outstanding request that the unusual out of world actions be
	better documented.
&quot;Background, Memory and Knowledge&quot; divided into two, considerably expanding
	the discussion of ways to track player character knowledge and use that
	tracking to affect descriptions, object names, and scope.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s3"></a>§11.3. What was new in build 5U92 (September 2008)</p>
<p><img alt="sep08.jpg" src="images/sep08.jpg" class="floating" /> As this release was being prepared, King Tupou V of Tonga was crowned, but Nepal became a Republic; climbers were lost to avalanches on K2 and Mont Blanc; Australia became perplexed at winning fewer Olympic medals than Great Britain; the most wanted man in Greece, who had escaped from prison by helicopter, was recaptured; a 50-foot spider spent a week crawling at 2 mph across the Liverpool skyline, spraying random passers-by with water; and many journalists had to learn how to spell &quot;Ossetia&quot; at a time when they would rather have been watching the sports channels.</p>
<p>In the world of Inform, a set of related improvements was made to the way adjectives, nouns and verbs combine in descriptions. This lifted many restrictions which made talking about values less flexible than talking about objects, and showed the language gradually becoming more general. In addition, directions could now be created freely. All 110 issues arising from bug reports since build 5T18 were closed out.</p>
<hr /><pre class="changelog">5U92 (10 September 2008)

This build makes a set of related improvements to the way adjectives, nouns
and verbs combine in descriptions. This lifts many restrictions which made
talking about values less flexible than talking about objects, and shows the
language gradually becoming more general. This brings only subtle (if nice
to have) improvements for authors, but improves the coherence of the design
of Inform. In addition, directions can now be created freely, fulfilling the
last outstanding promise made in the January 2007 consultation document.
There are miscellaneous minor improvements, and five months' worth of
maintenance changes. All 110 issues arising from bug reports received up to
7 September 2008 have been closed out.

INFORM FOR WINDOWS

Added a preferences dialog, allowing the tab size in the source panel to be set.
Drag and drop in the source panels now follows the usual Windows conventions:
	by default the operation is a move, and holding down the 'Ctrl' key
	during the drag makes it a copy.
Fixed a bug in the built-in Glulx interpreter that generated
	spurious timer events.
Accented characters in the user's name should no longer cause the compiler
	to crash.

INFORM FOR LINUX

Internationalized all the strings in the user interface, so that translators
	can if they wish translate these. (A Spanish translation has been started,
	thanks to Ángel Eduardo.)
The Documentation text will now still be visible when using a light-on-dark
	desktop theme.
The dialog that appears when you start the program can now be closed, in case
	you started the program by accident.
Bugs fixed that caused some preferences to revert to their default values
	every time the application started.
Bug fixed that caused a crash when deleting some items from the Skein.
Various minor bugs and crashes fixed.

NATURAL LANGUAGE

Descriptions and adjectives have each been expanded in scope, so that many
	kinds of value can now be handled in ways which previously only worked
	for objects. Specifically:
Either/or and value properties can now be given to any kind of value
	with named, enumerated outcomes. So for instance:
		A scene can be thrilling or dull.
		A scene has a text called cue speech.
	or:
		Colour is a kind of value. The colours are red, blue and green.
		A colour has a number called frequency. The frequency of a colour
		is usually 130.
	As with objects, the names of either/or properties act as adjectives
	describing a scene.
Descriptions can now talk about values as well as objects. So:
		if N is an even number, ...
		if the score is positive, ...
		let L be the list of thrilling scenes;
		repeat with S running through non-recurring scenes: ...
		if more than three scenes are dull, ...
	all now work. Repeating through and listing require that the possible
	range of the kind of value is finite - so you can't write
		let L be the list of numbers;
	(which would have to be infinite). See the chart at the bottom of the
	redesigned Kinds index page to see when repeating and listing are allowed.
The same adjective can now have multiple independent meanings, and there is
	no difficulty provided that these apply to different things. Thus a
	definition of &quot;fancy&quot; for a colour would not obstruct a definition of
	&quot;fancy&quot; for a door, for instance.
The Standard Rules now define the following adjectives for values as built-in:
		even, odd, positive, negative - for numbers
		empty, non-empty - for texts, indexed texts, tables, rulebooks,
			activities, and lists
		recurring, non-recurring, going on - for scenes
	(Note the six independent definitions of &quot;empty&quot; depending on context.)
	&quot;Recurring&quot; used to be an adjective which could be used only when creating
	a scene, as in:
		Train Stopping is a recurring scene.
	It is now an either/or property, which means we can change it at run-time:
		now Train Stopping is non-recurring;
Now that scenes can be described in flexible ways, we can use the &quot;during ...&quot;
	clause of a rule flexibly, too. For instance:
		Before going north during a dull non-recurring scene, ...
	(Previously &quot;during&quot; could only name a single explicit scene.)
There is now a short-hand way to define the antonym of an adjective, that is,
	the name of its opposite. For instance, the Standard Rules include:
		Definition: a number is even rather than odd if the remainder after
		dividing it by 2 is 0.
	The optional part here is &quot;rather than odd&quot;, which saves us writing:
		Definition: a number is odd if it is not even.
	(Note that different meanings of an adjective can have different opposites.
	We could, if we wanted, write
		Definition: a stored action is empty rather than purposeful if ...
	and then the opposite of &quot;empty&quot; would be &quot;purposeful&quot; in the context
	of stored actions, but &quot;non-empty&quot; for the other cases above.)

Inform has always supported a convenient quick way to create a property,
	sometimes specific to a single thing, which have three or more named
	possibilities:
		A fruit can be citrus, berry, melon, or pome.
	This actually makes a property called &quot;fruit condition&quot; and creates a
	new kind of value whose possibilities are enumerated as &quot;citrus&quot;, &quot;berry&quot;
	and so on. The author often never needs to use the name &quot;fruit condition&quot;,
	because the adjectives &quot;citrus&quot;, &quot;berry&quot;, ..., are convenient enough by
	themselves.
	But because Inform forms the property name in this way, there's a
	collision if two different ranges are created:
		A fruit can be unripened, ripe, overripe, or mushy.
		A fruit can be citrus, berry, melon, or pome.
	In previous builds this prevented two such conditions from existing at once
	for the same thing or kind. Inform now allows any number of conditions to
	exist independently of each other; if the author supplies an explicit name,
	that's used, and otherwise Inform automatically makes names. Thus:
		A fruit can be early, summer or late.
		A fruit can be unripened, ripe, overripe, or mushy (this is its
		squishiness property).
		A fruit can be citrus, berry, melon, or pome.
	creates three properties, called &quot;fruit condition&quot;, &quot;squishiness&quot; and
	&quot;fruit condition 2&quot; respectively.
	This means that an extension author can write, say,
		A vehicle can be brand new, roadworthy, battered or wrecked (this is
		its serviceability property).
	without &quot;using up&quot; the eventual user's ability to make his own &quot;vehicle
	condition&quot;.
	Conditions like these can be created for anything which can have a property,
	and in particular for scenes and enumerated kinds of value as well as
	for objects (see above).

It is now possible to use &quot;there&quot;, as in &quot;there is&quot; or &quot;there are&quot;, to
	talk about whether or not something exists. Here are some examples in
	assertion sentences:

		There is a room called the Shadow World.
		There is a box in the Shadow World.
		There is a jigsaw puzzle in the box.

		A coin is a kind of thing. There are two coins on the crate.
		
		Incrimination relates various things to various people. The verb to
		incriminate (he incriminates, they incriminate, he incriminated, it is
		incriminated, he is incriminating) implies the incrimination relation.

		There is a man called Mr Darcy. There is a pair of boxer shorts which
		incriminates Mr Darcy. There is a fishing rod incriminating Mr Darcy.

	And here are some examples in conditions:
	
		if there is a man, ...
		if there are vehicles, ...
		if there is nothing in the box, ...
		if there are three coins in the box, ...
		if there are exactly three coins in the box, ...
		if there are at least three coins in the box, ...
		if there is something incriminating Mr Darcy, ...
		if there is nothing incriminating Mr Darcy, ...
		if there are fewer than two things which incriminate Mr Darcy, ...

	Note that
	
		if there are three coins in the box, ...
		if there are at least three coins in the box, ...

	have the same meaning: if the number of coins in the box is four, then
	there do exist three coins in the box, which is what these are testing.
	&quot;Exactly&quot; is more precise:
	
		if there are exactly three coins in the box, ...

As some of these examples suggest, the handling of &quot;nothing&quot; has been
	improved so that it can be used in a wider range of contexts, and a few
	bugs have been fixed in the process. For instance, the following now works:
	
		now nothing incriminates Mr Darcy;
	
	And similarly for &quot;nowhere&quot;, &quot;nobody&quot;, &quot;no-one&quot; and even &quot;no one&quot; -

		now nobody in the Temple is surprised;
		if nowhere is dark, ...
		if no one is in the Temple Annexe, ...

It has always been legal to use &quot;not all&quot; in a condition - for instance,
		if not all of the coins are in the box, ...
	&quot;Not every&quot; has been added, so that this has the same meaning:
		if not every coin is in the box, ...
	And similarly, we can now if we wish write
		if not more than four coins are in the box, ...
	or (equivalently)
		if not fewer than six coins are in the box, ...
		if not less than six coins are in the box, ...
	Those are the only determiners to which &quot;not&quot; can be applied. So this,
	for instance, continues not to be allowed:
		if not some of the coins are in the box, ...
There was previously a hard limit of 32 on the maximum number of relations
	&quot;in groups&quot; which could be created in any single compilation: this has
	been removed and there is now no limit.
The relation which tests whether two things are equal now has a name: it is
	the &quot;equality&quot; relation. So for instance it's now possible to define -
		The verb to be identical to implies the equality relation.
	(There's no obvious reason for doing this, but it was anomalous that it
	couldn't be done before.)
When a verb is created in the form &quot;to be able to...&quot;, as the Standard Rules
	does with the line:
		The verb to be able to see (he is seen) implies the visibility relation.
	then the following prepositional forms can be used:
		&quot;to be able to see&quot;
		&quot;to be unable to see&quot;
		&quot;to be able to be seen by&quot;
		&quot;to be unable to be seen by&quot;
	The last of these, &quot;to be unable to be seen by&quot;, did not work in previous
	builds, having been overlooked. So it is now possible to write, e.g.,
		if Peter is unable to be seen by Paul, ...
		if Peter had not been unable to be seen by Paul, ...

DIRECTIONS

Directions have been reformed. In earlier builds it was difficult to create new
	directions (and the documentation officially said that this could not be
	done at all); I6 hacks were needed, and the results sometimes failed.
	Directions can now be created freely, or at any rate pairs of them can:

		Turnwise is a direction. The opposite of turnwise is widdershins.
		Widdershins is a direction. The opposite of widdershins is turnwise.

	- To create a direction, a simple sentence in the form &quot;X is a direction.&quot;
		must be given.
	- Each direction has to have a value for the &quot;opposite&quot; property, which
		has to be another direction; these must be in matched opposing pairs.
	- The maximum length of a direction name used to be 1 (i.e., they had to
		be single words); now it is 3.
	- The maximum number of directions used to be 16; now it is 100.
	- New directions are exactly as good as old ones: for instance we can
		write &quot;to be mapped turnwise of&quot;, or use route-finding through new
		directions.
	- Each direction automatically makes a relation, the &quot;mapping-turnwise
		relation&quot; (or similar), which is the meaning of &quot;to be mapped
		turnwise of&quot;. This enables us to define prepositional forms; for
		instance, the Standard Rules includes the line:
			The verb to be above implies the mapping-up relation.
	- The I6 implementation beneath the surface is new: there are no &quot;n_to&quot;,
		&quot;s_to&quot;, etc., I6 properties any longer; the &quot;door_dir&quot; property for
		doors now holds a direction object, not a direction property as it did
		in the I6 library; the map is stored in a flat array instead. See
		the template file &quot;WorldModel.i6t&quot;.

MINOR NEW FEATURES

Scenes can now be said - that is, if X is a scene, then &quot;[X]&quot; now expands
	to the name of the scene.
It is now possible to have &quot;let&quot; and global variables of the kind of value
	&quot;sound-name&quot;, which hold sound effects. (The default value for this is
	a special silent sound, the playing of which has no effect, but which
	is present in all compilations regardless of whether they use sounds
	or not.) And similarly for &quot;figure-name&quot; and &quot;external-file&quot;. &quot;Scene&quot;,
	which up to now could be held in a global but not a local variable
	(an oversight) can now be either.
Truth states (both of them) can now be understood, so actions can be made
	which are applicable to them, and &quot;[truth state]&quot; is a valid Understand
	token.
The Understand token &quot;[a time]&quot; matches a time of day, such as &quot;10:15 AM&quot;
	or &quot;midnight&quot;. But the &quot;time&quot; kind of value can hold relative times as
	well as absolute ones -- for instance, 10 minutes is a time, but it is
	not recognised by &quot;[a time]&quot; since it isn't a specific moment in the day.
	A new Understand token called &quot;[a time period]&quot; has been added for this,
	so for instance
		Understand &quot;wait for [a time period]&quot; as ...
	would match WAIT FOR AN HOUR or WAIT FOR TWO HOURS 12 MINUTES.
The handling of mixed-case notations has been improved - for instance, given
		Acidity is a kind of value. pH 7 specifies an acidity.
	the &quot;p&quot; will always be printed in lower case, and the &quot;H&quot; upper case.
	Printing back always respects the case in the original specification;
	but parsing is always case-insensitive.
Repeating through tables used to carry the risk that if something in the body
	of the loop changed the row selection, the loop would break, since it used
	the row selection itself as an iterating variable. This has been corrected.
	A &quot;repeat through&quot; loop can now be nested inside other &quot;repeat through&quot;
	loops; the body of the loop can change the row selection without harm;
	moreover, a &quot;repeat through&quot; loop preserves the row selection, so that
	on exit, the same row (if any) is selected as was selected before the
	loop began.
When tables are sorted &quot;in random order&quot;, blank rows are now automatically
	moved to the bottom. The non-blank rows occur in a uniformly random order
	at the top of the table.
When &quot;Include ... instead of ...&quot; is used to replace a part or segment from
	the I6 template, a subsequent &quot;include... instead...&quot; on the same part or
	segment now overrides an earlier one. (In 5T18 both would be applied, but
	this almost never led to valid I6 code, and it's hard to think of
	circumstances when users would want that behaviour.) It continues to
	be the case that &quot;Include ... after ...&quot; and &quot;... before ...&quot; allow
	multiple inclusions attached to the same part or segment.

INTERFACE TO I6 INTERNALS

There are now two ways to specify that an adjective is defined at the I6 level:
		Definition: a rulebook is empty rather than non-empty if I6 routine
			&quot;RulebookEmpty&quot; says so (it contains no rules, so that following
			it does nothing and makes no decision).
	The part in brackets does nothing, but is the text used in the Phrasebook
	index for the user's benefit; it should be a brief definition. The I6
	routine should take one parameter, the value on which the adjective is
	being tested, and should return true or false as appropriate.
		Definition: a rulebook is exciting if I6 condition
			&quot;excitement_array--&gt;*1==1&quot; says so (it is really wild).
	The condition is given as a &quot;schema&quot;, in which the escape &quot;*1&quot; is
	expanded to the value on which the adjective is being tested. (This is
	usually faster than calling a routine, but in case of side-effects, the
	*1 should occur only once in the condition, just as with a C macro.)
The &quot;translates into I6 as&quot; verb now has another possible use: for Understand
	tokens. This is how the Standard Rules sets up the new &quot;[a time period]&quot;
	token, for instance:
		The Understand token a time period translates into I6 as
		&quot;RELATIVE_TIME_TOKEN&quot;.
	(The I6 routine of this name can be found in the Time.i6t template file.)
	This might be of use to extensions which want to add very rich parsing
	possibilities which break existing conventions.

PERFORMANCE

The run-time storage of relations, kind membership and the map has been
	made slightly more efficient. The gain has been used to make projects with
	&quot;use memory economy&quot; in force run a little faster - previously, memory
	economy blocked Inform from generating faster searches through objects
	by using precompiled linked lists. That still leaves a memory saving of
	around 2.5K in a completely full Z-machine story file. This is not as
	ridiculous as it sounds, since the Z-machine has only 64K of dynamic
	memory to play with, and this tends to be the limiting factor on the
	size of projects which Z can handle. A minimal I7 project needs 24K of
	this, so a saving of 2.5K out of the remaining 40K represents room for
	maybe a 6% larger design. (Of course for Glulx projects this is all
	irrelevant - there are really no size limits at all.)

Some users observed that the 5T18 build compiled more slowly, and this was
	a large enough effect to make a considerable difference to novel-sized
	projects (with 200,000-word source texts). This proved to be an accidental
	side-effect of internal consistency checks only really needed when
	debugging Inform itself. This has been fixed, and large projects should
	once again compile at roughly the same speed as in 5J39 and previous
	builds.

MAINTENANCE

Problem messages added for attempts to write constant values in notations
	where the second or subsequent numerical element runs out of the legal
	range, or where the total value exceeds the maximum or minimum range
	which Glulx can hold. (There was already a similar check for Z-machine
	projects - for Glulx, of course, the bounds are larger.)
Similarly, run-time parsing of values in such notations is also checked
	more carefully to see that it remains in range.
Finally, the Kinds page of the Index now quotes the maximum possible
	value for both Z-machine and Glulx use. (It previously quoted this only
	for Z, thus giving a misleading answer if Glulx was used.)
Problem message added to explain what's wrong when the source text tries to
	provide command grammar for a word reserved as an Inform testing command,
	such as SHOWME. (And the indexing of these reserved commands on the
	Actions index page has also been improved.)
Problem message improved when &quot;try&quot; is applied to something which ought to
	be a valid action, but which isn't for type-checking purposes - for
	instance,
		try taking 22;
Problem message added (in place of an internal error) to catch cases where
	a verb is missing from a condition so that it otherwise forms a
	description with no obvious subject:
		if the player not carrying a thing, ...
	(which of course is missing an &quot;is&quot;.)
Problem message added to block the use of &quot;called&quot; when it is being used
	only to rename one specific item, e.g.,
		if the Z-Boson Destructorator (called the gun) is carried, ...
	Previously this sometimes worked, but sometimes didn't, and in any case
	wasn't ideal from a stylistic point of view.
Problem message added to block the use of implications based on information
	not available at compile-time, such as:
		A room in the Garden is usually lighted.
	(Previously this disregarded the relation information - the &quot;in the Garden&quot;
	part - and therefore wrongly read the sentence as &quot;A room is usually
	lighted&quot;, a valid but different implication.)
Problem message added to catch attempts to equate two kinds of variable, as in:
		The stored actions variable is a truth state that varies.
	(This has happened because the user didn't realise that &quot;stored actions
	variable&quot; was a general category of variables, and thus not a good name
	to choose for a specific one. In 5T18 it produced an internal error.)
Problem message added to object to saying that things are to be defined by
	a table, but also saying how many there are (which may of course be in
	conflict with the number of rows in the table):
		Three berries on the bush are defined by the Table of Tasty Berries.
	The word &quot;three&quot; is either redundant or contradicts what the Table says,
	and the problem message says it should be removed, e.g., by writing:
		Some berries on the bush are defined by the Table of Tasty Berries.

Run-time problem message added to explain why only things can be moved during
	play (not for instance rooms, regions or directions). (Although people very
	seldom try this deliberately, they do sometimes accidentally ask for it
	because of misunderstandings about short forms of names of rooms.)

Bug fixed whereby a small number of rules formed like this one:
		Before printing the name of an object: say &quot;Print.&quot;
	would cause a spurious internal error; and similarly for rules such as
		Before listening to nothing: ...
	which can't in fact be useful (because &quot;listening&quot; always takes a noun),
	but ought not to trip over the compiler; and similarly for clauses
	such as:
		Instead of going east by nothing: ...
	in which optional details are added to an action (and these can indeed
	be useful: this example means going east on foot, i.e., with no vehicle).
	This was all one single bug, and was the one most experienced by users
	of 5T18 - apologies.
Bug fixed whereby and &quot;[end if]&quot; adjacent to an &quot;[or]&quot; in text, as here:
		&quot;[one of][if the location is Lab]Lab[end if][or]blah[at random]&quot;
	would cause an I6 compilation error. This was another very popular one.
Bug fixed whereby &quot;try&quot; with an action which applies to a topic would not
	work if applied to a snippet variable, so, for instance,
		try asking Bob about the topic understood;
	would fail.
Bug fixed whereby large rulebooks would in some cases misfile rules which
	depended on a single action _not_ being the current one, such as:
		Before doing something other than examining to the mercenary: ...
	(While this was a serious bug, it occurred only rarely, depending on
	complicated combinations of other rules also being in force.)
Bugs fixed to do with table columns holding indexed text, so that some attempts
	to look for corresponding values, or to search for values, or to copy a
	non-blank value into a blank, would fail with spurious run-time problem
	messages.
Bug fixed whereby sections replacing those in extensions:
		Section 1 - New foo (in place of Section 1 - Foo in Bar by Tina Banana)
	were not in fact always doing so in 5T18; and relatedly, when such
	heading tricks were used, were sometimes causing source text to be lost
	from the main text, resulting in spurious problem messages complaining
	that no room had been created. (It had, but in a sentence wrongly removed.)
Bug fixed whereby paragraph spacing would go wrong - usually with the expected
	gap between paragraphs going missing - in cases where a text substitution
	is defined which itself includes a &quot;[paragraph break]&quot; substitution. For
	instance, redefining:
		To say p -- running on: 
			say paragraph break.
	ought to give &quot;[p]&quot; exactly the same effect as &quot;[paragraph break]&quot;, but in
	5T18 the spacing after &quot;[p]&quot; would in some cases go missing.
Bug fixed whereby &quot;resume the game&quot;, a phrase to be used in the &quot;when play
	ends&quot; rulebook to cause it not to end but to carry on after all, had
	stopped working. Particular apologies for this: we hadn't realised that
	nothing in the 5T18 test suite verified its behaviour.
Bug fixed whereby the &quot;carrying capacity&quot; for a container or supporter could
	not be read without run-time problem messages if it was not set explicitly
	in the source text. (It should have, and now does, default to 100.)
Bug fixed whereby a container called &quot;sack&quot; would sometimes wrongly be treated
	as if it were a player's holdall, if it were carried alongside a genuine
	player's holdall.
Bug fixed whereby a rule depending on something having happened for a small
	number of times only would not always apply if the action is silent, e.g.,
		Instead of taking the top hat less than three times:
		say &quot;The top hat resists!&quot;
	...would fail to apply if the top hat were being taken silently as a
	result of a command like WEAR HAT. (Apologies: this bug was introduced
	inadvertently as part of a bug fix made in 5T18, and did not occur in
	earlier builds.)
Bug fixed whereby the Standard Rules read
		A door is never pushable between rooms.
	instead of
		A backdrop is never pushable between rooms.
	(Both are true. In 5T18, the sentence was given for doors twice and for
	backdrops not at all.)
Bug fixed whereby the Standard Rules wrongly put the &quot;switch the story
	transcript off rule&quot; in the &quot;carry out switching the story transcript
	on rulebook&quot;, not the one for &quot;...off&quot;, so that in 5T18 the transcript
	once started couldn't be stopped.
Bug fixed whereby table sorting might fail if the table contained consecutive
	blank rows within the body of non-blank rows.
Bug fixed whereby the phrase
		let maximum score be a number;
	which fails because &quot;maximum score&quot; is already a global variable, so can't
	be a temporary one as well, would give both a problem message and also an
	internal error. It now just gives the problem message.
Bug fixed whereby source text such as:
		The Lab is a room. The barrel is a vehicle in the Lab. Sir John is a
		man in the barrel. The player is Sir John. The player is in the barrel. 
	would create a bogus &quot;yourself&quot; object in the barrel, other than Sir John.
Bug fixed whereby Understand grammar using &quot;[any ...]&quot; would wrongly match
	all items within those specified, as well as the items themselves. For
	instance, &quot;[any adjacent room]&quot; would match not just the rooms, but also
	their contents. Apologies for this bug, which was introduced by accident
	in the template rewrite for 5T18.
Bug fixed whereby rules depending on actions which involve the text of the
	player's command would sometimes throw internal errors if they also
	required the use of named &quot;Understand&quot; tokens which weren't used in any
	of the ordinary command verb grammar. For instance:
		Understand &quot;i7&quot; or &quot;inform&quot; or &quot;inform 7&quot; as &quot;[inform]&quot;.
		After asking Edsger about &quot;[inform]&quot;:
			say &quot;Projects promoting programming in 'natural language' are
				intrinsically doomed to fail.&quot;
Bug fixed whereby &quot;does the player mean&quot; rules would sometimes disambiguate
	the second noun of an action as if it were the first, in cases where
	the action uses &quot;[things inside]&quot; or &quot;[other things]&quot; as the first token
	(which the inserting action does, in particular). The documentation does
	warn that this might not work; it will now sometimes work, with care.
Bug fixed whereby a table with a number but not a name (say, &quot;Table 5&quot;) could
	not be referred to elsewhere in the source in the same form (e.g.,
	&quot;The utensils are defined by Table 5&quot;).
Bug fixed whereby &quot;does the player mean&quot; rules would not be applicable to
	going actions implied by commands consisting of a direction alone, such
	as SOUTH.
Bug fixed whereby, in complicated circumstances, two ordinarily identical
	things are wrongly considered still identical even after one has
	changed its property value for a property declared as describing them.
	(But only where this property is inherited from a mutual kind, which
	in turn has other &quot;Understand&quot; grammar defining it.)
Bug fixed whereby releasing a project with both a website and auxiliary files
	would produce links in the website which, though working for some browsers,
	failed for others, and which were local &quot;file:&quot; links rather than &quot;http:&quot;,
	so that the result would not work when uploaded.
Bug fixed whereby an UNDO which takes us back to a position where the player
	is in darkness would print the location as &quot;(darkness object)&quot; rather
	than running the appropriate activity to describe darkness.
Bug fixed whereby &quot;Use authorial modesty&quot; did not always work when given
	in the main source text of a work by an author wanting to be modest
	about his own extensions, included from it.
Bug fixed whereby negative values of literals would sometimes be printed
	incorrectly (e.g., &quot;-10.123&quot; might be printed &quot;-10.00-123&quot;).
Bug fixed whereby in rare cases the text of previous commands might be
	mingled with the text of a literal value being read in the current
	command.
Bug fixed whereby conditions for start and end of scenes would not properly
	work if they needed to manipulate indexed text, lists or stored actions,
	either throwing spurious problem messages or simply failing to match.
Bug fixed whereby, similarly, conditions for start and end of scenes would
	throw spurious internal errors if they contained table lookups.
Bug fixed whereby complex specifications of &quot;in the presence of&quot; people
	which involve callings or manipulate similarly complicated values would
	cause internal errors.
Bug fixed whereby relations applied to kinds rather than instances would in
	some cases throw an internal error rather than generate a problem message
	as being too unspecific:
		A supporter usually allows sitting.
Bug fixed whereby memory allocation would sometimes fail, in Glulx, when
	existing memory was sufficient but too fragmented to hold a large single
	block of data.
Bug fixed whereby Inform would refuse to create &quot;let&quot; variables called &quot;nd&quot;,
	&quot;st&quot; or &quot;th&quot;. (Exercise for the reader: can you guess why?)
Bug fixed whereby &quot;Understand ... when ...&quot; sentences would sometimes, if
	the condition was invalid, throw an internal error as well as a problem
	message.
Bug fixed whereby the sentence
		Here is everywhere.
	would crash Inform rather than produce an outraged problem message.
	(Yes, somebody tried this.)
Bug fixed whereby extension documentation would be wrongly punctuated around
	displayed example source text which contained explicit I6 inclusions,
	with a spurious &quot;-)&quot; to close the I6 inclusion, added at the wrong point.
Bug fixed whereby spurious &quot;details&quot; icons appeared after the names of kinds
	in the Lexicon index.
Bug fixed to do with the status line sometimes disappearing on the Z-machine.
Bug fixed to do with cursor movements in unusual font sizes in v6 of the
	Z-machine.
On Glulx works only, the &quot;emphasised&quot; type style now has the style hints
	weight 0 and oblique 1 set automatically when Glulx starts up: the point
	of this is that I7 uses this style to implement the text substitution
	&quot;[italic type]&quot;. (Yes, yes, so the 5T18 change log made the same promise.
	But with any luck it will work this time.)

EXAMPLES AND EXTENSIONS

Examples:
	Added &quot;Fabrication&quot; to demonstrate the use of values which themselves have
		properties.
	Added &quot;Bowler Hats and Baby Geese&quot; to demonstrate the use of scenes with
		properties.
	Added &quot;Elsie&quot; to demonstrate a sliding door that closes automatically
		after being open for one turn.
	Added &quot;Versailles&quot; to demonstrate a mirror the player can look into.
	Added &quot;Pizza Prince&quot; to demonstrate a near-infinite supply from which
		the player can go on taking instances.
	Added &quot;Extra Supplies&quot; to demonstrate a supply from which the player
		can take one instance at a time.
	Added &quot;North by Northwest&quot; to demonstrate compass directions between
		the usual set, and how to deal with the nine-character limit on names.
	Added &quot;The World of Charles S. Roberts&quot; to demonstrate a hexagonal
		direction system.
	Modified &quot;Copper River&quot;, &quot;One Short Plank&quot;, &quot;Mr. Burns' Repast&quot;, &quot;Yolk
		of Gold&quot;, &quot;Depth&quot;, and &quot;Xylan&quot; to use the new &quot;there is...&quot; syntax in
		places where the old syntax seemed a bit stilted.
	Modified &quot;Solitude&quot; to correct some errors in the comments caused by an
		over-zealous search and replace when truth states were introduced.
	Modified &quot;Copper River&quot; to list all objects explicitly while taking
		inventory, even if they are otherwise referred to as &quot;assorted dull
		items&quot;.
	Modified &quot;Bumping into Walls&quot; to get rid of some inelegant grammar in
		the definition of viable directions, which is no longer necessary
		because of syntax improvements.
	Rewrote &quot;Fore&quot; completely to take advantage of new direction-defining
		abilities, rather than presenting the rather hackish methodology
		originally on offer.

Extensions:
	&quot;Glulx Text Effects&quot; updated to deal with an indentation bug. The version
		number is now 3.
	&quot;Glulx Entry Points&quot; updated to handle a bug introduced by the treatment
		of templates. The version number is now 6.
	&quot;Locksmith&quot; edited to bring conditional syntax in line with the new
		Pythonesque standard, and (more importantly) to give explicit names
		to a couple of rules that still lacked them. Version number is now 7.

Recipe Book:
	Expanded the contents of the section on ending the game to lay out more
		of the ways in which the final text can be altered.


</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s4"></a>§11.4. What was new in build 5T18 (April 2008)</p>
<p><img alt="apr08.jpg" src="images/apr08.jpg" class="floating" /> As this release was being prepared, the Grand Canyon was deliberately flooded, while Sweden's largest lake was lowered by 15cm; in London, Heathrow Terminal 5's state-of-the-art automated baggage system went live; gold prices broke £500 per troy ounce, while Pernod Ricard bought Absolut Vodka for $9 billion; in London, Heathrow Terminal 5's state-of-the-art automated baggage system began to fail, with many cancellations; Vietnam banned pet hamsters; in Nashville, King Crimson began recording again, but in Princeton our greatest translator of Homer, Robert Fagles, died; and in Milan, 15,000 items of lost luggage arrived from Heathrow Terminal 5's state-of-the-art automated baggage system, so that they could be sorted by human beings instead.</p>
<p>In the world of Inform, build 5T18 finally made the long-awaited reform of &quot;block structure&quot;, allowing Python-like syntax for grouped phrases, and made miscellaneous other improvements throughout. The Standard Rules were redrafted and formally advanced to version 2, and the standing I6 code used by I7 - the &quot;template&quot; - was completely rewritten. The first steps were made towards an official system for translating I7 into languages of play other than English, something which had previously been done but only with great difficulty. Certain run-time algorithms were optimised for speed, and all 162 open bug reports as of 26 April 2008 were closed out.</p>
<p>Besides the new examples, new material was added to the Recipe Book to give more guidance on designing new commands (see the Commands chapter), on the looking action and on conversation.</p>
<hr /><pre class="changelog">5T18 (30 April 2008)

This build is founded on a major reform of the infrastructure supporting
Inform. It contains miscellaneous new features to complete the work
of implementing the less speculative proposals planned in the January 2007
consultation document. (A second consultation document will be published
later this year to lay out future plans.) The interface application
contains a new Source view for OS X which should handle large projects
much better: it will follow on other platforms in subsequent builds.
The first steps are made towards an official system for translating I7
into languages of play other than English, something which has previously
been done but only with great difficulty. Certain run-time algorithms have
been optimised for speed, and all 162 bug reports received up to 26 April
2008 have been closed out.

INFORM FOR MAC OS X

The Source panel is now divided into two side-by-side views: Contents and
	Source. These are alongside each other, but only one is visible at a time,
	and each slides out of the way to make room for the other as needed. The
	Contents view shows a contents page for the source text, automatically
	generated from its headings. A slider can be used to control how much
	detail is shown. Clicking any heading slides back into the contents
	view, but showing only the material under that heading (and its
	subheadings, if any). This makes very large source texts much more
	manageable, and also provides a useful overview of an entire project.

INFORM FOR WINDOWS

The Contents view has also been partially implemented on Windows. On
	selecting this pane from the source tab, a window slides in from the
	left showing some or all of the headings in the source, depending on
	the slider at the bottom of the window. Clicking on a heading causes
	the contents pane to slide back and the source tab to jump to the
	chosen heading.
A spell checker has been added, using the &quot;hunspell&quot; project from
	OpenOffice.org. Only words that will appear as text in the game are
	checked. Currently this is accessed through the new &quot;Check Spelling&quot;
	Edit menu item: checking spelling as the user types will be implemented
	later.
Copying tables from the documentation to the source tab via the clipboard
	or through drag and drop should now work correctly: the table will
	be pasted with tabs rather than spaces between columns.
If the registry DWORD value
	&quot;HKCU\Software\David Kinder\Inform\Window\Watch File Changes&quot;
	exists and is set to zero, then the application will not notify
	the user if the &quot;source.ni&quot; file is changed by another program.

INFORM FOR LINUX

The long-awaited Skein tab has been added to the GNOME application; all
	features that are relevant without an accompanying Transcript tab
	are fully-functional.
The Game tab now runs Glulxe 0.4.3.
GtkSourceView 2.0 adopted, which means several fixes for the syntax
	highlighting. Thanks to Zachary Amsden for submitting a patch which
	did much of the work.
	- Most importantly, nested comments are now highlighted correctly.
	- Inform 6 code is highlighted as in the OS X application.
	- Words like &quot;if&quot; and &quot;otherwise&quot; are no longer highlighted burgundy.
	- Syntax highlighting in general should be somewhat faster.
Fixed various, minor bugs, some of which were tracked down and patched
	by Alan De Smet and Jonathan Liu.
Jonathan Liu has contributed a package for Arch Linux i686.

IF, REPEAT, WHILE

The preferred syntax for &quot;if&quot;, &quot;repeat&quot; and &quot;while&quot; phrases has been changed
	to a Python-style format using colons &quot;:&quot; and indentation to mark that
	lines in the definition of a phrase or rule are being grouped together.
	This implements most of proposal (6.22) from the January 2007 consultation
	document. For instance, what was previously written thus:

		...
		if the actor is holding a player's holdall (called the sack)
		begin;
			let the transferred item be nothing;
			repeat with the possible item running through things carried by
			the actor begin;
				if the possible item is not lit and the possible item is not
				the sack, let the transferred item be the possible item;
			end repeat;
			...
		end if;

	can now be written thus:

		...
		if the actor is holding a player's holdall (called the sack):
			let the transferred item be nothing;
			repeat with the possible item running through things carried by
			the actor:
				if the possible item is not lit and the possible item is not
				the sack, let the transferred item be the possible item;
			...

	We believe this is more consistent with the shape of definitions as a
	whole, which also take the form &quot;preamble: item 1; item 2; ...&quot; It also
	seems much closer to how books or newspapers represent lists of instructions
	or recipes, for instance.
The new syntax is now used in Inform's documentation and examples. We think
	it's clearer and more logical, though groups of the kind shown above are
	surprisingly uncommon in I7 source text, because so much which would need a
	loop in another programming language is done implicitly in I7. (There are
	fewer than 600 grouped phrases in the entire Inform documentation, an
	average of only 1.5 per example.) But the new syntax is _not_ compulsory.
	Each individual phrase or rule can be written to use either the old syntax
	or the new syntax (but not both in the course of the same definition).
	Thus, there is no need to change any existing source text - it will all
	compile exactly as before. Going over to the new syntax is entirely
	optional, and there is no intention at present to withdraw the old one.
A few notes about the arrangements:
	- A rule or phrase using &quot;new&quot; syntax is required to start each phrase
		of the definition on a new line. (But phrases are allowed to be
		longer than a single line, and can wrap in any way the author wants:
		see the &quot;repeat with...&quot; phrase above for an example.)
	- Indentation must be made with a sequence of tab characters; spaces are
		ignored (as they already are with table columns).
	- Indentation must begin on tab stop 1, i.e., one tab stop in from the
		left margin, and must advance by a single tab stop for each block
		which begins after an &quot;if&quot;, &quot;repeat&quot; or &quot;while&quot;.
	- Indentation must not exceed 9 tab stops.
	- An &quot;otherwise&quot; or &quot;otherwise if ...&quot; clause in an &quot;if&quot; should be
		given the same indentation as the &quot;if&quot; it belongs to. For instance,
			if the yellow door is open:
				now the duckling is happy;
			otherwise if the red door is open:
				now the duckling is sad;
			otherwise:
				now the duckling is ambivalent.
A new form of &quot;if&quot; provides a form of switch statement: this is only allowed
	in the &quot;new&quot; syntax above. For example:
		if N is:
			-- 1: say &quot;1.&quot;;
			-- 2: say &quot;2.&quot;;
			-- otherwise: say &quot;Else.&quot;;
		if the dangerous item is:
			-- the electric hairbrush:
				say &quot;Mind your head.&quot;;
			-- the silver spoon:
				say &quot;Steer clear of the cutlery drawer.&quot;
	This implements proposal (6.22c) from the January 2007 consultation
	document, though with slightly different punctuation syntax.
Finally on &quot;if&quot;: in every form except that last one, &quot;unless&quot; can now be used
	in place of &quot;if&quot; and with the same effect except that the sense of the
	condition is reversed. For instance:
		unless N is 3, say &quot;N is not 3.&quot;;
		unless the yellow door is open:
			now the duckling is happy;
		otherwise unless the red door is locked:
			now the duckling is sad;
		otherwise:
			say &quot;The yellow door is closed and the red one unlocked.&quot;;
	If written in old-style syntax, &quot;unless&quot; should be ended with &quot;end unless&quot;,
	not &quot;end if&quot;.
	This implements proposal (6.24) from the January 2007 consultation document.
Inside &quot;repeat&quot; and &quot;while&quot; loops, the new phrases &quot;next&quot; and &quot;break&quot; can
	be used to go directly to the next iteration, and to exit the loop
	immediately, respectively. (&quot;Next&quot; is called &quot;continue&quot; in a fair
	number of programming languages, and Inform issues a specific problem
	message to help people who forget this.) Thus:
		repeat with X running from 1 to 10:
			if X is 4, next;
			say &quot;[X] &quot;;
			if X is 7, break;
	prints the text &quot;1 2 3 5 6 7&quot;.
	This implements proposal (6.23) from the January 2007 consultation document.
The text substitution &quot;[unless ...]&quot; means the same as &quot;[if ...]&quot; but with
	the sense reversed, paralleling the use of &quot;unless&quot; and &quot;if&quot; as phrases.
The text substitutions &quot;[otherwise]&quot; and &quot;[otherwise if...]&quot;, for use within
	&quot;[if]...[end if]&quot;, can now be written &quot;[else]&quot; and &quot;[else if...]&quot;: this
	is to be consistent, since &quot;otherwise&quot; can be written &quot;else&quot; in regular
	code too.

UNDERSTANDING

When an item or room is created, Inform automatically makes its name something
	the player can type to refer to it. For instance,
		The Wabe is a room. The blue peacock and the sundial are in the Wabe.
	means that the player can type EXAMINE BLUE PEACOCK or PUSH SUNDIAL or
	SHOWME WABE, and so on. This is almost always a good thing, but a nuisance
	if something's true identity is not known to the player. So:
		The secret document is a privately-named thing in the drawer.
		The printed name of the secret document is &quot;[if the secret document is
			handled]secret document[otherwise]dusty paper&quot;.
		Understand &quot;dusty&quot; and &quot;paper&quot; as the secret document.
		Understand &quot;secret&quot; and &quot;document&quot; as the secret document when the
			secret document is handled.
		After taking the secret document for the first time: say &quot;Heavens! It
			is the secret document!&quot;

	...uses the new property &quot;privately-named&quot; to make the secret document
	something whose name is only what Understand... explicitly says: the name
	it happens to have in the source text is ignored. (Privately-named is
	a property which affects how Inform creates the object, and it can't be
	given or taken away during play.)
When a kind is created, and the source text constructs multiple duplicate items
	of that kind, Inform generates a plural of the kind's name in order to
	understand commands referring to these multiples. For instance, given...
		The Lake is a room. A duck is a kind of animal. Four ducks are in
		the Lake.
	...the player can type TAKE DUCKS to try to pick up all four.
	It is now also possible to teach Inform new plural forms of name. For
	instance:
		Understand &quot;birds&quot; and &quot;ruddy ducks&quot; as the plural of duck.
	Now TAKE BIRDS and TAKE DUCKS are equivalent. Plurals can even, strange
	as it may seem, be given for single things:
		The magpie is in the Lake. Understand &quot;birds&quot; as the plural of the
		magpie.
	Now TAKE BIRDS tries to take all four ducks and the magpie too.
	This implements proposal (6.49) from the January 2007 consultation document.
When Inform receives a command like TAKE ALL, it forms up a list of the
	eligible objects and then generates actions for each in turn. This can
	now be inspected and changed. For instance,
		let L be the multiple object list;
	sets L to this list. (If there is no multiple object, say if the command
	was TAKE PEAR, the list will be empty: it won't be a list of size 1.)
	Correspondingly, we can set it:
		alter the multiple object list to L;
	Of course if Inform is already working through the actions, it is too
	late cleanly to change this list, but the following...
		The magic rule is listed before the generate action rule in the turn
		sequence rules.
		A thing has a number called dramatic potential.
		This is the magic rule:
			let L be the multiple object list;
			if the number of entries in L is greater than 1:
				sort L in dramatic potential order;
				alter the multiple object list to L.
	...does a little rearrangement after the parser has finished but before
	actions have started to be generated.
The meaning of the phrase
		place X in scope
	used to depend on whether X was a room or not: for rooms, only the
	contents would be put in scope, and not X itself. This meant there
	was no way to put the actual names of rooms in scope, and was in any
	case an unnecessary complication. As from this build, the following
	possibilities:
		place X in scope
		place X in scope, but not its contents
		place the contents of X in scope
	do what they appear to suggest, whether X is a room or not. (If X is
	a room, the new &quot;place the contents of X in scope&quot; does exactly what
	the old &quot;place X in scope&quot; did, so it should be easy to correct existing
	source text if necessary - but e.g. in the Inform examples we didn't
	need to make any corrections at all.)
The &quot;printing a parser error&quot; activity can now override a further parser error,
	like so:
		Rule for printing a parser error when parser error is noun did not
			make sense in that context: 
			say &quot;If you must use 'any thing', you deserve all you get.&quot; instead.
	This error message appears only when an &quot;[any ...]&quot; token failing is the
	most interesting error the parser can generate, and several users have
	noticed that up to now there's been no way to rephrase it.

TABLES

Tables can now have amendments as well as continuations. That is, just as
	one can already write
		Table of Semi-Precious Minerals (continued)
	to add extra rows to an existing table, one can now also write:
		Table of Semi-Precious Minerals (amended)
	to change those rows. The amended table must have exactly the columns
	of the original and in the same order. Moreover, each row in the amended
	table must match exactly one row in the original. For instance:
	
		Table of Plans
		moment		outcome
		10 AM		&quot;takeover of Mars&quot;
		11:30 AM	&quot;canals reflooded&quot;
		11:45 AM	&quot;chocolate bar production doubled&quot;
		
		Table of Plans (amended)
		moment		outcome
		11:45 AM	&quot;volcanic cave production doubled&quot;

	creates a three-row Table of Plans, with reference to the chocolate bars
	struck out.
	Amendment rows may be given in any order.
	The process of matching a row begins at the left-most column: Inform
	tries to see if any single row in the original table has a matching
	entry. If none do, a Problem is issued. If more than one do, Inform then
	looks at the second column, and so on. Thus:

		Enthusiasm is a kind of value. The enthusiasms are pumped, wired and languid.
		
		Table of Mental States
		feeling	extent	consequence
		pumped	1		&quot;you feel able to run for your life&quot;
		pumped	2		&quot;you feel able to run for President&quot;
		wired	1		&quot;you feel able to run&quot;
		languid	1		&quot;you feel&quot;
		
		Table of Mental States (amended)
		feeling	extent	consequence
		pumped	2		&quot;you feel able to run for the Nebraska State Legislature&quot;

	...the amendment here is made to the second row of the original table.
	For the present, at least, the columns used for matching may only contain:
	numbers, times, objects, action names, activities, figure names, sound
	names, truth states and any new kinds of value or units which have been
	declared.

FAST ROUTE-FINDING

The ability to find routes through the map, and other relations, makes it
	possible to write quite sophisticated conditions concisely: but these
	sometimes run slowly, because they call for large amounts of computation.
	Two especially bad cases are provided by having dozens of characters
	constantly route-finding through the map in order to meander about;
	and having dozens of articles of clothing all partially revealing each
	other, overlying and underlying, so that it becomes a complicated
	matter to establish what can be worn on top of what else.
For finding routes in the map, there are now two use options:
		Use fast route-finding.
		Use slow route-finding.
	This chooses between two algorithms, neither of which is best in all
	cases. If neither is specified, &quot;fast&quot; is used on the Glulx VM, and
	&quot;slow&quot; on the Z-machine. In general, &quot;fast&quot; is very much faster if there
	is a large map in which frequent route-finding goes on; but it comes at
	a sufficient memory cost that, for a large map, it won't be able to
	fit into the Z-machine, which is very short of memory. On Glulx projects,
	memory is only an issue if we mind that the story file and saved games
	will be a little larger, which could just possibly matter for very small
	mobile devices. &quot;Slow&quot; is the same algorithm used in previous builds of
	Inform, and it has very low memory overheads: for many maps, especially
	fairly small ones, and where route-finding is only an occasional need,
	it is not detectably slower than &quot;fast&quot;.
	(For those interested, &quot;slow&quot; is a variation on Prim's minimal spanning
	tree algorithm, while &quot;fast&quot; is a form of the Floyd-Warshall algorithm.)
For finding routes through relations, the same two options are available,
	but because we tend to create many relations which never use route-finding
	the default is always &quot;slow&quot;. To make route-finding for a given relation
	&quot;fast&quot;, we have to declare it that way:
		Overlying relates various garments to various garments with
		fast route-finding.
		Overlapping relates various garments to each other with fast
		route-finding.
	(For instance, changing the &quot;overlying&quot; and &quot;underlying&quot; relations in the
	example &quot;What Not To Wear&quot; to &quot;fast&quot; enormously improves performance when
	there are large wardrobes to choose from.)
	The &quot;with fast route-finding&quot; note can only be added to various-to-various
	relations: although route-finding through various-to-one and one-to-various
	relations is fully supported, it exploits the relative simplicity of these
	problems to use a more efficient algorithm than either the &quot;fast&quot; or &quot;slow&quot;
	ones described above.

EXTENSIONS

Up to now, extensions have had filenames without a dot &quot;.&quot; followed by trailing
	text identifying their file type (i.e., without a &quot;filename extension&quot;,
	to use a completely different meaning of the word). There are some merits
	to this, but the demerits have won out. Inform now recognises the suffix
	&quot;.i7x&quot; (read: &quot;I7 extension&quot;) for these filenames, and we will gradually
	move to this form for files downloaded from the website.
Headings can now provide source text to be used if a given extension is
	included in the current run; or alternatively, if it isn't. For instance:
		Chapter 2a (for use with Locksmith by Emily Short)
	specifies that everything under this heading (and its subheadings, if any)
	will be ignored unless the extension Locksmith by Emily Short is included.
	Conversely,
		Chapter 2b (for use without Locksmith by Emily Short)
	will be ignored unless it isn't included.
	This allows extension writers to give variant implementations depending
	on what other extensions are in use.
Headings can also replace portions of extensions which have been included.
	For instance:
		Section 6 - Hacked locking (in place of Section 1 - Regular locking in
			Locksmith by Emily Short)
	places the source text under the new heading in the place of the old
	(which is thrown away). If there should be two or more headings of the
	same name in the given extension, the first is the one replaced;
	if two or more headings attempt to replace the same heading in the
	given extension, the final attempt in source text order is the one
	which succeeds; and finally, heading dependencies like the above are
	scanned in a top-down way. Thus, if we have
		Chapter 2a (for use with Locksmith by Emily Short)
		...
		Section 1 - Hacked marbles (in place of Section 4 in Marbles by Peter Wong)
		...
	and we don't include Locksmith, then the replacement of Section 4 of
	Marbles is not made, because Section 1 - Hacked marbles is subordinate
	to the Chapter 2a heading which we've told Inform to ignore.
The extensions machinery has been made more robust, fixing a number of
	obscure bugs not actually experienced in practice by any users, and
	changing existing conventions as follows:
- It is now possible for an extension to contain accented characters
	in author name and title: thus,
		Include Étude Pour La Fênetre by Françoise Gauß.
	should work. (Accents are removed for console output; the file of
	the extension must have the actual name it claims, as with any other
	extension.)
- The word &quot;and&quot; is permitted in the title of an extension.
- The maximum lengths of extension title and author name, previously
	31 characters each, have been raised to 50 characters each: but these
	are now more rigorously checked. (Previously, an extension breaking
	these limits would work on some platforms but not others: it would
	produce installation error messages on the Extensions documentation
	page, but these were easy to overlook by accident. An extension with
	overlong title or author name will now produce a Problem message when
	included.)
- It is now possible to give an optional line of additional credits for an
	extension, so that collaborators or earlier versions can get a name-check.
	For instance:

		Version 1 of Banana and Mango Peeling by Jesse McGrew begins here.

		&quot;Allows banana splits.&quot;

		&quot;based on War and Peace by Leo Tolstoy, translated by Donald Rumsfeld&quot;

	This last paragraph is the optional extra, which we suggest can be used
	in cases where, for instance, old I6 code has been wrapped up in new
	form - this is where to say who wrote the original.
- Installation errors are now more prominently displayed on the
	Extensions documentation page.
- Problem messages added and improved for checking that 'begins here' and
	'ends here' sentences for extensions being used are correct. (Checking
	of 'ends here' sentences, in particular, was very lax previously because
	of a bug in the extension manager: apologies for this, because it means
	there are now a few extensions in circulation which have improperly
	written 'ends here' sentences, but which are otherwise correct, and
	will now be rejected. But the corrections needed will be very simple.)

MINOR NEW FEATURES

It is now possible to define two different versions of the same text
	substitution, one in which the first letter is capitalised, the other
	in which it is lower case: these then have different meanings. (Inform
	already did this where the first word was The, A or An, and used this
	so that &quot;[the noun]&quot; had a different effect from &quot;[The noun]&quot;: what
	is new is that the same rule now applies to any first word.)
When lists of objects are printed with the text substitution &quot;[list of ...]&quot;
	(for instance, &quot;[list of open containers]&quot;) such lists are now always
	grouped and printed using plurals. (In previous builds, they would be
	if the objects involved were all inside or on top of a given parent
	object, but not otherwise. It's arguable that this is a bug fix rather
	than a new feature.)
The substitution &quot;[A list of ...]&quot; now capitalises the first indefinite
	article in the list, just as &quot;[The list of ...]&quot; does for the first
	definite one. (This was something we forgot to implement, and the
	fact that it wasn't there was reported as a bug, but properly speaking
	it was a missing feature before and is a new one now.)
A backdrop can now be dynamically moved to any set of rooms. For instance,
	suppose rooms have the either/or property &quot;wet&quot;, and that &quot;stream&quot; is a
	backdrop. Then -
		When play begins:
			move the stream backdrop to all wet rooms.
	- sets the stream to be present in any wet room, and of course absent in
	any dry one. The form of words:
			move the ... backdrop to all ...
	is deliberately meant to look unlike the simpler ways to move things, to
	emphasise that this is possible only for backdrops.
	The stream's position is ordinarily checked only after movements, for
	efficiency's sake. So if the player is in a room which suddenly changes from
	dry to wet, the stream will not magically appear (though it will be there
	if the player goes out and comes in again). If this is not good enough,
	the phrase &quot;update backdrop positions&quot; can be used to ensure the accuracy
	of all backdrop locations after a dramatic change -
		Instead of pulling the lever:
			now the Cave is wet;
			remove the lever from play;
			update backdrop positions;
			say &quot;The old rusty lever pulls away, and the thin cave wall goes
				with it, so that a stream bursts into the cave.&quot;
	This implements proposal (6.54) from the January 2007 consultation document.
When creating new verbs or prepositions, the word &quot;reversed&quot; can be used
	to reverse the sense of a relation. For instance,
		The verb to be embedded in implies the reverse incorporation relation.
The word &quot;nothing&quot; can now, in simple ways at least, be used in conditions
	to mean the non-existence of something. For instance -
		if nothing is in the box, say &quot;Nothing is in the box.&quot;;
		if the box contains nothing, say &quot;Nothing is in the box.&quot;;
	An exception is made for &quot;is&quot; alone, that is, for testing equality:
	otherwise
		if X is nothing, ...
	would mean &quot;if there is no thing that is equal to X&quot;
The verb &quot;to incorporate&quot; has been added to the built-in stock; that is, the
	following is now part of the Standard Rules:
		The verb to incorporate (he incorporates, they incorporate, he
		incorporated, it is incorporated, he is incorporating) implies the
		incorporation relation.
	Thus X incorporates Y if and only if Y is a part of X. It was slightly
	anomalous that no such built-in verb existed already (analogous to
	&quot;to contain&quot; and &quot;to support&quot;), and several extension-writers have
	found it a useful linguistic device and had to define it themselves.
A new activity &quot;printing the announcement of light&quot; has been added, in
	parallel with &quot;printing the announcement of darkness&quot;.
The assertion-maker has been slightly improved, so that relative clauses
	like the one in the third sentence here work (rather than producing
	problem messages):
		A person can be asleep or awake. The Spinning Tower is a room.
		Sleeping Beauty is a woman who is asleep in the Spinning Tower.
Test scripts (for TEST) can now contain exotic characters, and follow
	the same apostrophe conventions as other text: thus ' becomes &quot; except
	where used as a contraction, but ['] forces a genuine single quote.
On Glulx works only, the &quot;emphasised&quot; type style now has the style hints
	weight 0 and oblique 1 set automatically when Glulx starts up: the point
	of this is that I7 uses this style to implement the text substitution
	&quot;[italic type]&quot;.
The new activity &quot;printing a number of&quot; activity allows customisation of the
	entries in lists which give a number of duplicate objects. For instance,
		Rule for printing a number of blocks when the listing group size is 3:
			say &quot;all three blocks&quot;.
	In both this activity and also the existing &quot;grouping together&quot; activity,
	the number variable &quot;listing group size&quot; contains what it says.
	This implements proposal (6.44) from the January 2007 consultation document.
It has always been possible to test the (most recent) outcome of a scene, if
	it's a scene which has named possible endings, as here:
		Hindenburg Ride is a scene. Hindenburg Ride begins when play begins.
		Hindenburg Ride ends disastrously when a random chance of 1 in 7 succeeds.
	We can test what happened thus:
		if Hindenburg Ride ended disastrously, ...
	We can now also test what didn't happen:
		if Hindenburg Ride did not end disastrously, ...
	Note that this is true only when the scene has ended, but ended differently.
In the definition of a phrase which has options, the name of an option can
	be used as a condition: now, &quot;not&quot; followed by the name of an option
	can also be used as a condition, testing the obvious thing. Thus:
		To hunt the wumpus, fiendishly:
			if fiendishly, say &quot;Hunting fiendishly.&quot;;
			if not fiendishly, say &quot;Hunting normally.&quot;
	...prints one of these two texts, according to whether the &quot;fiendishly&quot;
	option is set, i.e., according to which of these is used:
		hunt the wumpus;
		hunt the wumpus, fiendishly;
The (+ ... +) construction for using I7 source text within an I7 inclusion
	(or within a template file - see below) now allows an adjective name
	to be given, and translates it to the name of the I6 routine testing
	that adjective.
A new feature so minor that with any luck nobody will notice or make use of
	it. I7 has a global variable called &quot;the container in question&quot;, used
	in reaching inside and reaching outside rules to mean the barrier being
	reached through. A much nicer way to do this is:
		Rule for reaching inside a container (called the barrier): ...
	where one then calls it &quot;barrier&quot;. The only reason that &quot;the container
	in question&quot; exists is because reaching rules go back to the very early
	days of I7, before the &quot;called&quot; mechanism exists. Well: the new feature
	is that a parallel &quot;supporter in question&quot; now also exists, because it's
	illogical to have the one without the other, and its absence was
	reported as a bug. But please don't use either.

EXAMPLES

Recipe Book:
	&quot;Varying What Is Read&quot; revised to account for many more types of parsing
		issue.
	Three new sections, &quot;Designing New Commands&quot;, &quot;Writing New Commands&quot;, and
		&quot;Modifying Existing Commands&quot; added at the beginning of the Commands
		chapter. These are meant to help people find technical features
		scattered throughout Writing with Inform, and also to offer some
		design guidance. &quot;Modifying Existing Commands&quot; tries to avoid overlap
		with the guidelines in the Advanced Action chapter and instead exists
		to point readers to the resources there and also in the Activities
		and Rulebooks chapters.
	&quot;Looking&quot; substantially revised to reflect new behavior.
	&quot;Actions on Multiple Objects&quot; added to the Commands chapter.
	&quot;The Flow of Conversation&quot; added to the Other Characters chapter to offer
		some general guidance about drafting conversation.

Examples:
	Added &quot;Escape from the Seraglio&quot; to demonstrate a way to vary printing
		of text such as &quot;grapes: ...&quot; when acting on multiple items at once.
	Added &quot;The Left Hand of Autumn&quot; to demonstrate printing more
		sophisticated descriptions of multiple objects when all are examined at
		once.
	Added &quot;Noisemaking&quot; to demonstrate adding a new stage to action
		processing, during which other characters can observe and react to what
		the player has done.
	Added &quot;Delicious, Delicious Rocks&quot; to demonstrate adding a new stage to
		action processing, during which the player's action is sanity-checked
		before any implicit takes, etc., are generated.&quot;&quot;
	Added &quot;Provenance Unknown&quot; to demonstrate how PUSH TELEVISION WEST might
		be converted to pushing the cart on which the television rests.
	Added &quot;Low Light&quot; to demonstrate an object that is visible and manipulable
		only when a bright light source is on.
	Added &quot;Kiwi&quot; to demonstrate a kind of shelf whose contents can only be seen
		if the player is standing on something.
	Added &quot;Jamaica 1688&quot; to demonstrate how to modify the final question of
		the game.
	Added &quot;Trieste&quot; added as a simple test and demonstration of table
		amendments.
	Added &quot;Formicidae&quot; added to demonstrate changing the order of the
		multiple object list.
	Added &quot;WXPQ&quot; added to demonstrate replacing the &quot;That noun doesn't
		make sense in this context.&quot; parser error.
	Added &quot;Copper River&quot; added to demonstrate the idea of &quot;interesting&quot;
		and &quot;dull&quot; objects: the game determines which items are currently
		important to the puzzles or narrative and mentions those in the room
		description, while suppressing everything else.
	Added &quot;Priority Lab&quot; added to offer a sandbox for trying out priority
		ordering in room descriptions, and some debugging tools.
	Added &quot;Casino Banal&quot; added to demonstrate more advanced uses of
		priority ordering.
	Added &quot;Zorb&quot; to demonstrate making some changes to the circumstances in
		which the player can push objects between rooms.
	Added &quot;Vouvray&quot; to demonstrate plural names at the beginning of the Kinds
		chapter.
	Added &quot;Prolegomena&quot; to demonstrate the printing a number... activity.
	Added &quot;Quiz Show&quot; to demonstrate asking open-ended questions of the player,
		which can be answered only on the subsequent turn.
	Added &quot;Orange Cones&quot; to demonstrate moving backdrops to
		conditionally-specified rooms.

	Changes to &quot;Alias&quot;, &quot;Air Conditioning is Standard&quot;, &quot;A Haughty Spirit&quot;,
		and &quot;Dinner is Served&quot; to reflect new strictness about properties
		such as enterable and transparent. (These were all effectively minor
		bugs that had previously gone unnoticed.)
	Changes to &quot;What Not To Wear&quot;, to reflect new strictness and to make
		some running speed improvements. More speed improvements are necessary.
	Change to &quot;Pink and Blue&quot; so that it works under Glulx as well as on the
		Z-machine.
	&quot;Second Oldest&quot; corrected for a typo in the middle initial of Dennis Jerz.
	&quot;Frizz&quot; adjusted so that instead of laboriously putting the wet and dry
		glove rules into various rulebooks, it now more elegantly creates a
		&quot;post-check&quot; rulebook between the check and carry out phases, and
		relies on that.
	&quot;Equipment List&quot; modified to remove a bug in the divided-wide style of
		inventory listing.
	&quot;Switch&quot; modified to demonstrate an actual switch statement now that
		one is available (but still to show how the same thing can be
		accomplished with otherwise if... or with a table of alternates)
	Updated &quot;Instant EXAMINE and LOOK&quot; into a playable example, now called
		&quot;Timeless&quot;, with modifications reflecting the new action sequence
		rules.
	&quot;Patient Zero&quot; revised to remove several bugs to do with exit
		descriptions and nondescript item listing.
	&quot;DIAGNOSE command&quot; converted to a complete, runnable example (now
		called &quot;Red Cross&quot;).
	&quot;Responding to questions starting with WHO, WHAT, etc.&quot; converted to a
		complete, runnable example (now called &quot;Query&quot;)
	&quot;Examining everything at once&quot; converted to a complete, runnable
		example (now called &quot;Beekeeper's Apprentice&quot;).
	&quot;Hotel Stechelberg&quot; converted to a complete, runnable example.
	&quot;Replacing standard action report rules&quot; converted to a complete,
		runnable example (now called &quot;We&quot;).
	&quot;Laura&quot; slightly updated to mention the privately-named feature and to
		mention some of the more advanced parsing features that can be found
		in the Understanding chapter.
	&quot;Puff of Orange Smoke&quot; updated to use the privately-named feature.
	&quot;Verbosity&quot; edited to mention the syntax for checking current verbosity
		levels during play.
	&quot;First Name Basis&quot; adjusted to demonstrate plural names for a kind.
	Adjustments made to &quot;Money for Nothing&quot;, &quot;Bic&quot;, &quot;Chronic Hinting
		Syndrome&quot;, &quot;Dubai&quot;, &quot;Patient Zero&quot;, &quot;Bribery&quot;, &quot;Search and
		Seizure&quot;, &quot;Lakeside Living&quot;, &quot;Lemonade&quot;, &quot;Modern Conveniences&quot;,
		&quot;Trying Taking Manhattan&quot;, &quot;Rock Garden&quot;, &quot;Otranto&quot;, &quot;Savannah&quot;,
		&quot;Stately Gardens&quot;, &quot;Tilt 2&quot;, &quot;Tilt 3&quot;, &quot;Thirst 2&quot;, and &quot;Noisy
		Cricket&quot; to clean up code using &quot;unless&quot;.

EXTENSIONS

&quot;Standard Rules&quot; advanced to version 2: see below.
&quot;Locksmith&quot; edited to make it easier to change the output text; version
	number advanced to 6.
&quot;Plurality&quot; advanced to version 6, and a bug fixed whereby is-are did not
	print the correct output in the case where the object was the player.

SOURCE PUBLICATION

Internally, Inform is written according to the &quot;literate programming&quot; dogma
	of Donald Knuth, which means that its programs are written in such a way
	that they can be both executed by computers and also read by human readers.
	We intend to publish the entire source (online) in the course of Inform's 15th
	anniversary year, 2008. The result is likely to make a roughly 2000pp book,
	though of course a reference book rather than something anyone will want
	to read cover to cover.
This build sees the first step, with publication on the Inform website of
	drafts of Appendices A and B - the Standard Rules (A) and the Template (B) -
	which between them contain the most interesting 600pp of the material
	for people interested in modifying the internal workings of Inform.

INTERNAL REFORMS

The Standard Rules have been revised throughout: they are now more logically
	constructed, easier to read and better presented (for instance, in the
	Phrasebook index, which has a slightly new look). They advance formally
	to version 2.
	While much altered internally, they are almost exactly the same from the
	user's point of view, except that:
	- The property &quot;inventory listing&quot; for things has been withdrawn.
	(A fossil from the days of Inform 6: in I7's more rule-oriented way of
	looking at things, gadgets like this one are more an obstruction than a
	help, and it was striking that not one of the hundreds of examples ever
	used this property. And users often found it misleading that the property
	didn't play well with the activity &quot;printing the name of something&quot;.)
	- The either/or property &quot;transparent/opaque&quot; is now a property only of
	containers, not of all things. (It only ever had any effect for
	containers anyway, and for some things it makes no good sense - a
	transparent animal is perhaps a jellyfish, but a transparent man, in
	the non-metaphorical sense?)
	- The either/or property &quot;enterable&quot; is now a property only of containers
	and supporters. (Again, it did nothing for any other things before.)
	- An action which fails because the player is in darkness, and it needs
	light, is now deemed to fail the &quot;basic visibility rule&quot;, not the &quot;can't
	act in the dark rule&quot;. (This brings it into line with the &quot;basic
	accessibility rule&quot;, which is given as the reason for failure when the
	actor cannot touch something which is required to be in reach.)
	- The somewhat vaguely named &quot;non-player character action rule&quot; is now
	called the &quot;requested actions require persuasion rule&quot;.
	- Implicit taking has been reformed: in past builds, the implementation
	of the taking action looked as if implicit takes were unlike ordinary
	actions, but this wasn't really so. The action variable &quot;thing implicitly
	taken&quot; has been abolished, and so have the following three rules:
		standard set taking variables rule
		avoid unnecessary implicit taking rule
		don't report successful implicit takes rule
Four obscure variant syntaxes, intended primarily for use by the Standard
	Rules, have been combined into one. The following examples show the
	change:
		Open translates into Inform as open.
		--&gt; The open property translates into I6 as &quot;open&quot;.
		The I6 library object name of yourself is &quot;selfobj&quot;.
		--&gt; The yourself object translates into I6 as &quot;selfobj&quot;.
		The adjust light rule corresponds to routine ADJUST_LIGHT_R.
		--&gt; The adjust light rule translates into I6 as &quot;ADJUST_LIGHT_R&quot;.
		Quitting the game is an action corresponding to Quit, out of world
		and applying to nothing.
		--&gt; Quitting the game is an action, out of world and applying to nothing.
		The quitting the game action translates into I6 as &quot;Quit&quot;.
	In addition, one can now write:
		The whatever variable translates into I6 as &quot;whtvr&quot;.
	which was not previously possible to specify.
	Problem messages have been added to defend this combination verb
	better against malformed requests, though it is still intended only for
	low-level extensions.
	(As a result, &quot;to correspond&quot; is no longer reserved and people can
	define this as a verb of their own now; &quot;to translate&quot;, of course, is
	still reserved. The &quot;I6 library object name&quot; property has been abolished.
	Old-style tabular action definitions, in terms of lists of I6 routine names,
	have also been withdrawn.)
I7 projects no longer use the old I6 library: for fifteen years now, every
	story file made by Inform has included &quot;Parser.h&quot;, &quot;VerbLib.h&quot; and
	&quot;Grammar.h&quot;, but no longer. This is not as momentous as it sounds.
	I7 began by using library 6/9, then adapted to 6/10 and 6/11, but it
	always required minor modifications, indicated the suffix &quot;N&quot;: thus,
	the latest releases of I7 have used library 6/11N. This was intended
	for dual use by I6 and I7 projects, but I7's use of the library had
	become increasingly strained. In 5J39, library 6/11N contained around
	400 conditional compilations causing it to produce different code when
	used by I6 and I7: in some cases, drastically different. Almost half of
	the lines in 6/11N were ignored by I7, as were many of the concepts
	and features familiar to I6 users. It seemed to the authors that 6/11N
	was living a lie: it wasn't really the same library when used by both
	systems, and the continuing pretence was only making the code more and
	more baroque. Its form was only holding back further development.
	In this new build, the material from 6/11N which was still in use has
	been moved into the &quot;template layer&quot;, where it joins the other I6
	code used by I7. This somewhat simplifies the I7 architecture.
	Library 6/11N is still included in the current build, for the benefit
	of anyone using it with purely I6 projects in the Inform 7 user
	interface.
	In any case much of the significant code in the I6 library lives on, almost
	unmodified, in a new home. &quot;Parser.i6t&quot; in the new template, for instance,
	is more or less the supposedly abandoned &quot;parserm.h&quot; from Library 6/11N.
The template layer consists of a set of about 35 mainly short files, or
	&quot;segments&quot;, with the extension &quot;.i6t&quot;. Each segment has a name and is
	divided up into one or more named parts.
	This has enabled the Include (- ... -) syntax for inserting raw I6 code
	to be considerably strengthened. For instance -
		Include (- ... -) before &quot;Flowers.i6t&quot;.
		Include (- ... -) instead of &quot;Flowers.i6t&quot;.
		Include (- ... -) after &quot;Rhizomes&quot; in &quot;Flowers.i6t&quot;.
	With these new forms of Include, the given I6 code can be placed before,
	instead of, or after any named segment or named part of a segment.
	- Multiple such inclusions can be made for the same segment or part, and
	if so, all will take effect;
	- Inclusions requested before, or after, a segment or part which has been
	replaced with &quot;instead of&quot; will take effect and appear before or after
	the code which appears instead of it.
	- The existing but deprecated syntax
		Include (- ... -) before the library. 
	has been withdrawn; the new syntax
		Include (- ... -) after &quot;Definitions.i6t&quot;.
	should have the same effect.
	- The existing (and still fine!) syntax
		Include (- ... -). 
	is, for what it's worth, equivalent to
		Include (- ... -) after &quot;I6 Inclusions&quot; in &quot;Output.i6t&quot;.
	- Template code can now use the same (+ ... +) notation to evaluate I7
	expressions that inline definitions can; they also have access to a wide
	range of internal-use-only commands which shouldn't be used except in
	the built-in template files, but one command is safe to use:
		{-segment:NAME}
	places the whole of the template file NAME in this position. The file
	should be named as something like &quot;MyStuff.i6t&quot; -- it's a leafname, not
	a pathname -- and Inform looks for template files first in the subfolder
	&quot;I6T&quot; of a project's &quot;Materials&quot; folder, if that exists, and only then
	in its built-in stock. This means that
		(a) you can if you wish replace the built-in templates with your
		own, putting those in Materials/I6T, and
		(b) you can if you wish include chunks of I6 code generated by
		external utilities - Perl scripts, lex and yacc, etc. - by compiling
		those to suitable template files in Materials/I6T and then using
		an inclusion like
			Include (- {-segment:MyStuff.i6t} -).
All this allows for fine control in modifying the template, though we hope
	that users won't go in for template modification much or often.
	The template layer is gradually being tidied up: an annotated version,
	explaining what each part does, will be published later this year. In
	the mean time, those who do hack the template are warned that they may
	need to alter their code to keep it working with future builds.
One application of template layer hacking might be to provide extensions
	which translate the language of play. At present, I7 is not configurable
	enough to translate the language of writing, but as from this build it
	should be much more viable to translate the language of the story file.
	To demonstrate this, a new extension, &quot;English by David Fisher&quot;, is
	built in. This extension implements English, and there's no need for
	anyone to include it in their story files since English is already the
	language of play by default: but it serves as a model which translators
	can imitate. It should be fairly straightforward to convert existing
	I6 language definition files into extensions following this model.
	The authors suggest that these could be named in the style &quot;Language
	by Translator's Name&quot; - say, &quot;Latin by Adam Thornton&quot;.

OPTIMISATION

We would like to thank Jesse McGrew for writing a profiling version of the
	Z-machine interpreter dumb-frotz: a great help. (It appears, incidentally,
	that if dumb-frotz has a 3GHz Xeon CPU core to itself, it can interpret
	at around 13.5 MHz; a just-in-time compiler can manage 19.7 MHz, probably
	the world speed record for the Z-machine. Realistically, when interpreting
	the Z-machine over the next couple of years, we can expect about 10 MHz,
	but we should divide by about five to get likely speeds on portable devices
	such as the iPhone, with CPUs at about 600 MHz.)
The running time of large rulebooks (with 16 or more rules) has been improved.
	The recent discussion on RAIF about before, instead or after rules being
	inefficient in large numbers - because these rulebooks become large -
	led us to investigate how large an effect this really was. The answer
	was that it wasn't as dramatic as some people had feared, but was well
	worth addressing: this shaved about 24% off the running time of &quot;Bronze&quot;
	played right through to a solution. (The representation of rulebooks is
	now such that there is very little or no possible speed advantage to moving
	a before/instead/after rule into the check/carry out/report rulebooks,
	so this shouldn't be a factor in deciding where to put rules in future.)
As of this build, activity rulebooks are &quot;processed&quot; rather than &quot;followed&quot;.
	This means that they do not run the procedural rules individually as fresh
	contexts for rules in their own right: instead, they remain subject to
	procedural rules applying to whatever larger thing is going on -- i.e.,
	in almost all cases, the current action. This change made no difference
	to the behaviour of any test in the test suite, and removed a further
	16% from the running time of &quot;Bronze&quot;. (The change will not so
	significantly affect projects which don't use procedural rules, of course.)
Miscellaneous other adjustments, such as replacing heavily-used veneer routines
	with hand-coded assembly language versions better aimed at likely I7 rather
	than I6 use cases, should save about 10% of running time on most projects.
At the end of this period of optimisation, &quot;Bronze&quot; ran about 2.5 times faster
	than at the start, but this was an extreme case: most examples saw more
	modest improvements.

MAINTENANCE

Inform has been made more sensitive to the casing of prepositions. So, for
	instance,
		if the location is In Hallway, ...
	will now check to see if &quot;location&quot; is the room &quot;In Hallway&quot;, rather than
	taking &quot;is in&quot; to be a reference to containment, because the capital I is
	suspicious.
The &quot;map region&quot; property now exists for every room, even when there are no
	regions. (Its value is &quot;nothing&quot; if a room isn't in a region.) The point
	of this is to allow extensions which provide extra features for
	region-using works to compile. So, not quite a new feature, not quite a
	bug fix.
The ancient I6 library reply:
		&gt; PUSH SUNDIAL EAST
		Is that the best you can think of?
	has been reworded:
		&gt; PUSH SUNDIAL EAST
		The sundial cannot be pushed from place to place.
	(The original message has too much of a narrative tone, particularly for
	modern IF, and most authors prefer a more neutral message.)
Bug fixed whereby &quot;if X can see Y&quot; did not properly work if the player were
	in darkness. (Fixing this slightly changes the way we report a situation
	where the player is in an opaque container, without a light source, and
	asks someone outside the container to close it: we can now only witness
	that the container closes, and we don't actually see who closes it.)
Bug fixed whereby if two phrase definitions have identical wordings, it would
	be the earlier whose definition was applied, not the later. (It ought to
	be the later, firstly because the documentation says so, and secondly
	because this enables definitions in the Standard Rules to be overridden
	more easily - because the SR are always read earlier than anything else.)
Bug fixed whereby the rules [A] and [B] in the following would be regarded
	wrongly as being only equally specific:
		A flowerpot is a kind of thing. A flowerpot can be unbroken or broken.
		A Ming Vase is a kind of flowerpot. [Yes, I know, it isn't. Never mind.]
		Instead of attacking an unbroken flowerpot: ... [A]
		Instead of attacking an unbroken Ming Vase: ... [B]
	In fact, [B] is more specific and should therefore have priority over
	[A], because all Ming Vases are flowerpots but not vice versa, and this
	is now fixed.
Bug fixed whereby a skipped line for a paragraph break would in some
	circumstances be omitted between subsequent paragraphs in a room
	description.
Bug fixed whereby excessive skipped lines (two or three superfluous ones)
	would sometimes appear after out-of-world actions have reported.
Bug fixed whereby action, activity and rulebook variables could not be used
	as text substitutions when supplied to phrases with indexed text arguments.
Bug fixed whereby phrases with indexed text arguments would be unable to
	compile if they also required run-time disambiguation for other arguments,
	and would produce I6 errors instead.
Bug fixed whereby use of indexed text which used text substitutions, but
	didn't print on screen, would sometimes nevertheless cause incorrect
	paragraph spacing in what was printed next.
Bug fixed whereby constructing indexed text from other text, in a way which
	required use of text substitution, which itself needed to construct some
	indexed text, would produce garbled results.
Bug fixed whereby using &quot;exactly matches the text&quot; would behave the same as
	&quot;matches the text&quot;, that is, would not check the &quot;exactly&quot; part: this
	worked for regular expression matching, but not for plain text matching,
	because we forgot to implement this case. (Sorry. Of course, &quot;exactly
	matches the text&quot; means the same as &quot;is&quot;, so people probably weren't
	convenienced too much.)
Bug fixed whereby constant lists occurring in code, in works which otherwise
	contain no indexed texts, lists or stored actions, would fail to compile
	through I6.
Bug fixed whereby abstract use of &quot;...is listed in...&quot; in source text which
	contains no actual lists would fail to compile through I6.
Bug fixed whereby constant lists used in expressions other than assignments
	would not always have the correct contents.
Bug fixed whereby constant lists used to initialise a &quot;list of objects&quot; would
	fail if the objects in question had a specific kind made explicit by
	other assertions.
Bug fixed whereby constant lists of texts, when assigned to global variables,
	properties or table entries whose kind of value is &quot;list of indexed text&quot;
	rather than &quot;list of text&quot;, would be incorrect.
Bug fixed whereby constant lists of lists of numbers, where some of the numbers
	were negative, would have garbled contents.
Bugs fixed whereby constant lists of text which included at least one text
	substitution in one of the texts would sometimes fail to compiled through
	I6, or else would produce odd results at run-time.
Run time problem added for attempts to use &quot;entry N of L&quot;, where L is a list
	and N is an index out of range.
Bug fixed whereby changing a list to the empty list explicitly like so -
		now L is {};
	...would result in forgetting the kind of value stored in L if it were
	subsequently to be filled again, so that saying the contents might
	produce cryptic numbers instead of the proper values.
Bug fixed whereby
		if X is listed in {1, 2, 3}, say &quot;Hello.&quot;;
	would be misparsed because the commas inside the braces would be confused
	with the one outside.
Bug fixed whereby a phrase to decide a list (or indexed text), but which
	depended on arguments requiring run-time type checking, would either fail
	to compile through I6 or (more rarely) produce bogus results.
Bug fixed whereby use of lists, indexed text, stored actions, &quot;(called ...)&quot;,
	or certain other unusual constructions, would fail to compile through I6
	if they were made within &quot;Definition:&quot;s of adjectives or &quot;when&quot; conditions
	of relations or of &quot;Understand ...&quot; lines.
Bug fixed whereby variables could not be declared to have kind &quot;list of K
	that varies&quot;, where K is a either a kind of object (e.g. &quot;list of rooms&quot;)
	or a new kind of value.
Bug fixed whereby creating a kind called &quot;link&quot; would cause I6 errors.
Bug fixed whereby type-checking would incorrectly allow
		The secret word is a text which varies. The secret word is &quot;xyzzy&quot;.
		Before consulting the book about the secret word: say &quot;Magic!&quot;
	...which should not be allowed because matching against variable text
	like this has to be done using indexed text, and can't be done by direct
	methods. (Type-checking did correctly allow this for constant text.)
Bug fixed whereby type-checking would fail to find the correct interpretation
	of a &quot;try ...&quot; action, where the action applied to a value and the value
	was in turn calculated arithmetically, e.g.
		try hanging around until the time of day plus 6 minutes;
	where &quot;hanging around until&quot; is an action applying to a time.
Bug fixed whereby type-checking would not properly be applied to relative
	clauses incorrectly applied to descriptions, so that
		repeat with X running through members of D who are male:
	would apparently work if D is a description that varies - but only because
	Inform is misreading &quot;D who are male&quot; as itself a description, which it
	isn't, because only a person can be male: a description can't.
Bug fixed whereby type-checking would not correctly interpret, e.g.,
		let the irrelevant fact be whether or not 1 is 3;
	as a new variable &quot;irrelevant fact&quot;, and would instead overlay it on an
	existing one, the result being mayhem.
Bug fixed whereby a &quot;your former self&quot; person would sometimes be picked up
	by, for instance, repeats through all people or lists of people in cases
	where the source text specifies a particular person as the player-character,
	so that no &quot;yourself&quot; object ought to exist.
Bug fixed whereby the list-writer would not group together similar items
	into a numbered collection if they were people who were carrying things.
	Thus:
		A thug is a kind of person. A knife is a kind of thing.
		Every thug carries a knife. Five thugs are in the Alley.
	would report &quot;You can see a thug, a thug, a thug, a thug and a thug here.&quot;
Bug fixed whereby the text substitution &quot;[the player's command]&quot; would have
	too few words to it during an &quot;after reading a command&quot; rule taking place
	after the parser has asked a question like &quot;Which do you mean, ...?&quot;;
	and similarly where it would hold the word &quot;again&quot; or &quot;g&quot; rather than the
	command being repeated if the player had typed AGAIN or G.
Bug fixed whereby matching the player's command against a topic would sometimes
	give wrong answers at the start of play, or after a very short command in
	the previous turn.
Bug fixed whereby the parser will no longer say &quot;You can only do that to
	something animate&quot; if the supposedly animate object's name as typed
	wasn't recognised at all: it now says &quot;You can't see any such thing.&quot;
	in the usual way. (This seems to have been a curiosity in I6 going back
	at least ten years.)
Bug fixed whereby an implicit take (by someone else) generated by a requested
	action would fail to be recognised as another form of request.
Bug fixed whereby an &quot;instead&quot; or sometimes also a &quot;before&quot; rule like this:
		Instead of an actor jumping: say &quot;[The actor] prepares to leap.&quot;
	...would sometimes be applied before the persuasion rules had decided
	whether or not the actor in question would even try.
Bug fixed whereby a relation between two kinds of value which aren't objects
	would sometimes have its second term wrongly interpreted as an object
	just the same - for instance,
		Divisibility relates a number (called N) to a number (called M)
		when the remainder after dividing M by N is 0.
	- did not work because M was wrongly thought an object. It works now.
Bug fixed whereby conditions containing fairly elaborate double-negatives
	would sometimes fail to compile, producing I6 errors: for instance,
		if no hat is not enclosed by a person, ...
Bug fixed whereby run-time type checking was not properly defending relations
	between specific kinds of object, so that a condition would sometimes
	be misapplied to objects not of the that kind, resulting in spurious
	run-time problems (albeit only if the relation were being tested for
	objects to which it really doesn't apply).
Run-time problems added for attempts to remove the player from play (a logical
	impossibility) or to remove doors from play (which would make a mess of
	the map), and for attempts to change the player to someone who has been
	removed from play.
Bug fixed whereby, on Glulx, an attempt to expand the heap by dynamic memory
	allocation might fail if the current heap were completely full (i.e., with
	not even the smallest block of memory free): in some cases, a run-time
	hang would result.
Bug fixed whereby the count of how many turns over which a category of actions
	has been happening would sometimes be wrong if the action qualified only
	when a certain condition held, which did not hold at the start of the
	action but did hold at the end. For instance, suppose we have:
		A thing can be examined or unexamined.
		Carry out examining something: now the noun is examined.
		After examining an examined thing for the third turn: say &quot;Not again!&quot;
	If the player types EXAMINE BOX, never having done so before, then this
	does not qualify as &quot;examining an examined thing&quot;: but previous builds
	would have counted it towards the three turns needed for the rule to fire
	because, at the very end of the action, the description &quot;examining an
	examined thing&quot; would indeed match, the box by then having acquired the
	&quot;examined&quot; property.
Bug fixed whereby the count of turns is not fooled by multiple actions in a
	single turn: suppose we have the rule
		Before taking for the third turn: say &quot;Not again!&quot;
	and suppose the player types TAKE ALL, picking up a dozen items. In
	previous builds, the rule would treat these as different turns, but now
	they are treated as the same turn.
Bug fixed whereby &quot;when&quot; clauses in the preambles of rules for actions were
	not always allowed to see the action variables for the actions they
	belonged to: e.g.,
		Check going when the room gone to is dark: ...
	would not compile even though &quot;room gone to&quot; is a variable belonging to
	the action &quot;going&quot;, which owns the &quot;check going&quot; rulebook. A &quot;when&quot;
	clause for a rule can now see exactly the variables which the rule's
	definition can see.
Bug fixed whereby &quot;asking ... to ...&quot; actions would not work in rules which
	counted them: for instance,
		Instead of asking Daphne to take the snack for the second time: ...
	would never fire. It now does; note that the count is of the number of
	times the action has been requested. If Daphne first takes the snack
	on her own initiative, and then the player asks her, that doesn't fire
	the rule.
The count has further been reformed by ensuring that silent actions can
	never count towards the number of turns in such a rule; silent actions
	are never the main point of what is happening in a turn.
Bug fixed whereby &quot;[one of]...[or]...[in random order]&quot; would fail on the
	Z-machine if there were 13 or more alternatives, and could cause spurious
	programming errors on Glulx.
Bug fixed whereby making something a part of a door would in some cases cause
	a bogus problem message claiming to find two apparently unrelated sentences
	contradictory.
Bug fixed (or, arguably, specification clarified) so that when one thing makes
	another, and the new item derives its name from the old, then a &quot;printed
	name&quot; for the original is transferred to the new. For instance:
		An oak tree is a kind of thing. Some leaves are a kind of thing.
		Some leaves are part of every oak tree.
		The printed name of an oak tree is usually &quot;a mighty oak&quot;.
		Oak1 is an oak tree in Stage. 	
	...now results in leaves called &quot;a mighty oak's leaves&quot;, not &quot;Oak1's leaves&quot;,
	because the printed name &quot;a mighty oak&quot; transfers from Oak1.
Bug fixed whereby if a character were asked to do something with multiple
	objects (say with the command HELEN, GET ALL) then it would be assumed
	that agreement to perform the action with the first item would extend
	to the rest of the list, too. Persuasion rules are now properly checked
	for each item in the list in turn.
Bug fixed whereby rules predicated on a list of two or more actions, where
	an action name before the last could be read as both a complete action
	name and also an abbreviation for a different one, would have both
	interpretations applied instead of only the complete one: for example,
	if actions called &quot;franking&quot; and &quot;franking it with&quot; both existed, then
	&quot;Instead of franking or taking&quot; would be misread as applying to any of
	the &quot;franking&quot;, &quot;franking it with&quot; or &quot;taking&quot; actions - whereas
	&quot;Instead of franking&quot; and &quot;Instead of taking or franking&quot; would not
	be misread in this way.
Bug fixed whereby the &quot;in&quot; would be misinterpreted if it occurred in the
	name of a rule being explicitly placed in a rulebook, as here:
		The new can't travel in what's not a vehicle rule is listed instead
		of the can't travel in what's not a vehicle rule in the check
		going rules.
Bug fixed whereby some extension namespace clashes would fail to be
	reported correctly on the dictionary page where three or more
	different extensions all defined the same term.
Bugs fixed whereby names with exotic ingredients such as ~, ^, @ would
	either be misprinted or misparsed, or both.
Bug fixed whereby a &quot;Definition:&quot; would fail with an internal error if
	applied to just an &quot;object&quot; rather than a named kind such as &quot;thing&quot;.
	For instance -
		Definition: An object is weaponlike if it is the knife.
Bug fixed whereby &quot;now X is P of Y&quot;, where X is a variable and P is a
	property whose kind is a unit with the same name, would sometimes
	wrongly try to set P for X as well even when X is a variable of kind P
	rather than an object having P as a property. On the Z-machine this
	produced a spurious programming error; on Glulx, it sometimes crashed.
Bug fixed whereby asserting that a property is set to its own kind of value,
	rather than a specific value, would cause an internal error rather than
	produce a sensible problem message.
Bug fixed whereby the use of a specific named object combined with adjectives,
	in a context where only the object is expected, might cause an internal
	error rather than issue a problem message.
Bug fixed whereby paragraph breaks in the middle of phrase definitions
	would sometimes incorrectly be allowed, if the material just before
	the paragraph break ended in a semicolon.
Bug fixed whereby the &quot;does the player mean&quot; rules did not properly work for
	requests made by the player for other people to do things.
Bug fixed whereby making an assertion about a form of named construction
	(a type which is not a kind of value) would cause an internal error.
	For instance,
		A condition is usually true.
Bug fixed whereby a &quot;when&quot; condition in a relation which makes a calling
	so as to refer to an earlier result to decide a later one, would produce
	I6 errors and fail to compile.
Bugs fixed, or really, syntax clarified as to when qualifiers such as
	&quot;always&quot; and &quot;usually&quot; can be used in assertions: these are allowed
	on either side of the verb in most assertions, but not on both (for
	which a problem message has been added), and not in assertions
	admitting no doubt (such as &quot;Looking is an action applying to nothing&quot;).
	Previously Inform would silently allow, though ignore, some such
	usages.
Similarly, &quot;worn&quot;, &quot;carried&quot; and &quot;here&quot; can now only be used in assertions
	using the verb &quot;to be&quot;.
Similarly, &quot;of&quot;, &quot;from&quot; and &quot;and&quot; now lose their grammatical meanings as
	introducers of clauses in assertions if they are unexpectedly written
	with an upper-case O, F or A, respectively. Thus
		On the shelf is Of Mice And Men and The Girl From Ipanema.
	places two objects on the shelf, with the obvious names, and doesn't
	get sidetracked into thinking the shelf contains (for instance) an
	item called &quot;Of Mice&quot; together with some &quot;men&quot;.
Bug fixed whereby optional clauses matched against action variables would
	sometimes not work for actions which apply to nothing. For instance,
		The jumping action has an object called the situation (matched as &quot;at&quot;).
		Instead of jumping at the Place, ...
	was not being recognised.
Bug fixed whereby a rule like
	Check taking: say &quot;You can't, because [if Fred is visible]Fred might
		see.[otherwise]I say so.&quot; instead.
	...might only halt the action, as the &quot;instead&quot; implies, if the
	&quot;otherwise&quot; branch is taken through the text.
Bug fixed - well, anyway, sensitivity improved - so that when a kind of value
	is defined with a table, the names of the possible values in column 1
	are no longer so likely to cause namespace clashes with things or rooms
	defined elsewhere.
Bug fixed whereby when a table is used to define a kind of value or a set of
	objects, a bracketed kind of value declaration in a table column name
	would not be recognised. (For instance, if a table column is headed
	&quot;alpha (number)&quot; then the name is &quot;alpha&quot; and the values have to be
	numbers.)
Bug fixed whereby properties which are defined by column names in tables used
	to define objects (or values), for which the entry in row 1 happens to be
	text which has substitutions, would then only allow other texts with
	substitutions as values - not plain text.
Bug fixed whereby giving a value as &quot;object&quot; in a table used to define objects
	would result in peculiar problem messages at best, and an internal error
	at worst.
Bug fixed to do with writing tables containing numbers to files in projects
	using Glulx.
Bug fixed whereby conditions based on actions would sometimes fail to compile
	with I6 errors if the actions involved items or people which were
	specified by local (&quot;let&quot; or &quot;called&quot;) or global variables rather than
	named explicitly.
Bug fixed whereby declared plurals (with &quot;The plural of ... is ...&quot;) would
	only sometimes be used by room descriptions.
Bug fixed whereby, contrary to the claim in Inform's problem messages, a
	Table could not be created which was named with a number alone (&quot;Table 6&quot;).
Bug fixed whereby, if a room or thing existed whose name included a number
	(say, &quot;Room 101&quot;), then
		now X is a random number between 1 and 101;
	would sometimes be rejected as a compound condition for &quot;now&quot;, because
	the &quot;and&quot; had been misinterpreted.
Bug fixed whereby extension documentation would sometimes mis-space braces
	&quot;{&quot; and &quot;}&quot;.
Story files running on Glulx interpreters now properly check the &quot;unicode&quot;
	gestalt before trying to use Unicode character printing: such checks will
	only fail on old and now deprecated interpreters.
Bug fixed whereby the Phrasebook index would be garbled if words in the
	lexicon includes the characters &quot;&lt;&quot; or &quot;&gt;&quot;.
Bug fixed whereby names containing &quot;from&quot; would sometimes have their original
	articles taken as part of the name itself: for instance,
		The telegram from Klaxor is in the Breakfast Nook.
	would produce a proper noun, &quot;The telegram from Klaxor&quot;, rather than
	parsing it as &quot;the&quot; (definite article) + &quot;telegram from Klaxor&quot;. (That
	this bug was not more widely felt is chiefly because another mechanism
	in Inform tended to compensate for it.)
Bug fixed whereby &quot;called&quot; names were sometimes unable to contain the words
	&quot;with&quot; or &quot;having&quot;: for instance, this failed -
		The golf ball is in a container called the flask and cap with flange.
Bug fixed whereby consecutive articles would on rare occasions be allowed
	in noun phrases (&quot;a the tree&quot;, say).
Bug fixed whereby RESTORE would not always work as a reply to the final
	question (&quot;Would you like to RESTART, RESTORE a saved game or QUIT?&quot;).
Problem message added, in place of a disastrous compiler hang (apologies), for
	the incorrect syntax
		if one person (called the dude - a person) is in Home, ...
	where the user thinks he has to give the kind of value for &quot;dude&quot; - which
	he doesn't and indeed can't, since it's necessarily the kind of value of
	the person in question.
Problem message added to pick up mistakes when people type sentences like
		Jumping when the actor is on the trampoline is high-jumping.
	which don't do what they expect (the only legal reading of this asks
	to put an object called &quot;jumping when the actor&quot; on top of another one
	called &quot;trampoline is high-jumping&quot;, and it seems unlikely that this
	is what the writer intended).
Problem message added to catch maps which have more than two rooms connecting
	to a two-sided door. (There was already a problem to catch a door connecting
	to more than two rooms.)
Problem message added (in place of I6 error) for use of &quot;otherwise if...&quot;
	after the &quot;otherwise&quot; clause in an &quot;if&quot;.
Problem message added to catch &quot;if ..., repeat ... begin;&quot; where the &quot;begin&quot;
	is ambiguous as to which of &quot;if&quot; and &quot;repeat&quot; it belongs to.
Problem message added (in place of I6 error) for too many 'Understand &quot;verb ...&quot;
	as...' sentences for the same &quot;verb&quot;.
Problem message added to catch attempts to create &quot;topics that vary&quot;, a form
	of global variable that isn't allowed.
Problem message added (in place of internal error) for writing &quot;[a topic]&quot; as
	a grammar token, in I6 style, instead of &quot;[text]&quot;, the I7 way to do the
	same thing; and similarly for &quot;[an object]&quot; instead of &quot;[thing]&quot;.
Problem message added (in place of internal error) to catch certain
	complicated and completely wrong ways to define relations.
Problem message added (in place of internal error) for writing a rule based
	on an action applying to a value, where the name of the kind of value is
	written instead of a specific value.
Problem message added to catch attempts to make impossibly unspecific
	requests using cardinality quantifiers with now: &quot;now almost all of the
	doors are open&quot;, &quot;now six things are edible&quot;, and so on.
Problem message added for creating a property name consisting only of the
	word &quot;presence&quot; (since this causes ambiguities with &quot;...in the presence
	of...&quot;).
Problem message added for using &quot;if V is a C listed in T&quot;, where V is a value,
	C is a column in a table T, and unfortunately V is of a kind incompatible
	with the contents of C - for instance, a number when C holds only text.
Problem message added for creating constant lists of values where the lists
	aren't recognised because one or more of the entries doesn't make sense.
Problem message added to catch contradictory declarations like:
		Eleven is a 10 that varies.
Problem message added to catch attempts to use punctuation characters in
	Understand ... sentences which can't be matched by the parser anyway,
	so that the sentences appear to the user to be being ignored.
Problem message added to catch bizarre sentences like
		5 is an activity.
	(Or rather, to give them one problem message and not a cascade.)
Last and thoroughly least, but in response to a genuine bug report form,
	code added to protect NI from the &quot;Year 2038&quot; bug. This is the point
	at which 32-bit integer representations of time in non-leap-seconds since
	January 1 1970 begin to overflow. NI itself handles time correctly, but it
	uses C library calls on all its platforms which follow Unix conventions
	(including on Windows), which means they behave incorrectly on computers
	whose system clock is set to later than 2038. Work progresses but there is
	as yet no agreed solution to the Year 2038 bug. When there is, we will
	recompile NI against the improved C libraries then existing. In the mean
	time, users are advised to avoid time travel beyond 18 January 2038.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s5"></a>§11.5. What was new in build 5J39 (December 2007)</p>
<p><img alt="nov07.jpg" src="images/nov07.jpg" class="floating" /> As this release was being prepared, the American footballer Antonio Cromartie scored a touchdown with a continuous run of 109.88 yards, a league record unlikely ever to be broken on a pitch 110 yards long; the UK government burned two CDs with unencrypted bank details for every family with children, put them into the unregistered post, and then panicked when they never arrived; a pilot project in Fairfield, Texas, began converting carbon emissions from a power station into (edible) baking soda; there were wildfires in Malibu, floods in Tabasco and Rift Valley Fever in the Rift Valley; and a cruise liner struck an iceberg in the Antarctic and sank, but everyone was saved.</p>
<p>In the world of Inform, build 5J39 introduced lists as first-class values. For any kind of value K, &quot;list of K&quot; was now also a kind of value, and rich support was provided for building and iterating over lists, dynamically resized as necessary.</p>
<hr /><pre class="changelog">5J39 (1 December 2007)

This build introduces lists as first-class values. For any kind of value K,
&quot;list of K&quot; is now also a kind of value, and rich support is provided for
building and iterating over lists, which are dynamically resized as
necessary. Otherwise little is new, but once again all known bugs have
been fixed.

For any kind of value K, &quot;list of K&quot; is now also a kind of value. Lists
	resize automatically, can be iterated through, sorted, searched,
	reversed or rotated, and they have a notation enabling constant lists
	to be written down concisely: for instance,
		let L be {2, 3, 5, 7, 11};
	gives the temporary variable L the kind of value &quot;list of numbers&quot;,
	and sets it initially to this sequence of five values, whereas
		let M be the list of open doors;
	gives M the kind of value &quot;list of objects&quot;, and sets its initial
	contents to be all the doors which are currently open. (Lists can also
	be used in global variables, in properties, or table entries, and can
	include each other: &quot;list of lists of numbers&quot;, say, is a kind of value.)
	Values can be added or removed at any point in a list; lists can be merged,
	or compared for differences; and examples are presented to show the
	use of lists as queues, stacks, rings, sets, arrays, and so forth.
	(All memory management is automatic and all bounds are automatically
	checked.) See the new Chapter 20 (&quot;Lists&quot;).
Examples:
	&quot;Eyes, Fingers, Toes&quot; added to demonstrate a multi-number safe using
		lists to create a log of dialed numbers.
	&quot;Robo 1&quot; added to demonstrate a programmable robot that will replay the
		player's behavior.
	&quot;Robo 2&quot; added to demonstrate a robot that can learn multiple stored
		action scripts with command names determined by the player.
	&quot;Rock Garden&quot; reformatted to give the general material at the top.
	&quot;The Fibonacci Sequence&quot; added to demonstrate using lists as arrays.
	&quot;I Didn't Come All The Way From Great Portland Street&quot; added to
		demonstrate using lists as sets.
	&quot;Lugubrious Pete's Delicatessen&quot; added to demonstrate using lists as
		queues.
	&quot;Sieve of Eratosthenes&quot; added to demonstrate using lists as sieves.
	&quot;Circle of Misery&quot; added to demonstrate using lists as ring buffers.
	&quot;Lanista 1&quot; corrected to fix a truncated sentence in the commentary.
	&quot;Leopard-skin&quot; added to demonstrate a log of stored actions.
	&quot;What Makes You Tick&quot; added to demonstrate building a fishing rod from
		component parts.
	&quot;Your Mother Doesn't Work Here&quot; added to demonstrate using a list as a
		stack to plan character behavior.
The previous restriction whereby TEST scripts could not exceed 255 characters
	in length has been withdrawn. The new maximum is 9999 (a cap intended
	only to catch accidental runaway cases where the closing quote has been
	forgotten).
Problem message added to prevent the UNDO command being used in a TEST
	script (which can't safely be done since it undoes progress in the test
	itself), and also to prevent individual commands in TEST scripts from
	exceeding 100 characters (since the I6 library would choke on those).
Problem message improved for namespace clashes between variable names and
	descriptions.
Problem message added (in place of previous I6 errors) when a
	description of an action, used as a condition, refers both to the past
	and to values in the present (by means of &quot;called&quot;).
Problem message improved for an ambiguity in rule premisses as between
	a description of an actor followed by an action, and an action name
	with no actor attached. (This arose in the case of &quot;standing using ...&quot;,
	where &quot;standing&quot; had also been defined so as to describe certain people:
	was the action here &quot;standing using&quot;, done by nobody in particular, or
	&quot;using&quot;, done by a person matching &quot;standing&quot;?)
Bug fixed whereby pastes of Example text for examples including backslashes
	(such as those arising from the introduction of regular expression
	matching) and, in some cases, other unusual characters would cause
	the text to be pasted incomplete - so that it did not work as it
	was claimed to do.
Bug fixed whereby two or more consecutive double-quoted texts in a single
	table entry would lead to an internal error rather than a problem
	message; something which can happen easily if pasted text converts
	tabs to spaces, when two adjacent table columns are both supposed to
	contain text.
Bug fixed whereby a rule whose premiss involved clauses of several different
	sorts, one of them &quot;when&quot;, could sometimes produce an internal error.
Bug fixed - or, really, feature added, but the lack of it was regarded as
	peculiar - whereby an action description used in a rule was not allowed
	to give the name of a kind of value to mean &quot;any value of this kind&quot;:
	for instance, &quot;Instead of dialing something to a code symbol&quot;, where
	&quot;code symbol&quot; is a kind of value and &quot;dialing it to&quot; is an action
	applying to one thing and one code symbol.
Bug fixed whereby &quot;[']&quot; for apostrophe wasn't being allowed in titles given
	as the opening text of a bibliographic heading.
Bug fixed whereby indexed text and stored action variables were not working
	properly if they belonged to rulebooks, activities or actions.
Bug fixed whereby &quot;if there is a [table-reference]&quot; was not working in the
	case of columns holding indexed text.
Bug fixed whereby spurious &quot;no such entry&quot; run-time problems would occur if
	a table with a column holding indexed text was created with blank rows.
Bug fixed whereby ambiguous phrases requiring run-time checking on some
	arguments would sometimes go wrong if other arguments were stored
	actions or indexed text.
Bug fixed whereby if several &quot;let&quot; variables in a single phrase needed to
	be indexed text or stored actions, they would sometimes have their kinds
	of value rearranged between them, with occasionally bizarre results.
Bug fixed whereby the dynamic memory allocator would print up debugging
	information such as &quot;1+128+256+512+1024+2048+4096+8192+16384+65536&quot;
	after successfully allocating memory via Glulx's @malloc mechanism.
	Apologies for this.
Bug fixed whereby a compound phrase which looks as if it might be in the
	form &quot;total ...&quot;, counting the total of some property - but which isn't -
	would generate an internal error rather than being rejected in favour
	of some other interpretation.
Bug fixed whereby a rule predicated on a condition about something being
	listed (or not) in a table would cause I6 errors.
Bug fixed whereby an internal error rather than a problem message would
	sometimes be issued when a condition was used which had no active verb
	but could be taken as a description of things (typically arising if
	&quot;is&quot; had been mistyped as &quot;in&quot;).
Infelicity fixed whereby the problem message about minus signs being
	wrongly used in unit constants could be repeated (sometimes quite a
	few times) for the same mistake.
Problem message added (rather than I6 error or mysteriously incorrect
	behaviour) for the case of a phrase so ambiguous that at compile-time
	it is not possible to tell how many values it takes as arguments.
	The problem explains this, shows the phrases it cannot choose between,
	and invites the author to reword one of them.
Bug fixed whereby the old I6 debugging commands CHANGES and ROUTINES, which
	are no longer implemented in I7, still had their grammar visible in
	I7-compiled games, so that it was possible (but usually quickly fatal)
	to try using these commands.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s6"></a>§11.6. What was new in build 5G67 (November 2007)</p>
<p><img alt="oct07.jpg" src="images/oct07.jpg" class="floating" /> As this release was being prepared, the 50th anniversary of Sputnik 1 was marked, while Japan's Selene satellite entered lunar orbit; miraculously, all three thousand men trapped underground in an Elandsrand gold mine were rescued; Jason Lewis completed a circumnavigation by bicycle, pedal boat and kayak; the Chicago Marathon ran to a photo finish; the US conceded that it had mistakenly kidnapped a German car salesman; squirrels were declared once again safe to eat in New Jersey; and Albus Dumbledore was outed by J. K. Rowling.</p>
<p>In the world of Inform, build 5G67 extended the range of values which can be handled to include truth states, indexed text and stored actions. Inform was made compatible with Apple's newly-released Mac OS X Leopard (10.5), including suitable QuickLook and Finder plugins for dynamic icons and cover flow showing the contents of &quot;.inform&quot; project bundles. Philip Chimento joined the Inform team as the author of the Gnome user interface for Linux, building on Adam Thornton's work with the underlying tools, and the first easy-to-install packages for Fedora and Ubuntu were made available. This &quot;what's new&quot; chapter was added to the documentation, and further work went into improving the Recipe Book with a view to making it easier to extract general solutions for general problems. All 110 open bug reports were closed: there are now once again no known issues.</p>
<hr /><pre class="changelog">5G67 (10 November 2007)

This build presents substantially richer support for handling text: for the
first time, arbitrary and manipulable strings of text are first-class values
in Inform. Substantial internal reforms, notably a new implementation of
the type-checker (now the third such), lead also to other improvements:
notably the ability to store and play back entire actions, and a form of
boolean type for the first time - &quot;truth state&quot;. Finally, Inform is now
available for three new operating systems: Mac OS X Leopard (10.5), and
Fedora and Ubuntu Linux. We welcome Philip Chimento to the Inform team as
the author of the Gnome user interface for Linux.

MAC OS X

Mac OS 10.5 (Leopard) incompatibilities corrected; support added for
	QuickLook viewing of Inform projects, and for content-reflecting icons.
Bug fixed whereby replay and double-clicking in the skein sometimes failed to
	do anything.
Provisos such as &quot;(for Glulx only)&quot; are now removed from extension titles when
	making filenames for newly installed extensions.
The '+' button now works when adding Inform 6 extensions: in previous versions
	the only way to install a new Inform 6 extension was by dragging it to the
	window. Additionally, a bug has been fixed that was making it hard to
	add ORLib as a complete directory: in this new release it should be
	possible to just drag the ORLib directory to the Extensions pane and then
	use it by switching it on in the Settings tab of an Inform 6 project.
CocoaGlk 1.0.4 adopted, which includes a number of fixes:
	Fixed an issue that could cause a crash if a text grid window ends up with
		a negative size
	Fixed a problem that was causing games to crash under Leopard
	Various stream calls will now produce a warning when they are passed a NULL
		stream instead of crashing with an error. (The old behaviour was
		technically correct, but gwindows was passing in NULL streams quite often)
	Fixed an issue that was causing script files to be left empty until the
		user typed &quot;script off&quot;
Other minor changes:
	(I6 projects) &quot;Add breakpoint&quot; in the main menu now works in either pane
	Extensions are now displayed in alphabetical order
	The &quot;Open Extensions&quot; menu can now view built-in extensions
	Bug fixed whereby Glulx games were not saving transcripts correctly


WINDOWS

Fixed an intermittent crash in the I7 application, where it would stop
	with a dialog complaining about a &quot;pure virtual function call&quot;.
	Thanks to Maryam Gousheh-Forgeot for helping track this problem
	down.
Added a headings menu to the source tab, following the similar menu on
	OS X. The menu initially shows the top-level headings in the
	source. Select a heading to go to it, or click on an arrow to
	see the sub-headings below that heading.


INDEXED TEXT

A new kind of value, &quot;indexed text&quot;, exists to hold text which can be internally
	examined or changed. Ordinary text values are automatically converted to
	indexed text format when necessary. For instance,
		if character number 1 in &quot;[score]&quot; is &quot;7&quot;, ...
	implicitly converts the text of the current score to indexed form, allowing
	it to be looked at character-by-character, and then examines the first
	character: so the test passes if the first digit of the score is a 7.
	Memory is dynamically allocated to allow for such manipulations in a way
	transparent to the user (and on the Glulx virtual machine 3.1.0 or better,
	Inform story files can allocate arbitrarily large memory heaps).
	See the new Chapter 19, &quot;Advanced Text&quot;, in the documentation.
Indexed text can be accessed by character, word, line or paragraph, with
	further options to allow for punctuation; and we can search text to see
	if it contains any other text, and if so, how many times.
Moreover, indexed texts can be matched against regular expressions, with
	replacement also possible. For instance: if V is indexed text, then
		replace the regular expression &quot;\d+&quot; in V with &quot;roughly \0&quot;
	inserts the word &quot;roughly&quot; in front of any number in V. The regular
	expression language supported by Inform is essentially that of Perl
	(once multiline mode, a Perl eccentricity, and hooks to embedded Perl
	code have been removed) and Inform's algorithm has been verified against
	Perl's own compliance tests: see the notes in section 19.6 for details.
A particularly interesting text to manipulate is the command most recently
	typed by the player. Inform stores such text in a kind of value called a
	&quot;snippet&quot;, and - like &quot;text&quot; - this automatically converts to indexed text
	when necessary. Moreover, rules in the &quot;reading a command&quot; activity are
	allowed to rewrite the text and reparse the command - for instance,
		After reading a command:
			let T be indexed text;
			let T be the player's command;
			replace the text &quot;\p&quot; in T with &quot;&quot;;
			change the text of the player's command to T.
	removes any punctuation characters from what the player has typed.
Indexed text table columns can be written to, and read in from, external files.


STORED ACTION

A new kind of value, &quot;stored action&quot;, holds actions - not action names,
	but fully-specified actions, including the information about who does what
	and with what. (The default value is the player waiting.) If V is any
	value of this kind, then
		try V
		try silently V
		silently try V
	all work in the obvious way. The phrase
		current action
	returns the action currently under way. Stored actions can do anything
	that actions can do: in particular, they remember, if necessary, the exact
	wording of the player's command at the time they were stored - so that
	actions like &quot;looking up 'x100' in the code book&quot; can be stored and tried
	later on. Stored actions can be used in &quot;let&quot; variables, in table columns,
	in global variables, and also in properties. See the new section 12.20
	in &quot;Writing with Inform&quot;.
To make an explicit stored action, we use the form of words &quot;action of ...&quot;:
	for example,
		The best idea yet is a stored action that varies.
		The best idea yet is the action of pushing the button.
When making comparisons, we can of course compare any two stored action values:
		let C be the current action;
		if C is the action of pushing the button, ...
	Although &quot;action of ...&quot; specifies an exact action, we can omit this if
	we want to write a vague description of an action instead - but only when
	writing it in a condition:
		if C is taking something, ...
		if C is doing something to the lever, ...
	(If we had written
		if C is the action of taking something, ...
	Inform would have thrown up a Problem, because &quot;taking something&quot; is not
	a single, definite action, so cannot be a stored action.)
The constituent parts of a stored action can be accessed with the phrases:
		action-name part of S
		noun part of S
		second noun part of S
		actor part of S
As a convenient abbreviation for testing these, the condition
		S involves X
	is true if the object X appears as any of the noun, second noun or actor
	in S, and false otherwise.
The &quot;try&quot; and &quot;action of&quot; constructions are now allowed to specify explicit
	text in place of a topic in actions such as asking. (Beginners to Inform
	often think this must be possible, but up to now it hasn't been, because
	of the difference between a snippet and a text, etc.) For instance,
		Instead of asking Biggles about &quot;German flying machines&quot;:
			try asking Biggles about &quot;aircraft&quot;.
The kind of value &quot;action-name&quot;, used to denote not a complete action but
	simply what form of action it is (&quot;taking&quot;, &quot;throwing it at&quot;, etc.) can
	now be said for the first time.
The premiss for a rule about actions can now make use of variables which
	exist only inside action rules: for instance,
		Check an actor waving when the noun is not held by the actor: ...
	which was previously not allowed because the second mention of &quot;the actor&quot;
	referred to an action variable which, in a strict reading of the Inform
	syntax, existed only inside the rule (i.e., after the colon). This seemed
	an unnatural restriction.
The change log for build 4U65 claimed that:
		the can't go through concealed doors rule has been renamed the
		can't go through undescribed doors rule.
	This turns out to have been completely untrue. We meant to, but forgot.
	The name change has now been effected. (For the reason why, see 4U65.)
Lastly, either a bug fix or a redefinition, according to taste: an action
	description using &quot;... in ...&quot; refers to the room where the action is to
	happen; up to now this has always meant the room where the player is, but
	that went contrary to the principle that actions ought to treat people
	equally. &quot;... in ...&quot; clauses now refer to the room which is the actor's
	location. Thus
		Instead of an actor going east in the Vast Nothingness, ...
	now has effect if the actor tries this in the V. N., not if the player
	happens to be there at a time when the actor (who might be anywhere)
	tries going east. This sounds a complicated change, but it's clearly much
	more logical, and we doubt if anyone relied on the old behaviour.


OTHER CHANGES TO DO WITH KINDS OF VALUE

A new kind of value, &quot;truth state&quot;, represents one of two possible values:
	the constants &quot;true&quot; and &quot;false&quot;. (By default, truth state variables and
	properties are false.) We can convert any condition to a truth state thus:
		let victory be whether or not all the treasures are in the cabinet;
	We can then examine a truth state by comparing it against true or false:
		if victory is true, ...
	In fact, this kind of value is not new, but is merely coming out into the
	open. If we try to write (say)
		To decide what truth state is time is short: ...
	then Inform will tell us to rewrite it in the more traditional form:
		To decide if time is short: ...
	A phrase to decide if something-or-other is exactly the same thing as a
	phrase to decide a truth state, and indeed, if we want to then we can use
	&quot;decide on T&quot;, where T is a truth state, in its definition. For instance:
		To decide if time is short:
			if the time of day is after 10 PM, decide on true;
			...
			decide on whether or not Jennifer is hurried.
	&quot;Decide on true&quot; is exactly equivalent to the more normally used &quot;decide
	yes&quot;, and of course it is optional. The last line is more interesting
	since it effectively delegates the answer to another condition.
&gt;--&gt; The kind of value &quot;object-based-rulebook&quot; has been withdrawn: instead, such
	a value is now called an &quot;object-based rulebook&quot; and is a special case
	of a &quot;rulebook&quot;. (The double hyphen was generally found to be clumsy, and
	often led to mistakes.)
The deprecated kind of value &quot;string-of-text&quot;, which behaved identically to
	&quot;text&quot; in recent builds, has been withdrawn. It was mentioned in one
	example (&quot;Panache&quot;) through a historical accident, but was otherwise
	undocumented.
A &quot;let&quot; variable can now optionally be created by giving its kind of value
	rather than its initial value - the initial value is then the default
	value for that kind. For instance,
		let T be an indexed text;
	creates a &quot;let&quot; variable called &quot;T&quot; to hold indexed text, and which is
	initially holding the blank text &quot;&quot;.
A table column name can now optionally give its kind of value in brackets.
	Thus &quot;darts tally (a number)&quot; would create a column called &quot;darts tally&quot;
	whose contents were required to be numbers.
A phrase to decide a value is now checked to make sure that doesn't try to
	return a type which is not a value (something which typically produced
	problem messages in earlier builds, too, but less helpful ones).
Where a value property is declared for one kind of object as holding a value
	of kind of value X, and for another as holding kind of value Y, X and Y
	now have to agree: previously they were allowed to differ as long as they
	were each kinds of object, but this was not quite type-safe, and led to
	subtle bugs.
In previous builds of Inform, values of units had to be positive or zero:
	thus defining
		An elevation is a kind of value. 100 cubits specifies an elevation.
	creates a kind of value where -10 cubits, say, would not be a legal
	expression. Owing to a bug, however, no problem message was produced,
	and the minus sign was simply ignored - the value &quot;-10 cubits&quot; was read
	as if it were &quot;10 cubits&quot;. This bug has been fixed, and a new convention
	adopted: if the initial specification of the unit is negative, then
	negative values are permitted, and otherwise not. Thus:
		An elevation is a kind of value. -100 cubits specifies an elevation.
	means that (say) &quot;6 cubits&quot; and &quot;-3 cubits&quot; are both legal.
When U is a numerical value - a number or a unit, that is - the phrase
	&quot;random U from X to Y&quot; now gives truer results for very large ranges
	in the Glulx virtual machine.
Bug fixed whereby &quot;random U from X to Y&quot; would sometimes seed the random
	number generator as a side-effect when X was greater than Y. This is now
	a symmetrical phrase - &quot;a random number from 5 to 2&quot; now has the same
	effect as &quot;a random number from 2 to 5&quot;. (The phrase &quot;seed the
	random-number generator with...&quot; is the proper way to seed the RNG.)
If U is a unit, the phrases &quot;random U&quot;, &quot;U after X&quot; and &quot;U before X&quot; have
	been withdrawn - these don't really make sense for unbounded ranges. (What
	is a random height? It's a question which can only be answered in context -
	a random height for buildings is quite unlike a random height for people.)
Problem message added to catch literal numbers (and literal units) which are
	too numerically large to fit into the Z-machine: for instance,
		An RGB value is a kind of value. 255-255-255 specifies an RGB value.
		Scarlet is an RGB value which varies. Scarlet is 255-0-0.
	...is fine in projects compiled for Glulx, but would overflow the
	16-bit word size on the Z-machine.
Bug fixed whereby nameless properties (&quot;conditions&quot; - not in the sense of
	&quot;if&quot;, but in the sense of something being in good or bad condition, say)
	specified for kinds but only at the &quot;usually&quot; level of certainty would
	sometimes have such sentences ignored.
Problem message added for unit specifications which overlap or make ambiguous
	existing ways to write constant kinds of value; for instance,
		&quot;250&quot; specifies a weight.
	clearly clashes with Inform's existing notation for text.
Problem message added to catch the case of multiple initialisations of the
	same variable, for instance,
		Foobar is a number which varies. Foobar is 1. Foobar is 2.
Bug fixed whereby no problem was detected if a property required to hold one
	kind of object as a value (for instance, a property holding a room) was
	initialised by an assertion with another kind of object altogether (for
	instance, a container).
Bug fixed whereby spurious typechecking problems would be produced if the
	same kind of value was used both as a self-named property of one kind of
	thing, and also as the value of other-named properties of other kinds.
Bug fixed whereby conditions used for the start and end of a scene would not
	always be fully typechecked, if it appeared at least syntactically valid.
	For instance,
		Fairytale Wedding begins when the player is kissing the frog.
	looks superficially right, but in fact involves comparing an object
	(the player) with an action (kissing the frog) - something we may one day
	legalise in Inform, but which at present should be rejected. In builds
	before this one, it compiled but to a condition which was always false.
A number of subtle bugs have been fixed in handling ambiguous multiple-phrase
	text; if a phrase can be read as A or B, then A wins if
		- it has more fixed words;
		- they have the same number of fixed words, but A has more tokens;
		- taking fixed words alone, A is lexicographically earlier;
		- A is a subschema of B in the sense that each value of a token
		in B can be coerced to the corresponding kind of value in A;
		- A was created earlier than B in the source text;
		- fixed words of A occur earlier than B in the actual text parsed.
	In practice these changes cured some bugs, but did not change the
	interpretation of any text in the examples, and we expect they will
	probably not be noticed as changes by users. The final rule is notable
	for making phrases &quot;right associative&quot; when iterated, so for instance
		two minutes before three minutes before 12:00 AM
	is read as
		two minutes before (three minutes before 12:00 AM)
	rather than
		(two minutes before three minutes) before 12:00 AM
	and thus evaluates to 11:55 PM, not 11:59 PM.


MISCELLANEOUS OTHER CHANGES

&gt;--&gt; In order to reduce namespace clashes, a fairly significant change has
	been made to the way Inform reads noun phrases in the source text.
	Objects can, of course, be referred to using abbreviated names: for
	instance, if we write
		The Great Hall of Infinity is a room.
	then we can also write
		The Panjandrum is a man in the Hall.
	where &quot;Hall&quot; is a read as referring to the Great Hall of Infinity. This
	convention of course remains. However, the same is no longer allowed
	with names of kinds. Thus:
		A Scrabble piece is a kind of thing. The Q is a piece.
	will no longer work: the second assertion must be written out in full as
		The Q is a Scrabble piece.
	This led to tiny changes in six of the Examples (and detected a typo in
	a seventh), but in all cases the change was easily made and the result
	more legible or no worse than the original, so we hope that users will
	not find this change to the rules too inconvenient. The point of it is
	so that text such as:
		Beautiful scenery is a kind of thing. A wall is a kind of thing.
		A wall is usually scenery.
	will now work: previously the &quot;scenery&quot; in &quot;A wall is usually scenery&quot;
	was taken as referring to the &quot;beautiful scenery&quot; kind, not the built-in
	&quot;scenery&quot; property. (And so on for many other cases.)
&gt;--&gt; An ambiguity has been removed from the syntax for actions. The convention
	when indicating an action by a character other than the player is that
	the full form reads like so:
		Miss Hodges trying taking the lime
	Inform, however, allows the usually redundant word &quot;trying&quot; to be omitted
	where this leads to no ambiguity. The change is that, for safety's sake,
	Inform now forbids this abbreviation where the object's name includes
	a participle (or indeed any word ending in &quot;...ing&quot;). This prevents, for
	instance,
		Mr Geoffrey Taking
	from being read as an action rather than a noun phrase, or (a case which
	actually arose for one of our users)
		newspaper cutting
	being read as the newspaper itself doing some cutting.
&gt;--&gt; The accessibility rules have had one anomalous case removed. Previously,
	an object in another room was considered inaccessible, yet an object out
	of play was not. The only reason this rarely caused trouble was that
	actions involving such objects were seldom generated, because the parser's
	scope rules would prevent it from recognising commands referring to them.
	But it could occasionally happen, if a command such as TAKE ALL fired off
	a run of actions, and the outcome of an earlier take caused the object
	from a later take to be moved out of play; and with stored actions this
	sort of thing becomes much more likely to happen. At any rate the anomaly
	has been removed, but this had the consequence that a few examples
	which used physical things to represent abstract concepts went wrong.
	For instance,
		An emotion is a kind of thing. Envy and gratitude are emotions.
	is likely to produce a world in which &quot;envy&quot; and &quot;gratitude&quot; both exist
	as physical things but are permanently out of play. If we then write
		Understand &quot;experience [any emotion]&quot; as experiencing.
	then commands like EXPERIENCE ENVY will be recognised, but what happens
	next depends on how the action is defined. If like so:
		Experiencing is an action applying to one thing.
	then I7 will now strictly apply the rule that the thing must be touchable,
	that is, with no physical barriers between it and the player: which means
	EXPERIENCE ENVY will now fail accessibility. To get around this, define
		Experiencing is an action applying to one visible thing.
	instead: this weakens the requirement to the point where being allowed
	to refer to the object is enough. (&quot;Visible&quot; here means visible in the
	sense of parser scoping rules, not with one's own eyes: they are almost
	always the same thing, but &quot;[any emotion]&quot; overrode that.)
&gt;--&gt; Another change which will probably make little difference, but which
	clears up an ambiguity: given two descriptions in the form (adjectives)
	plus (kind), which are of different kinds, and where Inform cannot prove
	that either is necessarily a special case of the other, then the one with
	more adjectives is now considered more specific - and this affects rule
	ordering. So, for instance,
		Instead of examining an open door: ... (A)
		Instead of examining a vehicle: ... (B)
	rule (A) is now considered more specific than (B), whereas in previous
	builds they were equally specific and so would appear in rulebooks in
	source text order. (This change made no difference to the behaviour of
	any of the examples, or any other of our test cases: it's pretty esoteric,
	but we are trying to reduce the number of ways source text ordering is
	used, where sensible.)
We can now give unusual or alternative names for the understanding of either/or
	properties, when these are used to describe objects. For instance, if we
	have:
		The box is a container which is carried by the player.
		It is openable and closed.
		Understand the open property as referring to the box.
	then EXAMINE OPEN BOX will work only if the box is open, and so forth. But
	we can now add:
		Understand &quot;opened&quot; as open. Understand &quot;shut/sealed&quot; or &quot;tightly
		sealed&quot; as closed.
	and now EXAMINE TIGHTLY SEALED BOX, etc., will work only when the box is
	closed.
&quot;now T is X&quot;, to change the value of a table entry T to a value X, now works
	as might be expected. (This case seems to have been overlooked before: it
	wasn't intentionally left out of the design, and consistency clearly
	requires it.)
Previous restrictions on the use of &quot;let&quot; names, phrase parameters and
	table entries in text being written or appended to external files have
	been lifted. Thus:
		The currently erased jotter is an object that varies.
		To erase (pad - a jotter):
			now the currently erased jotter is the pad;
			write &quot;[heading of the currently erased jotter][paragraph break]&quot;
				to the text file of the pad.
	can now be done more simply thus:
		To erase (pad - a jotter):
			now the currently erased jotter is the pad;
			write &quot;[heading of the pad][paragraph break]&quot; to the text file of the pad.
	This affects both &quot;write ... to ...&quot; and &quot;append ... to ...&quot;.
The location of external files written or read by Glulx story files now uses
	the same convention on both OS X and Windows. (In 4X60, Inform for OS X
	differed from this.) Such &quot;.glkdata&quot; files are now always stored in the
	same folder as the project &quot;Whatever.inform&quot;, unless the user has created
	a &quot;Files&quot; subfolder of a &quot;Whatever Materials&quot; folder, in which case that
	will be used as the location.
The Kinds index now presents the initial state of either/or properties
	associated with kinds in a more legible way, avoiding double negatives.
	Thus
		Not normally portable not fixed in place.
	(which admittedly looks worse without the italic) is now written
		Usually fixed in place not portable.
The SHOWME testing command is now more detailed, and shows what properties
	an item or room currently possesses. For instance:
		&gt;showme guide
		Guide to Desert Fauna - book
		location: in Death Valley
		unlit; inedible; opaque; portable; singular-named; improper-named
		printed name: Guide to Desert Fauna
		printed plural name: books
		contents: Table of Critters
	(This brings it roughly into line with the old I6 verb SHOWOBJ, but has
	much more legible output, since property values can be printed better.)
The syntax of phrases to access tables has tended to be annoyingly picky
	about prepositions: it has been liberalised a little, so that one can
	now write &quot;from T&quot; equivalently to &quot;in T&quot; in phrases like
		choose a random row from the Table of Soft Fruit
	Similarly, in the phrases with the form &quot;choose ... row ...&quot;, either
	the definite or indefinite article can be used, or omitted altogether:
	there will be times when any of these may seem clearest. So any of
	these (for instance) will be allowed:
		choose a random row from T
		choose the row with citrus entry of 5 from T
		choose blank row from T
Use options can now specify numerical values, along with default values which
	the source text can choose to raise: this should help extension-writers
	who want to provide &quot;enough&quot; storage for the user's needs, since the
	user can now use such an option to tell the extension exactly how much
	he does need.
Bibliographic data text normally doesn't recognise text substitutions, for
	obvious reasons: it has to be literal text supplied to outside programs.
	(The story title, author's name, and so on.) It is now allowed to contain
	just one text substitution: ['] for a literal apostrophe. (This allows
	titles like &quot;Summer of [']69&quot; to be handled properly.)
The previous maximum of 500 I6 inclusions and use options used all at once
	in any single source text has now been removed.
Inform now chooses further contrasting colours for World Index maps which
	include more than 10 different regions, and now cycles through its
	colours rather than reverting to grey for subsequent regions when the
	shades run out.
Bug fixed whereby complicated descriptions involving the contents of a region
	would fail to work: for instance, &quot;the number of rooms in R&quot;, where R
	is the name of a region, or &quot;a random room in R&quot;, would return 0 and
	nothing respectively.
Bug fixed whereby releasing along with a custom website was not working
	(NI was issuing the wrong instructions to cBlorb, the packaging agent.
	Standard websites did work: only those with custom templates failed.)
Bug fixed whereby assemblies which involved properties as well as kinds
	would sometimes not always have those properties set, particularly if
	multiple assemblies took place with similar circumstances. For instance:
		A box is a kind of container. An open box is in every room. A closed
		box is in every room.
Bug fixed whereby a player's holdall which is a part of the player - rather
	than being carried or worn by the player - will now function correctly.
	(This was requested by someone wanting to implement &quot;a robot or marsupial&quot;.)
Bug fixed whereby recent changes to table-handling caused properties of
	values to be wrongly read and written. (Typically a property of V would
	be confused with a property of the value whose numerical form at run-time
	was one less than V's.)
Bug fixed whereby route-finding (and counting shortest distances) through
	one-to-various relations would give wrong results, usually false claiming
	that no route existed.
Bug fixed whereby the phrase &quot;direction of (D - door) from (R1 - room)&quot;
	didn't work at all, really (it returned the I6 direction property, not the
	compass direction object - an elementary I6 mistake).
&gt;--&gt; Bug fixed whereby after rules were being applied to out of world actions,
	in spite of the documentation's clear statement that they would not be.
	It is just possible that some authors might have relied on this working:
	to give after-effects to out of world actions, use the report rules.
Bug fixed whereby &quot;change ... to ...&quot; would sometimes cause I6 errors where
	the thing changed was a variable holding an object, and the value changed
	to was something other than an enumerated property-value constant.
Bug fixed whereby &quot;if ...; otherwise if ... begin;&quot; would cause I6 errors
	rather than produce a Problem message (to point out that &quot;begin&quot; should
	not be used with &quot;otherwise if ...&quot; clauses).
Bug fixed whereby placing items by referring to the currently discussed room
	as &quot;here&quot; would sometimes give strange results if (i) the current subject
	of discussion when the sentence is first read is not what will prove to
	be a room, and also (ii) the room being discussed most recently was
	created some time ago and other rooms had been created since then. The
	new interpretation of &quot;here&quot; should be more robust and predictable.
Bug fixed whereby restrictions applied to headings, such as
		Volume 1 - not for release
		Volume 1 - for Glulx only
	would be ignored (but only for Volume headings, not for headings of any
	other level).
Bug fixed whereby implications (such as &quot;A locked thing is usually lockable.&quot;,
	an implication in the Standard Rules) are ignored if the thing to which
	they apply cannot have the property which is given as the consequence;
	previously, a somewhat mysterious problem message would be produced.
Bug fixed whereby implications would sometimes override definite statements
	made negatively (e.g. &quot;A locked thing is usually openable&quot; overriding
	&quot;The safe is locked. The safe is not openable&quot;); again, the symptom
	was usually a mysterious problem message.
Bug fixed whereby the use of a relation in an indirect clause with a value
	of a kind which is also used as a property, and has the same name as
	that property, would cause I6 errors.
Bug fixed whereby grammar using a newly defined token for a value belonging
	to a new kind of value, would cause I6 errors.
Bug fixed whereby giving alternatives in grammar for understanding specific
	times of day (e.g. 'Understand &quot;lunch&quot; or &quot;lunch time&quot; as 11:30 am.')
	would cause an internal error.
Bug fixed whereby a few malformed assertions involving impossible callings
	(e.g. 'X (called Y) and X has Y.') produced an internal error rather
	than a problem message.
Problem message added for attempts to create multiple objects with a single
	'called' clause ('Bill and Ben are men in the Garden.').
Bug fixed (or, in a sense, feature added) so that &quot;X is a backdrop which is
	everywhere&quot; will now successfully create an omnipresent backdrop;
	previously one had to write &quot;X is a backdrop. X is everywhere.&quot;
Bug fixed whereby actions sometimes continued and reported even if the
	carry out rules had already killed the player.
Bug fixed whereby 'Understand ... as a mistake' would produce the mistake
	reply even when the text was being addressed to another person, rather
	than being intended as a command by the player.
Bug fixed whereby tokens for understanding names which involved various-to-one
	relationships to other objects would not work in concert with specific
	additional names made using 'Understand'. For example,
		Understand &quot;[something related by loyalty]&quot; as a team.
		Understand &quot;Glasgow Rangers&quot; as a team.
	would correctly match the token, but not the additional name, which would
	be ignored.
Bug fixed whereby &quot;now the player is X&quot; would be read differently from
	&quot;change the player to X&quot;, and would not properly change perspective.
Bug fixed whereby an assertion sentence setting the description of the player
	caused a contradiction with the default setting for this made in the
	Standard Rules. For instance,
		The description of the player is &quot;Frankly harrassed-looking.&quot;
	is now legal again. (It was legal in early builds of Inform, too.)
Slight anomaly resolved (it wasn't really a bug) in the determination of
	which items are concealed, using the &quot;deciding the concealed possessions&quot;
	activity: previously the activity would test items belonging to the player
	even though a subsequent rule would force them to be unconcealed regardless
	of the activity's decision - an actor can't conceal something from himself,
	since concealment in I7 by definition means concealment from the view
	of other people. Now, the activity is not asked about such items.
Bug fixed whereby &quot;( -&quot; was sometimes read as &quot;(-&quot;, opening a passage of
	literal I6 code, which was unfortunate if it had actually been part of
	a calculation (&quot;let X be ( -1 * count )&quot;, say).
Various bugs fixed to do with the use of the I6 string escape characters
	\, @, ~, ^ in I7 source text and quoted text (for instance, these followed
	by digits would in some cases cause I6 compilation errors).
Problem message added to catch situations where the source text would require
	ridiculous lengths of time to parse, using Inform's normal algorithms:
	this is something which seems only ever to have happened to one user,
	through the accidental omission of lots of punctuation, but it had the
	effect of Inform apparently never completing compilation, which is
	inconvenient to recover from on some platforms.
Problem message added to clarify why some mixtures of actions like 'dropping
	the CD or inserting the CD into the jewel box' are not allowed as the
	premiss of a rule; and bug fixed whereby other illegal mixtures, such as
	'inserting the CD into the jewel box or dropping the CD' were previously
	miscompiling rather than producing a problem.
Problem message added to help diagnose a common mistake with 'if' phrases,
	missing out the 'begin' at the end.
Problem message added to explain why sentences like
		Understand &quot;take [things]&quot; as &quot;drop [things]&quot;.
	are not allowed.
Problem message added to explain why sentences like
		Understand &quot;trevor, look&quot; as looking.
	are not allowed.
Problem message to catch attempts to use &quot;carry out&quot;, &quot;report&quot; or &quot;check&quot;
	rules applied to named action patterns rather than specific actions;
	previously these would sometimes be allowed provided that some subset
	of their names coincided with the name of some actual action (but with
	unhappy results, since the rule would end up applying to that action,
	which would certainly not have been what the user intended).
The problem message produced by sentences like
		The coin is in the strongbox.
	(where &quot;coin&quot; is a kind of thing, so that this is too vague) has been
	lifted in the case of writing sentences like
		One coin is in the strongbox.
	since, after all, higher multiplicities like
		Two coins are in the strongbox.
	have always been allowed.
Problem message added for trying to define the same test name to mean two
	different tests.
Problem message added for trying to use a kind of thing to relate multiple
	objects to single values in single sentences. (Ideally this would work,
	but there are awkward implementation reasons why it doesn't, for the
	moment, and the problem message replaces a less polite internal error.)
Problem message clarified when trying to make a property which must hold an
	object of a given kind, when no objects of that kind exist anywhere, so
	that this property can never have a legal value.
Problem message added for contradictory indications of where something
	initially is, for instance,
		Fred is in the Kitchen. Fred is in the Dining Room.
	(How we overlooked this obvious case in four years of testing...)
Problem message added for an Understand attempting to give a name to
	an object qualified by a relative clause or properties. (The same effect
	can be achieved by other means - the problem message explains how.)
Problem message added for an attempt to test if a vaguely described past
	action succeeded. (Previously these apparently compiled, but gave
	usually wrong answers.)
Problem message added to give more helpful diagnosis if an action definition
	incorrectly gives a past participle longer than a single word.
Problem message added (rather than an internal error) for using a relation
	which relates objects to values in a &quot;[something related by...]&quot; token
	in an 'Understand' sentence.
Bug fixed whereby the parser would give slightly misleading replies if
	pronouns other than &quot;her&quot; were used in commands before they had ever
	been set.
Bug fixed whereby scenery items, never mentioned in room descriptions, could
	nevertheless silently become pronoun values. (Thus &quot;it&quot; might mean the
	sky in a room where the sky was scenery.)
Bug fixed whereby the parser would reply &quot;That noun did not make sense in
	this context.&quot; in response to certain scope-filtering tokens where
	nonsense had been typed, but without a proper paragraph break.
Bug fixed whereby duplicate problem messages would result from a phrase
	defined with alternate wordings, but also defined incorrectly. (The
	problems would be repeated for each possible wording.)
Bug fixed whereby the &quot;Use serial comma&quot; option did not result in a serial
	comma being used in clarification questions like
		Which do you mean, the fish, the fowl, the chalk, or the cheese?
Documentation bug fixed whereby the &quot;return to contents&quot; links in Writing
	with Inform would sometimes return to the contents of the Recipe Book
	instead.

Examples:
	&quot;Xot&quot; added to demonstrate storing an erroneous command and replaying it
		later, as seen in Infocom's HHGttG.
	&quot;Terracottissima Maxima&quot; added to demonstrate understanding an indexed text
		property.
	&quot;Fido&quot; added to demonstrate a dog that the player is allowed to name and
		re-name.
	&quot;Pre-alpha&quot; added to demonstrate a beta-testing command that allows the
		player to preface any line with a punctuation mark to show it is a comment.
	&quot;Blackout&quot; added to demonstrate replacing letters in a printed name under
		certain circumstances.
	&quot;Identity Theft&quot; added to demonstrate asking the player for a name at the
		start of play.
	&quot;Mr. Burns' Repast&quot; added to demonstrate a fish that renames itself
		depending on how the player refers to it.
	&quot;Endurance&quot; added to demonstrate a way of modeling time so that it depends
		flexibly on the actions undertaken during a turn.
	&quot;Uncommon Ground&quot; tweaked to repair a couple of cosmetic flaws held over
		from earlier versions of the extension
	&quot;Panache&quot; corrected to remove a reference to the elderly (and now
		withdrawn) type &quot;string-of-text&quot;
	&quot;Disenchantment Bay 12&quot; corrected to remove a reference to the captain as
		&quot;transparent&quot;, which was a holdover from a time (before the first public
		beta of Inform) when characters could be opaque or transparent and this
		quality would determine whether their possessions could be seen.
	&quot;Straw Into Gold&quot; added to demonstrate a character whose name is concealed
		until the player guesses it.
	&quot;Celadon&quot; added to demonstrate extending DROP to apply even to objects the
		player is carrying inside a container or on a supporter.
	&quot;Northstar&quot; added to demonstrate modifying the player's command using a
		regular expression, so that ASK JOSH TO TAKE INVENTORY will be
		understood as JOSH, TAKE INVENTORY.
	&quot;Burning&quot;, &quot;Gelato&quot;, &quot;Originals&quot;, &quot;Solitude&quot;, &quot;Stately Gardens&quot;, &quot;Tilt 2&quot;,
		and &quot;Tilt 3&quot; revised to make use of the new truth state kind of value.
	&quot;Cactus Will Outlive Us All&quot; added to demonstrate stored actions and
		characters who respond when they occur.
	&quot;Anteaters&quot; added to demonstrate stored actions that include topics.
	&quot;Bosch&quot; added to demonstrate an alternative full score system using
		stored actions.
	&quot;Kyoto&quot; revised to reflect the current state of the actions rules.
	&quot;Dinner is Served&quot; revised to change the way closed containers are described.
	&quot;Chronic Hinting Syndrome&quot; &quot;Ferragamo Again&quot;, &quot;Being Peter&quot;, &quot;The Problem
		with Edith&quot;, and &quot;Introduction to Juggling&quot; revised to reflect new
		restrictions about acting on out-of-play objects.
	&quot;Broughton&quot; revised to fix a very tiny bug in which &quot;greeting&quot; was not
		specified as a subject.
	&quot;Lucy&quot; added to demonstrate redirecting the ASK command to a new topic
		other than the one the player typed.
	&quot;Fine Laid&quot; added to demonstrate redirecting most actions from one object
		to another.
	&quot;Mirror, Mirror&quot; revised to use indexed text rather than an external file,
		which means that it can be used in z-machine games as well.
	&quot;Actor's Studio&quot; added to demonstrate a video camera that records actions
		occurring in its presence, then plays them back later.
	&quot;Capital City&quot; added to demonstrate capitalized text in the status line.
	&quot;Rocket Man&quot; added to demonstrate sentence- and title-casing for any to-say
		phrase.
	&quot;Rubies&quot; added to demonstrate a scoreboard of high-scoring players.
	&quot;Witnessed&quot;, &quot;Sand&quot;, &quot;Modern Conveniences&quot;, &quot;Hot Glass Looks Like Cold
		Glass&quot;, &quot;Model Shop&quot;, &quot;Nickel and Dimed&quot; slightly changed to spell
		out kind names in full rather than use abbreviations.
	&quot;Situation Room&quot; added to provide 24-hour time printing.
	&quot;Tamed&quot; revised to get rid of the magician's booth being closed.
	&quot;Starry Void&quot; added to demonstrate a simple case of a room whose exterior
		is visible from another room.
	&quot;The Cow Exonerated&quot; added to demonstrate matches for starting fires, using
		indexed text to make the reporting more elegant.
	&quot;Savannah&quot; added to demonstrate liquid used to put out fires.
	&quot;Slouching&quot; added to demonstrate sitting, standing, and lying down postures
		for the player and other characters.
	&quot;Costa Rican Ornithology&quot;, &quot;Crusoe&quot;, &quot;Farewell&quot;, &quot;Juggling&quot;, &quot;Nickel and
		Dimed&quot;, &quot;Money for Nothing&quot;, &quot;Aftershock&quot;, &quot;Channel 2&quot; edited to make
		it easier to extract the generalizable portions for use in other games.
	&quot;Four Cheeses&quot; edited for portability and to clean up a few clumsy
		phrasings due to the age of the example.
	&quot;Bogart&quot; edited for portability and to remove a special-case bug.
	&quot;What Not To Wear&quot; added to demonstrate a more complete clothing system
		combining layers with a concept of different regions of the body, for
		whole classes of shirts, trousers, etc.
	&quot;Port Royal 1&quot; and &quot;Port Royal 2&quot; edited for length and clarity.

Extensions:
	&quot;Basic Screen Effects&quot; edited for a small bug that prevented the &quot;show
		current quotation&quot; phrase from being available under Glulx. Version
		advanced to 5.
	&quot;Glulx Entry Points&quot; changed to treat glulx replacement command as indexed
		text, which means that it can be edited more flexibly or even
		constructed through multiple hyperlinks. Version advanced to 3.
	&quot;Locksmith&quot; changed to make the &quot;you lack a key...&quot; message more flexible
		and keyed to individual objects. Version advanced to 4.
	Minor one-line addition to the documentation of &quot;Basic Help Menu&quot; to
		clarify how to replace the enclosed menu with one of our own.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s7"></a>§11.7. What was new in build 4X60 (August 2007)</p>
<p><img alt="aug07.jpg" src="images/aug07.jpg" class="floating" /> As this release was being prepared, Russian submersibles planted a flag on the North Pole, 4.2 km underwater; there was a crackdown on counterfeit toothpaste in Mozambique; forest fires threatened Dubrovnik, while Minnesota flooded; there was a single, unconfirmed sighting of the Yangtse River Dolphin, thought extinct since 2004; the Unix court case, SCO v. Novell, found for Novell; the quarterback of the Atlanta Falcons pled guilty to &quot;conspiracy to sponsor a dog&quot;; and Peter Stoychev of Bulgaria broke the speed record for swimming the English Channel.</p>
<p>In the world of Inform, build 4X60 introduced the Recipe Book to the in-application documentation, and made a number of internal reforms, notably improving the speed of table handling at run-time.</p>
<hr /><pre class="changelog">4X60 (23 August 2007)

This build adds 19 new examples and modernises a dozen others, and presents
a new volume of built-in documentation: the Inform Recipe Book. It also
provides new features for variable text, improves and extends table-handling,
allows Glulx-format games to read and write files and communicate with
external programs, and allows extensions to create more readable and
useful documentation.

(Windows only) Added support for Glulx mouse events and hyperlinks to the
	game tab.
(Windows only) The justification style hint is now supported when running
	a Glulx game in the game tab. As a result, games using Emily Short's
	&quot;Glulx Image Centering&quot; will now work when run within the application.

A new manual, The Inform Recipe Book, has been added to the application. It
	sits alongside the previous manual (Writing with Inform) and presents
	the examples thematically, with connecting advice and comparisons of
	techniques to achieve a wide range of IF effects. This should make the
	(now 357) examples much easier to browse and to borrow from.
The &quot;[one of]&quot; text substitution previously provided by Jon Ingold's
	extension &quot;Text Variations&quot;, which built on code by Andrew Plotkin and
	Roger Firth, has now been adopted into Inform's core language. Examples
	of its use include:
		say &quot;You flip the coin. [one of]Heads[or]Tails[purely at random].&quot;;
		say &quot;[one of]The phone rings[or]The phone rings a second time[or]The
			phone rings again[stopping].&quot;;
		say &quot;You turn the light switch [one of]off[or]on[cycling]. Nothing
			happens.&quot;;
		say &quot;The newspaper headline is: [one of]War Casualties
			[or]Terrorists[or]Banks[sticky random] [one of]Continue To Expand
			[or]Lose Out[sticky random].&quot;;
		say &quot;The light changes randomly again; now it's [one of]green
			[or]amber[or]red[at random].&quot;;
		say &quot;Zorro strides by, [one of]looking purposeful[or]grim-faced[or]deep
			in thought[or]suppressing a yawn[or]scratching his ribs[or]trying
			to conceal that he has cut himself shaving[as decreasingly
			likely outcomes].&quot;;
		say &quot;You dip into the chapter on [one of]fish[or]mammals[or]birds
			[or]reptiles such as the black salamander[in random order].&quot;
	See the new section 5.6 in the documentation: note that &quot;[as decreasingly
	likely outcomes]&quot; and &quot;[in random order]&quot; are new options, the former
	using a tapering probability distribution, the latter a random permutation.
&gt;--&gt; It should be noted that the new implementation of this substitution is
	completely different to the one provided by the extension. The previous
	method involved printing all the text to a buffer array, then hash-coding
	it and taking choices based on this hash, which meant that the same
	sequence of choices occurring twice in the same text would be effectively
	the same (because of having the same hash code); thus
		&quot;This is [one of]A[or]B[at random] versus [one of]A[or]B[at random].&quot;
	could never print &quot;This is A versus A.&quot; or &quot;This is B versus B.&quot; The new
	implementation treats each &quot;[one of]...&quot; individually. To get around this,
	define
		To say A-or-B: say &quot;[one of]A[or]B[at random]&quot;.
	and then change the text to
		&quot;This is [A-or-B] versus [A-or-B].&quot;
	Furthermore, there is no buffer array, no hash code, and it is no longer
	possible to extract state information by deliberately printing the text
	with an incomplete &quot;[one of]&quot; construction. (To quote the Text Variations
	documentation: &quot;a terrible way to solve that kind of problem&quot;, so we don't
	feel too bad about withdrawing it.) Thus the phrases &quot;the index of the
	last buffer&quot; and &quot;the index of the buffer&quot; no longer exist.
	In any case, the new implementation polices the use of the construction
	so that leaving it incomplete is no longer possible. &quot;[one of]&quot; must be
	matched by one of its possible conclusions &quot;[purely at random]&quot;,
	&quot;[stopping]&quot;, ..., or problem messages will be generated; similarly,
	&quot;[or]&quot; can only legally be used inside the construction. On the other
	hand, the new implementation does allow the construction to be nested, both
	explicitly in a single text and also implicitly (where a text substitution
	inside one of the options itself does something which also involves a
	&quot;[one of]&quot;), where the old implementation would silently have failed.
	As an explicit example:
		&quot;[one of]A palace on the [one of]Nile[or]Euphrates[purely at random]
		delta[or]A hovel by the [one of]Tigris[or]Rhine[purely at random]
		river[purely at random].&quot;
	In practice, if a work in progress used &quot;Text Variations&quot; and did not
	try to use &quot;the index of the last buffer&quot; then there is a good chance
	that simply deleting the line
		Include Text Variations by Jon Ingold.
	will be the only change required.
	We thank Jon Ingold and his collaborators for donating their design. The
	extension &quot;Text Variations&quot; will continue to be available from the website
	for the time being, but marked as no longer needed or compatible with
	builds from here onwards. We suggest that users uninstall it once they
	are sure that any works in progress continue to work without.
	This change implements proposal (6.20) from the January 2007 consultation
	document.
The run-time code for handling tables has been rewritten to improve its
	reliability and efficiency. A number of minor bugs have been fixed in
	the process, notably a failure to sort correctly on tables which contain
	mixed blank and non-blank rows, and a rarely occurring problem to do with
	storing the number 32739 in table entries under the Z-machine.
Table sorting is now carried out using a hybrid algorithm: insertion sort
	from 1 to 11 rows, and in-place mergesort for 12 rows and up. This is
	much faster on even medium-sized tables (e.g. about ten times faster on
	tables of 200 rows), and is also stable in all cases: that is, if
	two rows have the same value in the X column of a table, and that
	table is then sorted (forwards or backwards) on the X column, then
	they will stay the same side as each other. As a consequence, all sorts
	are idempotent, that is, performing the same sort operation twice always
	results in the second operation making no changes at all. (The previous
	algorithm was idempotent but, owing to a bug, not in all cases stable.)
	Insertion/in-place mergesort was chosen because we needed stability,
	O(n log n) average running time (together with good performance
	on nearly-sorted tables, which are the commonest usage cases in
	actual Inform source text), O(1) storage overhead (the Z-machine is
	extremely short of table space), and reasonably predictable stack usage.
Projects compiled for Glulx rather than the Z-machine now have the ability
	to make use of external files. Like sound effects and figures, these
	are declared and given names before use:
		The File of Glaciers is called &quot;ice&quot;.
	This creates a new named constant &quot;File of Glaciers&quot; (whose kind of value
	is &quot;external-file&quot;) for use in file contexts. (The prefix &quot;binary file&quot;
	rather than &quot;file&quot; can be used to make the file binary in the Glk sense,
	but the default is to use text files for all purposes.) Each file is
	considered to be owned by some project, identified by its IFID. By
	default, a newly declared file is owned by its own project, but we can
	also specify that we want to use somebody else's file, either explicitly
	or vaguely:
		The file of Spectral Sequences (owned by project
			&quot;4122DDA8-A153-46BC-8F57-42220F9D8795&quot;) is called &quot;adams&quot;.
		The file of Boundaries (owned by another project) is called &quot;milnor&quot;.
	We can write or append to a file owned by anyone, but can only read a
	file whose ownership matches this description.
	External files are indexed in the Contents index, alongside figures and
	sound effects.
	Files sometimes exist, and sometimes do not: they are sometimes complete,
	sometimes only partly written. (For a file shared between two games
	running simultaneously, one might try to read a file the other is still
	in the middle of writing.) We can test this with:
		if the file of Invariants exists...
		if ready to read the file of Invariants...
	A file cannot be ready if it does not exist, so the latter is a stronger
	condition.
Tables can be saved to external files, and loaded them back in again, during
	play: all file-handling is done automatically. The user only needs to use
	the phrases:
		read the File of Glaciers into the Table of Antarctic Features;
		write the File of Glaciers from the Table of Antarctic Features;
	Blank entries are preserved; it is legal to write a small file into a
	large table, and if so, all unwritten entries are blanked; a run-time
	problem is shown if the file contains more rows or columns than will
	fit into the table which it is being loaded into; similarly, a run-time
	problem is shown on trying to write a table which contains data not
	safely exchangeable with other story files (or other compilations of
	itself).
Text can also be saved to a file, and again all file-handling is automatic:
		write &quot;Jackdaws love my big sphinx of quartz.&quot; to the file of
			Abecedary Wisdom;
		append &quot;Jinxed wizards pluck ivy from the big quilt.&quot; to the file of
			Abecedary Wisdom;
	The quoted text can, of course, contain substitutions, so can be
	long and complex if need be. On an append, the file is created if it does
	not already exist.
Text from a file is printed back with the text substitution:
		&quot;[text of the File of Abecedary Wisdom]&quot;
	To copy one file to another, for instance,
		write &quot;[text of the file of Abecedary Wisdom]&quot; to the file of
			Secondary Wisdom;
&gt;--&gt; The implications to do with lockability have been improved:
		A locked thing is usually lockable.
		A locked container is usually closed.
		A locked door is usually closed.
		A lockable container is usually openable.
		A lockable door is usually openable.
	Thus writing &quot;The ballot box is a locked container.&quot; will now deduce that
	the box is probably lockable, closed but openable. These are only guesses
	by Inform, and can be overridden by giving explicit instructions to the
	contrary: &quot;The ballot box is a locked unopenable container.&quot;
Definitions of adjectives, which previously had to refer to their subjects
	only by the pronoun &quot;it&quot; (or in some cases &quot;his&quot;, &quot;her&quot;, etc.), can now
	make callings. For instance:
		Definition: a direction (called thataway) is viable if the
			room thataway from the location is a room.
	is a good deal easier to read than
		Definition: a direction is viable if the room it from the location
			is a room.
	which was previously the only way to write this. Only a single calling
	can be made, and it must refer to the specific object to which the
	definition applies.
A new rule in the Standard Rules, the &quot;can only take things rule&quot;, prevents
	the taking of objects which are not things - for instance, rooms or
	directions. (Such an action can never normally be generated by the
	grammar for typed commands, but if Understand sentences are written
	to open the possibility then the player will see ugly &quot;programming error&quot;
	messages: the new rule prints a more suitable reply.)
Extension documentation can now request &quot;paste into the source text&quot; icons
	like those found in the main documentation and its examples. If an
	indented paragraph of quoted source text begins with an asterisk and
	then a colon, like so...
		*: A dog is a kind of animal.
	...then the asterisk-and-colon are replaced in the final documentation
	by a paste icon: clicking this will insert the copy which follows into
	the source text. The text to be pasted is considered to begin after the
	colon, and to continue until the next unindented text, i.e., it can
	run for many quoted paragraphs, but as soon as the quotation is broken
	the paste extent will end. Any tables within the quoted range should
	be safely rendered with tabs in between the columns.
Large extensions which need to include a large amount of documentation
	can now subdivide it using headings and/or subheadings, like so:
		Chapter: Pesky Meddling Kids
		Section: Dog Food
	A suitable table of contents with navigation links will be automatically
	added to the extension documentation, if so.
The Extensions chapter of the documentation has, appropriately enough, been
	extended: it now opens up a limited number of previously restricted
	syntaxes to public use. These will only be useful to experienced Inform 6
	programmers.
Fixed a further namespace clash: a &quot;let&quot; name can now coincide with the
	column name of a table. (This was preventing John Clemens's extension
	&quot;Scheduled Activities&quot; from working in recent builds.)
Extensions:
	&quot;Basic Screen Effects&quot; very slightly updated so that the documentation
		is clearer about the lack of colored letters in Glulx, and suggests
		that the author turn to Glulx Text Effects for these capabilities
		instead; also given a new example to demonstrate forcing the player
		to type what we want him to type (since this is becoming something
		of a frequently-asked question); chapter and section headings and
		paste-able examples added.
	&quot;Basic Help Menu&quot;, &quot;Glulx Text Effects&quot;, &quot;Locksmith&quot;, &quot;Menus&quot;,
		&quot;Punctuation Removal&quot; tagged so that the example can be pasted.
	&quot;Complex Listing&quot;, &quot;Plurality&quot; tagged and given chapter and section
		headings.
Examples:
	&quot;Radio Daze&quot; example from Jon Ingold's Text Variations extension brought
		into the main documentation.
	&quot;Camp Bethel&quot; added to demonstrate several other common applications of
		text alternatives.
	&quot;Chanel version 1&quot; added to demonstrate paired &quot;[i]...[/i]&quot; and
		&quot;[b]...[/b]&quot; italic and boldface tags, similar to HTML's.
	&quot;Blink&quot; added to demonstrate creating one's own text variations keyed
		to values, using the special terminology explained in the Extensions
		chapter.
	&quot;Uncommon Ground&quot; added to demonstrate creating one's own text variations
		keyed to the identity of the player character.
	&quot;Labyrinth of Ghosts&quot; added to demonstrate recording the deaths of all
		previous players of the story file by storing them in a file.
	&quot;Alien Invasion Part 23&quot; added to demonstrate saving preference files
		from one game in a series for use in the next episode.
	&quot;Flathead News Network&quot; added to demonstrate communicating with a simple
		Unix script running in the background, in order to provide live news
		headlines (drawn from RSS feeds) inside a story file.
	&quot;Ferragamo Again&quot;, &quot;Straw Boater&quot; slightly cleaned up to be better filed
		in the Recipe Book.
	&quot;Cinco&quot; edited to fix a particularly bone-headed bug that vitiated the
		whole point of the example.
	&quot;When?&quot; adjusted to slightly improve the way the example is described.
	&quot;Modern Conveniences&quot; added to demonstrate standard kitchen and bathroom
		appliances.
	&quot;Do Pass Go&quot; added to demonstrate a pair of dice.
	&quot;Mirror, Mirror&quot; added to demonstrate remembering the current room
		description by preserving it in an external file.
	&quot;The Unbuttoned Elevator Affair&quot; added as an example of a simpler lift
		than the elaborate one in &quot;Dubai&quot;.
	&quot;Further Reasons Why All Poets Are Liars&quot; added as an example of using
		action variables for an action which moves a box around internal
		positions inside a location; a much thinner version of this example,
		&quot;A pushable box&quot;, has been removed.
	&quot;M. Melmoth's Duel&quot; added, similarly to replace &quot;Tinted wallpaper&quot;.
	&quot;The Second Oldest Problem&quot; added to demonstrate using action variables
		to make the going action react to moving between dark rooms.
	&quot;Saint Eligius&quot; added to demonstrate an additional comment added to a
		room description when the player first enters.
	&quot;Baritone, Bass&quot; added to demonstrate defining the character at the
		start of play.
	&quot;Bic&quot; added to demonstrate testing whether any defined objects are missing
		description properties.
	&quot;Meet Market&quot; added to demonstrate relations involving multiple values.
	&quot;Depth&quot; rewritten to improve the simulated geometry used to test whether
		an item could fit inside a container.
	&quot;Patient Zero,&quot; &quot;Today Tomorrow,&quot; &quot;Reporting rules for other characters'
		behavior,&quot; &quot;Uptown Girls&quot;, &quot;Full Moon&quot; edited to take advantage of
		new text variation features.
	&quot;Belfry&quot;, &quot;Bikini Atoll&quot;, &quot;Dearth and the Maiden&quot;, &quot;Hayes Code&quot;,
		&quot;Lies&quot;, &quot;Safety&quot;, &quot;Undertomb&quot; and &quot;Weathering&quot; all made into formal
		numbered examples rather than, as in previous builds, appearing in
		the running text of the manual.
Bug fixed (or, if you prefer, feature added) whereby sentences providing
	alternative names for times of day, like:
		Understand &quot;lunch time&quot; as 11:30 am.
	...now work as might be expected.
Bug fixed whereby Understand ... as a person would fail with I6 errors.
	(Apologies for this: an oversight in 4W37's abolition of the
	player-character kind, which had the same flaw, but nobody noticed
	because it was so little used.)
Bug fixed whereby &quot;if S is not happening&quot;, for S a scene, would incorrectly
	think that a completed once-only scene was still happening.
Bug fixed whereby implications would in some cases be ignored in circumstances
	which it would be tiresome to write out, but to do with multiple things
	being simultaneously present, some qualifying and some not.
Bug fixed whereby using I7 to rerelease an existing I6 story file in
	blorbed format with bibliographic data would fail because of the lack
	of a room (needed to initialise certain room variables).
Bug fixed whereby a few either/or properties could not be changed in play
	without spurious run-time problems being produced. (In particular,
	&quot;now X is transparent&quot; or &quot;now X is opaque&quot; caused problems.)
Bug fixed whereby declaring that the player is a person who happens to be
	initially somewhere other than in the earliest-created room, or outside
	the map altogether, would cause programming errors or other strange
	phenomena at run-time.
Bug fixed where a player attempting to UNLOCK a door which is &quot;locked&quot; but
	which, unbeknownst to the player, has no matching key, would cause a
	run-time problem complaining about the lack of a &quot;matching key&quot; property.
Problem message added for trying to use &quot;[something related by...]&quot; to
	understand something which can have no relations.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s8"></a>§11.8. What was new in build 4W37 (July 2007)</p>
<p><img alt="jul07.jpg" src="images/jul07.jpg" class="floating" /> As this release was being prepared, Chinese archaeologists remotely sensed an unknown chamber in the Tomb of the Terracotta Army; Corporal Willie Apiata became the only living New Zealander to hold the Victoria Cross, won in Afghanistan; the Ghanaian cedi became the strongest African currency; Live Earth concerts were held worldwide, and the Boeing 787 was unveiled; the US Congress passed the &quot;Honest Leadership and Open Government Act&quot;; prolonged dust storms swept Mars, while floods in Tewkesbury submerged the whole town save only the 12th-century Abbey.</p>
<p>In the world of Inform, build 4W37 made miscellaneous improvements mostly centred around parsing the names of objects. A significant change not linked below, since it was an excision, was the removal of the former &quot;player-character&quot; kind of person: any person can now be the protagonist.</p>
<hr /><pre class="changelog">4W37 (27 July 2007)

This build adds 21 new examples and provides miscellaneous new features.
Chief among these are substantial improvements to the parsing of names:
nouns can now be recognized by their number or unit properties, and also by
their relations, so that 'Understand &quot;bottle of [something related by
containment]&quot; as the bottle' will parse BOTTLE OF SAND if and only if the
sand is contained in the bottle. We have also made a tentative beginning on
support for sound effects to match the existing support for illustrations.
As usual a number of bugs are fixed, and although a few issues still remain
(the current tally of open issues stands at 13, as compared with a peak of
about 330 earlier this year) none are severe and most users seem to find
that Inform is fairly reliable, so recent effort has gone into advancing
the language rather than maintaining the compiler.

INFORM FOR WINDOWS

All tabs (save the settings tab) have a row of buttons at the top of the
	tab, allowing navigation and access to common functionality,
	similar to the OS X application.
Fixed a bug preventing the installation of an extension with brackets in
	its name.
Added support for multiple windows to the game tab. Any combination of
	text, grid and graphics windows can be opened by a game running
	within the application.
Added support for graphics windows to the game tab. As a result, games
	using Emily Short's &quot;Simple Graphical Window&quot; and &quot;Location Images&quot;
	extensions will now work when run within the application.
Added support for timer events to the game tab. Combined with the above,
	games using the &quot;Graphical Window Animation&quot; extension will now work
	when run within the application.
If saving a project fails, the application now shows an error message.
	If the project was being saved as part of being closed, then
	after the error you get a chance to save to a different place.

GENERAL

&gt;--&gt; The kind &quot;player-character&quot; has been abolished. Previously, this was a
	kind of person able to be the player's persona in the model world: for
	most games, there was only one player-character in existence, the one
	automatically created by Inform and called &quot;yourself&quot;. From this point
	onwards, any &quot;person&quot; can be the player, and indeed &quot;player&quot; is now
	a person variable, not a player-character variable. This means that the
	player object can now be any man, woman or animal in the source text,
	and these can be switched between freely in play. Moreover, we can
	much more simply specify who the protagonist is:
		Lord Bowler is a man in the Pavilion. The player is Lord Bowler.
	If we do not specify the player's identity, the &quot;yourself&quot; is still
	created and used as before.
	This change will affect only works which create &quot;player-characters&quot; in
	their source text: to adapt them to work again, it should be enough
	simply to change every usage of the kind name &quot;player-character&quot; to
	&quot;person&quot;, &quot;man&quot;, &quot;woman&quot; or &quot;animal&quot; as appropriate.
	This change implements proposal (6.56) from the January 2007 consultation
	document.
&gt;--&gt; Up to now, all scenes have been able to take place many times: if a
	scene ends, and then later on its starting conditions once again hold,
	then it will start all over again. This is sometimes very useful, but
	also a source of confusion, and it has led to people writing &quot;S begins
	when ... for the first time&quot; over and over to stop S from recurring.
	As from this build, a scene can be declared either as recurring or not
	when it is first created. So for instance:
		Hourly Patrol is a recurring scene.
		Apocalyptic End is a scene.
	makes one of each kind of scene. (An ordinary scene can also be declared
	as a &quot;non-recurring scene&quot; for clarity's sake.) Note that any scene
	declared as just &quot;scene&quot;, and in particular any scene declared in
	source text for previous builds of Inform, is now non-recurring: so if
	you need a scene to recur in a work-in-progress, you need to insert the
	word &quot;recurring&quot; into its definition.
	This change implements proposal (6.52) from the January 2007 consultation
	document, though in a slightly different way from that proposed.
Partial sound support has been added to Inform: see the new sections 19.6
	and 19.7 of the documentation. As with picture support, Inform provides
	the groundwork and leaves it for more sophisticated extensions to go into
	more elaborate facilities. The present state of completion is that Inform
	can, on all platforms, read Ogg Vorbis or AIFF sound files from the
	Materials/Sounds folder for a project, and embed them correctly into a
	Blorbed Glulx story file, compiling correct code for the Glulx machine
	to play the sounds back at the appropriate moment. However, these
	sounds will only be audible in Windows Inform, or when playing a
	released Glulx story file in Windows Glulxe or Spatterlight for OS X:
	Glulx support for sound has been implemented in the glulx interpreter
	used in both Inform and Zoom for OS X, so that placeholder text is
	printed instead.
	Sound support was proposal (6.61) from the January 2007 document.
Up to now, the only properties which could be used as part of an object's
	name for parsing purposes were either/or properties and enumerated named
	properties. This restriction has been almost completely lifted: we
	can now understand properties whose kind is number, time, or a unit.
	For example:
		An aspect ratio is a kind of value. 16:9 specifies an aspect ratio.
		A television is a kind of thing. A television has an aspect ratio.
		The widescreen TV is a television in the Office. The fifties TV is
		a television in the Office. The widescreen TV is 16:9. The fifties
		TV is 4:3. Understand the aspect ratio property as referring to
		a television.
	...allows us to type EXAMINE 16:9 TV, for instance.
	In addition, further grammar used to specify unusual values is now
	recognised in such situations: for instance if we wrote...
		Understand &quot;European standard&quot; as 16:9.
	the EXAMINE EUROPEAN STANDARD TV would also work. (Previously this did
	not work, because the implementation was incomplete.)
	Finally, a problem message has been added for the (now fairly few) cases
	where the property still does have a kind which cannot be parsed:
	previously no problem was issued in cases Inform could not handle, and
	the feature simply did not work.
	(This change did not appear in the January document, but has been much
	requested since.)
A new form of grammar token has been added to enable names of objects (and
	rooms) to include names of other objects (and rooms) related to them.
	For instance, if we write:
		A box is a kind of container. Understand &quot;box of [something related
		by containment]&quot; as a box. The Toyshop is a room. The red box is a
		box in the Toyshop. Some crayons are in the red box.
	then TAKE BOX OF CRAYONS will work, because CRAYONS matches against
	&quot;[something related by containment]&quot; for the red box - or it does for
	as long as the crayons are there. We can have similar matches against
	relations of all kinds, but have to name the relation explicitly, using
	its one-word name. We can also reverse the sense:
		A box is a kind of container. Understand &quot;box in [something related
		by reversed containment]&quot; as a box. The Toyshop is a room. The crate
		and the hammock are in the Toyshop. In the crate is a box. In the
		hammock is a box.
	makes TAKE THE BOX IN THE HAMMOCK work. (Where more than one object
	matches the criterion, for instance if the original box contained both
	crayons and chalk, any of the names can be used.)
Inform normally decides whether an object has a singular or plural name,
	or whether it has a proper name, by looking at how it is first
	introduced. This mainly works well, but people have also asked for
	more explicit control, especially to cope with changes in an object
	during play. Accordingly, there are now two new either/or properties
	for all things:
		A thing can be plural-named or singular-named.
		A thing can be proper-named or improper-named.
	This change implements proposal (6.46) from the January 2007 document.
The phrase for changing the exits of a room can now accept &quot;nothing&quot; or,
	equivalently, &quot;nowhere&quot; as the new exit, thus allowing map connections
	to be explicitly deleted in play. For instance:
		change the east exit of Stage to nowhere;
	Bugs in type-checking to do with the handling of &quot;nothing&quot; have been
	removed.
Some authors have recently asked for the facility to make extensions go
	uncredited in the VERSION command output, since this might give away
	story details, or generally produce verbosely self-laudatory output.
	A new &quot;authorial modesty&quot; use option has been created for this purpose.
	Inform has to tread a careful line here, because people make extensions
	available under a Creative Commons licence which requires that they be
	credited: so you can only be modest about your own work. If the sentence:
		Use authorial modesty.
	is found in an extension, then its credit line is omitted from the VERSION
	output of any game using it. If the same sentence is found in the main
	source text of a work, then credits are omitted for every extension with
	the same author's name as the work itself. (In other words, it credits
	everyone else's extensions, but suppresses mention of your own.)
	The &quot;say&quot; phrase &quot;[list of extension credits]&quot; uses the same convention,
	but the new &quot;say&quot; phrase:
		&quot;[complete list of extension credits]&quot;
	ignores all these efforts at modesty and prints the whole list. (An
	otherwise modest author might want to print this posthumously after the
	end of play, for instance, or in response to a secret debugging command.)
The the ambient odour rule, the ambient sound rule and the block vaguely
	going rule now apply to actions by all actors, not just the player, so
	that (for instance) the command XERXES, LISTEN will be read as a
	request to listen to the ambient location, rather than printing out a
	parseresque objection such as &quot;What do you want Xerxes to listen to?&quot;
The grammar &quot;switch on [something]&quot; has been added to the standard rules,
	and has the same effect as &quot;switch [something] on&quot;. This is more consistent
	with switching off.
The maximum length for an extension rubric has been increased from 250 to
	500 characters. (Rubrics exceeding that length are silently truncated
	in extension documentation.)
It is now allowed to create a temporary value (i.e., a local variable) with
	&quot;let&quot; whose name coincides with that of a thing, room or property.
	Previously this triggered problem messages, and was a particular problem
	for extensions and the Standard Rules, which had to avoid &quot;let&quot; names
	that might hit any of the things created by the user. (For instance,
	several people reported it as a bug that creating a property called
	&quot;target&quot; caused problems - this was because the Standard Rules use a
	&quot;let&quot; variable called &quot;target&quot; in places.)
The resolution of noun phrases has been slightly changed so that a single-word
	kind of value name will take precedence over the name of a thing or room
	in an assertion sentence. For instance:
		The scene script is in the wardrobe.
		Grand Finale is a scene.
	would previously have read &quot;scene&quot; as a reference to the scene script,
	a physical thing, not the kind of value &quot;scene&quot;. (This in practice makes
	it easier to have rooms and things whose names include the names of
	kinds such as &quot;number&quot;, &quot;time&quot; and so on.)
Examples:
	&quot;Lanista&quot; parts 1 and 2 added to demonstrate randomized combat, first in
		a simple form and then with weaponry and an ATTACKING IT WITH action
	&quot;Night and Day&quot; added to demonstrate recurring sequences of scenes
	&quot;Candy&quot; added to demonstrate making a randomly selected item poisonous
	&quot;Puff of Orange Smoke&quot; added to demonstrate redirecting all actions from
		one object to another
	&quot;Disappointment Bay&quot; examples changed to the more geographically accurate
		Disenchantment Bay; typo fixed in the final, finished example
	&quot;Entrapment&quot; modified to correct a bug due to changed handling of actions
		in recent releases of Inform
	&quot;Terror of the Sierra Madre&quot;, which demonstrates player-switching,
		greatly simplified as a result of the abolition of player-character
	&quot;Exit Strategy&quot;, demonstrating how to set up non-recurring scenes, removed
		(since all scenes are now non-recurring unless otherwise stated)
	&quot;Pine 3&quot;, &quot;Pine 4&quot;, &quot;The Prague Job&quot;, and &quot;Space Patrol&quot; modified to
		reflect the usage of &quot;recurring&quot; scenes
	&quot;Snip&quot; modified to remove bugs and make use of the new ability to
		understand unit properties; &quot;Snip Snip&quot; withdrawn, as the hack it
		demonstrates is no longer needed and the same functionality was
		achieved instead by a single line added to &quot;Snip&quot;
	&quot;Totality&quot; (example about scheduling an eclipse) given a &quot;test me&quot; script,
		and a syntax bug removed
	&quot;Dinner is Served&quot; revised to work better when the object reached for
		is the second noun rather than the noun, and also to have less
		cryptic syntax; the test for the example has been extended
	&quot;Tilt&quot; added to demonstrate an implementation of a deck of cards using
		individual card objects, in which ranks and suits of cards are
		automatically parsed
	&quot;Tilt 2&quot; added to demonstrate an implementation of poker hands, where
		the cards in a player's inventory are described according to their
		value; illustrates use of a complex rulebook
	&quot;Tilt 3&quot; added to demonstrate use of text colors to make poker suit
		symbols appear in red, under both Glulx and the Z-machine
	&quot;Aspect&quot; added to demonstrate the automatic parsing of unit properties
	&quot;Channel&quot; added to demonstrate the automatic parsing of number properties
	&quot;Channel 2&quot; added to demonstrate a combination of advanced parsing
		features, in the creation of tunable televisions
	&quot;Cheese-makers&quot; added to demonstrate a TALK TO action tied to a
		scene-structured plot
	&quot;Alias&quot; added to demonstrate telephone-number-sized units functioning
		under Glulx
	&quot;Claims Adjustment&quot; added to demonstrate a camera that produces instant
		photographs of things; the photographs can then be referred to as
		in X PHOTOGRAPH OF APPLE
	&quot;Puncak Jaya&quot; added to demonstrate characters who can be referred to in
		their absence
	&quot;Cinco&quot; added to demonstrate containers referred to by their contents
	&quot;Originals&quot; added to demonstrate disambiguating objects from models of
		those objects
	&quot;Removal&quot; simplified to use action variables rather than the more
		complicated source
	&quot;Gopher-wood&quot; added to demonstrate the use of the proper-named attribute
		to change someone's name during play
	&quot;Carnivale&quot; added to demonstrate the simple scoping case of a large object
		that should be visible from other rooms
	&quot;Rock Garden&quot; added to demonstrate the simple scoping case of multiple
		rooms that can see into one another (as opposed to the rather more
		complex &quot;Stately Gardens&quot; which autogenerates a lot of room
		description as well)
	&quot;Latin Lessons&quot; added to demonstrate supplying a missing noun when the
		action is being performed by someone other than the player
	&quot;Uber-Complete Clavier&quot; (the big Unicode test) slightly changed so that
		it can now be compiled for Glulx as well as the Z-machine
	Paragraph breaking adjusted in &quot;In Fire or in Flood&quot;, &quot;Misadventure&quot;,
		&quot;Goat-Cheese and Sage Chicken&quot;, &quot;Owen's Law&quot;
	Minor typos removed from &quot;Wight&quot;, &quot;Alpaca Farm&quot;, &quot;Apples&quot;
Extensions:
	&quot;Glulx Text Effects&quot; modified to make it easier to set custom colors
		for text in Glulx; this appropriates the color-management source from
		the extension &quot;Simple Graphical Window&quot; by Emily Short, so those
		using Simple Graphical Window should update to version 4 of the
		extension in order to avoid overlap. Advanced to version 2.
	&quot;Punctuation Removal&quot; revised to include a phrase that corrects
		instances of &quot;mr.&quot;, &quot;mrs.&quot;, etc., to &quot;mr&quot;, &quot;mrs&quot;, and the like, to get
		around parsing frustrations commonly encountered with these titles.
		Also added the means to remove apostrophes as well as the other
		punctuation marks; example added for parsing such phrases as &quot;Jack's
		tie&quot; if and only if Jack is currently wearing the tie object. Version
		number advanced to 3.
	A bug fixed in &quot;Complex Listing to deal with the marking of regions&quot;;
		version number advanced to version 5.
	Bug fixed in the screen-width-determining routine of &quot;Basic Screen Effects&quot;.
Bug fixed whereby past tense conditions in the form &quot;in ... for the first time&quot;
	would sometimes have the temporal requirement ignored, particular in the
	preambles to rules like:
		Every turn when in the Hall of Mists for the first time;
Bug fixed whereby rules which depend on action taking place at the same time
	as a compound condition would sometimes produce spurious problem messages:
	for instance,
		Check turning the dial to  when the number understood &lt; 0 or the
		number understood &gt; 99:
	...is valid but generated a problem message in 4U67.
Bug fixed whereby &quot;otherwise if ... begin&quot; (which is incorrect since otherwise
	if divides the existing code block, rather than beginning a new one) led
	to I6 errors rather than a problem message.
Bug fixed whereby using &quot;(called ...)&quot; to create temporary named values at
	a time in the past such that they could not survive to the present
	would lead to I6 errors rather than a problem message.
Bug fixed whereby rules taking effect if &quot;doing something to ...&quot; and some
	description would sometimes false take effect when the action took a
	non-object as its noun, when the value which happened to have been
	typed coincided with the internal object number of an item matching
	the description.
Bug fixed whereby changing player to someone else and then back again, and
	then using the short name of the player, would crash both the Z and
	Glulx virtual machines at run-time.
Bug fixed whereby I7 would crash if told to understand empty text as something.
	(This is not allowed, and a problem message has been added.)
Bug fixed whereby scenes predicated on past tense actions (&quot;Mayhem begins when
	we have waited&quot;) would cause an internal error.
Bug fixed whereby the condition &quot;we have taken inventory&quot; gave false positives
	after the first turn.
Bug fixed whereby nameless variables attached to activities gave internal
	errors rather than a problem message.
Bug fixed whereby creating an object called &quot;nowhere&quot; caused a crash rather
	than a problem message.
Bug fixed whereby grammar introducting alternative textual names for numbers
	(e.g. 'Understand &quot;a/b/c&quot; as 2.') could lead to I6 errors.
Bug fixed whereby vaguely named properties in adjective definitions would
	result in internal errors rather than a problem message.
Bug fixed whereby naming actions which happen to include &quot;with&quot; can create
	spurious out-of-play things (doing no harm, but doing no good either):
	for instance, &quot;Unlocking the box with the key is bizarre behaviour.&quot;
	would create an object called &quot;Unlocking the box&quot;, in addition to doing
	what it was supposed to do.
Bug fixed whereby matching the player's command against text rather than a
	topic would cause an interpreter crash at run-time.
Bug fixed whereby verbs defined as auxiliaries required participles to be
	named unnecessarily, contrary to the documentation: thus &quot;The verb to be
	able to approach implies the approachability relation.&quot; would fail for
	no good reason.
A bug introduced by the actions rewrite in 4U65 caused player's holdall
	objects not to work properly if they were being worn rather than carried
	(as in the documentation's example &quot;Sackcloth&quot;). This is fixed: apologies.
In past builds the grammar token &quot;[a number]&quot;, in Understand sentences, has
	required the number in question to be something which can be stored in
	a signed 16-bit variable, that is, to be between -32768 and 32767. This
	is correct for story files running on all versions of the Z-machine, but
	the Glulx virtual machine has 32-bit variables, so for Glulx the
	restriction is unnecessary. It has now been lifted: thus on Glulx, we
	can parse numbers in the range -2147483648 to 2147483647 inclusive.
The Inform 6 debugging verb DAEMONS (aka TIMERS), which is undocumented and
	meaningless in I7 since this lacks either daemons or timers in the crude
	I6 sense, could under some circumstances crash if tried in an I7 game.
	The verb is now removed altogether.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s9"></a>§11.9. What was new in build 4U65 (April 2007)</p>
<p><img alt="apr07.jpg" src="images/apr07.jpg" class="floating" /> As this release was prepared, the US Supreme Court ruled that greenhouse gases were a pollutant; the Paris-Strasbourg TGV set a new world record railway speed of 357 mph, three-quarters the cruising speed of a Boeing 737; Charles Simonyi, author of Microsoft Word, became an astronaut; the genome of the macaque monkey was published; 80,000 people attended Wrestlemania 23 at Ford Field, Detroit; and Kryptonite, Superman's fictional mineral, was unearthed in a Serbian mine.</p>
<p>In the world of Inform, 4U65 saw a reform to the handling of actions, making it easier for actions to handle all actors equally, and the introduction of variables shared in common amongst rules which collaborate to perform a task between them. This allowed almost the entire world model of 70 built-in actions, previously hand-coded in Inform 6, to be moved into much more legible Inform 7 source text. 4U67, a Mac OS X variant, was identical except for user interface improvements.</p>
<hr /><pre class="changelog">4U67 (7 May 2007)

This build, for Mac OS X only, is identical to 4U65 except for the OS X user
interface, in which the secondary controls in the various different panels
have been harmonised into new-style bar icons. (In addition, new forward
and back arrows provide the long-requested &quot;browser-style history buttons&quot;.)
We are releasing this now rather than waiting because it also fixes the
minor but annoying bug to do with selecting detail pages in the Actions
index (see the 4U65 release notes).


4U65 (27 April 2007)

This build once again fixes all bugs reported up to 22 April, but in fact
few were found in 4S08; and it removes a hole in the type-checking system,
to do with phrases to make decisions, but this will have affected few users.
The main aim is an across-the-board reform of how actions are handled and
implemented in Inform. Proposals (6.33), (6.35), (6.37) and (6.39) from the
January 2007 consultation document are all carried through. It is now much
easier to create actions which work equally for all actors, and which need
a complicated interaction of rules to work.


INFORM 7 FOR MAC OS X

&gt;--&gt; A minor bug in the OS X application means that viewing the new details
	pages for actions in the index will cause the application to think we
	have switched to the Documentation panel, with the effect that the tabs
	normally present for switching between index pages will disappear:
	switching panel and going back to the Index will cure this. Apologies
	for the inconvenience: the bug will be fixed in the next release.
Fixed bug in 4S08 for OS X only which caused Inform to create spurious empty
	Materials folders in cases where this was not really necessary (although
	this did no harm, and could not damage any existing Materials folder).


INFORM 7 FOR LINUX

i7 now has the -r story-directory and -c story-directory command-line options.
	These force it into non-interactive mode, where it compiles or releases
	the story file and exits. They can be combined with -s (for settings)
	and -p (for prefix of installed inform7 package); see the man page for
	details. It is hoped that these options will be useful for IDE authors.


INFORM 7 FOR WINDOWS

Skein and Transcript improvements:
A single click on a red badge in the skein is enough to go to the knot
	in the transcript, rather than a double click as before.
Any knot can be shown in the transcript by selecting &quot;Show in
	transcript&quot; from the context menu or clicking on a red badge, not just
	knots in the current thread.
A knot selected in the above way is now indicated in the transcript by
	having a thin blue border around it.
The last played knot is now indicated in the transcript by having a
	yellow border around it.
The thick line in the skein now always shows the thread that is visible in
	the transcript.
The new menu item &quot;Play All Blessed&quot; plays through all threads that end in a
	knot with an expected transcript.
If the expected text in the transcript tab is double clicked on, the window
	goes into edit mode, in which the expected text can be amended.
When editing the expected text in the transcript tab, holding Ctrl+Enter
	adds a carriage return to the expected text.


RULEBOOKS

Variables can now be given to rulebooks. For instance:
		The every turn rulebook has a number called accumulated bonus.
	creates a variable called &quot;accumulated bonus&quot;, which holds a number.
	Such variables are initialised to the default values for the relevant
	kind when the rulebook starts, and are accessible only within rules
	belonging to that rulebook (or which have historically belonged to it,
	but been displaced by a &quot;listed in... instead&quot; sentence). Rulebook
	variables have a namespace of their own: so their names can freely
	clash with those of things, rooms, etc.) If the rulebook should
	recursively start again within itself, each new run-through of the
	rulebook has its own set of variables. In short, they behave exactly
	like &quot;let&quot; values except that they last for a whole rulebook, not an
	individual rule or To phrase. (This was (6.33) in the January document.)
As we can now add a potentially unlimited number of new clauses to the
	descriptions of actions to say whether or not rules apply (see below),
	Inform must refine its method for sorting rules in order of how specific
	they are. The rules on &quot;going&quot; are unchanged and we believe that no pair
	of existing rules not using the new features will have their orderings
	changed in any rulebook. Rules which do use new clauses are now subject
	to a new sorting principle, &quot;III.2.4 - Action/Where/Other Optional
	Clauses&quot;. This follows the standard conventions.


ACTIVITIES

Variables can also now be given to activities. These are created just
	before the &quot;before&quot; rules for the activity begin, and destroyed when
	the &quot;after&quot; rules end (or when the activity is abandoned, though this
	is a rare occurrence). They are visible to the rules for that activity,
	and nowhere else, and again they have their own namespace; again, if
	the activity should happen a second time within its first run, that
	second occurrence gets its own copies of the variables. A simple
	example of an activity variable:
		Analysing something is an activity.
		The analysing activity has a text called first impression.
		Before analysing: now the first impression is &quot;unremarkable&quot;.
		Rule for analysing someone: now the first impression is &quot;living tissue&quot;.
		After analysing something (called the sample):
			say &quot;Your professional opinion of [the sample] is that it is
			[first impression].&quot;
		Instead of examining something (called the sample):
			carry out the analysing activity with the sample.
If an activity is called X, we can now also refer to it as &quot;the X activity&quot;
	for clarity's sake. (As with rulebooks called Y, which can already be
	called &quot;the Y rulebook&quot;. This has been done in order to make the syntax
	for creating activity variables more explicit in its intentions.)


ACTIONS

Variables can also now be given to actions. These are created just before
	the &quot;before&quot; rules for the action begin, and destroyed when the action ends
	(by whatever means that should happen). If one action is interrupted by
	another, the new action gets its own copies of these variables.
	The names of action variables are visible only within rules in action-based
	rulebooks (&quot;before&quot;, &quot;carry out&quot;, etc.).
	But note that every action's variables are visible to every such rule -
	as has to be true, because we can have &quot;before&quot; rules which take effect
	for many different actions, for instance, and such rules might need
	access to any of their variables. In consequence, there is only one
	namespace for all action variables: if two different actions name
	a variable &quot;item&quot;, say, clashes will occur. As a result, action variables
	should be named in a way marking out to which action they belong, and we
	recommend including the past participle of the action name - so for
	instance, &quot;vehicle gone by&quot;, &quot;door gone through&quot;, &quot;sticky item taken&quot;, etc.
	A simple example of an action variable:
		The singing action has a text called the lyric sung.
		Before singing: now the lyric sung is &quot;Destruction of the empty spaces
			is my one and only crime.&quot;
		The block singing rule is not listed in any rulebook.
		Carry out singing: say &quot;You cheerfully warble: [quotation mark]
			[lyric sung][quotation mark][paragraph break]&quot;.
	One more warning: since any action-based rule can see all the action
	variables, it's possible to refer to the variables for an action which
	is not actually happening. For instance:
		Before doing something when the lyric sung is &quot;Yesterday...&quot;
	would compile without problems, but fail at run-time when any action
	other than singing was tried.
In the above example, the variable &quot;lyric sung&quot; was set in a before rule.
	In practice, though, it might be needed by other before rules, and then
	the order of operation of before rules would become uncomfortably
	important. To get around this, a new rulebook has been created: the
	&quot;setting action variables&quot; rulebook. For instance, we could write:
		Setting action variables for singing:
			now the lyric sung is &quot;Mystifying eyes.&quot;
	This rulebook is run through before even the before rules, and could be
	used to detect the context and set variables accordingly: but it does
	not have any power to stop or change the action, and its rules should
	ideally say nothing and do nothing other than set rulebook variables,
	please. (Such a rulebook must work for any actor, not just the player:
	so if the idea is to set variables based on the local situation where
	the action will take place, look to see where the &quot;actor&quot; is, not
	where the &quot;player&quot; is.)
There is a new kind of value built into Inform: &quot;action-name&quot;. (As its
	hyphenated name suggests, this is primarily intended for internal use,
	but there are no restrictions on it.) An action-name identifies the
	particular action but none of the nouns attached: it corresponds to
	numerical Inform 6 values such as ##Go. When an action called X is
	created, the constant value &quot;the X action&quot; is also created: thus
	&quot;the looking action&quot;, &quot;the putting it on action&quot;, etc., are all valid
	constant values of this kind. (For those who wish to make variables
	properties, table columns, etc., of this kind, the default value is
	&quot;the waiting action&quot;, that being a sort of zero among actions.)
It is now legal to declare a &quot;specification text&quot; for an action, analogously
	with kinds, and this is used in the Actions index.


ACTION-BASED RULES

Inform source text describes actions with so-called &quot;action patterns&quot;, and
	these specify among other things who the actor must be. Up to now, there
	have only been two ways to specify the actor, as in these examples:
		taking a container
		X trying taking a container
	The former means the actor must be the player: the latter allows any
	description X so long as X is not the player. Thus,
		someone trying taking a container
	allows the actor to be any person in play except the player. This made
	it impossible to write a single rule applying to any actor equally.
	A new third form has been added to allow for this:
		an actor taking a container
	For instance, we could write:
		Instead of an actor jumping: ...
	This implements proposal (6.35) in the January document.
The second form of actor description above is often found to be clumsy:
		Before X trying taking a container...
		try X trying eating the cake...
	Here the word &quot;trying&quot; is cumbersome. In a few cases it is needed to
	make the text unambiguous, and if the description of the actual action
	is the name of a kind of action, it is positively a good thing:
		Before X trying risky behaviour...
	but very often it is a nuisance. The word is now optional provided that:
	(a) the actor is described using a description (&quot;someone&quot;, say, or
		&quot;Captain Haddock&quot;) or a variable name;
	(b) the eventual action is something explicit (like &quot;taking...&quot;) rather
		than a named kind of action (like &quot;risky behaviour&quot;);
	(c) the action is being used in a &quot;try&quot; (or other phrase with an action
		as its parameter) or as the premiss for a rule.
	In other cases, &quot;trying&quot; will remain obligatory, but in practice they will
	be very few. The Examples for 4S08 contained some 120 uses of &quot;trying&quot;
	between them: this reform enabled every &quot;trying&quot; to be removed except one,
		Instead of someone trying disorderly conduct in the presence of
			the policeman:
	where it would clearly not be grammatical to remove it anyway.
As mentioned above, every action variable is visible from every action rule.
	But so far they have all been specific in nature to particular actions:
	for instance &quot;lyric sung&quot; makes no sense for non-singing actions. But
	we can also make general action variables, also visible from all action
	rules, by creating variables for the &quot;action-processing rulebook&quot;.
	This is really a concept which has always existed - &quot;noun&quot; and &quot;second
	noun&quot; are exactly such variables. Joining them henceforth is &quot;actor&quot;:
	the person trying the action.
&gt;--&gt; Thus if existing source text contains references to something called
	simply &quot;actor&quot;, perhaps in a work of IF about the theatre, it may now
	fail to work. (Something like &quot;stage actor&quot; or indeed &quot;thespian&quot; would
	of course work instead. When we made this change it affected only one of
	the Inform examples: Ballroom, which was previously using &quot;actor&quot; as a
	let value in just such a rule - we changed it to read &quot;dancer&quot; instead.)
Although the following is a bug fix, it is worth recording as a change in
	behaviour. The room description at the end of a going action to a new
	location is not technically the result of a looking action. (It doesn't
	quite do a LOOK: for instance, it suppresses the body text for a room
	visited before, and the paragraph spacing is different, etc.) In principle,
	then, during such a room description the action ought still to be &quot;going&quot;,
	but that means that a rule such as
		After printing the name of a person while looking: ...
	would not take effect, which is clearly incorrect. This bug has been
	fixed and such a rule now takes effect.
It has always been the case up to now that the &quot;going&quot; action had a special
	status in Inform: it allowed special clauses such as &quot;... through ...&quot;
	(for the door gone through) not allowed for any other action, and this
	behaviour was hard-wired into the syntax of the language. The ability
	to create such clauses is now available to any action. For instance,
	the following adds &quot;...into...&quot; and &quot;...onto...&quot; to Inform's syntax
	for writing rules about dropping:
		The dropping action has an object called the container dropped into
			(matched as &quot;into&quot;).
		The dropping action has an object called the supporter dropped onto
			(matched as &quot;onto&quot;).
		Rule for setting action variables for dropping:
			if the actor is in a container (called C), now the container dropped
				into is C;
			if the actor is on a supporter (called C), now the supporter dropped
				onto is C.
	What's new here is the &quot;(matched as...)&quot; clause attached to the action
	variable. We have declared that &quot;... into X&quot; should test to see if the
	action variable &quot;container dropped into&quot; matches X, and similarly for &quot;onto&quot;.
	As a result, we can now write:
		Instead of dropping something onto something, say &quot;Don't drop things
			onto platforms or ledges.&quot;
		Instead of dropping something into an open container, say &quot;Don't drop
			things into open containers.&quot;
	(Note that these clauses are only descriptions of the action: it makes no
	sense to write
		try dropping A onto B;
	since the question of whether or not B is dropped onto depends on where the
	player is, and is not something we can choose. Note that this is exactly
	the same position as &quot;going&quot; was in before: for instance,
		try going east from the Ballroom;
	was and is not allowed, because the question of whether it's from the
	Ballroom or not depends on where the player happens to be.)
	This change implements proposal (6.37) in the January document.
In previous builds, Inform has used a messy compromise in its handling of
	check, carry out and report rules. These sometimes look to the user as
	if they are single rulebooks: as if &quot;check&quot;, for instance, is on a par
	with &quot;before&quot; (which is indeed a single rulebook). In fact, for efficiency
	reasons, there are individual check rulebooks for each action, as shown
	by the diagram at 12.2 in the documentation.
	Up to now, it has been legal to write a rule like
		Check doing something: ...
	even though this clearly can't belong to any rulebook in the diagram at
	12.2. What was actually happening was that the checking stage used _both_
	a single generic &quot;check&quot; rulebook _and_ a family of rulebooks with names
	like &quot;check taking&quot;. Rules defined in the Standard Rules would always go
	into the individual rulebooks, but most (not quite all) rules created by
	the user would end up in the generic &quot;check&quot; rulebook. While this gave a
	pretty convincing illusion that all was well, it led to violations of
	the rule-sorting principle that specific rules come before generic ones
	(&quot;check doing something&quot; would come before &quot;check taking an open
	container in the presence of a vehicle when the time of day is 11:13 AM&quot;,
	say), and attempts to explicitly list rules into these rulebooks could
	have odd consequences because of misunderstandings between &quot;check&quot; and
	&quot;check taking&quot;, say. Moreover, for implementation reasons, the actions
	in the Standard Rules created check, carry out and report rulebooks
	with funny properties which no other rulebooks had.
	All of this has been abolished:
	- the position is now strictly as shown in the diagram at section 12.2:
		there are now no generic &quot;check&quot;, &quot;carry out&quot; or &quot;report&quot; rules.
	- all such rules are now placed into rulebooks specific to the actions
		they belong to. Thus, e.g.,
			Check an actor going: ...
		is filed in the &quot;check going&quot; rulebook.
	- problem messages now result from creating rules such as
			Carry out doing something: ...
			Report dropping or taking a container: ...
		which cannot be filed into single unambiguous rulebooks;
	- the Standard Rules now use the same action-creating syntax and
		semantics as anyone else.
	The one respect in which &quot;check A&quot;, &quot;carry out A&quot; and &quot;report A&quot; rulebooks
	are unlike other rulebooks is that rules in them do not check that the
	action is indeed A. This is partly because there is no need (if we are
	looking at the check taking rulebook, the action must be taking) but
	mostly so that a single rule can be explicitly placed in the check (etc)
	rules for more than one action at once. For instance, if we write:
		Check an actor taking (this is the hypothetical rule): ...
	and then say
		The hypothetical rule is listed in the check removing it from rulebook.
	the rule can be effective in both rulebooks: if it tested to see that the
	action was taking, it would never have any effect in the check removing
	it from rulebook, and thus it would be impractical to share rules between
	more than one of these rulebooks - which would be inconvenient to the
	Standard Rules, and also to extensions wanting to consider or abide by
	rules from one action while processing another.
We appreciate that this will cause a small amount of pain (we had to change
	7 not-specifically-action-worded rules in the Inform examples) but we
	think the pain is worth it for the simplification resulting, and most
	such rules are fairly easy to recast. For instance,
		Carry out doing something: ...
	can probably become
		Instead of doing something:
			...
			continue the action.
	without any practical change in the outcome.
Detailed index pages on individual actions now appear in the Index. We hope
	these give a truer picture of what happens to any given action, by
	showing every rule which can affect it, and making the sequence more
	explicit.
Problem message added to catch action descriptions which name unknown actors
	(e.g. &quot;Xerxes the Otherwise Never Mentioned examining the bucket&quot; was
	being read as simply &quot;examining the bucket&quot;).


THE BUILT-IN ACTIONS

Inform provides about 70 built-in actions which form part of the model world.
	(That is, not counting out-of-world actions such as saving the game.)
	In previous builds these have been implemented using a special action
	definition syntax reserved for use of the Standard Rules only, and
	consisting essentially of tables of rule names against I6 identifiers:
	all the rules involved were implemented by I6 code. This was bad because
	it meant that the built-in actions were treated as special in all sorts
	of ways (not a very clean design technique) and because it was quite
	hard to work out how the built-in actions worked, since one needed to
	be able to puzzle out the I6 code at the bottom of all this. On the
	other hand, it had the advantage of speed, since Inform did not have
	to read and compile the built-in action rules from I7 source text.
	As discussed in the January document at (6.39), there are trade-offs
	here, but we have now bitten the bullet and reimplemented all of the
	(not out of world) actions in I7 source text.


THE GOING ACTIONS

The &quot;going&quot; action is the second most complex in Inform (&quot;looking&quot; probably
	takes the palm) and the re-implementation in I7 has turned up two bugs
	which have also been fixed. In addition, numerous rules have been
	renamed or removed:
	- the can't go through concealed doors rule has been renamed
		the can't go through undescribed doors rule (&quot;undescribed&quot; being
		the I7 word for what I6 called &quot;concealed&quot;);
	- the following rules have been abolished:
			set up going rule
			check to see if in a vehicle rule
			determine direction property rule
			print textual map connections rule
			consult routine map connections rule
			determine what's through door rule
		These all clumsily worked out what we now regard as action variables,
		except for the textual and routine map connections rules, which were
		to provide backwards compatibility with traditional I6 use of the map
		properties, which I7 doesn't recognise or use; however, we retain the
			determine map connection rule
		whose purpose now is to recalculate the &quot;room gone to&quot; variable
		immediately before the &quot;can't go&quot; check. (This is done because people
		often use before rules to modify the map, in order to make dynamic
		map structures which respond to movement.)
	- in the check rules, the can't go that way rule has been moved to after
		the rules checking on undescribed and closed doors: after all how is
		one to know that a door leads nowhere if it is closed? But if you do
		succeed in opening such a door and try going through it, the
		traditional I6 response &quot;You can't, since the X leads nowhere.&quot;
		has been restored in place of I7's recent practice of simply saying
		&quot;You can't go that way.&quot;
A bug has been fixed which caused a person other than the player getting
	off something to be reported as if he were getting out of it.


THE LOOKING ACTIONS

The following rules have been abolished:
		consult LookRoutine entry point rule
		standard searching rule
	The former provided vestigial I6 support; the latter in all cases did
	nothing.


THE OBJECT MOVEMENT ACTIONS

Under the taking action, actors other than the player can now also use a
	&quot;player's holdall&quot; (if carried) to overcome carrying capacity limits.
The following rules have been abolished:
		default inventory style rule
		check let-go-before rule
		check let-go-after rule
		check receive-before for supporter rule
		check receive-after for supporter rule
		check receive-before for container rule
		check receive-after for container rule
	These provided vestigial I6 library support and are irrelevant for I7.
The following rules for the removing it from action have been abolished:
		can't remove from closed containers rule
		check after-rules for taking too rule
		standard report removing rule
	They had no effect in 4S08, having been pre-empted for some time by the
	automatic conversion of removing to taking: they had been left in the
	Standard Rules by accident but could never have any effect.
Similarly: the
		can't insert component parts rule
	was redundant in 4S08 and has been removed.


THE ACTIONS WHICH CHANGE THE STATE OF THINGS

When the opening action by the player is successful, Inform shows the contents
	of what was opened, provided it was opaque (so that the contents were
	previously not visible) and provided that the player is not inside it.
	The rule causing this was called the
		reveal any newly visible exterior rule
	which is a misleading - it has been renamed the
		reveal any newly visible interior rule


THE ACTIONS INVOLVING OTHER PEOPLE

The following rules have been abolished:
	check life property for giving rule
	check life property for showing rule
	check life property for waking rule
	check life property for throwing at rule
	check life property for attacking rule
	check life property for kissing rule
	check life property for answering rule
	check life property for telling rule
	check life property for asking rule
	check thrown-at rule
	These provided vestigial I6 library support and are irrelevant for I7.
As for the do-nothing actions (see below), these are now also handled
	symmetrically for all actors. (Thus, for instance, the block attacking
	rule now blocks any actor attacking any other.)


THE DO NOTHING ACTIONS

The actions indexed as &quot;Actions which always do nothing unless rules
	intervene&quot;, which consist only of a single checking rule to block them,
	behaved asymmetrically in previous builds since they blocked the
	action for the player, but allowed it to run through untouched and
	with no rules applying for any other actor. This could result in odd
	transcripts such as:
		&gt; SING
		Your singing is abominable.
		&gt; PETER, SING
		&gt;
	...because no rules at all fire for Peter trying singing, so the
	action succeeds by default, and nothing is said or done.
	In this build, the blocking rules for do-nothing actions now block
	all actors. Thus:
		&gt; PETER, SING
		Peter is unable to do that.
	or with ACTIONS switched on:
		&gt; PETER, SING
		[asking Peter to try singing]
		[(1) Peter trying singing]
		[(1) Peter trying singing - failed the block singing rule]
		Peter is unable to do that.
		[asking Peter to try singing - succeeded]
	This affects the actions:
		Saying yes, Saying no, Burning, Waking up, Thinking, Smelling,
		Listening to, Tasting, Cutting, Jumping, Tying it to, Drinking,
		Saying sorry, Swearing obscenely, Swearing mildly, Swinging,
		Rubbing, Setting it to, Waving hands, Buying, Singing,
		Climbing, Sleeping
&gt;--&gt; While this is much more logical, and means that every (non-out-of-world)
	action in the Standard Rules now works equally for all actors, it does
	mean that a rule in the form:
		After Peter trying singing: ...
	will no longer work, because Peter's singing action will be blocked and
	never reach the &quot;after&quot; stage. To get around this:
		Instead of Peter trying singing:
			...
			the rule succeeds.
	Note the last line, forcing the action to be considered a success: actions
	stopped by instead rules are normally deemed to fail, but making this
	succeed means that no &quot;Peter is unable to do that.&quot; text will be printed.


PHRASES

Inform has been made a little stricter in when it allows certain phrases
	to be used. For instance, the phrase &quot;decide on X&quot;, which chooses a
	value X, is now only allowed in a phrase &quot;To decide which ...&quot; - of
	course it didn't make sense anywhere else, but this is now policed.
	Similarly, &quot;decide yes&quot; is now restricted to phrases which need to
	decide if something is or isn't true, and so on. (We're pretty certain
	that this new check only rejects uses which do not at all achieve what
	they look as they ought to do.)
Similarly, &quot;decide on X&quot; now checks the kind of X to see if it matches the
	required kind. This may produce problems either at compile time, or
	at run-time. Note in particular that &quot;nothing&quot; is forbidden as a
	value to decide on if we are required to produce a particular kind
	of object such as, say, a &quot;room&quot;, but is allowed if we are only required
	to produce an &quot;object&quot;. (This agrees with the conventions used for
	variables.)
Finally, phrases to decide a value now return the default value of the
	appropriate kind if execution runs through to the end of the definition
	without having reach any &quot;decide on X&quot; phrase.
Problem message added to explain why two bracketed phrase terms immediately
	next to each other, with no word in between, is against the rules -
	e.g. &quot;To combine (X - a number) (Y - a number)&quot;. (Previously Inform
	would allow the definition, but then never recognise it in source text,
	which was not a very helpful way of rejecting it.)
Bug fixed whereby setting up a phrase &quot;To decide what X is ...&quot; might
	read X as a description of a thing rather than a kind of value in
	cases where X is both the name of such a kind, and also part of the
	name of a thing. (For instance, if there is an object somewhere called
	&quot;number puzzle&quot;, then a phrase &quot;To decide what number is ...&quot; was
	being misread as if its type had to be always the number puzzle object,
	not a number.)


PROPERTIES

Two changes have been made to the way that assertions about either/or
	properties of kinds are read. To demonstrate, consider the sentence in
	the Standard Rules which reads
		A thing is usually inedible.
	What if we want to contradict this? In previous builds, we could write:
		A thing is never inedible.
	This worked, but owing to a bug,
		A thing is always edible.
	did not work - this bug has now been fixed. In either of these sentences,
	we undo the sentence in the Standard Rules by writing a sentence which is
	more definite - certain (&quot;never&quot;, &quot;always&quot;) rather than merely likely
	(&quot;usually&quot;). But what if we don't want extra certainty? In previous builds,
	writing
		A thing is usually edible.
	would have no effect, because when two inferences are drawn about the
	same property which contradict but which are each uncertain, the original
	first-drawn inference is allowed to stand, and the second is ignored.
	This convention has been reversed in the case of inferences drawn about
	properties of kinds:
		A later uncertain assertion about a property of a kind beats
		an earlier uncertain assertion about the same property.
Problem message added for saying that a kind has an either/or property
	without previously having said that it can have that property. This
	would usually not work anyway, but in previous builds, saying &quot;K is
	usually openable.&quot; would make it so: Inform now insists that we write
	&quot;K can be openable. K is usually openable.&quot;, as the documentation implies.
	(The examples A Haughty Spirit and Disappointment Bay 12 needed to be
	corrected in just this way.)
Problem message added (rather than internal error) to reject implications
	where the implied outcome is a value property rather than a simple
	either/or property like open/closed.
Problem message added to explain why &quot;D can be X or Y&quot; makes no sense if
	D is something qualified by adjectives - e.g. &quot;An open door can be
	rickety or sturdy&quot; makes no sense because the door still has to have the
	property even at times when it is not open. (Previously Inform simply
	ignored the adjectives, and assigned the property to the underlying kind.)
Bug fixed whereby saying &quot;now X is P&quot; could be misconstrued if P refers to a
	property but does so inexplicitly: for instance, &quot;now X is the colour of
	the button&quot; would try to change X to be equal to this colour whereas
	&quot;now X is green&quot; would simply change the colour of X. Both forms now
	change the properties, not the identity, of X.
Bug fixed whereby large numbers of either/or properties created for things,
	followed by an either/or property being created for rooms, would sometimes
	lead to bogus programming errors at run time.
Bug fixed whereby creating a new either/or property but giving its antonym
	as an existing one would sometimes wrongly be allowed, leading to
	peculiar run-time problem messages. (E.g. writing &quot;The Catwalk can be
	flaming or unlit.&quot; causes this, because &quot;unlit&quot; is already the antonym
	of &quot;lit&quot;, a property of things.)
Bug fixed whereby certain complicated forms of property assignment in
	assertions could cause an internal error (e.g., &quot;Blinky is an ephemeral
	ghost with reaction &quot;Boo!&quot;.&quot;).


EXAMPLES

New example &quot;Croft&quot; added to demonstrate action variables.
The now usually unnecessary word &quot;trying&quot; (see above) has been removed from
	most of the examples involving actions.


MISCELLANEOUS

Problem messages added for creating table columns whose names are articles
	or existing values such as literal numbers.
Problem message added (rather than internal error) for initialising a
	K that varies (where K is a kind) to the value &quot;nothing&quot;. This is legal
	for an object that varies (though in 4S08 a bug blocked this), but not
	where the variable always has to hold something of a given kind.
Problem message added (rather than internal error) for an attempt to total
	the column of a table rather than a property.
Problem message added (rather than eventual I6 errors) for defining plurals
	using quotation marks, e.g., writing 'The plural of &quot;coin&quot; is monies.'
	rather than 'The plural of coin is monies.'
Better problem message added for close square brackets used wrongly as
	literals in quoted text.
Bug fixed whereby continuations of tables would sometimes wrongly be reported
	as containing columns not found in the original tables, and would
	sometimes (even when they worked) have their columns incorrectly matched
	up to the original table, in cases where the columns had been reordered.
Bug fixed whereby a compound sentence asserting a relationship both with a
	new specific object and also a new object described only generically by
	naming its kind, as in:
		The big box contains a container and Peter.
	...would fail complaining of an overly complicated relationship.
Bug fixed whereby the word &quot;visible&quot;, redundantly used in a grammar token
	as in e.g.
		Understand &quot;inspect [any visible thing]&quot; as examining.
	would cause a hang because I6 scope loops can't be nested.
Bug fixed whereby hanging dependent clauses which depended on local variables
	would sometimes be construed unexpectedly. (This really only affected
	descriptions which were not very useful anyway, e.g., &quot;the number of
	things worn by X which fit Y&quot;, which is not good style since it in
	fact evaluates the number of things worn by an X-which-fits-Y - that
	is, the &quot;which fit Y&quot; clause appends to X and not the things.)
Bug fixed whereby the &quot;after reading a command&quot; rulebook would sometimes
	fail to be able to replace matched text in a command in cases where it had
	been rewritten as a result of a &quot;Which do you mean...?&quot; question.
Bug fixed whereby the character @ could not be parsed at run-time, and an
	attempt to write something like 'Understand &quot;@&quot; as the giant at-symbol'
	would produce I6 errors.
Bug fixed whereby expressions containing more than one bracketed subexpression
	would sometimes be misparsed: e.g. &quot;let a be (x + y) / (x - y)&quot; would
	produce spurious problem messages despite being legal syntax.
Bug fixed whereby Definitions involving looking up entries in tables would
	sometimes compile through I7 but cause I6 errors.
Bug fixed whereby calculations of the other side of a door, or the direction
	taken by a door, would sometimes be incorrect in darkness.
Bug fixed whereby problems to do with variable initialisation were
	reported at the correct sentences but under the wrong headings.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s10"></a>§11.10. What was new in build 4S08 (March 2007)</p>
<p><img alt="mar07.jpg" src="images/mar07.jpg" class="floating" /> As this release was prepared, the fence dividing Cyprus was dismantled at last - just as, for lack of such a fence, Switzerland accidentally invaded Liechtenstein; Mr Stark of California became the first Congressman in US history to declare his non-belief in God; the UK legislated for a 60% cut in carbon emissions by 2050; enigmatic lakes were imaged on Titan, and heavy snow fell in Kashmir; Martha Jones became Doctor Who's first black companion (if we don't count Frobisher the penguin); and the Bornean Clouded Leopard was declared a new species.</p>
<p>In the immortal words of Robert Heinlein: &quot;Bugs, Mr. Rico! Zillions of 'em! I'm a-burnin' 'em down!&quot; Build 4S08 saw the first release of I7 for Linux, and there were useful reforms of the default value for kinds of value and of the paragraph breaking algorithm, but this was primarily a maintenance release. This release closed all 335 open bug reports, and marked the end of the experimental early days since the original Public Beta release.</p>
<hr /><pre class="changelog">4S08 (25 March 2007)

This build represents a substantial update in five respects: it fixes all
known bugs - some 335 bug reports have been acted on since 4K41 and the
database of open bug report forms is now empty for the first time since
the public beta was released as 3K27; it introduces the first batch of
improvements proposed in the January 2007 consultation document (called
simply &quot;the January document&quot; below); it makes the first real reform of
paragraph-spacing since 3K27; it makes the first tentative steps towards
Inform 7 for Linux, though at present as a command-line system without the
graphical user interface; and it is accompanied by more supporting
materials than previous builds, notably free-standing documentation and a
formal grammar.

Inevitably it has a lengthy change log, which is grouped thematically below.
Enough minor changes have been made to the interpretations of syntax that
authors of any large work in progress will find at least one or two things
they need to change. Possible trouble-spots are marked with an arrow &gt;--&gt;.


INFORM 7 FOR LINUX

Inform 7 is now available for Linux for the i386, ppc, armv5tel, and s390
	architectures. All compilers and interpreters supplied as part of the
	Inform 7 package are statically linked and should have no dependencies
	beyond stdio. The i7 shell itself is written in Perl, but does not
	require any modules not customarily shipped as part of the Perl
	distribution. The only additional dependency is the uuidgen program;
	this is part of the ext2tools package and has so far been present as
	part of the default installation on all systems we have examined.
	Installation instructions can be found in the file INSTALL, and
	operational instructions in README or the manual page installed by
	the Inform installer.
Users on Intel 386-and-descendants machines should download the package
	I7_4S01_Linux_i386.tar.gz. All users on other architectures
	should download I7_4S01_Linux_all.tar.gz. The difference between
	these two is simply whether or not non-i386 compilers and interpreters
	are bundled - the &quot;all&quot; version will function perfectly well for Intel
	users, but it is substantially larger to download. The correct set for
	your architecture will be detected at installation time.


INFORM 7 FOR MAC OS X

The OS X application contains a number of bug fixes in the CocoaGlk layer,
	that is, to the underlying interpreters used in the Game panel.


INFORM 7 FOR WINDOWS

Pasting text into the source panel should no longer lose any trailing
	carriage returns.
Echo streams are supported in the game panel's Glk implementation.
Skein and transcript improvements:
	Knots that have been played in a game session are coloured
		yellow, and all other knots are coloured green.
	Knots with blessed text are lighter than those without.
	If the last played text for a knot does not match the blessed text,
		the node is shown with a red badge. Double clicking the red badge
		goes to the appropriate point in the transcript tab.
	The skein's context menu has been reworked to match the OS X
		application.
	A confirmation dialog appears when deleting a locked knot.
	Threads are automatically locked when blessed or when a label is added
		or changed.
Bug fixed whereby blue &quot;link to documentation&quot; icons were, in the most recent
	Windows build, in some cases off by one or two sections.


SUPPORTING DOCUMENTATION

As from this build, we are uploading the &quot;Writing with Inform&quot; documentation
	in two plainer formats than those already available: plain text, and
	a zipped archive of minimally-tagged HTML files. We hope that this will
	make reference easier for those using screen-reading software, in
	particular. (This was (6.7) in the January document.)
We are also uploading a PDF document extracted from the NI source code which
	specifies the formal grammar read by NI (or rather, that part of it not
	already specified in the Phrasebook index): in the January document we
	expressed scepticism that this would really be useful, but responders
	disagreed. We continue to be sceptical, but it wasn't too hard to generate
	the document, so here it is.


EXAMPLES AND EXTENSIONS INCLUDED WITH INFORM

Examples:
	Added &quot;Apples&quot; to demonstrate &quot;asking which do you mean&quot; rules.
	Added &quot;Ahem&quot; to demonstrate phrases with alternate elements
		(the 300th example to be written).
	Added &quot;Pages&quot; to demonstrate phrases pertaining to specific values
	Added &quot;Hover&quot; to demonstrate interior descriptions of vehicles placed
		before the rest of a room description.
	Added &quot;Walls and Noses&quot; to demonstrate advanced modification of the
		disambiguation question.
	Added &quot;Electrified&quot; to demonstrate modification of the action-processing
		rule sequence.
	Added &quot;Straw Boater&quot; to demonstrate testing for the default text &quot;&quot;.
	Added &quot;Ferragamo Again&quot; to demonstrate phrases applying to specific objects.
	Added &quot;Mattress King&quot; to demonstrate modifying the action to push things
		between rooms.
	Added &quot;Lollipop Guild&quot; to demonstrate turning off implicit takes when
		eating an object that is fixed in place.
	Modified &quot;Abolition&quot; to reflect changes in the handling of &quot;to&quot; in
		action names.
	Corrected &quot;Neighborhood Watch&quot; to add a check for cases where the door
		is already locked or unlocked.	
	Assorted minor changes to examples to handle spacing changes.
Extensions:
	Locksmith: advanced to version 3 and made modifications due to the new
		spacing mechanisms.
	Glulx Image Centering: Corrected documentation.
	Rideable Vehicles: advanced to version 2. Rules added for people other
		than the player to mount and dismount vehicles; rule names given to
		the existing rules, so that they may be more easily revised or
		replaced by the user of the extension.
&gt;--&gt; Plurality: advanced to version 5, and forms of phrases changed to is-are
		(etc) rather than is/are. This will require authors using Plurality
		to do a search and replace to change formats. (Sorry.)
&gt;--&gt; Complex Listing: advanced to version 4, and forms of phrases change to
		is-are (etc) rather than is/are. This will require authors using
		Complex Listing to do a search and replace to change formats. (Sorry.)
		Behavior of &quot;[prepared list]&quot; changed to use no articles, just as
		&quot;[list...&quot; uses no articles now in Inform by default. More flexible
		phrasings added to several phrases, so that &quot;prepare list...&quot; is
		accepted as well as &quot;prepare a list...&quot;, and &quot;register the things...&quot;
		is accepted alongside &quot;register things...&quot;.
	Menus: advanced to version 2. Added options allowing up and down arrows
		to function properly under Glulx.


KINDS OF VALUE

When Inform has to initialise variables or property values, but the source
	gives no value, it uses a default value for the appropriate kind of value.
	For instance, a number is 0 unless otherwise specified, and a text is
	the empty text &quot;&quot;. The Kinds index (in which a number of minor bugs have
	been fixed) now tabulates the default values used for each kind of value
	which can be stored in variables or properties. (This and related changes
	following cover (6.34) in the January document.)
It is now legal to declare a &quot;specification text&quot; for a kind of value,
	analogously with kinds of object, and this is used in the Kinds index.
New scene &quot;Entire Game&quot; created which, as the name implies, contains the
	whole of play except for the posthumous restart, restore or quit
	conversation. (This is the default value for scenes.)
The constant &quot;nothing&quot; now means the absence of an object, in the context
	of testing an object-valued variable or property to see if it holds the
	default value for &quot;object&quot;, and is also useful when looking at the
	result of things like &quot;best route from the Drawbridge to the Keep&quot;
	(if there is in fact no route).
Problem message added to explain more fully when an action name is used as a
	new value (for instance, if we write &quot;Lamp strength is a kind of value.
	The lamp strengths are burning and gone out.&quot;, then &quot;burning&quot; would clash
	with the name of the action).
Bug fixed (in consequence of above) whereby creating but not initialising a
	scene variable or property caused an internal error.
Bug fixed whereby comparison of a text with &quot;&quot; often gave false negatives.


NAMED VALUES

&gt;--&gt; When ambiguous values occur, local variable names (created by 'called'
	or by 'let') are now given priority over other possibilities.
When a &quot;(called...)&quot; name appears in a rule, any article used will not be
	taken as an immutable part of the name. For instance, &quot;Instead of examining
	a door (called the portal): ...&quot; will now create a temporary value called
	just &quot;portal&quot;, not &quot;the portal&quot;. Of course, &quot;the portal&quot; can still be
	used to describe this value, but now being parsed as &quot;the&quot; + &quot;portal&quot;,
	and this means that text substitutions &quot;[a portal]&quot; and &quot;[the portal]&quot;
	can differ.
Problem message added to forbid the use of &quot;(called ...)&quot; when giving a
	complex range of things to be repeated through: this was accidentally
	allowed in previous builds, and produced subtly incorrect results.
Problem message added (in place of internal error) to catch attempts to use
	local values created by 'let' or 'repeat' or 'called' in past-tense
	references which pertain to times when they did not exist.
Problem message added to report contradictions of kind when a variable is
	declared more than once and each time as a kind of object.
Bug fixed whereby conditions involving negated existential quantifiers, and
	giving called names to the results, would sometimes incorrectly fail.
	(For instance, &quot;a person who is not wearing anything&quot; would work but
	&quot;a person (called the extrovert) who is not wearing anything&quot; would fail.
	The negated existential here is the clothing being worn - which is
	required not to exist.)
Bug fixed whereby &quot;a random D&quot;, where D is a description including a
	&quot;(called ...)&quot; clause, would (although legal) cause I6 errors.
Bug fixed whereby variables set up with non-existent kinds (&quot;Z is a
	bogosity that varies&quot;) would sometimes produce internal errors rather
	than a problem message.


TEXT

&gt;--&gt; Inform has a fairly delicate mechanism for placing paragraph breaks
	automatically at &quot;the right&quot; points in text produced by various different
	rules. Its aim is to save the writer from having to think about this.
	Four main defects have been found in the original Public Beta algorithm,
	and in this build we address all of them. We believe the result is a
	better system, but it does mean that the dodges people have used up to
	now to compensate for faults of the old algorithm will need to be
	removed or changed. (We had to remove a dozen or so spurious
	&quot;[line break]&quot;s from the Examples, for instance: the end result was
	much less intervention in how paragraphs were being broken, and this
	suggests that the automatic system is now more trustworthy.) This
	addresses proposal (6.45) in the January document.
When defining a new text substitution, it is now legal to add &quot;-- running on&quot;
	as a note at the end of the preamble. The effect of this is that any
	newline implied by the immediately preceding text is ignored. Thus
		To say note -- running on: say &quot;(1)&quot;.
	can be used in text such as
		&quot;I prefer to avoid footnotes.[note]&quot;
	without a newline being forced after the full stop under the &quot;sentence
	ending punctuation at the end of literal passages of text implies a
	newline&quot; convention.
This has been applied to the following character-level text substitutions in
	the Standard Rules:
		[unicode N]
		[bracket]  [close bracket]  [apostrophe]  [']  [quotation mark]
		[line break]
		[conditional paragraph break]  [paragraph break]  [run paragraph on]
		[bold type]  [italic type]  [roman type]
		[fixed letter spacing]  [variable letter spacing]
As a result, [line break] now does just and only what it suggests: prints a
	line break, regardless of circumstances, and with no side-effects for
	subsequent paragraph breaking. [paragraph break] is now the better way
	to force a paragraph break, and various bugs have been fixed so that it
	can more reliably be used in mid-string, in table entries, in values,
	more than once in the same quoted text, etc.
A new form of paragraph break has been created for one special circumstance:
	printing clarificatory text after a command, when we are guessing what
	was meant. For instance:
		&gt; N
		(first opening the Wicket Gate)
	Conventional spacing here is that text should immediately follow on the
	next line, unless we are going to a different room and looking around,
	in which case a line break should be added. We can get this spacing
	convention using the text substitution &quot;[command clarification break]&quot;;
	for instance:
		say &quot;(first opening [the noun])[command clarification break]&quot;;
Another change made to the paragraph breaking mechanism removes the previous
	discrepancy between the effect of printing an object property which does
	contain a text substitution, and one that doesn't; and similarly for texts
	used as values in miscellaneous other circumstances.
Finally, the text substitution &quot;[no line break]&quot; suppresses a line break
	which might otherwise arise under the sentence-ending punctuation rule
	as it applies to literal text in a &quot;say&quot;, so:
		say &quot;This is not the end![no line break]&quot;;
	leaves the printing position after the exclamation mark.
&gt;--&gt; The meaning of the text substitution &quot;[list of ...]&quot; has been changed so
	that it now lists the items referred to without articles: for instance,
	it might produce &quot;apple, orange and nectarine&quot; rather than &quot;an apple,
	an orange and a nectarine&quot;. (Which is what would have been produced in
	previous builds: to obtain the articled list, use &quot;[a list of ...]&quot;
	or &quot;[the list of ...]&quot; according to whether indefinite or definite
	articles are wanted. This was (6.21) in the January document.)
The text substitution ['] is now synonymous with [apostrophe], and makes
	extended runs of Cockney dialogue easier to type (&quot;put down that bleedin[']
	[']eavy Joanna&quot;, and so forth).
Problem message added for using 'say' (or a text substitution) to print a
	value of a kind which cannot be printed up (such as a parsing topic).
	(This already produced a problem message, but a generic unhelpful one.)
Problem message added for using a comma inside a text substitution, which
	in previous builds concatenated the items in the substitution - but that
	was almost invariably not what people expected, and it was being reported
	as a bug. (Thus previously &quot;[1, 3]&quot; was a legal substitution and printed
	up &quot;13&quot;, for example.)
Bug fixed whereby text substitutions which ended with one digit and were
	immediately followed by another digit in literal text would be corrupted.
	(For instance, in &quot;[if x is 2]2&quot;.)
Bug fixed whereby the little-used but legal &quot;say X, Y, Z&quot; comma-separated list
	form of &quot;say&quot; would lose some text substitutions occurring in terms in the
	list before the final one.
Bug fixed whereby replacing or cutting snippets in the player's command could
	cause spurious line breaks to be printed if the new text contained text
	substitutions.
Bug fixed whereby long texts containing almost the maximum legal number of
	text substitutions could crash NI.
Bug fixed whereby improperly closed double-quoted text, e.g., &quot;'fish&quot;' (note
	the mismatch of quotation marks) could produce I6 errors rather than a
	problem message.
Bug fixed whereby specifying literals involving double-quotes could cause
	I6 errors (e.g., writing: 5'10&quot; specifies a height). Still not a good
	idea since it throws syntax-colouring, but it's not meant to be illegal.
Bug fixed whereby the activity &quot;printing the name of something&quot; now applies
	to the player - previously, it applied to everything except the player.


PROPERTIES

&gt;--&gt; The ability to create a property without specifying its kind (by writing,
	say, &quot;A room has a property called history.&quot;) has been withdrawn. This
	was an undocumented syntax which gave the property the kind
	&quot;miscellaneous-value&quot;, whose use has for some time been deprecated.
	(In almost all cases, the property will be storing either objects or text,
	and should be given a kind accordingly. The Standard Rules no longer
	use properties or variables of this kind, and this change improves the
	reporting of problems in assertions using the properties in question.)
&gt;--&gt; We can now test to see if an object provides a property using the syntax
		if O provides the property P
	so for instance &quot;if the noun provides the property lockable&quot; - which a
	container or door would pass, but which a person would not, and so on.
	This was previously allowed as &quot;if O has a/an P&quot;, but that was too
	ambiguous and has been withdrawn. (It made grammatical sense only for
	value properties P. &quot;if the noun has a lockable&quot; not only read badly,
	but due to a bug (now fixed) it also compiled to an incorrect test.)
An indefinite article is now permitted in a negated assertion which sets the
	converse of an either/or property: thus &quot;X is not a P&quot; is permitted,
	just as &quot;X is not P&quot; would be. Grammatically this is incorrect if P is
	an adjective, which is what the original design of Inform intended, but
	people occasionally use nouns in an adjectival sort of way - for instance,
	&quot;A monkey can be a hairy critter. The ape is a monkey in the Serengeti.
	The ape is not a hairy critter.&quot; (Here P is &quot;hairy critter&quot;.) We continue
	to think this is poor style, but since the assertion would be allowed
	if in the positive sense, it seemed better to legalise it in the negative
	sense as well.
Problem message added for writing 'X can have P' rather than 'X has P' to
	create a property, since this is a common mistake and currently produces
	rather unhelpful problem messages.
Problem message rather than I6 errors for using a non-constant value (say,
	a variable) as the initial value of a property.
Problem message rather than I6 errors for creating a property with a name
	consisting solely of an article (e.g.: &quot;A thing has a number called the.&quot;),
	and similarly for property names containing commas or quoted text.
Problem message added to clarify what kind of contradiction has occurred
	when the same property is set to different values in different sentences.
Problem message added to report that new either/or properties or possible
	conditions (created by 'X can be Y or Z'-style sentences) clash with
	existing meanings - something which previously led to peculiar errors.
Run-time problem messages now result from attempting to change (with &quot;now&quot;)
	either/or properties for objects which are not permitted to have them.
Run-time problem messages now result from attempting to read or write value
	properties for the &quot;nothing&quot; non-object. (Previously writes were ignored
	and reads produced 0, but this was unsafe for kinds of value where 0 was
	not valid, and in any case allowing people to treat &quot;nothing&quot; as an
	object seems unwise.)
Bug fixed whereby &quot;now X is Y&quot; would compile I6 code which failed at run-time
	if X is a K that varies (K being some new kind of value) and Y is one
	possible value of K, in circumstances where K is also a property of objects.
	For instance, suppose we have colours blue and red, and colour is a
	property of cars. Suppose &quot;jalopy&quot; is a car that varies, &quot;hue&quot; a colour
	that varies. Then &quot;now the jalopy is blue&quot; and &quot;now the hue is blue&quot; are
	semantically very different - one changes a property, the other assigns
	a value - and this difference was being missed, hence the bug.
Bug fixed whereby tests of whether something has an either/or property would
	compile to code failing at run-time (whereas value properties would work).
Bug fixed whereby I6 errors might result from heavily ambiguous source texts
	where confusion could occur between wording of one phrase which does not
	include a property and another which does, where that property usage is
	itself incorrect.
Bug fixed whereby giving a property of something with an additional clause
	requiring it to be somewhere (e.g. &quot;the Portable Lamp in the Yard&quot;)
	would cause an internal error rather than produce a problem message.
Bug fixed (see KINDS OF VALUE) whereby creating but not initialising a
	scene property caused an internal error.


DEFINED ADJECTIVES

In &quot;Definition:&quot; sentences, it's now possible to refer to the object to which
	the definition applies as &quot;he&quot;, &quot;she&quot; or &quot;they&quot;, or indeed &quot;him&quot;, &quot;her&quot;
	or &quot;them&quot;, and no longer only as &quot;it&quot;. Thus &quot;Definition: a person is other
	if he is not the player.&quot; is legal, as is, and let's not squabble over the
	rightness of this, &quot;Definition: a person is other if they are not the
	player.&quot; The accusative forms mean that &quot;Definition: a person is a target
	if the player can see him.&quot;, etc., should also work now.
A problem message has been added to forbid ambiguous settings of
	properties for adjective-qualified kinds, as in &quot;The description of an
	open door is ...&quot;: such a sentence looks as if it might create a rule
	which would dynamically check the door during play, but in fact being
	an assertion it only looks at the initial state. (In previous builds,
	a bug caused this to set the description for every door, initially open
	or not: rather than fix this, it seemed better to forbid this form of
	assertion entirely, since if it worked it would still not do what it
	looked as if it did.)
Similarly, a problem message has been added to forbid assertions at compile
	time about adjective-qualified kinds where the adjective cannot be
	determined until run-time (because it is created with &quot;Definition:&quot; and
	involves some computation to decide whether an object satisfies it or not).
Problem message rather than I6 errors for using &quot;change O to P&quot; where O is
	an object and P is a defined adjective (rather than a property), so that
	it is not logically possible to change P by merely saying so.
Run-time problem messages now result from attempting to change (with &quot;now&quot;)
	adjectival properties which cannot be forced to come true, since their
	truth is governed by a fixed definition.
Bug fixed whereby definitions of adjectives based on testing a property to
	see if it equals some specific value (e.g. &quot;Definition: A container is
	standard if its carrying capacity is 7.&quot;) would in fact test a range
	of values with this as boundary (e.g. capacity &lt;= 7).
Bug fixed whereby definitions of adjectives with a specific object as domain
	(e.g. &quot;Definition: the Ballroom is dusty if...&quot;) would not always be given
	priority over definitions with a more general kind as domain (e.g.
	&quot;Definition: a room is dusty if...&quot;).


HEADINGS

Problem message added to report that a heading stops before the end of its
	line, something which generally happens when a full stop has been misread.
Bug fixed whereby an author name including a comma would be mis-spaced in the
	banner (for instance if the first line is: &quot;Trio&quot; by Rod, Jane and Freddy).
Bug fixed whereby a heading which followed a long comment without an intervening
	skipped line would sometimes wrongly be rejected as containing a line break.


ASSERTION SYNTAX

When ambiguous assertion sentences occur, where more than one word is in
	principle valid as the primary verb, we now assume that &quot;to have&quot; is the
	most likely verb, followed by &quot;to be&quot;, and then the other built-in verbs.
	This replaces the previous doctrine that the earliest valid verb in the
	sentence was the true one. For instance, &quot;The last support is a thing
	that varies.&quot; is now read with &quot;is&quot; as the primary verb, not &quot;support&quot;.
Problem message added to catch what look like mistaken uses of the pronoun
	&quot;they&quot;. (E.g., in &quot;A and B are things. They are portable.&quot;, I7 can't
	cope with &quot;they&quot; as meaning the collection of A and B, and would previously
	latch onto some other meaning, e.g., either A or B alone.)
Problem message added for using 'every' on the wrong side of the verb in an
	assertion sentence (mostly to take the opportunity to explain how to
	reword such a sentence so that it works).
Problem message added (in place of internal error) to catch misreadings of
	'of' leading to misunderstood property values in assertions, e.g. in
	&quot;The dining room is a room in the house east of the kitchen.&quot;
Problem message added (in place of internal error) to catch relative clauses
	which seem to express a location in a way too complicated to follow, e.g.
	&quot;Sleeping Beauty is a woman who is asleep in the Spinning Tower.&quot;
Bug fixed whereby listing complicated descriptions of things which involved
	at least one negated property would cause I6 errors.
Bug fixed whereby negated relative phrases would mistakenly be read as
	positive, so that for instance &quot;The broken box is a container which is
	not openable.&quot; would, very unfortunately, make an openable container.
Bug fixed whereby implications in the form of &quot;An X is usually Y&quot;, where X
	involves a kind and also properties, would in fact cause all things of
	that kind to be Y, whether they matched or not. (For instance, &quot;an open
	container is usually lockable&quot; would cause all containers not otherwise
	described to be lockable.)
Bug fixed whereby &quot;some&quot; as an article would be confused with &quot;some&quot; as a
	determiner in such a way that the actual object being referred to was
	lost: this especially happened with singular mass nouns, e.g. &quot;some clay&quot;,
	where &quot;if the player is carrying some clay&quot; would be misread as &quot;if the
	player is carrying something&quot; if the clay was a single thing, not a kind.
Bug fixed whereby the assertion &quot;X is here.&quot; might fail if X had already
	been defined before the room denoted by &quot;here&quot; had been declared; and
	also another case in which the room, having been mentioned long ago,
	is only recently made the subject of discussion again.
Bug fixed whereby descriptions with multiple relative clauses, some of them
	ambiguous, could result in an interpretation which is none of the
	possibilities an English speaker would choose. (This is difficult to
	define, but for instance, &quot;a random woman who is not Zoe in the location
	of Zoe&quot; was being interpreted in such a way that &quot;in the location of Zoe&quot;
	was being applied neither to the random woman, nor to Zoe. Inform now
	applies it to Zoe. This affects only a handful of sentences - e.g., it
	makes no difference to any sentence in any of the examples - and only
	to sentences which are fairly evidently risky in the first place.)
Bug fixed whereby object names containing &quot;with&quot; could, in the middle of
	lists, crash NI.


PLURALS

The previous requirement that a plural definition sentence had to appear before
	it could be used has been lifted. Such definitions now apply throughout
	the source text, wherever they appear. This avoids traps like the following:
	&quot;Clothing is a kind of thing. The plural of clothing is clothes. Clothes
	are wearable.&quot; In previous builds, this would have created an object called
	&quot;Clothes&quot;, which is wearable but is not of the kind &quot;clothing&quot;, and a
	kind called &quot;clothing&quot; with the plural &quot;clothings&quot;.
Bug fixed whereby non-specific references to properties in &quot;every turn&quot; rules
	would be taken to be properties of the I6 library placeholder object,
	usually leading to strange I6 veneer errors: they are now assumed to be
	properties of the player. Thus for instance
		A person can be poised or flustered. Before jumping: now the player
		is flustered. Before waiting: now the player is poised.
		Every turn when flustered: say &quot;You feel flustered.&quot;
	...now works as expected.
Bug fixed whereby ordinal numbers were being taken as counting determiners
	for noun phrases, so for instance &quot;2nd Room&quot; was being read as if it
	had the same meaning as &quot;two rooms&quot;. This led to confusion when room
	names (in particular) began with an ordinal, e.g., &quot;2nd Floor Balcony&quot;.
Bug fixed whereby words which indicate plurals will not always be recognised
	as such if the object whose name is being parsed has a complex range of
	possible names (i.e., if I7 is obliged to compile a parse_name routine to
	handle it).


RELATIONS, PARTS AND REGIONS

&gt;--&gt; Some people have had problems with the relation &quot;in&quot;, when applying it
	to regions. Inside Inform, there are two forms of &quot;in&quot;: there is object
	containment - the ball is in the box, the box is in the Summer House -
	and also region containment - the ball is in the Garden Area, the
	Summer House is in the Garden Area. These two forms of &quot;in&quot; are not
	as similar as they look - object containment has the property that a given
	X can be &quot;in&quot; Y for at most one possible Y, and Inform makes heavy use
	of this in optimising searches and loops; but region containment does
	not, becase the Summer House could be in the Garden Area and also in
	the super-region the Outside World, say. In practice, Inform always
	reads &quot;X in Y&quot; as object containment except when Y is the literal name
	of a region. Up to now, there has been no way to describe the hidden
	internal relation for region containment: in this build, we provide
	&quot;regionally in&quot; to allow users to clarify what sense they mean. Thus
	&quot;repeat with P running through the rooms regionally in R begin; ...&quot;
	makes clear that we are talking about all rooms in R (and not, for
	instance, rooms immediately in R rather than in some subregion of R).
&quot;A part of&quot; is now synonymous with &quot;part of&quot;: for instance, one can now write
	&quot;if the tail is a part of the fish&quot;, with the same effect as &quot;if the tail
	is part of the fish&quot;.
Problem message added to prevent foundational errors involving an object being
	indirectly a part of itself (&quot;X is a part of Y. Y is a part of X.&quot;, and
	so on).
Problem message added to report that a region has been placed inside more than
	one other region. (This is forbidden because it could lead to configurations
	whereby regions overlap, whereas they are required always to include each
	other or else be disjoint.)
Problem message added for an attempt to declare an already-existing object as
	a region. (This is never necessary, and when it occurs it is almost always
	a symptom of an inadvertent clash of names.)
Run-time problem message added for attempts to find routes or count steps
	through relations not permitting this. (Previously such attempts would
	be allowed but, not very helpfully, invariably come back as finding no
	possible route. This was misleading.)
Bug fixed whereby finding best routes through the map from A to B would fail
	with a programming error at run-time if A or B were nothing: Inform now
	works in these cases, returning the information that no route exists.
	(Similarly for counting steps, and for finding routes through relations.)
Bug fixed whereby the built-in relations were not being given names as values,
	so that for instance Inform would fail to understand &quot;containment
	relation&quot; even though there is a relation called &quot;containment&quot;.
Bug fixed whereby relations defined by a condition would, if defined between
	different kinds of thing, sometimes lose track of what kinds they were
	defined over: so that run-time type-checking errors could be produced
	because the definition was applied to objects of the wrong kind.
Bug fixed whereby some tests amounting to seeing whether a given room is in
	a given region, in the course of a condition, would fail.
Bug fixed whereby a backdrop asserted as being in more than one region would
	only appear in the first region asserted (though also in any rooms it was
	asserted as being in: the bug applied only to multiple regions).


TABLES

&quot;Increment&quot; and &quot;decrement&quot; are now synonyms for &quot;increase&quot; and &quot;decrease&quot;.
	Moreover, they can now also be used on table entries (e.g. &quot;increase
	pollen count entry by 2&quot;).
&quot;Choose the row with...&quot; is now synonymous with &quot;choose row with...&quot;.
Problem message added for placing blank entries in the first column of a table
	which is creating named objects or values, something which makes no sense
	since the first column provides the names.
Problem message added to report duplicated table names (which are not
	continuations of each other).
Problem message for using a table reference at a time when no row has been
	selected has been clarified to explain why text substitution can make
	this time not the time which several users thought.
Problem message for using a table reference in a condition set in the past
	tense and thus relating to a time when no row had been chosen.
Problem message for using a table reference in a complex condition which
	requires loops over objects in ways very likely resulting from a
	misunderstanding (and which in any case can't be compiled safely if
	taken at their literal meanings).
Problem message added for &quot;Some X are defined by the Table of T&quot; where X is
	something unrecognised, and another for where X describes a specific
	object rather than a kind. (It needs to be a kind of object or value.)
Bug fixed whereby repeating through a table &quot;in reverse order&quot; (not in reverse
	order of any specific column, just in reverse order of its natural order)
	would produce I6 errors.
Bug fixed whereby sorting a table would (almost) always move blank rows to
	the top: it now invariably moves blank rows to the bottom, regardless of
	the direction or column of sorting, as the documentation implies it should.
Bug fixed whereby any continuation of a table was being treated as if written
	under the same heading in the source text as the start of the table:
	which meant that any problem messages, and also any object name
	disambiguation, would be handled at the wrong position.
Bug fixed whereby &quot;change TE to V&quot;, where TE is a table entry and V is some
	value to be put there, was not being type-checked - so that one could,
	for instance, change a textual entry to a number, with subsequently
	unfortunate results. (This is particularly insidious in the case of
	changing a topic entry to a textual string, which can't safely be done
	at run-time, and will crash the interpreter during later parsing.)
Bug fixed whereby the condition &quot;if S is a topic listed in T&quot;, where S is a
	snippet (e.g. &quot;the player's command&quot;) and T has a topic column, would
	produce programming errors at run-time rather than perform the necessary
	matching.
Bug fixed whereby the condition &quot;if there is an X of Y in T&quot;, to see if the
	X column of table T ever contains Y, failed to compile if T was
	expressed in a way not using the word &quot;table&quot; (for instance, if T was
	a table-name which varies).
Bug fixed whereby naming a table in such a way that the first word of the
	name was an article (e.g. &quot;Table of A Students&quot;) would make that table
	subsequently difficult to refer to.
Bug fixed whereby some properties given by columns in tables which define
	a batch of objects would, if they seemed always to contain other objects,
	sometimes cause an internal error and so fail to compile.
Bug fixed whereby references to entries in tables in the past could produce
	internal errors.
Bug fixed whereby defining a quoted text as an enumerated value of a kind of
	value using a table (a foolish but just about legal thing to do) caused
	I6 errors.


TO... PHRASES

&gt;--&gt; Phrase declarations can also now give literal values as the only possible
	match. For instance, defining:
		To hazard (N - a number): say &quot;[N]! That's Numberwang.&quot;
		To hazard (N - 14): say &quot;[N]... oh, sorry, Julie, that's NOT Numberwang.&quot;
	means that using a phrase like
		hazard X;
	will produce the exceptional message if X is 14, and the standard one
	otherwise. For instance, if we tried this with X repeating through a
	loop, we might see:
		13! That's Numberwang.
		14... oh, sorry, Julie, that's NOT Numberwang.
		15! That's Numberwang.
	If we had not defined the general case (&quot;To hazard (N - a number)&quot;), then
	attempting to use
		hazard X;
	for any value of X other than 14 would have produced a run-time problem.
	(This was (6.29) in the January document.)
Phrase declarations can now give alternatives for any single literal word
	using slashes (using the same convention that grammar tokens follow).
	For instance,
		To pour (N - a number) gallon/gallons: ...
	makes the phrase match with either &quot;gallon&quot; or &quot;gallons&quot; as the last
	word; except that &quot;say&quot; is never permitted as the first word of a
	phrase, just as now, because &quot;To say ...&quot; declares a text substitution
	instead. (This was (6.26) in the January document.)
&gt;--&gt; Because of this, all existing To... definitions containing words with
	a slash in them, such as &quot;and/or&quot;, will need to be changed. In particular
	the text substitution &quot;[is/are a list of...]&quot; and similar forms have been
	changed to &quot;[is-are a list of...]&quot;, and the same principle (exchanging
	slashes for hyphens) has also been followed for the extensions: see above.
Problem message added to prevent source text trying to redefine &quot;now ...&quot; by
	creating &quot;To now X is 2&quot; and similar constructions - these tend not to
	work, and are highly misleading when they do.


IF AND OTHERWISE

An additional problem message has been added to catch a subtle syntax mistake
	which previously led in some cases to I6 errors. This is to do with the
	possible interpretations of &quot;otherwise if&quot;, as shown by the following:
		Report going from Alpha to Omega:
			if Omega is visited begin;
				say &quot;You retrace your steps, but it's just not the same.&quot;;
				otherwise if turn count &lt; 2, say &quot;Unhesitatingly, you set out.&quot;;
			end if.
	This is actually illegal, because &quot;otherwise (phrase)&quot; can only occur
	immediately following an &quot;if (condition), (phrase)&quot;: the form of otherwise
	used to divide up cases within a blocked if (such as the &quot;Omega is visited&quot;
	one) is just &quot;otherwise if (condition)&quot;. The new problem message intercepts
	this mistake. The correct text would be:
		Report going from Alpha to Omega:
			if Omega is visited begin;
				say &quot;You retrace your steps, but it's just not the same.&quot;;
			otherwise if turn count &lt; 2;
				say &quot;Unhesitatingly, you set out.&quot;;
			end if.
	(While at first sight the incorrect syntax looks innocuous enough - why not
	simply allow both forms? - this becomes ambiguous if the statement does
	indeed follow a simple &quot;if&quot; within the larger &quot;if&quot; block.)
The problem message arising from &quot;if C&quot;, where C is not recognised as a
	condition, has been made more helpful in the case where C is a compound
	condition. (For instance: &quot;I was expecting that 'score is 1 or 2 or lemon
	sherbet explodes in the dark' would be a condition, but I couldn't make
	sense of it that way. 'score is 1' was okay; '2' only made sense as a
	value, which can't be used as a condition; 'lemon sherbet explodes in the
	dark' did not make sense; and nor did the condition make sense as all
	one text.&quot;)
Problem message rather than I6 errors for using &quot;otherwise ...&quot; as following
	immediately on an &quot;if ... begin&quot; block opening. (It would be legal to
	use &quot;otherwise&quot;, or to use &quot;otherwise ...&quot; after a non-blocked &quot;if&quot;.)
Bug fixed whereby &quot;if ...&quot; might fail to yield problem messages where a
	complicated condition included arithmetic performed on named values
	which do not exist.
Bug fixed whereby giving more than one &quot;otherwise;&quot; clause in an &quot;if&quot; block
	did not provoke any problem message. (It now does.)


CONDITION SYNTAX

When a phrase can be used as a condition (i.e. when it is a phrase &quot;to decide
	if...&quot;), &quot;not&quot; followed by that phrase can also be used as a condition.
	In particular, &quot;when not in darkness&quot;, &quot;if not using the memory economy
	option&quot;, etc., now work.
&quot;Can not&quot; is now synonymous with &quot;cannot&quot;: for instance, &quot;if the player can
	not see the fish&quot; is equivalent to &quot;if the player cannot see the fish&quot;,
	and similarly for &quot;if the player can not be seen by the fish&quot;.
Problem message added to catch accidental omissions of verbs in some
	descriptive conditions (say, writing &quot;if small key inside box&quot; instead
	of &quot;if small key is inside box&quot;: it would open the door to too many
	ambiguities to allow these customary omissions in general).
Bug fixed whereby tests of whether &quot;A is unable to B&quot; would be parsed as if
	they were &quot;A is able to B&quot;, i.e., with the negation lost: for instance,
	&quot;...when Peter is unable to see the bridge&quot; would be read as if &quot;...when
	Peter is able to see the bridge&quot;.
Bug fixed whereby testing whether something unlocks something else would
	compile through I7 but then cause I6 errors.


MISCELLANEOUS SYNTAX

An explanatory problem message, rather than an internal error, now results
	from using 'total ... of' in a way too complicated to handle.
Bug fixed whereby clashes of names as between ordinary phrases and arithmetic
	phrases could result in unhelpful problem messages on legal source text:
	for instance, creating a property called &quot;times played&quot; and then
	evaluating &quot;total times played of all tracks&quot; would be confused with
	trying to multiply &quot;total&quot; by &quot;played of all tracks&quot;, even though this
	interpretation made no sense.
A name-space clash causing the Standard Rules to conflict with any kind whose
	name included the word &quot;item&quot; has been removed.


RULES AND RULEBOOKS

Problem message rather than internal error for the case of a rule which
	happens when an activity is being applied to X, but X is not a
	description of something.
Problem message rather than I6 errors for attempting to write an inline
	I6 definition of a rule. (Only allowed when defining &quot;To...&quot; phrases.)
Problem message added for a rule whose name contains a comma. (No, really.
	People have tried to do this.)
Bug fixed whereby saying that a named rule is listed first, in a rulebook
	already containing other named rules, would sometimes have no effect.
Bug fixed whereby declaring that a new named rule should be listed instead
	of an existing (and built-in) action rule, e.g. the &quot;can't go that way
	rule&quot;, would sometimes cause the new rule not to have the same implied
	actor conventions as the old one - for instance, even though the &quot;can't
	go that way rule&quot; applies to all actors, its replacement might only
	apply to the player, so that NPCs were able to walk through walls.
Bug fixed whereby the result of a rule was not allowed to be another rule,
	so that &quot;rule succeeds with result X&quot; would fail in the case of X being
	a rule - while printing a problem message explicitly claiming that a rule
	was one of the legal alternatives here.
Bug fixed whereby rules attached to actions happening &quot;for the first time&quot;
	(or with similar stipulations) would sometimes, in the case of complex
	actions, fire more than once during the same turn. This bug has been
	seen particularly in response to &quot;After going from X to Y for the first
	time&quot;, where the rule fired both after the going, and then also after
	the subsequent looking action in the same turn.
Typo fixed in Rules index: it should be &quot;action-processing rules&quot;, not
	&quot;action processing rules&quot;. (Some people thought this rulebook could not
	legally be referred to as a value - actually it can, but this typo
	caused them to get the name wrong. Apologies.)


ACTIONS

&gt;--&gt; The relationship between the actions &quot;getting off&quot; and &quot;exiting&quot; has been
	reversed. Suppose the player is on a chair, a supporter. In previous
	builds, EXIT would cause the exiting action directly, but GET OFF CHAIR
	would cause the getting off action, which would quickly convert into an
	exiting action. This worked fine, but meant that a rule like:
		Instead of getting off the sticky chair, say &quot;You can't! It's too
			sticky.&quot;
	would only apply to one of the two commands, anomalously. In this build,
	it is exiting which converts to getting off (provided that the actor is
	indeed on a supporter). (This also fixes a bug to do with NPCs and the
	convert get off to exit where possible rule, which no longer exists.)
The problem message for mis-describing an action with the form &quot;A or B or ...&quot;
	now itemises the listed actions to say which are valid and which not,
	and also warns if one of these is a named kind of action (which is not
	allowed in a list like this). It also handles the case of &quot;doing something
	except A or B or ...&quot;.
Problem message added for past-tense references to the &quot;noun&quot; or &quot;second
	noun&quot; which certainly will not do what their authors intend, because
	the values of these quantities have changed over time.
Problem message added for complicated past-tense references to the &quot;going&quot;
	action. (The old problem message amounted to &quot;I don't understand this&quot;,
	the new one &quot;I do understand this, but I'm still not going to do it&quot;.)
Problem message added for describing a &quot;going&quot; action in terms of objects
	which are of the wrong kind to make sense - going from or to a non-room-
	or-region, through a non-door, with or by a non-thing. This only catches
	cases which the compiler can spot, involving specific named items, but
	this is more useful than it sounds (especially if a room name includes
	the word &quot;by&quot; in lower case, and Inform has wrongly taken this as a
	preposition).
Bug fixed whereby moving the player during the course of a rule attached
	to an action being carried out by somebody else would cause any resultant
	looking action to apply to that other person, rather than the player,
	so that instead of a description of the player's new room we might either
	see nothing or something like &quot;Miss Marple looks around.&quot;, depending
	on where the third party is at that point in the action.
Bug fixed whereby somebody arriving in the player's room as a result of a
	&quot;going&quot; action would always be described as arriving from the opposite
	direction as that of initial travel - so if he had gone east, he would
	now be said to have arrived from the west, for instance. This is fine
	for untwisted, two-way routes, but not otherwise. Inform now only does
	this where the reverse journey can be made in the reverse direction,
	possibly via a two-way door; and otherwise simply says that the person
	&quot;arrives&quot;.
Bug fixed whereby a spurious &quot;You must name an object.&quot; error would be printed
	in response to a command requesting somebody to carry out an action which
	applied only to a single topic.
Bug fixed whereby &quot;try looking&quot; would sometimes fail with a spurious &quot;You
	must name an object.&quot; error if it occurred during an action which applied
	to a value rather than a thing.
Bug fixed whereby an action caused by &quot;try&quot; would sometimes not have the
	appropriate &quot;... understood&quot; values correct if the action applied to a
	value rather than a thing.
Bug fixed whereby an action whose name takes the form &quot;... to something&quot;
	could be referred to without the &quot;to&quot;. As a special case and because
	of its status as an optionally-nouned action, this is still allowed
	for &quot;listening&quot; (properly speaking the action is called &quot;listening to&quot;),
	but forbidden for new actions.
Bug fixed whereby lists of actions would sometimes, in certain orders and
	where ambiguity between different length actions occurred, wrongly cause
	problem messages. For instance, &quot;Instead of taking off or dropping the
	jodhpurs&quot; would fail (note ambiguity between &quot;taking&quot; and &quot;taking off&quot;)
	whereas &quot;Instead of dropping or taking off the jodhpurs&quot; would work.
Bug fixed whereby ambiguities caused by abbreviation of action names
	(for instance if we have actions &quot;weighing&quot; and &quot;weighing it with&quot;,
	what do we say that the rule &quot;Before weighing&quot; applies to?) are now
	resolved in favour of the least abbreviated name (here, &quot;weighing&quot;).
Bug fixed whereby tests of intransitive past tense actions (e.g. &quot;we have
	woken up&quot;, no object, rather than &quot;we have taken the box&quot;) were
	performed incorrectly, usually producing false negatives.
Bug fixed whereby action reporting would suddenly cease after a NPC tried
	an action involving a door or backdrop. (The mystically-named &quot;untouchable
	silence&quot; bug, which Khelwood posted a (correct) fix to RAIF for.)
Bug fixed in the implementation of the ACTIONS testing command whereby
	the information that a tried action had just failed would sometimes be
	destroyed by the act of printing things information out.
Bug fixed whereby some complicated check, carry out or report rules would
	fail to appear in the Actions index.
Bug fixed whereby check rules applying to the final action performed would be
	posthumously applied also to the attempt at restoring the game produced
	by typing RESTORE in reply to the post-game question &quot;Would you like to
	RESTART, RESTORE a saved game or QUIT?&quot;


SCENES

&gt;--&gt; A small but quite important change has been made to the scene changing
	mechanism which affects the order in which things happen when there are
	multiple scene endings. For instance:
		Home is a room. The cube and the ball are here.
		Shape Choice is a scene. Shape Choice begins when play begins.
		Shape Choice ends roundly when the player carries the ball.
		Shape Choice ends squarely when the player carries the cube.
		Consequence is a scene. Consequence begins when Shape Choice ends.
		When Consequence begins:
			if Shape Choice ended roundly, say &quot;Roundly.&quot;;
			if Shape Choice ended squarely, say &quot;Squarely.&quot;
	Suppose the cube is taken. This used to cause the following sequence of
	events:
		Shape Choice ended
		Consequence began
		Shape Choice ended roundly
	It was necessary for Shape Choice to end the regular way before the exotic
	way, so that consequent rules could happen, but the ordering was unfortunate,
	because it meant that the rule in the source above happened at a time when
	it wasn't known whether the scene had ended roundly or squarely - only that
	it had ended. Since it's very useful to know how the previous scene ended
	in order to begin the next one, this is unfortunate. The change means that
	the sequence is now:
		Shape Choice ended
		Shape Choice ended roundly
		Consequence began
	and so the rule above works after all, printing &quot;Roundly.&quot;
It is now possible (optional, that is) to use a &quot;the&quot; in giving a rule for
	a scene beginning or ending: thus &quot;When the Afternoon begins:&quot; is now
	synonymous with &quot;When Afternoon begins:&quot;.
Two new phrases for scenes have been added: &quot;the time since S ended&quot; and &quot;the
	time when S ended&quot;, exactly parallel to &quot;the time since S began&quot; and &quot;the
	time when S began&quot;. (Previously, the &quot;began&quot; time was being interpreted as
	the most recent time at which S either ended or began - this was a bug, and
	has been fixed.)
New scene &quot;Entire Game&quot; created: see KINDS OF VALUE.
Bug fixed whereby a scene which begins &quot;when play begins&quot; and also when a
	condition holds now begins in either case (previously, the condition was
	being ignored, and some users thought it was illegal to specify a condition
	in this case - actually it was a bug).
Bug fixed whereby begin/end conditions of scenes would not be properly
	disambiguated if relying on an ambiguously phrased phrase to decide
	the outcome, resulting in I6 errors for what was correct source text.
Bug fixed whereby begin/end conditions of certain forms, such as past tense
	actions, were rejected altogether with spurious problem messages.
Bug fixed whereby if scene A is set to end when scene B ends, but in fact
	B ends at a time when A has never started, ending rules for A would be
	erroneously run anyway.
Bug fixed whereby creating a scene that varies called X could sometimes also
	create a scene called X. (Except for cluttering the index, this would
	only be harmful if the name of X happened to end with &quot;scene&quot;, but of
	course people do tend to name such things &quot;current scene&quot;, etc., so...)
Bug fixed (see KINDS OF VALUE) whereby creating but not initialising a
	scene property or variable caused an internal error.


WHEN PLAY BEGINS

Bug fixed whereby attempting to enter a closed container which in fact
	already enclosed the actor (but indirectly so) would fail the &quot;can't enter
	closed containers rule&quot; rather than the &quot;can't enter what's already
	entered rule&quot;, resulting in a slightly misleading reply.
Bug fixed whereby calculations of visibility made during &quot;when play begins&quot;
	rules would be incorrect because the player object had not yet been put
	into its starting position.
Bug fixed whereby changing the player to a new player-character and then
	moving that PC during &quot;when play begins&quot; rule to a container or supporter
	would have the final movement disregarded.


OBJECT MOVEMENTS

&gt;--&gt; Scenery is now usually &quot;fixed in place&quot;. This makes little difference
	since it can't normally be taken, but in previous builds it usually had the
	&quot;portable&quot; property, and this meant that (for instance) &quot;repeat with the
	item running through the portable things in the location ...&quot; would
	unexpectedly include scenery.
Bug fixed whereby moving an object from room to room (say, by writing &quot;now
	the row-boat is in the Rapids&quot;) would cause the location to be wrongly
	set internally if the object contained the player (because an I6 PlayerTo
	call would never occur), which would make certain room descriptions print
	wrongly.
Bug fixed whereby &quot;remove D from play&quot;, where D is only a vague description
	of things, would compile I6 code which failed at run-time rather then
	produce a problem message.	


LIGHT

Bug fixed whereby another person in the same room, openly carrying a light
	source, was not counted as lighting that room.


UNDERSTANDING

In previous builds, the activity &quot;reading a command&quot; has happened only around
	the original command being typed. If the player types TAKE POLISH, the
	activity winds up: if, later, the parser asks a follow-up question such
	as &quot;Which do you mean, the Polish sausage or the shoe polish?&quot;, this
	question is not framed by the activity. That remains the case, but if
	the question results in a rewritten command, Inform now - exceptionally -
	follows the &quot;after reading a command&quot; rulebook for a second time.
Problem message rather than internal error for confusing an activity with an
	action in an &quot;Understand ... as ...&quot; sentence.
Bug fixed whereby, if we give define a noun as a legal command by writing e.g.
	&quot;Understand &quot;[something]&quot; as examining.&quot; and then the player types
	something unrecognisable, the parser replies &quot;You can't see any such
	thing.&quot; (presuming we were intending to type a noun) rather than &quot;That's
	not a verb I recognise.&quot; (presuming a verb - which seems more likely).
Bug fixed whereby the message &quot;** Warning: grammar properties might not work
	correctly **&quot; would occasionally appear when a game began playing (but
	not in a released version).


USE OPTIONS

The &quot;the&quot; in the condition &quot;using the ...option name... option&quot; has been
	made optional: for instance, &quot;if using no scoring option&quot; is now allowed.
Bug fixed whereby using memory economy did not suppress all the RULES ALL text,
	thus not economising as much as it might.


EXTENSIONS

Problem message added to explain that extension names should be unquoted
	in Include sentences.
Bug fixed whereby extensions ending without documentation would sometimes
	produce a spurious problem message on their end lines, unless these
	were followed by at least one one blank line.


PUBLISHING

Bug fixed whereby releasing along with a website stopped working in 4K40/1.
	Particular apologies for this.
Bugs fixed whereby Unicode translations were not properly preserved in
	released websites, notably in title, blurb and source text when written
	as HTML.


WORLD INDEX

Problem message added to clarify that mapping hints can only be given laterally
	(so e.g. &quot;Index map with Overlook mapped above Great Plain&quot; does not work).
Bug fixed causing &quot;yourself&quot; (the player) to appear twice in the World index
	in some situations.
Bug fixed whereby disconnected areas of map would sometimes appear on vastly
	distant vertical levels from each other, with peculiar resulting map
	legends. (See e.g. the map for &quot;Port Royal 2&quot; under 4K41 or earlier.)


PROBLEM MESSAGES

Bug fixed whereby some problem messages concerning phrases would be reported
	as being in the text under the final heading in the source text, rather
	than the headings under which they actually occurred.
Bug fixed whereby problems occurring in text substitutions inside quoted text
	which forms a whole sentence (e.g., as an implicit room description)
	were reported as being at peculiar sentences.
A number of problem messages which users reported as unclear have been reworded.

</pre>
<hr />
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
