<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Generated by indoc on 11 Aug 2016 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_RB.css" rel="stylesheet" type="text/css" />
<title>Chapter 6: Commands</title>
</head>
<body class="paper papertint"><p class="chapterheading">Chapter 6: Commands</p>
<p class="chaptercontents"><a href="RB_6.html#s1" class="standardlink"><span class="chaptercontentsitem">§6.1. Designing New Commands</span></a>; <a href="RB_6.html#s2" class="standardlink"><span class="chaptercontentsitem">§6.2. Writing New Commands</span></a>; <a href="RB_6.html#s3" class="standardlink"><span class="chaptercontentsitem">§6.3. Modifying Existing Commands</span></a>; <a href="RB_6.html#s4" class="standardlink"><span class="chaptercontentsitem">§6.4. Looking</span></a>; <a href="RB_6.html#s5" class="standardlink"><span class="chaptercontentsitem">§6.5. Examining</span></a>; <a href="RB_6.html#s6" class="standardlink"><span class="chaptercontentsitem">§6.6. Looking Under and Hiding</span></a>; <a href="RB_6.html#s7" class="standardlink"><span class="chaptercontentsitem">§6.7. Inventory</span></a>; <a href="RB_6.html#s8" class="standardlink"><span class="chaptercontentsitem">§6.8. Taking, Dropping, Inserting and Putting</span></a>; <a href="RB_6.html#s9" class="standardlink"><span class="chaptercontentsitem">§6.9. Going, Pushing Things in Directions</span></a>; <a href="RB_6.html#s10" class="standardlink"><span class="chaptercontentsitem">§6.10. Entering and Exiting, Sitting and Standing</span></a>; <a href="RB_6.html#s11" class="standardlink"><span class="chaptercontentsitem">§6.11. Waiting, Sleeping</span></a>; <a href="RB_6.html#s12" class="standardlink"><span class="chaptercontentsitem">§6.12. Other Built-In Actions</span></a>; <a href="RB_6.html#s13" class="standardlink"><span class="chaptercontentsitem">§6.13. Magic Words</span></a>; <a href="RB_6.html#s14" class="standardlink"><span class="chaptercontentsitem">§6.14. Remembering, Converting and Combining Actions</span></a>; <a href="RB_6.html#s15" class="standardlink"><span class="chaptercontentsitem">§6.15. Actions on Multiple Objects</span></a>; <a href="RB_6.html#s16" class="standardlink"><span class="chaptercontentsitem">§6.16. Alternate Default Messages</span></a>; <a href="RB_6.html#s17" class="standardlink"><span class="chaptercontentsitem">§6.17. Clarification and Correction</span></a>; <a href="RB_6.html#s18" class="standardlink"><span class="chaptercontentsitem">§6.18. Alternatives To Standard Parsing</span></a></p><table class="centredtable"><tr><td class="roadsigndirection"><a href="RB_1.html" class="standardlink"><img alt="arrow-up-left.png" src="images/arrow-up-left.png" /></a></td><td><a href="RB_1.html" class="standardlink">Contents of <i>The Inform Recipe Book</i></a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_5.html" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_5.html" class="standardlink">Chapter 5: The Viewpoint Character</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_7.html" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_7.html" class="standardlink">Chapter 7: Other Characters</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><p class="sectionheading"><a id="s1"></a>§6.1. Designing New Commands</p>
<p>Quite a bit of interactive fiction design involves the creation of custom commands to expand on the library's existing set. There is more to know than we can review in this section; instead, this is to serve as an overview of the process, with hints about where in <span class="italic">Writing with Inform</span> we might find more technical details.</p>
<p>Before we even start to write our source text, we should think about the following things:</p>
<!-- START CODE "c11375" -->
<a id="c11375"></a><blockquote class="code"><p class="quoted">
(1) What words will the player use to make this new action happen?
<br />(2) What will the action change about the world model?
<br />(3) What circumstances might make the new action go wrong or produce silly outcomes?
</p></blockquote>
<!-- END CODE -->
<p>To take these one one by one:</p>
<p>(1) We may have a general idea of the phrasing we want the player to use -- say we want to add an SHOOT command which allows the player to fire a gun at something. (This is an intentionally tricky choice of verb, because it shows off so many possibilities.) So we might decide the base form of the action will be</p>
<!-- START CODE "c11376" -->
<a id="c11376"></a><blockquote class="code"><p class="quoted">
SHOOT THE PISTOL AT HENRY
</p></blockquote>
<!-- END CODE -->
<p>So now we're going to need an action that applies to two objects -- the pistol as the noun, and Henry as the second noun. The problem is, though, that there are lots of other ways that the player could reasonably formulate the command, some of which leave out information:</p>
<!-- START CODE "c11377" -->
<a id="c11377"></a><blockquote class="code"><p class="quoted">
SHOOT HENRY
<br />SHOOT PISTOL
<br />FIRE PISTOL
<br />SHOOT AT HENRY
<br />SHOOT AT HENRY WITH GUN
</p></blockquote>
<!-- END CODE -->
<p>To avoid frustrating the player, we should make a guess about what the player means whenever we're sure that guess will be reliable (we might, for instance, have only one gun in the story, so we know that SHOOT HENRY will always mean SHOOT HENRY WITH PISTOL), but ask the player for clarification whenever there might be ambiguity (SHOOT PISTOL gives no clue about the target, nor can we safely guess, so we want Inform to ask &quot;What do you want to shoot the pistol at?&quot;). The next section goes into more detail about how to handle these variations.</p>
<p>Conversely, there are cases where the player is offering too <span class="italic">much</span> information for the command we've defined - say we have a BURN command which doesn't look for a specified fire source, but the player is trying to BURN BOX WITH MATCH. We probably don't want to throw away the extraneous information as though it had never been typed, because the player might have typed something quite specific. BURN BOX WITH ACID, say, should not be cavalierly reinterpreted as BURN BOX (with a fire source). Instead, we want to give the player a bit of gentle guidance, perhaps using &quot;Understand as a mistake&quot;, as in</p>
<!-- START CODE "c11378" -->
<a id="c11378"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [something] with [text]&quot; as a mistake (&quot;Your choice of lighter isn't important in this story: BURN SOMETHING will suffice.&quot;)
</p></blockquote>
<!-- END CODE -->
<p>Finally, there are some cases where we want to understand a phrase to mean a specific form of a more general action. For instance, we might want TURN DOWN THE MUSIC to mean the same thing as SET VOLUME KNOB TO 1. In this case, we may want to make a sort of dummy action which converts into the main action, as in</p>
<!-- START CODE "c11379" -->
<a id="c11379"></a><blockquote class="code"><p class="quoted">
Understand &quot;turn down volume&quot; or &quot;turn down music&quot; or &quot;turn down the volume&quot; or &quot;turn down the music&quot; as lowering the volume. Lowering the volume is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11380" -->
<a id="c11380"></a><blockquote class="code"><p class="quoted">
Instead of lowering the volume, try setting the volume knob to 1.
</p></blockquote>
<!-- END CODE -->
<p>More about this can be found later in this chapter, under Remembering, Converting and Combining Actions.</p>
<p>Sometimes these kinds of details can be caught in play-testing, but it's a good idea to think about them specifically and in advance rather than leaving them to our beta-testers to sort out.</p>
<p>(2) To generalize very broadly, there are two possible kinds of command in IF: those that only exist to give the player new information (like EXAMINE, INVENTORY, LOOK, TASTE), and those that change the world model (like TAKE FISH, OPEN DOOR, UNLOCK GATE WITH BLUE KEY). The Inform library has some commands that really do none of these things by default - commands like JUMP that do nothing interesting at all most of the time - but those exist as hooks, in case there is ever something important for them to do.</p>
<p>Commands that ask for information are usually easier to implement. Very often we're looking to offer the player a new kind of information about specific objects, and these can be handled by adding new text properties, as in</p>
<!-- START CODE "c11381" -->
<a id="c11381"></a><blockquote class="code"><p class="quoted">
A thing has some text called the sacred emanation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11382" -->
<a id="c11382"></a><blockquote class="code"><p class="quoted">
Carry out perceiving something:
<br />&#160;&#160;&#160;&#160;say &quot;[sacred emanation of the noun][paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Commands that affect the world model, on the other hand, can range from simple to very complex indeed. Sometimes we need to do nothing more than add an attribute to an object, like</p>
<!-- START CODE "c11383" -->
<a id="c11383"></a><blockquote class="code"><p class="quoted">
A thing can be folded or flat. A thing is usually flat.
</p></blockquote>
<!-- END CODE -->
<p>so that our FOLD command can change the object into its folded form. At other times, we need quite intricate rules to account for a subtle multi-stage process - how fire is burning and spreading to objects, say, or how a conversation is progressing. Other parts of the Recipe Book offer solutions to some of these challenges.</p>
<p>(Strictly, we might count a third kind of command: the kind that controls the story itself. The Advanced Actions chapter discusses how to add actions out of world, as these are called, but the difficult ones are already built into Inform - saving, restoring, restarting, undoing a turn, and so on. Mostly when we need to add new actions out of world, they will be help or hint systems of some kind. More about these can be found in the Helping and Hinting section of the Recipe Book, under Out of World Actions and Effects.)</p>
<p>(3) Most commands that change the world require certain preconditions: the player needs to be holding the gun before he can fire it; the gun must be loaded with ammunition; if we're being especially detailed in our simulation, the safety must be off.</p>
<p>Often, there are also subtler details about how the command should interact with special items. For any new command we create, it's worth asking: should anything special happen if the player performs this action...</p>
<!-- START CODE "c11384" -->
<a id="c11384"></a><blockquote class="code"><p class="quoted">
On himself?
<br />On another living character?
<br />On an object he (or another character) is carrying or wearing?
<br />On an object he (or another character) is inside or on?
<br />On a door?
<br />On an object that is impossible to move (defined as &quot;scenery&quot; or &quot;fixed in place&quot;)?
<br />On an intangible object (such as a beam of sunlight)?
<br />On an object far away (such as the sun)?
<br />On an object that is part of something else (such as a doorknob)?
<br />On an object that itself has parts (such as a desk with drawers)?
<br />If there are two objects required by the action, can both the noun and the second noun be the same thing?
</p></blockquote>
<!-- END CODE -->
<p>For instance, we might have written code so that if the gun is fired at anything but a person or a fragile object, the default response is &quot;The bullet bounces harmlessly off [the second noun].&quot; Our checklist would remind us to write special cases to prevent</p>
<!-- START CODE "c11385" -->
<a id="c11385"></a><blockquote class="code"><p class="quoted">
SHOOT GUN AT MY SHOE (while he's wearing it)
<br />SHOOT GUN AT ME
<br />SHOOT GUN AT GUN
</p></blockquote>
<!-- END CODE -->
<p>and so on. Actions that destroy objects are especially tricky, because there are many things that aren't safe to destroy without carefully adjusting the world model. (What happens if we burn a door connecting two rooms? a wooden desk with a drawer containing an asbestos vest? the armchair Cousin Fred is sitting on?)</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_5.html#s6" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_5.html#s6" class="standardlink">Back to Chapter 5: The Viewpoint Character: §5.6. Viewpoint</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s2" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s2" class="standardlink">Onward to §6.2. Writing New Commands</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s2"></a>§6.2. Writing New Commands</p>
<p>Once we've considered all the design issues pertaining to a new action, we're ready to start writing the source text. First we need to give the player a way to issue the command:</p>
<!-- START CODE "c11386" -->
<a id="c11386"></a><blockquote class="code"><p class="quoted">
Understand &quot;smile&quot; as smiling.
<br />Understand &quot;fold [something]&quot; as folding.
<br />Understand &quot;shoot [something preferably held] at [something]&quot; as shooting it with.
<br />Understand &quot;wrap [something preferably held] in [something preferably held]&quot; as wrapping it in.
</p></blockquote>
<!-- END CODE -->
<p>(Note how &quot;it&quot; stands in for the first item when we have an action requiring two objects.) The things that go in square brackets are called &quot;tokens&quot;: they are blank spaces for the player to fill in with story objects. The different kinds of tokens are explained in the chapter on Understanding.</p>
<p>We can add synonyms with</p>
<!-- START CODE "c11387" -->
<a id="c11387"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;grin&quot; as &quot;smile&quot;.
</p></blockquote>
<!-- END CODE -->
<p>and we can create reversed versions of commands with</p>
<!-- START CODE "c11388" -->
<a id="c11388"></a><blockquote class="code"><p class="quoted">
Understand &quot;shoot [something] with [something preferably held]&quot; as shooting it with (with nouns reversed).
</p></blockquote>
<!-- END CODE -->
<p>These variations are also covered in the Understanding chapter. If the action needs to work on things that aren't within the player's sight or reach in the normal way, we may need to use an [any thing] token (see the Understanding chapter), as in</p>
<!-- START CODE "c11389" -->
<a id="c11389"></a><blockquote class="code"><p class="quoted">
Understand &quot;contemplate [any thing]&quot; as considering.
</p></blockquote>
<!-- END CODE -->
<p>We may also need to modify reach or light levels (see Changing reachability and Changing visibility in the Advanced Actions chapter), or rely on the Deciding the scope of... activity.</p>
<p>As for guessing the player's intention when he isn't clear, we may want to consult the Does the player mean rules (to help Inform make guesses between multiple possible targets) and the activities Supplying a missing noun and Supplying a missing second noun (to help Inform guess an appropriate item when the player leaves something entirely out of his command). For instance, if the player typed SHOOT HENRY, it is the supplying a missing noun/second noun activity that would allow us to make Inform draw the obvious conclusion that he shoots Henry with the pistol in his hand. The Does the player mean rules are discussed in the chapter on Advanced Actions; the activities in the Activities chapter.</p>
<p>Next we need to define our new action, as in</p>
<!-- START CODE "c11390" -->
<a id="c11390"></a><blockquote class="code"><p class="quoted">
Smiling is an action applying to nothing.
<br />Folding is an action applying to one thing.
<br />Wrapping it in is an action applying to two carried things.
</p></blockquote>
<!-- END CODE -->
<p>In cases where we're using an &quot;[any thing]&quot; token to let the player affect objects that aren't normally visible or reachable, we'll need to define the action to apply to <span class="italic">visible objects</span>. This tells Inform that the player doesn't have to be able to touch the object for it to work. So for instance</p>
<!-- START CODE "c11391" -->
<a id="c11391"></a><blockquote class="code"><p class="quoted">
Considering is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<p>For more on this topic, see Visible vs. touchable vs. carried in the Advanced Actions chapter.</p>
<p>The next step is to create rules for Inform to follow when the action happens. These can be check rules (which make sure that the conditions for the action to occur are fulfilled); carry out rules (which perform the action); and report rules (which describe the results of the action to the player). Any new action should have at least a report rule to let the player know what has happened (if anything), and a carry out rule if there are any ramifications for the world model. For instance:</p>
<!-- START CODE "c11392" -->
<a id="c11392"></a><blockquote class="code"><p class="quoted">
Carry out folding:
<br />&#160;&#160;&#160;&#160;now the noun is swan-like.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11393" -->
<a id="c11393"></a><blockquote class="code"><p class="quoted">
Report folding:
<br />&#160;&#160;&#160;&#160;say &quot;You deftly fold [the noun] into the shape of a swan.&quot;
</p></blockquote>
<!-- END CODE -->
<p>It's important to remember that report rules may be describing something whose name is plural, such as papers or shoes, and write our text so that it sounds right either way; see the chapter on Adaptive Text and Responses.</p>
<p>More about defining actions and creating carry out and report rules may be found in the chapter on Advanced Actions.</p>
<p>Meanwhile, the check rules give us a chance to provide sensible restrictions on how the command works, as in</p>
<!-- START CODE "c11394" -->
<a id="c11394"></a><blockquote class="code"><p class="quoted">
Check folding:
<br />&#160;&#160;&#160;&#160;if the noun is not a napkin:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] won't bend.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11395" -->
<a id="c11395"></a><blockquote class="code"><p class="quoted">
Check shooting something with the noun:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is incapable of aiming at itself.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11396" -->
<a id="c11396"></a><blockquote class="code"><p class="quoted">
Check burning something which contains the player:
<br />&#160;&#160;&#160;&#160;say &quot;You're not quite desperate enough to make a funeral pyre for yourself just yet.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>The chapter on Advanced Actions explains how check rules work. In the special case where we want the player to take things automatically before using them, we may want to define the action to work only on carried objects, as in</p>
<!-- START CODE "c11397" -->
<a id="c11397"></a><blockquote class="code"><p class="quoted">
Wrapping it in is an action applying to two carried things.
</p></blockquote>
<!-- END CODE -->
<p>The activity Implicitly taking something (documented in the Activities chapter) allows us to modify what should happen during this process.</p>
<p>Lastly, a word or two about trouble-shooting. If a newly created command seems not to be working, we can discover what action Inform is really generating with the ACTIONS testing command, as in</p>
<!-- START CODE "c11398" -->
<a id="c11398"></a><blockquote class="code"><p class="quoted">
&gt;actions
<br />Actions listing on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11399" -->
<a id="c11399"></a><blockquote class="code"><p class="quoted">
&gt;i
<br />[taking inventory]
<br />You are carrying nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11400" -->
<a id="c11400"></a><blockquote class="code"><p class="quoted">
[taking inventory - succeeded]
</p></blockquote>
<!-- END CODE -->
<p>If the desired command is not happening, we may need to review our understand lines. A common problem is that our new action conflicts with one already defined by default. In that case, we may want to check the Actions index and see whether there are already-defined actions which might conflict with it. If so, we may need to redefine a command with a line like</p>
<!-- START CODE "c11401" -->
<a id="c11401"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;stand&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<p>If that's not enough, we can get a comprehensive view of everything that happens during an action with RULES: this will list all the check, carry out, and report rules that Inform is using to perform the command.</p>
<p class="crossreference"><a href="RB_5.html#s5" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Memory and Knowledge</b></a><i> for more about the any token and the concept of scope to control what the player may refer to in a command</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s1" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s1" class="standardlink">Back to §6.1. Designing New Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s3" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s3" class="standardlink">Onward to §6.3. Modifying Existing Commands</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s3"></a>§6.3. Modifying Existing Commands</p>
<p>Much of the rest of this chapter discusses the behavior of specific commands in Inform's command library, and how we might change and build on these. This section is instead an overview of the general principles: where and how can one intervene?</p>
<p>Whenever we are dealing with actions, the Actions Index is likely to be useful: it lists all the actions currently implemented, whether in our own source or in extensions or the Standard Rules, and lists the rules pertaining to each.</p>
<p>The lightest and easiest way to change behavior is with an Instead rule:</p>
<!-- START CODE "c11402" -->
<a id="c11402"></a><blockquote class="code"><p class="quoted">
Instead of eating the apple:
<br />&#160;&#160;&#160;&#160;say &quot;It turns out to be made of beeswax, so that's a non-starter.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11403" -->
<a id="c11403"></a><blockquote class="code"><p class="quoted">
Instead of tasting an edible thing:
<br />&#160;&#160;&#160;&#160;say &quot;It's delicious!&quot;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>The addition of &quot;rule succeeds&quot; tells Inform that the instead action was a success rather than a failure; this is not usually very important with the player's own actions, but can be useful for actions performed by other characters, so that a successfully replaced action is not followed by the disconcerting line</p>
<!-- START CODE "c11404" -->
<a id="c11404"></a><blockquote class="code"><p class="quoted">
Clark is unable to do that.
</p></blockquote>
<!-- END CODE -->
<p>Before and After offer alternative easy forms of modification; the Basic Actions chapter explains all three.</p>
<p>Changing the way an action works in all cases is usually better addressed by changing the main rulebook, rather than with one (or many) instead rules. We may add new check, carry out, and report rules to existing action rulebooks. The Advanced Actions chapter describes these, and ends with some guidelines on when to use before, instead, and after, and when to use check, carry out, and report.</p>
<p>Similarly, we may delete, move, or replace rules that are already present (see the chapter on Rulebooks). This is handy if we decide that an action has restrictions that we dislike and want to abolish. If the restriction we need to change is part of the accessibility rules - those which check whether the player can take, see, and touch items - we may need to look at Changing reachability or Changing visibility in the Advanced Actions chapter (to revise what is allowed), at Deciding the scope of something in the Activities chapter (to influence what can be seen when).</p>
<p>If, for instance, the player character is a burly fellow who can lift any other character he likes:</p>
<!-- START CODE "c11405" -->
<a id="c11405"></a><blockquote class="code"><p class="quoted">
The can't take other people rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>...and rip knobs off doors:</p>
<!-- START CODE "c11406" -->
<a id="c11406"></a><blockquote class="code"><p class="quoted">
The can't take component parts rule is not listed in the check taking rulebook.
</p></blockquote>
<!-- END CODE -->
<p>...and commit petty theft:</p>
<!-- START CODE "c11407" -->
<a id="c11407"></a><blockquote class="code"><p class="quoted">
The new can't take people's possessions rule is listed instead of the can't take people's possessions rule in the check taking rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11408" -->
<a id="c11408"></a><blockquote class="code"><p class="quoted">
This is the new can't take people's possessions rule:
<br />&#160;&#160;&#160;&#160;if someone (called the owner) carries the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first waiting until [the owner] is distracted)&quot;;
</p></blockquote>
<!-- END CODE -->
<p>The right approach to use also depends a bit on how systematic a change we anticipate. We may find that instead rules become cumbersome when we want to specify behavior for a very large number of objects. It's fine to have</p>
<!-- START CODE "c11409" -->
<a id="c11409"></a><blockquote class="code"><p class="quoted">
Instead of tasting the arsenic:
<br />&#160;&#160;&#160;&#160;say &quot;You'll live to regret this very very shortly.&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<p>but a bit more tedious to have to write</p>
<!-- START CODE "c11410" -->
<a id="c11410"></a><blockquote class="code"><p class="quoted">
Instead of tasting the peppermint: ...
<br />Instead of tasting the plate: ...
<br />Instead of tasting the banister: ...
<br />Instead of tasting the donkey: ...
<br />(etc.)
</p></blockquote>
<!-- END CODE -->
<p>in a story in which most items have unique flavor descriptions. In that situation, it may be more sensible to overhaul the design of the action: create a new text property for things, and revise &quot;tasting&quot; so that it now consults this property:</p>
<!-- START CODE "c11411" -->
<a id="c11411"></a><blockquote class="code"><p class="quoted">
The block tasting rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11412" -->
<a id="c11412"></a><blockquote class="code"><p class="quoted">
A thing has some text called the flavor. The flavor of a thing is usually &quot;Nothing special.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11413" -->
<a id="c11413"></a><blockquote class="code"><p class="quoted">
Report tasting something:
<br />&#160;&#160;&#160;&#160;if the flavor of the noun is &quot;Nothing special.&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You taste nothing unexpected.&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[the flavor of the noun][paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11414" -->
<a id="c11414"></a><blockquote class="code"><p class="quoted">
Report someone tasting something:
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] licks [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Finally and most sweepingly, we can rip out whole passages of the Standard Rules and replace them - or not. This is a drastic measure and rarely necessary (or so we hope); but see the Extensions chapter for ways to replace sections of existing source, or even revise the Inform 6 template files on which Inform depends. By these means almost anything can be changed. We can throw out a whole range of existing commands and start from scratch, for instance, if we want Inform to know about a completely new and different command set.</p>
<p class="crossreference"><a href="RB_10.html#s10" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Magic (Breaking the Laws of Physics)</b></a><i> for a hat that lets the player walk through closed doors, and an NPC able to reach through solid containers</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s2" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s2" class="standardlink">Back to §6.2. Writing New Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s4" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s4" class="standardlink">Onward to §6.4. Looking</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e349" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e349" class="standardlink">Example 214: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Slogar's Revenge</b>&#160;&#160;&#160; Creating an amulet of tumblers that can be used to lock and unlock things even when it is worn, overriding the usual requirement that keys be carried.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s4"></a>§6.4. Looking</p>
<p>Looking is quite a complicated command, since the production of a room description takes many steps. A detailed description of this process may be found in the Room Descriptions section.</p>
<p>By convention, a player sees full descriptions of rooms he enters more than once, but may type BRIEF in order to see shorter descriptions, and SUPERBRIEF tells the story never to print room descriptions at all. VERBOSE restores the default behavior.</p>
<p>These conventions are not always appropriate, however, especially in works where experiencing a changing environment is essential. The use option</p>
<!-- START CODE "c11415" -->
<a id="c11415"></a><blockquote class="code"><p class="quoted">
Use brief room descriptions.
</p></blockquote>
<!-- END CODE -->
<p>changes the default behavior so that rooms are not always described fully to the player. <span class="boldface">Verbosity</span> demonstrates how this works.</p>
<p>The player always has the option of turning room descriptions to BRIEF or SUPERBRIEF mode. <span class="boldface">Verbosity 2</span> demonstrates how we might remove the player's ability to change the default behavior.</p>
<p class="crossreference"><a href="RB_3.html#s1" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Room Descriptions</b></a><i> for a detailed description of how Inform creates room descriptions and how to change the results</i></p><p class="crossreference"><a href="RB_6.html#s9" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Going, Pushing Things in Directions</b></a><i> for ways to change just those room descriptions that are shown as the result of the player's movement</i></p><p class="crossreference"><a href="RB_5.html#s5" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Memory and Knowledge</b></a><i> for ways to change the room description in response to the player character's knowledge at any given stage of play</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s3" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s3" class="standardlink">Back to §6.3. Modifying Existing Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s5" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s5" class="standardlink">Onward to §6.5. Examining</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e411" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e411" class="standardlink">Example 3: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Verbosity 1</b>&#160;&#160;&#160; Making rooms give brief room descriptions when revisited.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e412" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e412" class="standardlink">Example 395: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Verbosity 2</b>&#160;&#160;&#160; Making rooms give full descriptions each time we enter, even if we have visited before, and disallowing player use of BRIEF and SUPERBRIEF.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s5"></a>§6.5. Examining</p>
<p>By default, examining an object shows its description, and - for devices - tells us whether the object is switched on or switched off.</p>
<p>This kind of additional information is not always what we want, so if we have a device whose on/off status we want to conceal, we may write</p>
<!-- START CODE "c11416" -->
<a id="c11416"></a><blockquote class="code"><p class="quoted">
The examine described devices rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>On the other hand, there are times when we may want to add a similar line or two to the descriptions of other kinds of objects. <span class="boldface">Crusoe</span> allows us to append an &quot;It is charred.&quot; sentence to the end of descriptions of things we have burned in the fire. Since it works by introducing a &quot;printing the description&quot; activity, Crusoe is also a good example to start from if we want to introduce more complex, flexible descriptions of items throughout our story.</p>
<p><span class="boldface">Odin</span> rewrites the &quot;You see nothing special...&quot; line with other text of our own, for items that otherwise do not have a description.</p>
<p>Finally, we may want to look at multiple things at once. <span class="boldface">The Left Hand of Autumn</span> demonstrates how we might provide a different response for EXAMINE PAINTINGS than for examining each individually; <span class="boldface">Beekeeper's Apprentice</span> provides a SEARCH command that will show the descriptions of all the scenery in the current location.</p>
<p class="crossreference"><a href="RB_6.html#s15" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Actions on Multiple Objects</b></a><i> for an alternative EXAMINE ALL command</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s4" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s4" class="standardlink">Back to §6.4. Looking</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s6" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s6" class="standardlink">Onward to §6.6. Looking Under and Hiding</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e272" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e272" class="standardlink">Example 44: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Odin</b>&#160;&#160;&#160; Replacing "You see nothing special..." with a different default message for looking at something nondescript.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e341" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e341" class="standardlink">Example 68: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Beekeeper's Apprentice</b>&#160;&#160;&#160; Making the SEARCH command examine all the scenery in the current location.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e222" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e222" class="standardlink">Example 295: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Left Hand of Autumn</b>&#160;&#160;&#160; The possibility of using a [things] token opens up some interesting complications, because we may want actions on multiple items to be reported differently from actions on just one. Here we look at how to make a multiple examination command that describes groups in special ways.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e99" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e99" class="standardlink">Example 337: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Crusoe</b>&#160;&#160;&#160; Adding a "printing the description of something" activity.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s6"></a>§6.6. Looking Under and Hiding</p>
<p>Finding hidden objects is a classic puzzle in IF. <span class="boldface">Beachfront</span> provides the most basic example, an object that becomes visible only when we have searched the papers on a cluttered desk. <span class="boldface">Beneath the Surface</span> takes this further, giving all large furnishings the ability to conceal items, and allowing the player to put things underneath other things, as well as find them. <span class="boldface">Flashlight</span> adds an extra twist to the puzzle by requiring that the player have a flashlight to shine under a bulky object in order to find what lies underneath.</p>
<p>Looking inside an object is generally handled by the searching action, and we could extend that to allow the player to search multiple or complex objects. <span class="boldface">Matreshka</span> turns the puzzle on its head by allowing the player to search a whole room systematically with only a single command.</p>
<p class="crossreference"><a href="RB_8.html#s5" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Kitchen and Bathroom</b></a><i> for the related case of needing to look in a mirror</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s5" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s5" class="standardlink">Back to §6.5. Examining</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s7" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s7" class="standardlink">Onward to §6.7. Inventory</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e25" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e25" class="standardlink">Example 98: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Beachfront</b>&#160;&#160;&#160; An item that the player can't interact with until he has found it by searching the scenery.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e242" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e242" class="standardlink">Example 172: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Matreshka</b>&#160;&#160;&#160; A SEARCH [room] action that will open every container the player can see, stopping only when there don't remain any that are closed, unlocked, and openable.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e238" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e238" class="standardlink">Example 218: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Flashlight</b>&#160;&#160;&#160; Visibility set so that looking under objects produces no result unless the player has a light source to shine there (regardless of the light level of the room).</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e400" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e400" class="standardlink">Example 233: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Beneath the Surface</b>&#160;&#160;&#160; An "underlying" relation which adds to the world model the idea of objects hidden under other objects.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s7"></a>§6.7. Inventory</p>
<p>Occasionally we would like to change the way the name of something is printed as part of our inventory, and we can do this with a printing the name rule such as</p>
<!-- START CODE "c11417" -->
<a id="c11417"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of the dead rat while taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;dead rat (at arm's length)&quot;
</p></blockquote>
<!-- END CODE -->
<p>There are also several possibilities for redesigning the inventory list as a whole. <span class="boldface">Persephone</span> shows how to divide an inventory list into two parts, a &quot;You are carrying: &quot; section and a &quot;You are wearing: &quot; section. <span class="boldface">Equipment List</span> goes further, and shows how we might use Inform's specialized listing functions to create a variety of differently formatted inventories.</p>
<p>Sometimes the way Inform by default lists properties such as &quot;(closed)&quot; or &quot;(open but empty)&quot; isn't quite what we want. <span class="boldface">Oyster Wide Shut</span> offers a flexible alternative to the standard behavior, allowing finer control over which properties are listed and how they are described.</p>
<p><span class="boldface">Trying Taking Manhattan</span> replaces the inventory behavior for other characters: instead of silently looking through their possessions (but not describing them to the player), they now describe to the player what they're carrying and wearing.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s6" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s6" class="standardlink">Back to §6.6. Looking Under and Hiding</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s8" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s8" class="standardlink">Onward to §6.8. Taking, Dropping, Inserting and Putting</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e279" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e279" class="standardlink">Example 425: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Oyster Wide Shut</b>&#160;&#160;&#160; Replacing Inform's default printing of properties such as "(closed)", "(open and providing light)", etc., with our own, more flexible variation.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e126" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e126" class="standardlink">Example 177: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Equipment List</b>&#160;&#160;&#160; Overview of all the phrase options associated with listing, and examples of how to change the inventory list into some other standard formats.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e110" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e110" class="standardlink">Example 65: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Persephone</b>&#160;&#160;&#160; Separate the player's inventory listing into two parts, so that it says "you are carrying..." and then (if the player is wearing anything) "You are also wearing...".</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e257" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e257" class="standardlink">Example 204: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Trying Taking Manhattan</b>&#160;&#160;&#160; Replacing the inventory reporting rule with another which does something slightly different.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s8"></a>§6.8. Taking, Dropping, Inserting and Putting</p>
<p>We may want to change the default refusal message when the player tries to pick up scenery: <span class="boldface">Replanting</span> demonstrates this case simply.</p>
<p><span class="boldface">Removal</span> modifies responses to successful TAKE commands, with the effect that when the player picks up an item, he gets a response such as &quot;You take the book from the shelf.&quot;</p>
<p><span class="boldface">Croft</span> modifies the DROP command, so that objects dropped on specific surfaces get reported in a special way. <span class="boldface">Celadon</span> allows the player to drop even objects he is carrying indirectly, for instance on a tray or in a sack.</p>
<p><span class="boldface">Morning After</span> introduces a simple rule that changes the behavior of the whole story: whenever the player takes an item he hasn't already looked at, he automatically examines it. This picks up the pace of exploration passages where the player is likely to be collecting a large number of objects.</p>
<p>By default, when the player tries to put or insert an item that he isn't holding, Inform prints a refusal message; <span class="boldface">Democratic Process</span> and <span class="boldface">Sand</span> offer ways instead to have the player first pick up the relevant items. (The former applies to single items the player is trying to place; the latter expands coverage to work even if the player uses a command affecting multiple objects.)</p>
<p>Taking also happens as a result of other commands. Such takes can be made unnecessary by turning off the &quot;carrying requirements rule&quot; under particular circumstances, or presented differently using the implicitly taking activity.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s7" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s7" class="standardlink">Back to §6.7. Inventory</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s9" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s9" class="standardlink">Onward to §6.9. Going, Pushing Things in Directions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e271" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e271" class="standardlink">Example 16: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Replanting</b>&#160;&#160;&#160; Changing the response when the player tries to take something that is scenery.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e128" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e128" class="standardlink">Example 90: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Morning After</b>&#160;&#160;&#160; When the player picks something up which he hasn't already examined, the object is described.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e137" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e137" class="standardlink">Example 198: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Removal</b>&#160;&#160;&#160; TAKE expanded to give responses such as "You take the book from the shelf." or "You pick up the toy from the ground."</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e70" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e70" class="standardlink">Example 224: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Celadon</b>&#160;&#160;&#160; Using the enclosure relation to let the player drop things which he only indirectly carries.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e307" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e307" class="standardlink">Example 86: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Democratic Process</b>&#160;&#160;&#160; Make PUT and INSERT commands automatically take objects if the player is not holding them.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e98" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e98" class="standardlink">Example 202: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Croft</b>&#160;&#160;&#160; Adding special reporting and handling for objects dropped when the player is on a supporter, and special entering rules for moving from one supporter to another.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e228" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e228" class="standardlink">Example 379: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Lollipop Guild</b>&#160;&#160;&#160; Overriding the rules to allow the player to show something to another character without first taking it.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e308" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e308" class="standardlink">Example 87: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Sand</b>&#160;&#160;&#160; Extend PUT and INSERT handling to cases where multiple objects are intended at once.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s9"></a>§6.9. Going, Pushing Things in Directions</p>
<p>Going is the most complex of actions after looking (or perhaps including looking): the success of every movement depends on the direction the player goes; the room he starts from; the room he intends to reach; whether there are any doors intervening (and, if so, whether these are closed or locked); whether he is traveling by vehicle; and whether he is pushing anything in front of him. When he gets there, the description he sees is itself generated by a looking command.</p>
<p>Pushing something in a direction is really a sort of going. The command &gt;PUSH WHEELBARROW WEST first checks certain qualifying rules: by default, only things defined as pushable between rooms may be pushed, and they may be pushed only in horizontal directions (not UP or DOWN) -- though these rules can be overridden, as we see in <span class="boldface">Zorb</span>. If the player's pushing attempt passes these criteria, the action is translated automatically into a going action, with all the usual checks about whether that direction leads anywhere, whether a door is in the way, and so on. The converted action afterward can be caught with such rules as</p>
<!-- START CODE "c11418" -->
<a id="c11418"></a><blockquote class="code"><p class="quoted">
Instead of going to the Alpine Meadow with the wheelbarrow:
<br />&#160;&#160;&#160;&#160;say &quot;You don't want to crush the delicate blooms.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11419" -->
<a id="c11419"></a><blockquote class="code"><p class="quoted">
Instead of going north with the handcart:
<br />&#160;&#160;&#160;&#160;say &quot;The headwind is so stiff that you are unable to make much northerly progress at all while encumbered by the handcart.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Since the two actions are internally being handled as one, both are discussed here.</p>
<p>It is very common for players to make a mistake and type the wrong direction command, or even to misunderstand the room description and not recognize all the possible exits. <span class="boldface">Bumping into Walls</span> helpfully adds a facility so that when the player tries to go in the wrong direction, the story lists the correct possibilities, as in</p>
<!-- START CODE "c11420" -->
<a id="c11420"></a><blockquote class="code"><p class="quoted">
From here, the viable exits are to the south, the east and the west.
</p></blockquote>
<!-- END CODE -->
<p>Assuming that travel succeeds, another useful technique is to provide some sense of the journey between locations, especially if they are remote from one another or the player has to do something unusual to get from one to the other. <span class="boldface">Up and Up</span> adds a short description of travel when we approach a new room, before the room description is printed; <span class="boldface">Veronica</span>, conversely, adds a comment when the player leaves a region of the map. <span class="boldface">The Second Oldest Problem</span> intervenes and kills a player who tries to travel from one dark room to another. <span class="boldface">Mattress King</span> embellishes the description that automatically results from PUSH MATTRESS WEST, adding a line that describes the player pushing the object before describing the new room approached.</p>
<p>We may also want to add a brief comment when we arrive in a new room, after the room description is printed. One trivial way to do this is to append the line to the room's main description, conditionally, like this:</p>
<!-- START CODE "c11421" -->
<a id="c11421"></a><blockquote class="code"><p class="quoted">
The Hammock Emporium is a room. &quot;This is Cousin Ed's shop, the big dream he left accounting to pursue. You can't help gawking at the Luxury Leather Space Hammock, made of genuine red buffalo skins[if unvisited]. [paragraph break]So this is why Grampa makes all those 'lying down on the job' jokes every Thanksgiving[end if].&quot;.
</p></blockquote>
<!-- END CODE -->
<p>But often we want our first-glance comment to come after some items in the room are described; and for this effect, we would use the &quot;first look rule&quot; defined in <span class="boldface">Saint Eligius</span>.</p>
<p>If these methods are not enough, the looking action has an action-specific variable called &quot;the room-describing action&quot;, which records whether this particular instance of looking comes about because the player typed LOOK or because the player traveled to a new location. We can consult this variable if we want to make looking work  differently after going, as for instance here:</p>
<!-- START CODE "c11422" -->
<a id="c11422"></a><blockquote class="code"><p class="quoted">
Check looking when the room-describing action is the going action:
<br />&#160;&#160;&#160;&#160;say &quot;You are temporarily too blinded to see.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Another category of examples treat how we handle the movement commands themselves. The eight compass directions, with UP and DOWN, IN and OUT, are used as standard in most interactive fiction, but they are not the only possible way of navigating, and strike many newcomers to the genre as counter-intuitive, since when strolling around in real life most of us rarely think about our travel in terms of compass orientation. <span class="boldface">Misadventure</span> allows the player to GO TO a named room, instead, and calculates the best route to reach the destination; <span class="boldface">Safari Guide</span> builds on this by letting the player make the whole trip in a single move, automatically opening any doors that stand in his way en route.</p>
<p>In the same spirit of interpreting the player's intentions sensibly, <span class="boldface">Provenance Unknown</span> modifies the pushing command so that if the player pushes the top object in a stack of objects towards a direction, Inform attempts to move the bottom item instead. This is convenient if, for instance, we have a heavy television on a movable cart and want PUSH TELEVISION WEST to work just as well as PUSH CART WEST.</p>
<p>We also sometimes want to respond sensibly to terse movement commands or ones that rely on some knowledge of where the player has already been. <span class="boldface">Polarity</span> provides a GO BACK command, allowing the player to retreat in the direction from which he came, while <span class="boldface">Minimal Movement</span> understands LEAVE, GO, and so on as OUT, in the absence of other information. <span class="boldface">Owen's Law</span> takes this further, calculating from the best routes on a map how to make OUT mean &quot;move towards the exit of this indoor room&quot;, and IN mean &quot;proceed further into the interior&quot;. <span class="boldface">Wonderland</span> assigns altitudes to all rooms and works out the local best meaning of UP and DOWN accordingly.</p>
<p class="crossreference"><a href="RB_3.html#s2" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Map</b></a><i> for how to create other kinds of new direction</i></p><p class="crossreference"><a href="RB_2.html#s2" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Varying What Is Read</b></a><i> for further divisions of the standard compass, such as north-northwest</i></p><p class="crossreference"><a href="RB_8.html#s2" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Ships, Trains and Elevators</b></a><i> for ship-board directions</i></p><p class="crossreference"><a href="RB_8.html#s1" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Bicycles, Cars and Boats</b></a><i> for common vehicles in which to travel the map</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s8" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s8" class="standardlink">Back to §6.8. Taking, Dropping, Inserting and Putting</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s10" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s10" class="standardlink">Onward to §6.10. Entering and Exiting, Sitting and Standing</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e320" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e320" class="standardlink">Example 100: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Veronica</b>&#160;&#160;&#160; An effect that occurs only when the player leaves a region entirely.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e243" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e243" class="standardlink">Example 105: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Mattress King</b>&#160;&#160;&#160; Adding extra phrasing to the action to PUSH something in a direction.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e342" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e342" class="standardlink">Example 200: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Second Oldest Problem</b>&#160;&#160;&#160; Adapting the going action so that something special can happen when going from a dark room to another dark room.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e89" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e89" class="standardlink">Example 306: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Misadventure</b>&#160;&#160;&#160; A going by name command which does respect movement rules, and accepts names of rooms as commands.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e406" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e406" class="standardlink">Example 372: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Minimal Movement</b>&#160;&#160;&#160; Supplying a default direction for "go", so that "leave", "go", etc., are always interpreted as "out".</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e337" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e337" class="standardlink">Example 393: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Saint Eligius</b>&#160;&#160;&#160; Adding a first look rule that comments on locations when we visit them for the first time, inserting text after objects are listed but before any "every turn" rules might occur.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e392" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e392" class="standardlink">Example 6: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Up and Up</b>&#160;&#160;&#160; Adding a short message as the player approaches a room, before the room description itself appears.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e314" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e314" class="standardlink">Example 256: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Wonderland</b>&#160;&#160;&#160; Hiking Mount Rainier, with attention to which locations are higher and which lower than the present location.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e229" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e229" class="standardlink">Example 307: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Safari Guide</b>&#160;&#160;&#160; The same functionality, but making the player continue to move until he reaches his destination or a barrier, handling all openable doors on the way.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e46" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e46" class="standardlink">Example 102: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Bumping into Walls</b>&#160;&#160;&#160; Offering the player a list of valid directions if he tries to go in a direction that leads nowhere.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e155" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e155" class="standardlink">Example 103: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Polarity</b>&#160;&#160;&#160; A "go back" command that keeps track of the direction from which the player came, and sends him back.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e304" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e304" class="standardlink">Example 107: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Provenance Unknown</b>&#160;&#160;&#160; Allowing something like PUSH TELEVISION EAST to push the cart on which the television rests.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e452" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e452" class="standardlink">Example 108: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Zorb</b>&#160;&#160;&#160; Replacing the message the player receives when attempting to push something that isn't pushable, and also to remove the restriction that objects cannot be pushed up or down.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e278" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e278" class="standardlink">Example 179: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Owen's Law</b>&#160;&#160;&#160; OUT always means "move to an outdoors room, or else to a room with more exits than this one has"; IN always means the opposite.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s10"></a>§6.10. Entering and Exiting, Sitting and Standing</p>
<p>Under ordinary circumstances, Inform does not keep track of the player's posture, nor of his exact location in a room. <span class="boldface">Lies</span> implements a room in which the player can lie in different positions on the floor, getting different views as a result.</p>
<p>Our other examples are all modifications of the way Inform handles player movement to make better default guesses at what he wants to do: <span class="boldface">Anchorite</span> adds a GET DOWN and DOWN command that work when the player is on a supporter, to accompany GET UP, GET OFF, and GET OUT (already understood). <span class="boldface">Get Axe</span> makes the player get out of a portable container before attempting to lift it - a consideration that comes up relatively rarely, but that might pertain to inflatable rafts, beanbag chairs, and other lightweight but capacious pieces of furniture.</p>
<p class="crossreference"><a href="RB_3.html#s3" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Position Within Rooms</b></a><i> for a box the player can push around the room and stand on in different locations</i></p><p class="crossreference"><a href="RB_5.html#s1" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>The Human Body</b></a><i> for letting the player sit, stand, or lie down systematically on furniture or on the floor</i></p><p class="crossreference"><a href="RB_8.html#s4" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Furniture</b></a><i> for various objects on which the player can sit or stand</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s9" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s9" class="standardlink">Back to §6.9. Going, Pushing Things in Directions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s11" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s11" class="standardlink">Onward to §6.11. Waiting, Sleeping</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e373" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e373" class="standardlink">Example 206: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Get Axe</b>&#160;&#160;&#160; Changing the check rules to try automatically leaving a container before attempting to take it. (And arranging things so that other people will do likewise.)</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e170" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e170" class="standardlink">Example 290: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Anchorite</b>&#160;&#160;&#160; By default, Inform understands GET OFF, GET UP, or GET OUT when the player is sitting or standing on an enterable object. We might also want to add GET DOWN and DOWN as exit commands, though.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e225" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e225" class="standardlink">Example 310: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Lies</b>&#160;&#160;&#160; Commands to allow the player to lie down in three different ways.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s11"></a>§6.11. Waiting, Sleeping</p>
<p>The standard WAIT command makes time pass at the same rate that it would anyway - one minute per turn. In a story where events happen at specific times of day, though, we might want to give the player more control. <span class="boldface">Nine AM Appointment</span> shows how to give the player a WAIT 10 MINUTES command, while <span class="boldface">Delayed Gratification</span> lets him WAIT UNTIL a specific time of day.</p>
<p>Ordinarily, Inform also refuses to allow the player to SLEEP and WAKE UP: the commands exist, but have no effect. <span class="boldface">Change of Basis</span> lets the player put himself into a sleep state in which he cannot do anything. A somewhat more interesting expansion on this idea would be to let the player sleep and have dreams; there are no examples specifically of dream states, but we might consult the examples on scenes about how to disrupt one environment and move the player to another, entirely new one.</p>
<p class="crossreference"><a href="RB_4.html#s4" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Scene Changes</b></a><i> for ways to move the player to a new environment such as a dream state</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s10" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s10" class="standardlink">Back to §6.10. Entering and Exiting, Sitting and Standing</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s12" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s12" class="standardlink">Onward to §6.12. Other Built-In Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e420" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e420" class="standardlink">Example 388: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Nine AM Appointment</b>&#160;&#160;&#160; A WAIT [number] MINUTES command which advances through an arbitrary number of turns.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e114" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e114" class="standardlink">Example 47: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Change of Basis</b>&#160;&#160;&#160; Implementing sleeping and wakeful states.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e421" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e421" class="standardlink">Example 389: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Delayed Gratification</b>&#160;&#160;&#160; A WAIT UNTIL [time] command which advances until the game clock reaches the correct hour.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s12"></a>§6.12. Other Built-In Actions</p>
<p>Many other actions are themselves very simply implemented and provide only a shell for us to expand on according to the needs of a particular story. Many of these are discussed at more length in sections on various kinds of props and objects; in particular:</p>
<p class="crossreference"><a href="RB_6.html#s3" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Modifying Existing Commands</b></a><i> for ways to override automatic takes or restrictions on what the player must be able to hold or touch</i></p><p class="crossreference"><a href="RB_3.html#s8" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Sounds</b></a><i> for LISTEN</i></p><p class="crossreference"><a href="RB_7.html#s4" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Barter and Exchange</b></a><i> for GIVE and SHOW</i></p><p class="crossreference"><a href="RB_7.html#s5" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Combat and Death</b></a><i> for ATTACK</i></p><p class="crossreference"><a href="RB_7.html#s7" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Saying Simple Things</b></a><i> for ASK, TELL, and ANSWER</i></p><p class="crossreference"><a href="RB_9.html#s1" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Food</b></a><i> for TASTE and EAT</i></p><p class="crossreference"><a href="RB_10.html#s2" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Liquids</b></a><i> for DRINK</i></p><p class="crossreference"><a href="RB_9.html#s3" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Clothing</b></a><i> for WEAR and TAKE OFF</i></p><p class="crossreference"><a href="RB_9.html#s2" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Bags, Bottles, Boxes and Safes</b></a><i> for OPEN, CLOSE, LOCK, and UNLOCK as applied to containers</i></p><p class="crossreference"><a href="RB_3.html#s5" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Doors, Staircases, and Bridges</b></a><i> for OPEN, CLOSE, LOCK, and UNLOCK as applied to doors</i></p><p class="crossreference"><a href="RB_8.html#s4" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Furniture</b></a><i> for things the player can ENTER and GET OUT of</i></p><p class="crossreference"><a href="RB_9.html#s4" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Money</b></a><i> for BUY</i></p><p class="crossreference"><a href="RB_10.html#s8" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Fire</b></a><i> for BURN</i></p><p class="crossreference"><a href="RB_10.html#s4" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Glass and Other Damage-Prone Substances</b></a><i> for CUT</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s11" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s11" class="standardlink">Back to §6.11. Waiting, Sleeping</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s13" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s13" class="standardlink">Onward to §6.13. Magic Words</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s13"></a>§6.13. Magic Words</p>
<p>Many fantasy games incorporate the idea of magic words that can be spoken. In implementing these, we want to be a bit flexible and accept a range of input regardless of whether the player explicitly speaks the command aloud: XYZZY, SAY XYZZY, or perhaps even CAST XYZZY. The inventively named <span class="boldface">Xyzzy</span> demonstrates how we might define such a command.</p>
<p>If we want to go even further and to allow the player also to use quotation marks, as in SAY &quot;XYZZY&quot;, we may want to include Punctuation Removal by Emily Short, which allows for quotation marks to be stripped out of the player's input before it is understood.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s12" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s12" class="standardlink">Back to §6.12. Other Built-In Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s14" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s14" class="standardlink">Onward to §6.14. Remembering, Converting and Combining Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e447" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e447" class="standardlink">Example 287: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>XYZZY</b>&#160;&#160;&#160; Basics of adding a new command reviewed, for the case of the simple magic word XYZZY.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s14"></a>§6.14. Remembering, Converting and Combining Actions</p>
<p>Sometimes we want Inform to apply a player's action to a different target than the one specified: for instance, directing all (or almost all) commands from the doorknob to the door of which it is a part. <span class="boldface">Fine Laid</span> demonstrates how to do this. Along the same lines, <span class="boldface">Lucy</span> shows how to direct a player's conversation action to apply to a new conversation topic.</p>
<p>We can also record a series of actions performed by the player or by another character.</p>
<p><span class="boldface">Cactus Will Outlive Us All</span> demonstrates characters each of whom reacts to a very specific provocation; <span class="boldface">I Didn't Come All The Way From Great Portland Street</span> implements a game show in which the player is not allowed ever to repeat an action he has already performed; and <span class="boldface">Leopard-skin</span> implements a maze which the player can escape only by performing a specific sequence of actions.</p>
<p><span class="boldface">Anteaters</span> provides a peculiar gizmo that can remember actions performed in its presence and force the player to reiterate them.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s13" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s13" class="standardlink">Back to §6.13. Magic Words</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s15" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s15" class="standardlink">Onward to §6.15. Actions on Multiple Objects</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e144" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e144" class="standardlink">Example 88: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Fine Laid</b>&#160;&#160;&#160; Making writing that can be separately examined from the paper on which it appears, but which directs all other actions to the paper.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e232" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e232" class="standardlink">Example 92: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Lucy</b>&#160;&#160;&#160; Redirecting a question about one topic to ask about another.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e59" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e59" class="standardlink">Example 220: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Cactus Will Outlive Us All</b>&#160;&#160;&#160; For every character besides the player, there is an action that will cause that character to wither right up and die.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e224" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e224" class="standardlink">Example 430: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Leopard-skin</b>&#160;&#160;&#160; A maze that the player can escape if he performs an exact sequence of actions.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e177" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e177" class="standardlink">Example 435: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>I Didn't Come All The Way From Great Portland Street</b>&#160;&#160;&#160; In this fiendishly difficult puzzle, which may perhaps owe some inspiration to a certain BBC Radio panel game (1967-), a list is used as a set of actions to help enforce the rule that the player must keep going for ten turns without hesitation, repetition, or deviating from the subject on the card.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e11" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e11" class="standardlink">Example 222: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Anteaters</b>&#160;&#160;&#160; The player carries a gizmo that is able to record actions performed by the player, then force him to repeat them when the gizmo is dropped. This includes storing actions that apply to topics, as in "look up anteater colonies in the guide".</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s15"></a>§6.15. Actions on Multiple Objects</p>
<p>Inform allows a handful of actions - TAKE, DROP, PUT, INSERT - to apply to more than one item at a time, so that the player can move things around easily.</p>
<p>The general principle is that multiple objects are allowed if the actions are likely to be successful but not interesting most of the time, and if they're things that the player could plausibly do all at once. For most actions, the use of ALL would seem weirdly indiscriminate: EAT ALL, say, describes very implausible behavior, and EXAMINE ALL would likely generate a screenful of text at once.</p>
<p>But this is all under our control. To create an action that uses multiples, or to allow the use of multiple objects with an already-existing action, we need to create an understand statement that uses the &quot;[things]&quot; token (note the plural). For instance:</p>
<!-- START CODE "c11423" -->
<a id="c11423"></a><blockquote class="code"><p class="quoted">
Understand &quot;give [things] to [someone]&quot; as giving it to.
</p></blockquote>
<!-- END CODE -->
<p>This would let the existing give action apply to multiple objects, in just the same way that &quot;take&quot; does. <span class="boldface">Shawn's Bad Day</span> demonstrates how we might allow EXAMINE ALL to print descriptions of every visible item.</p>
<p>Alternatively, we could generate a new action:</p>
<!-- START CODE "c11424" -->
<a id="c11424"></a><blockquote class="code"><p class="quoted">
Understand &quot;give [things] to [someone]&quot; as multiply-giving it to. Multiply-giving it to is an action applying to one carried thing and one thing.
</p></blockquote>
<!-- END CODE -->
<p>(In theory the language here should perhaps be &quot;several carried things&quot; -- but Inform is still going to process multiply-giving item by item, unless we redirect it. More about this in a moment.)</p>
<p>When handling an action that uses the &quot;[things]&quot; token, the parser makes a list of every item to which it is going to apply the action: this is called the multiple objects list. The multiple objects list can be the result of a vague request (GET ALL) or a specific one involving identical multiples (GET PENNIES, GET THREE APPLES) or a very specific one involving unique, named nouns (GET GERBIL, APPLE, AND POMEGRANATE).</p>
<p>We can manipulate what Inform includes in &quot;ALL&quot; in sentences like TAKE ALL with the &quot;deciding whether all includes...&quot; activity; for instance</p>
<!-- START CODE "c11425" -->
<a id="c11425"></a><blockquote class="code"><p class="quoted">
Rule for deciding whether all includes scenery: it does not.
</p></blockquote>
<!-- END CODE -->
<p>prevents TAKE ALL from applying to things that can't be moved anyway, avoiding lots of lines like</p>
<!-- START CODE "c11426" -->
<a id="c11426"></a><blockquote class="code"><p class="quoted">
tree: That's hardly portable.
<br />swing set: That's hardly portable.
</p></blockquote>
<!-- END CODE -->
<p>A slightly tedious technical note: the multiple objects list is not strictly a list in the standard Inform sense, because it is used so frequently in parsing that it would be cumbersome to handle it with the more flexible but less efficient structure used for lists. However, if we want to manipulate the multiple objects list as though it were an ordinary list -- that is, sort it, rotate it, truncate it, remove entries from it, etc -- we may do so by creating a list like this:</p>
<!-- START CODE "c11427" -->
<a id="c11427"></a><blockquote class="code"><p class="quoted">
let L be the multiple object list.
</p></blockquote>
<!-- END CODE -->
<p>and later after making L conform to our desires:</p>
<!-- START CODE "c11428" -->
<a id="c11428"></a><blockquote class="code"><p class="quoted">
alter the multiple object list to L.
</p></blockquote>
<!-- END CODE -->
<p>Inform next repeatedly runs the action rulebook for the action generated, using each item from the multiple object list as &quot;noun&quot; in turn (or as &quot;second noun&quot;, if that's where the [things] token appeared in the understand line). Since it is possible to alter the multiple object list before the &quot;generate action rule&quot; portion of the turn sequence consults the rulebooks, we can also affect the order in which the player's matched objects are handled; see <span class="boldface">Formicidae</span>. We should not attempt to change the multiple object list after this point, because this is likely to introduce bugs.</p>
<p>Each time Inform tries the action on a new noun, it prefixes the action-attempt with the name of the item it's currently working on. This is where we get such output as &quot;frog eyeballs:&quot; and &quot;newt toes:&quot; in long lists like</p>
<!-- START CODE "c11429" -->
<a id="c11429"></a><blockquote class="code"><p class="quoted">
frog eyeballs: Taken.
<br />newt toes: Taken.
</p></blockquote>
<!-- END CODE -->
<p>These names are generated by the &quot;announce items from multiple object lists rule&quot; in the action-handling rules; <span class="boldface">Escape from the Seraglio</span> shows how to alter them. In the context of this rule, the thing we are currently printing the name of can be called &quot;the current item from the multiple object list&quot;.</p>
<p>Suppressing names of objects entirely, while occasionally tempting, may have unintended consequences, especially if some of the attempted actions are prevented by check rules that themselves print things. It is safest to suppress the multiple object names in the case where we already know that the action will succeed wherever it is attempted (more often for observational actions like examining than for manipulative actions like taking, or where we mean to completely override default handling).</p>
<p>Given that our hypothetical &quot;multiply-giving&quot; applies to each given object in turn, it might seem to be useless to create &quot;multiply-giving&quot; as an action different from &quot;giving&quot; -- but the convenience is that manipulating the multiple object list makes it possible to group behavior artificially. The trick here is that, on the first pass of the multiply-giving rulebook, we look at the entire multiple object list, perform actions, print output, and set a flag saying that the action has been handled. The flag tells Inform not to do or print anything for any of the subsequent passes through that action rulebook; thus we artificially create a situation where, instead of performing an action on each object in turn, Inform acts once on the entire group. That allows us to assess the cumulative qualities of the group and have the action respond differently than it might when assessing each item individually.</p>
<p><span class="boldface">The Facts Were These</span> demonstrates how we might write an action for GIVE THREE DOLLARS TO MAN or GIVE PIE AND HAT TO MAN where the man would only accept the collective gift when its total proved satisfactory.</p>
<p><span class="boldface">Western Art History 305</span> demonstrates how we might allow EXAMINE, which doesn't normally permit multiple objects, to take them, but to give vaguer responses to a mass examination than an individual one.</p>
<p class="crossreference"><a href="RB_6.html#s5" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Examining</b></a><i> for groups of objects that have a collective description different from their individual descriptions, and for commands that search multiple things at once</i></p><p class="crossreference"><a href="RB_10.html#s3" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Dispensers and Supplies of Small Objects</b></a><i> for ways to let the player pick up a number of identical items from a dispenser or supply</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s14" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s14" class="standardlink">Back to §6.14. Remembering, Converting and Combining Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s16" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s16" class="standardlink">Onward to §6.16. Alternate Default Messages</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e256" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e256" class="standardlink">Example 294: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Shawn's Bad Day</b>&#160;&#160;&#160; Allowing the player to EXAMINE ALL.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e30" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e30" class="standardlink">Example 327: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Best Till Last</b>&#160;&#160;&#160; Reordering multiple objects for dramatic effect.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e162" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e162" class="standardlink">Example 328: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Western Art History 305</b>&#160;&#160;&#160; Allowing EXAMINE to see multiple objects with a single command.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e127" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e127" class="standardlink">Example 411: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Escape from the Seraglio</b>&#160;&#160;&#160; Replacing the usual response to TAKE ALL so that instead of output such as "grapes: Taken. orange: Taken.", Inform produces variable responses in place of "grapes:".</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e156" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e156" class="standardlink">Example 428: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Formicidae</b>&#160;&#160;&#160; Manipulating the order in which items are handled after TAKE ALL.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e135" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e135" class="standardlink">Example 431: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Facts Were These</b>&#160;&#160;&#160; Creating a variant GIVE action that lets the player give multiple objects simultaneously with commands like GIVE ALL TO ATTENDANT or GIVE THREE DOLLARS TO ATTENDANT or GIVE PIE AND HAT TO ATTENDANT. The attendant accepts the gifts only if their total combined value matches some minimum amount.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s16"></a>§6.16. Alternate Default Messages</p>
<p>Often we will want to replace the text produced by Inform by default: this includes quite a wide range of text, much of which either describes the success of a command or explains why the action failed.</p>
<p>Inform provides the Responses system to enable default messages like &quot;You can't go that way&quot; to be changed, and this is capable of making large-scale changes. This is especially useful if we want to give the viewpoint character a distinctive voice and set of mannerisms.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s15" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s15" class="standardlink">Back to §6.15. Actions on Multiple Objects</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s17" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s17" class="standardlink">Onward to §6.17. Clarification and Correction</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s17"></a>§6.17. Clarification and Correction</p>
<p>Some commands and some objects raise special challenges when it comes to working out the player's intention.</p>
<p>Sometimes this can be done with good rules about the assumptions Inform should make. <span class="boldface">Alpaca Farm</span> demonstrates a USE command, always a challenge because USE can mean very different actions with different items.</p>
<p>There are also times when we need to ask the player for more information. <span class="boldface">Apples</span> demonstrates how sensibly to use properties to disambiguate between similar objects, while <span class="boldface">Walls and Noses</span> rephrases the disambiguation question when special objects are involved: examining one of the walls of the room will make the story ask &quot;In which direction?&quot; and EXAMINE NOSE will lead to &quot;Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?&quot;</p>
<p>At other times, the player types something that is wrong in a predictable way: for instance, we might want to remove all the &quot;with...&quot; phrases from commands like</p>
<!-- START CODE "c11430" -->
<a id="c11430"></a><blockquote class="code"><p class="quoted">
HIT DOOR WITH FIST
<br />KICK DRAGON WITH FOOT
<br />LOOK WEST WITH EYES
</p></blockquote>
<!-- END CODE -->
<p>and merely parse the remainder of the command. (That last command may be unlikely, but novice players do quite often type commands that refer unnecessarily to body parts.) <span class="boldface">Cave-troll</span> demonstrates how.</p>
<p><span class="boldface">WXPQ</span> demonstrates how to modify the error message the parser gives in response to a command it doesn't understand; this particular example focuses on the &quot;That noun doesn't make sense in this context&quot; message that arises from using the &quot;[any thing]&quot; or &quot;[any room]&quot; tokens, but the techniques could be adapted to handling other parser errors as well.</p>
<p>For catching typing errors, Cedric Knight's extension Mistype may also be of use: it provides an automatic typo-correction function that the player can turn on or off.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s16" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s16" class="standardlink">Back to §6.16. Alternate Default Messages</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s18" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_6.html#s18" class="standardlink">Onward to §6.18. Alternatives To Standard Parsing</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e7" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e7" class="standardlink">Example 289: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Alpaca Farm</b>&#160;&#160;&#160; A generic USE action which behaves sensibly with a range of different objects.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e13" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e13" class="standardlink">Example 368: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Apples</b>&#160;&#160;&#160; Prompting the player on how to disambiguate otherwise similar objects.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e444" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e444" class="standardlink">Example 380: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>WXPQ</b>&#160;&#160;&#160; Creating a more sensible parser error than "that noun did not make sense in this context".</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e423" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e423" class="standardlink">Example 370: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Walls and Noses</b>&#160;&#160;&#160; Responding to "EXAMINE WALL" with "In which direction?", and to "EXAMINE NOSE" with "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e69" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e69" class="standardlink">Example 424: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Cave-troll</b>&#160;&#160;&#160; Determining that the command the player typed is invalid, editing it, and re-examining it to see whether it now reads correctly.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s18"></a>§6.18. Alternatives To Standard Parsing</p>
<p>Very occasionally, for out-of-the-ordinary games, we want to make major changes to the way that Inform ordinarily understands commands.</p>
<p><span class="boldface">Cloves</span> shows how we might read adverbs in the player's command: adverbs are challenging because they can legitimately appear anywhere in a command structure, so must be found and accounted for before the rest of the command is understood.</p>
<p><span class="boldface">Fragment of a Greek Tragedy</span> goes further, substituting a keyword-recognition parser for the usual structure of commands and objects.</p>
<p>Less drastically, menus of numbered options can temporarily replace or augment standard commands. <span class="boldface">Down in Oodville</span> demonstrates how to add a list of transporter destinations from which the player may choose by numeral.</p>
<p class="crossreference"><a href="RB_5.html#s2" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Traits Determined By the Player</b></a><i> for ways to ask the player a question at the beginning of play</i></p><p class="crossreference"><a href="RB_7.html#s7" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Saying Simple Things</b></a><i> for a way to ask the player a yes-no question any time during play</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of Chapter 6: Commands</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#s17" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="RB_6.html#s17" class="standardlink">Back to §6.17. Clarification and Correction</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_7.html#s1" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_7.html#s1" class="standardlink">Onward to Chapter 7: Other Characters: §7.1. Getting Acquainted</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e111" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e111" class="standardlink">Example 304: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Down in Oodville</b>&#160;&#160;&#160; Offering the player a choice of numbered options at certain times, without otherwise interfering with his ability to give regular commands.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e86" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e86" class="standardlink">Example 373: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Cloves</b>&#160;&#160;&#160; Accepting adverbs anywhere in a command, registering what the player typed but then cutting them out before interpreting the command.</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_6.html#e192" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="RB_6.html#e192" class="standardlink">Example 374: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Fragment of a Greek Tragedy</b>&#160;&#160;&#160; Responding to the player's input based on keywords only, and overriding the original parser entirely.</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading">Examples from Chapter 6: Commands</p><table class="centredtable"><tr><td class="roadsigndirection"><a href="RB_6.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="RB_6.html" class="standardlink">Start of this chapter</a></td></tr>
<tr><td class="roadsigndirection"><a href="RB_7.html" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="RB_7.html" class="standardlink">Chapter 7: Other Characters</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><!-- START EXAMPLE "214: Slogar's Revenge" "e349" -->
<a id="e349"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e349" class="eglink"><b>214</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e349" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Slogar's Revenge</span></b></a><br />Creating an amulet of tumblers that can be used to lock and unlock things even when it is worn, overriding the usual requirement that keys be carried.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e349"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example349">
<p>Under most circumstances, locking and unlocking require the player to be carrying the key he uses to unlock something. This makes sense -- unless the key is on a keychain, or on a chain around his neck, for instance. So here we explore one way to circumstantially override the carrying requirements, while still making sure that the player cannot unlock the door if the unlocking tool is nowhere in sight.</p>
<p>In essence, we are rewriting the carrying requirements rule with a different one of our own devising, and swapping it in only at those moments when it is correct to do so.</p>
<!-- START CODE "c11431_349" -->
<a id="c11431_349"></a><blockquote class="code"><p class="quoted">
&quot;Slogar's Revenge&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11432_349" -->
<a id="c11432_349"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11433_349" -->
<a id="c11433_349"></a><blockquote class="code"><p class="quoted">
The amulet carrying rule substitutes for the carrying requirements rule when locking something with the Amulet of Tumblers.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11434_349" -->
<a id="c11434_349"></a><blockquote class="code"><p class="quoted">
The amulet carrying rule substitutes for the carrying requirements rule when unlocking something with the Amulet of Tumblers.
</p></blockquote>
<!-- END CODE -->
<p>We can now replace the usual behavior of the carrying requirements rule (to check whether the player is carrying something and, if not, to generate an implicit take) with a similar rule of our own; note that &quot;if the player has the second noun&quot; is a more compact way to write &quot;if the player carries the second noun or the player wears the second noun&quot;:</p>
<!-- START CODE "c11435_349" -->
<a id="c11435_349"></a><blockquote class="code"><p class="quoted">
This is the amulet carrying rule:
<br />&#160;&#160;&#160;&#160;if the player has the second noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue the action;
<br />&#160;&#160;&#160;&#160;say &quot;(first picking up the amulet)[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;try silently taking the second noun;
<br />&#160;&#160;&#160;&#160;if the player is not carrying the second noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11436_349" -->
<a id="c11436_349"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11437_349" -->
<a id="c11437_349"></a><blockquote class="code"><p class="quoted">
The Daunting Dungeon is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11438_349" -->
<a id="c11438_349"></a><blockquote class="code"><p class="quoted">
West of the Daunting Dungeon is the Disturbing Door. The Disturbing Door is a door. West of the Disturbing Door is the Fallow Field.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11439_349" -->
<a id="c11439_349"></a><blockquote class="code"><p class="quoted">
The Disturbing Door is closed and locked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11440_349" -->
<a id="c11440_349"></a><blockquote class="code"><p class="quoted">
The player wears the Amulet of Tumblers. The Amulet of Tumblers unlocks the Disturbing Door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11441_349" -->
<a id="c11441_349"></a><blockquote class="code"><p class="quoted">
Test me with &quot;unlock disturbing door with amulet / open door / west / remove amulet / close door / lock disturbing door with amulet / drop amulet / unlock disturbing door with amulet&quot;.
</p></blockquote>
<!-- END CODE -->
<p>For a more systematic handling of the keychain problem (and a number of other refinements to the behavior of doors), see the Locksmith extension included with Inform.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "3: Verbosity 1" "e411" -->
<a id="e411"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e411" class="eglink"><b>3</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e411" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Verbosity 1</span></b></a><br />Making rooms give brief room descriptions when revisited.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_3.html#e411"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example411">
<p>By default, the description of a room is printed every time the player enters a room.</p>
<p>On a device with very limited screen space, however, we might wish to supplant that behavior with &quot;brief&quot; descriptions. In Brief mode, Inform prints room descriptions only when the player enters that room for the first time. Afterwards, the text is skipped, for brevity, though the player can see it again at any time by typing LOOK.</p>
<p>As we saw in the previous chapter, we can set &quot;use options&quot; to control certain aspects of the player's experience. One of the use options is the option to</p>
<!-- START CODE "c11442_411" -->
<a id="c11442_411"></a><blockquote class="code"><p class="quoted">
Use brief room descriptions.
</p></blockquote>
<!-- END CODE -->
<p>which changes the defaults so that the description of a room is printed only the first time the player enters.</p>
<!-- START CODE "c11443_411" -->
<a id="c11443_411"></a><blockquote class="code"><p class="quoted">
&quot;Verbosity&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11444_411" -->
<a id="c11444_411"></a><blockquote class="code"><p class="quoted">
Use brief room descriptions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11445_411" -->
<a id="c11445_411"></a><blockquote class="code"><p class="quoted">
The Wilkie Memorial Research Wing is a room. &quot;The research wing was built onto the science building in 1967, when the college's finances were good but its aesthetic standards at a local minimum. A dull brown corridor recedes both north and south; drab olive doors open onto the laboratories of individual faculty members. The twitchy fluorescent lighting makes the whole thing flicker, as though it might wink out of existence at any moment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11446_411" -->
<a id="c11446_411"></a><blockquote class="code"><p class="quoted">
The Men's Restroom is immediately west of this point.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11447_411" -->
<a id="c11447_411"></a><blockquote class="code"><p class="quoted">
The Men's Restroom is west of the Research Wing. &quot;Well, yes, you really shouldn't be in here. But the nearest women's room is on the other side of the building, and at this hour you have the labs mostly to yourself. All the same, you try not to read any of the things scrawled over the urinals which might have been intended in confidence.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11448_411" -->
<a id="c11448_411"></a><blockquote class="code"><p class="quoted">
Test me with &quot;west / east&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we type &quot;test me&quot; during play, these commands will be carried out automatically, and we can see that when we return to the Research Wing, the description is not given a second time.</p>
<p>Some notes: the player can also turn full-length descriptions on or off with the commands &quot;verbose&quot; and &quot;brief&quot;, or set a minimal-description setting with the command &quot;superbrief&quot;. This power still belongs to the player even if we have set the use option to show brief room descriptions by default.</p>
<p>Moreover, we can ourselves check what the state of the descriptions is, with</p>
<!-- START CODE "c11449_411" -->
<a id="c11449_411"></a><blockquote class="code"><p class="quoted">
if set to sometimes abbreviated room descriptions: ...
<br />if set to unabbreviated room descriptions: ...
<br />if set to abbreviated room descriptions: ...
</p></blockquote>
<!-- END CODE -->
<p>Finally, it is possible to exercise more precise control over what the player sees on his first and subsequent visits to a room; see the next example for details.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "395: Verbosity 2" "e412" -->
<a id="e412"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e412" class="eglink"><b>395</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e412" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Verbosity 2</span></b></a><br />Making rooms give full descriptions each time we enter, even if we have visited before, and disallowing player use of BRIEF and SUPERBRIEF.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_19.html#e412"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example412">
<p>Suppose that we want the player always to see full room descriptions, even if he tries to reset the defaults -- perhaps because there is vital information there which he will miss if he turns off full-length room descriptions.</p>
<p>To do this, we might want to remove the standard behavior of the three actions associated with BRIEF, SUPERBRIEF, and VERBOSE, replacing them with explanatory messages about how the game behaves. We cannot use Instead to override these actions, because Instead rules do not apply to actions out of world. Instead, we will want to remove and replace the carry out rules.</p>
<p>We can do this easily by going to the Actions Index, looking up the detail panel for, say, &quot;preferring abbreviated room descriptions&quot;, and click the &quot;unlist&quot; button to paste in the sentence that will remove this rule from the rulebook.</p>
<p>Let's remove all three of the carry out rules and substitute our own:</p>
<!-- START CODE "c11450_412" -->
<a id="c11450_412"></a><blockquote class="code"><p class="quoted">
&quot;Verbosity 2&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11451_412" -->
<a id="c11451_412"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11452_412" -->
<a id="c11452_412"></a><blockquote class="code"><p class="quoted">
The prefer unabbreviated room descriptions rule is not listed in the carry out preferring unabbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11453_412" -->
<a id="c11453_412"></a><blockquote class="code"><p class="quoted">
The prefer sometimes abbreviated room descriptions rule is not listed in the carry out preferring sometimes abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11454_412" -->
<a id="c11454_412"></a><blockquote class="code"><p class="quoted">
The prefer abbreviated room descriptions rule is not listed in the carry out preferring abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11455_412" -->
<a id="c11455_412"></a><blockquote class="code"><p class="quoted">
Carry out preferring unabbreviated room descriptions:
<br />&#160;&#160;&#160;&#160;say &quot;[story title] always provides full-length descriptions for your reading pleasure.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11456_412" -->
<a id="c11456_412"></a><blockquote class="code"><p class="quoted">
Carry out preferring sometimes abbreviated room descriptions:
<br />&#160;&#160;&#160;&#160;say &quot;For your playing protection, [story title] provides only full-length room descriptions.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11457_412" -->
<a id="c11457_412"></a><blockquote class="code"><p class="quoted">
Carry out preferring abbreviated room descriptions:
<br />&#160;&#160;&#160;&#160;try preferring sometimes abbreviated room descriptions instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11458_412" -->
<a id="c11458_412"></a><blockquote class="code"><p class="quoted">
The standard report preferring abbreviated room descriptions rule is not listed in the report preferring abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11459_412" -->
<a id="c11459_412"></a><blockquote class="code"><p class="quoted">
The standard report preferring unabbreviated room descriptions rule is not listed in the report preferring unabbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11460_412" -->
<a id="c11460_412"></a><blockquote class="code"><p class="quoted">
The standard report preferring sometimes abbreviated room descriptions rule is not listed in the report preferring sometimes abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11461_412" -->
<a id="c11461_412"></a><blockquote class="code"><p class="quoted">
Use full-length room descriptions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11462_412" -->
<a id="c11462_412"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11463_412" -->
<a id="c11463_412"></a><blockquote class="code"><p class="quoted">
The Wilkie Memorial Research Wing is a room. &quot;The research wing was built onto the science building in 1967, when the college's finances were good but its aesthetic standards at a local minimum. A dull brown corridor recedes both north and south; drab olive doors open onto the laboratories of individual faculty members. The twitchy fluorescent lighting makes the whole thing flicker, as though it might wink out of existence at any moment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11464_412" -->
<a id="c11464_412"></a><blockquote class="code"><p class="quoted">
The Men's Restroom is immediately west of this point.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11465_412" -->
<a id="c11465_412"></a><blockquote class="code"><p class="quoted">
The Men's Restroom is west of the Research Wing. &quot;Well, yes, you really shouldn't be in here. But the nearest women's room is on the other side of the building, and at this hour you have the labs mostly to yourself. All the same, you try not to read any of the things scrawled over the urinals which might have been intended in confidence.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11466_412" -->
<a id="c11466_412"></a><blockquote class="code"><p class="quoted">
Test me with &quot;west / east / brief / w / e / superbrief / w / e / verbose&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "44: Odin" "e272" -->
<a id="e272"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e272" class="eglink"><b>44</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e272" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Odin</span></b></a><br />Replacing "You see nothing special..." with a different default message for looking at something nondescript.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_4.html#e272"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example272">
<p>In recent years there has been a strong trend towards providing unique descriptions for all implemented objects. Often this is a good idea, but there are also contexts in which we may want to discourage the player from looking too closely at some things and concentrate his attention on just a few interesting ones.</p>
<p>The trick here is that leaving items completely undescribed leads to rather dull exchanges like this:</p>
<!-- START CODE "c11467_272" -->
<a id="c11467_272"></a><blockquote class="code"><p class="quoted">
&gt;x table
<br />You see nothing special about the table.
</p></blockquote>
<!-- END CODE -->
<p>...which can leave the player with the impression that the author was simply too lazy to describe everything. So it can be a good idea to replace that default message with a different one more appropriate to the game. For instance:</p>
<!-- START CODE "c11468_272" -->
<a id="c11468_272"></a><blockquote class="code"><p class="quoted">
&quot;Odin&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11469_272" -->
<a id="c11469_272"></a><blockquote class="code"><p class="quoted">
The House of a Mortal Farmer is a room. &quot;Having two separate rooms, this house testifies to considerable wealth and success at agriculture.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11470_272" -->
<a id="c11470_272"></a><blockquote class="code"><p class="quoted">
The Bedroom is inside from the House.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11471_272" -->
<a id="c11471_272"></a><blockquote class="code"><p class="quoted">
A chair is a kind of supporter. A chair is always enterable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11472_272" -->
<a id="c11472_272"></a><blockquote class="code"><p class="quoted">
In the House are a table, two chairs, a basket, and a hearth. On the table is a loaf of bread.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11473_272" -->
<a id="c11473_272"></a><blockquote class="code"><p class="quoted">
The description of a thing is usually &quot;You give [the noun] a glance, but it is plainly beneath your attention.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Because the description is attached to a whole kind (&quot;thing&quot;), it is really a blanket instruction about many objects at once. More specific instructions always override less specific ones, so we can easily make exceptions. For instance, the following will work correctly:</p>
<!-- START CODE "c11474_272" -->
<a id="c11474_272"></a><blockquote class="code"><p class="quoted">
The infant is a man in the basket. The description of the infant is &quot;So strong and fat that you wonder whether one of your fellow gods is acquainted with the mistress of the house-- but it's no concern of yours, of course.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11475_272" -->
<a id="c11475_272"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x table / x chair / x infant&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "68: Beekeeper's Apprentice" "e341" -->
<a id="e341"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e341" class="eglink"><b>68</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e341" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Beekeeper's Apprentice</span></b></a><br />Making the SEARCH command examine all the scenery in the current location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_5.html#e341"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example341">
<p>We have to create a suitable action and say what it does, and to repeat what we do through all the scenery items. That needs material from subsequent chapters, but is quite ordinary Inform all the same:</p>
<!-- START CODE "c11476_341" -->
<a id="c11476_341"></a><blockquote class="code"><p class="quoted">
&quot;Beekeeper's Apprentice&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11477_341" -->
<a id="c11477_341"></a><blockquote class="code"><p class="quoted">
Studying the vicinity is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11478_341" -->
<a id="c11478_341"></a><blockquote class="code"><p class="quoted">
Report studying the vicinity:
<br />&#160;&#160;&#160;&#160;if the location does not contain something which is scenery:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;There's little of interest in the [location].&quot; instead;
<br />&#160;&#160;&#160;&#160;repeat with point of interest running through scenery in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[point of interest]: [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try examining the point of interest.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11479_341" -->
<a id="c11479_341"></a><blockquote class="code"><p class="quoted">
Understand &quot;search&quot; as studying the vicinity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11480_341" -->
<a id="c11480_341"></a><blockquote class="code"><p class="quoted">
The Yard is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11481_341" -->
<a id="c11481_341"></a><blockquote class="code"><p class="quoted">
The hive and the honey are scenery things in the Yard. The description of the hive is &quot;The honeycombed hive is all around you, thrumming with life.&quot; The description of the honey is &quot;Wax-sealed honey has been cached in many of the hexagonal nurseries.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11482_341" -->
<a id="c11482_341"></a><blockquote class="code"><p class="quoted">
Test me with &quot;search&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The reason for this example is to show the use of saying &quot;[run paragraph on]&quot;. It means we have output such as:</p>
<!-- START CODE "c11483_341" -->
<a id="c11483_341"></a><blockquote class="code"><p class="quoted">
&gt;search
<br />hive: The honeycombed hive is all around you, thrumming with life.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11484_341" -->
<a id="c11484_341"></a><blockquote class="code"><p class="quoted">
honey: Wax-sealed honey has been cached in many of the hexagonal nurseries.
</p></blockquote>
<!-- END CODE -->
<p>Without the running on, the prompts &quot;hive:&quot; and &quot;honey:&quot; would be separated from the descriptions following them, which would look a little odd.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "295: The Left Hand of Autumn" "e222" -->
<a id="e222"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e222" class="eglink"><b>295</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e222" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Left Hand of Autumn</span></b></a><br />The possibility of using a [things] token opens up some interesting complications, because we may want actions on multiple items to be reported differently from actions on just one. Here we look at how to make a multiple examination command that describes groups in special ways.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e222"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example222">
<p>Suppose that we have a game in which groups of objects can have meaning apart from their individual significance -- perhaps there are spells that can only be cast by collecting just the right items in the same place.</p>
<p>In this case, one of the things the player might like to be able to do is look at several items together and get a special response, different from looking at the items individually.</p>
<p>To make this happen, we need to do several things:</p>
<!-- START CODE "c11485_222" -->
<a id="c11485_222"></a><blockquote class="code"><p class="quoted">
(1) we need to create a version of the EXAMINE command that can apply to multiple objects at once.
<br />(2) we need to correct the way Inform normally deals with multiple-object commands, because we want our group description to print only one time, and we want to avoid stubs such as &quot;pear: ... apple: ...&quot; before or after the group description.
<br />(3) we need to define a way for Inform to identify interesting groups and describe them.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11486_222" -->
<a id="c11486_222"></a><blockquote class="code"><p class="quoted">
&quot;The Left Hand of Autumn&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11487_222" -->
<a id="c11487_222"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11488_222" -->
<a id="c11488_222"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things]&quot; or &quot;look at [things]&quot; as multiply-examining. Multiply-examining is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11489_222" -->
<a id="c11489_222"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things inside] in/on [something]&quot; or &quot;look at [things inside] in/on [something]&quot; as multiply-examining it from. Multiply-examining it from is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11490_222" -->
<a id="c11490_222"></a><blockquote class="code"><p class="quoted">
Group-description-complete is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11491_222" -->
<a id="c11491_222"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining it from:
<br />&#160;&#160;&#160;&#160;try multiply-examining the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11492_222" -->
<a id="c11492_222"></a><blockquote class="code"><p class="quoted">
Check multiply-examining when group-description-complete is true:
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11493_222" -->
<a id="c11493_222"></a><blockquote class="code"><p class="quoted">
Carry out multiply-examining:
<br />&#160;&#160;&#160;&#160;let L be the list of matched things;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 0, try examining the noun instead;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is 1, try examining entry 1 of L instead;
<br />&#160;&#160;&#160;&#160;describe L;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;now group-description-complete is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11494_222" -->
<a id="c11494_222"></a><blockquote class="code"><p class="quoted">
Before reading a command:
<br />&#160;&#160;&#160;&#160;now group-description-complete is false.
</p></blockquote>
<!-- END CODE -->
<p>Now for step 2, overriding Inform's usual output of names of objects:</p>
<!-- START CODE "c11495_222" -->
<a id="c11495_222"></a><blockquote class="code"><p class="quoted">
The silently announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11496_222" -->
<a id="c11496_222"></a><blockquote class="code"><p class="quoted">
This is the silently announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;unless multiply-examining or multiply-examining something from something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11497_222" -->
<a id="c11497_222"></a><blockquote class="code"><p class="quoted">
Definition: a thing is matched if it is listed in the multiple object list.
</p></blockquote>
<!-- END CODE -->
<p>We'll save our &quot;to describe&quot; phrase until Section 2, when we can give the game specific instructions about how to report different lists of objects.</p>
<p>Now, the player might also want to be able to refer to a group of item by some kind of group name, so let's add the option of creating a Table of Collective Names which will interpret these:</p>
<!-- START CODE "c11498_222" -->
<a id="c11498_222"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Collective Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let Y be relevant list entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while N matches the regular expression &quot;[name-text entry]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the regular expression &quot;(.*)[name-text entry](.*)&quot; in N with &quot;\1[Y]\2&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;change the text of the player's command to N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11499_222" -->
<a id="c11499_222"></a><blockquote class="code"><p class="quoted">
Report taking something:
<br />&#160;&#160;&#160;&#160;say &quot;You pick up [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And as a bit of polish, because we'd like SEARCH TABLE to have the same effect as EXAMINE ALL ON TABLE:</p>
<!-- START CODE "c11500_222" -->
<a id="c11500_222"></a><blockquote class="code"><p class="quoted">
Understand &quot;look on [something]&quot; as searching.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11501_222" -->
<a id="c11501_222"></a><blockquote class="code"><p class="quoted">
Instead of searching something which supports at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things supported by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
<br />Instead of searching something which contains at least two things:
<br />&#160;&#160;&#160;&#160;let L be the list of things contained by the noun;
<br />&#160;&#160;&#160;&#160;describe L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11502_222" -->
<a id="c11502_222"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11503_222" -->
<a id="c11503_222"></a><blockquote class="code"><p class="quoted">
Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11504_222" -->
<a id="c11504_222"></a><blockquote class="code"><p class="quoted">
The display table is a supporter in the Chamber. A twig of rowan wood is on the table.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11505_222" -->
<a id="c11505_222"></a><blockquote class="code"><p class="quoted">
The player carries an apple and a pear.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11506_222" -->
<a id="c11506_222"></a><blockquote class="code"><p class="quoted">
A glove is a kind of thing. A glove is always wearable. Understand &quot;glove&quot; as a glove. The player carries a left glove and a right glove. The left glove and the right glove are gloves.
</p></blockquote>
<!-- END CODE -->
<p>Now we define a few actual lists of items:</p>
<!-- START CODE "c11507_222" -->
<a id="c11507_222"></a><blockquote class="code"><p class="quoted">
Fruit list is a list of objects which varies. Fruit list is { apple, pear }.
<br />Glove list is a list of objects which varies. Glove list is { right glove, left glove }.
<br />Arcane list is a list of objects which varies. Arcane list is { left glove, twig, pear }.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11508_222" -->
<a id="c11508_222"></a><blockquote class="code"><p class="quoted">
To describe (L - a list of objects):
<br />&#160;&#160;&#160;&#160;sort L;
<br />&#160;&#160;&#160;&#160;if L is fruit list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Just a couple of fruits.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is glove list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It's a matched pair of fuzzy blue gloves.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if L is arcane list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;To anyone else it might look like a random collection of objects, but these three things -- [L with definite articles] -- constitute a mystic key known as the Left Hand of Autumn. They practically hum with power.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You see [L with indefinite articles].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11509_222" -->
<a id="c11509_222"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;sort fruit list;
<br />&#160;&#160;&#160;&#160;sort glove list;
<br />&#160;&#160;&#160;&#160;sort the arcane list.
</p></blockquote>
<!-- END CODE -->
<p>We sort the lists so that regardless of how we change the rest of the code (and the order in which objects are coded), the resulting list will always be in sorted order and ready to compare with the list of items the player wants to look at. And thanks to the &quot;Reading a command&quot; code we wrote earlier, we can also teach the game to understand the player's references to &quot;the left hand of autumn&quot; as a specific collection of items.</p>
<!-- START CODE "c11510_222" -->
<a id="c11510_222"></a><blockquote class="code"><p class="quoted">
Table of Collective Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">name-text</p></td><td class="quotedtablecell"><p class="quoted">relevant list</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;left hand of autumn&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[arcane list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pair of gloves&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;[glove list]&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11511_222" -->
<a id="c11511_222"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x apple and pear / x left and right / put pear on table / put left glove on table / x all on table / put all on table / examine all on table / get apple, twig, pear / x all on table / search table&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "337: Crusoe" "e99" -->
<a id="e99"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e99" class="eglink"><b>337</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e99" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Crusoe</span></b></a><br />Adding a "printing the description of something" activity.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e99"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example99">
<p>Suppose we want to add rules so that any time we examine a charred object (and most of our objects can be charred), a line about the charring is appended to the end of the object description. We could use &quot;after examining...&quot;, but perhaps we would prefer for the sentence about the charring not to appear in its own paragraph.</p>
<p>This is an ideal occasion for a new activity. We look at the action index for &quot;examining&quot; to identify the rule that causes the old behavior (in this case, the &quot;standard examining rule&quot;); replace this with a new rule that calls our activity; and write our &quot;printing the description&quot; activity in such a way that it uses an object's description without forcing a paragraph return afterward.</p>
<p>Then we will use &quot;after printing the description&quot; to add our line about charring, and make sure that the paragraph return does occur before the prompt.</p>
<p>So:</p>
<!-- START CODE "c11512_99" -->
<a id="c11512_99"></a><blockquote class="code"><p class="quoted">
&quot;Crusoe&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11513_99" -->
<a id="c11513_99"></a><blockquote class="code"><p class="quoted">
Section 1 - Creating our New Activity
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11514_99" -->
<a id="c11514_99"></a><blockquote class="code"><p class="quoted">
The fancy examining rule is listed instead of the standard examining rule in the carry out examining rules.
</p></blockquote>
<!-- END CODE -->
<p>This instruction replaces a normal piece of the examine action, the standard examining rule, with another one of our own devising. (The replacement of the standard examining rule will be explained in more detail in the chapter on rulebooks.)</p>
<!-- START CODE "c11515_99" -->
<a id="c11515_99"></a><blockquote class="code"><p class="quoted">
Printing the description of something is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11516_99" -->
<a id="c11516_99"></a><blockquote class="code"><p class="quoted">
This is the fancy examining rule:
<br />&#160;&#160;&#160;&#160;carry out the printing the description activity with the noun;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>All we have done here is enclose what is usually just a rule inside an activity. This means that we can now write before and after rules for the activity, and also add special instructions like &quot;Rule for printing the name of something while printing the description of something&quot; -- this may not be likely to arise often, but Inform now has the concept of &quot;printing the description of something&quot; as a separate context of action. Next we add the modification that lets us append to the description without a new line:</p>
<!-- START CODE "c11517_99" -->
<a id="c11517_99"></a><blockquote class="code"><p class="quoted">
Rule for printing the description of something (called item):
<br />&#160;&#160;&#160;&#160;if the description of the item is not &quot;&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[description of item] [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You see nothing special about [the item]. [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>&quot;run paragraph on&quot; here will mean that we do not get a paragraph break following the description, even if it ends with a period. We also insert a space, so that our follow-on comments will be properly punctuated.</p>
<!-- START CODE "c11518_99" -->
<a id="c11518_99"></a><blockquote class="code"><p class="quoted">
After printing the description of something charred:
<br />&#160;&#160;&#160;&#160;say &quot;It is charred.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>The instead at the end of this line stops Inform for going on with any other &quot;after printing the description of...&quot; rules.</p>
<p>The standard library also has rules for printing additional text about containers and supporters with visible contents, and devices that are switched on; with this current system, we could add those as &quot;after printing the description&quot; rules as well, building up a complete paragraph if we wanted. But for simplicity we won't exemplify all of that here. The effects would be much the same as with the &quot;charred&quot; line.</p>
<p>Now, because we want to make sure that we always do get a paragraph break after our description, we add this rule last after all the other rules. &quot;Last&quot; and &quot;first&quot; rules are covered in more detail in the chapter on rulebooks.</p>
<!-- START CODE "c11519_99" -->
<a id="c11519_99"></a><blockquote class="code"><p class="quoted">
Last after printing the description of something:
<br />&#160;&#160;&#160;&#160;say paragraph break.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11520_99" -->
<a id="c11520_99"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11521_99" -->
<a id="c11521_99"></a><blockquote class="code"><p class="quoted">
The Desert Isle is a room. &quot;A pale expanse of sand, here and there developing into hillocks of grass, and a small clump of palms. The water is shallow here, and there are other islands within swimming distance -- or even wading distance, perhaps -- but none of them is any larger than your island, so it doesn't seem worth the trouble of visiting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11522_99" -->
<a id="c11522_99"></a><blockquote class="code"><p class="quoted">
A few hundred feet out, the water turns darker blue, the sea floor drops away, and there is nothing to be seen all the way down to the horizon, except a couple of fluffy clouds, and an occasional bird.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11523_99" -->
<a id="c11523_99"></a><blockquote class="code"><p class="quoted">
The remains of your fire smolder in the stone-lined pit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11524_99" -->
<a id="c11524_99"></a><blockquote class="code"><p class="quoted">
A thing can be charred or whole. A thing is usually whole. Instead of burning something: say &quot;You hold [the noun] to the fire until it flares and chars.&quot;; now the noun is charred.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11525_99" -->
<a id="c11525_99"></a><blockquote class="code"><p class="quoted">
The player carries a stick. The description of the stick is &quot;A strip of palm from the woodiest part of the leaf, about a foot and a half long.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11526_99" -->
<a id="c11526_99"></a><blockquote class="code"><p class="quoted">
The player carries a glass bottle and a piece of paper. The description of the paper is &quot;A single blank sheet.&quot; In the glass bottle is a grain of sand. The glass bottle is openable and open. Instead of burning the glass bottle: say &quot;You hold the bottle to the flame, but it grows uncomfortably warm.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11527_99" -->
<a id="c11527_99"></a><blockquote class="code"><p class="quoted">
Instead of burning the grain of sand: say &quot;You drop the grain into the fire pit, where it becomes indistinguishable from all the others.&quot;; now the grain of sand is nowhere. Instead of dropping the grain of sand: now the grain of sand is nowhere; say &quot;You return the grain of sand to its brethren.&quot;
</p></blockquote>
<!-- END CODE -->
<p>The player's description is handled in an unusual way, and this will produce a space paragraph break there where it should not. Instead, therefore, we will add an instead for examining the player (probably a good idea anyway):</p>
<!-- START CODE "c11528_99" -->
<a id="c11528_99"></a><blockquote class="code"><p class="quoted">
Instead of examining the player:
<br />&#160;&#160;&#160;&#160;say &quot;You are sunburned and there is sand in cracks you didn't know existed.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11529_99" -->
<a id="c11529_99"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / x stick / x bottle / x sand / x paper / x me / burn stick / x stick / burn paper / x paper&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The &quot;printing a description&quot; activity may be useful for other games, and can be imported just by lifting section 1.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "98: Beachfront" "e25" -->
<a id="e25"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e25" class="eglink"><b>98</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e25" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Beachfront</span></b></a><br />An item that the player can't interact with until he has found it by searching the scenery.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e25"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example25">
<p>Suppose we have our player, a detective, searching for evidence; we don't want him to be able to use this evidence until he has performed the action that reveals it, but after that it should be visible in the room when he looks.</p>
<p>A simple way to do this is to start the object -- an envelope, in this scenario -- out of play, and only move it into the location when the player looks for it:</p>
<!-- START CODE "c11530_25" -->
<a id="c11530_25"></a><blockquote class="code"><p class="quoted">
&quot;Beachfront&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11531_25" -->
<a id="c11531_25"></a><blockquote class="code"><p class="quoted">
The Stuffy Office is a room. &quot;The windows are closed, making the sultry air even more unbearable. A narrow slice of Caribbean blue is visible between the scuba gear rental shop and the recreated 17th century pirate tavern.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11532_25" -->
<a id="c11532_25"></a><blockquote class="code"><p class="quoted">
The office is cheerfully furnished with wicker chairs and white curtains, but the tropical decorating scheme stopped at the desk, which is heavy oak and absolutely covered with papers.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11533_25" -->
<a id="c11533_25"></a><blockquote class="code"><p class="quoted">
The heavy oak desk is a supporter in the stuffy office. It is scenery. Understand &quot;paperwork&quot; as the desk.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11534_25" -->
<a id="c11534_25"></a><blockquote class="code"><p class="quoted">
The creamy envelope is an openable container. The description is &quot;There is no return address on the outside of the envelope, just the address of the Doctor's office -- but the legs of the capital A are rubbed down in a characteristic way, and the top of every R is open. There's no question that it comes from the same typewriter as the blackmail note.&quot; In the envelope is a letter. The envelope can be found or lost. The envelope is lost.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11535_25" -->
<a id="c11535_25"></a><blockquote class="code"><p class="quoted">
Instead of searching the desk when the envelope is lost:
<br />&#160;&#160;&#160;&#160;now the envelope is found;
<br />&#160;&#160;&#160;&#160;say &quot;You rifle through the piles of bills and notices; invitations to conventions; advertisements for high-end prescription drugs; pink carbon sheets bearing patients['] names and medical identification numbers in spidery, elderly handwriting. Almost at the bottom of the heap, you find what you were looking for: a creamy envelope with the address typed.&quot;;
<br />&#160;&#160;&#160;&#160;move the envelope to the desk.
</p></blockquote>
<!-- END CODE -->
<p>Here we've changed the property of the envelope to keep track of the fact that it has been found, so that if the player tries again, he won't find anything more.</p>
<!-- START CODE "c11536_25" -->
<a id="c11536_25"></a><blockquote class="code"><p class="quoted">
Instead of searching the desk:
<br />&#160;&#160;&#160;&#160;say &quot;Further investigation of the desk reveals nothing else suspicious.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Notice that we have two rules that apply to &quot;searching the desk&quot;, but one of them has a more specific set of parameters (&quot;when the envelope is lost&quot;). This means that Inform will consult that rule first and use it if it applies; it will only carry out our plain vanilla &quot;instead of searching the desk&quot; rule when the more restricted rule is not relevant.</p>
<!-- START CODE "c11537_25" -->
<a id="c11537_25"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x envelope / x desk / search desk / look / get envelope / x envelope&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "172: Matreshka" "e242" -->
<a id="e242"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e242" class="eglink"><b>172</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e242" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Matreshka</span></b></a><br />A SEARCH [room] action that will open every container the player can see, stopping only when there don't remain any that are closed, unlocked, and openable.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_11.html#e242"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example242">
<!-- START CODE "c11538_242" -->
<a id="c11538_242"></a><blockquote class="code"><p class="quoted">
&quot;Matreshka&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11539_242" -->
<a id="c11539_242"></a><blockquote class="code"><p class="quoted">
Ransacking is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11540_242" -->
<a id="c11540_242"></a><blockquote class="code"><p class="quoted">
Check ransacking:
<br />&#160;&#160;&#160;&#160;if the noun is not the location, say &quot;You can hardly search [the noun] from here.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11541_242" -->
<a id="c11541_242"></a><blockquote class="code"><p class="quoted">
Carry out ransacking:
<br />&#160;&#160;&#160;&#160;while the player can see a closed openable unlocked container (called target):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[target]: [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try opening the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11542_242" -->
<a id="c11542_242"></a><blockquote class="code"><p class="quoted">
Report ransacking:
<br />&#160;&#160;&#160;&#160;say &quot;You can see nothing further worth searching.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11543_242" -->
<a id="c11543_242"></a><blockquote class="code"><p class="quoted">
The Russian Gift Shop is a room. In the Russian Gift Shop is a large wooden doll. It is closed and openable. In the large wooden doll is a medium wooden doll. It is closed and openable. In the medium wooden doll is a small wooden doll. It is closed and openable. In the small wooden doll is a tiny solid wooden doll.
</p></blockquote>
<!-- END CODE -->
<p>And now we need to borrow from a later chapter for the command that will make this work:</p>
<!-- START CODE "c11544_242" -->
<a id="c11544_242"></a><blockquote class="code"><p class="quoted">
Understand &quot;search [any visited room]&quot; as ransacking.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11545_242" -->
<a id="c11545_242"></a><blockquote class="code"><p class="quoted">
Test me with &quot;search gift shop&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "218: Flashlight" "e238" -->
<a id="e238"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e238" class="eglink"><b>218</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e238" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Flashlight</span></b></a><br />Visibility set so that looking under objects produces no result unless the player has a light source to shine there (regardless of the light level of the room).</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e238"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example238">
<!-- START CODE "c11546_238" -->
<a id="c11546_238"></a><blockquote class="code"><p class="quoted">
&quot;Flashlight&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11547_238" -->
<a id="c11547_238"></a><blockquote class="code"><p class="quoted">
The Schoolhouse is a room. &quot;Though normally comfortable, the room is dark and menacing during the storm; rain sheets on the windows, and you can barely see the flash of the lighthouse only a few miles away.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11548_238" -->
<a id="c11548_238"></a><blockquote class="code"><p class="quoted">
The cabinet is a fixed in place openable container in the Schoolhouse. The hurricane lantern is a thing in the Schoolhouse. &quot;A hurricane lantern hangs from a peg.&quot; The lantern is lit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11549_238" -->
<a id="c11549_238"></a><blockquote class="code"><p class="quoted">
Visibility rule when looking under something:
<br />&#160;&#160;&#160;&#160;if the player is carrying a lit thing (called lamp):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You shine [the lamp] under [the noun]...&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;there is sufficient light;
<br />&#160;&#160;&#160;&#160;there is insufficient light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11550_238" -->
<a id="c11550_238"></a><blockquote class="code"><p class="quoted">
There is a marble. The marble can be found or lost. The marble is lost.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11551_238" -->
<a id="c11551_238"></a><blockquote class="code"><p class="quoted">
Instead of looking under the cabinet when the marble is lost:
<br />&#160;&#160;&#160;&#160;move the marble to the player;
<br />&#160;&#160;&#160;&#160;now the marble is found;
<br />&#160;&#160;&#160;&#160;say &quot;Billy's lost marble! So that's where it got to!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11552_238" -->
<a id="c11552_238"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look under cabinet / get lantern / look under cabinet&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Because visibility is checked before instead rules, this discovery will (correctly) occur only when the player does have enough light.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "233: Beneath the Surface" "e400" -->
<a id="e400"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e400" class="eglink"><b>233</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e400" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Beneath the Surface</span></b></a><br />An "underlying" relation which adds to the world model the idea of objects hidden under other objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_13.html#e400"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example400">
<p>The standard world model provides for the idea of containers and supporters, but this is not the only way that objects can relate to one another in the real world. Here we try adding the idea of concealment beneath another object:</p>
<!-- START CODE "c11553_400" -->
<a id="c11553_400"></a><blockquote class="code"><p class="quoted">
&quot;Beneath the Surface&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11554_400" -->
<a id="c11554_400"></a><blockquote class="code"><p class="quoted">
Section 1 - In Which our Terms are Defined
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11555_400" -->
<a id="c11555_400"></a><blockquote class="code"><p class="quoted">
Underlying relates various things to one thing. The verb to underlie means the underlying relation. The verb to be under means the underlying relation. The verb to be beneath means the underlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11556_400" -->
<a id="c11556_400"></a><blockquote class="code"><p class="quoted">
Instead of looking under a thing which is underlaid by something (called the lost object):
<br />&#160;&#160;&#160;&#160;say &quot;You find [the list of things which underlie the noun]!&quot;;
<br />&#160;&#160;&#160;&#160;now every thing which underlies the noun is carried by the player;
<br />&#160;&#160;&#160;&#160;now every thing which underlies the noun does not underlie the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11557_400" -->
<a id="c11557_400"></a><blockquote class="code"><p class="quoted">
Hiding it under is an action applying to one carried thing and one thing. Understand &quot;put [something preferably held] under [something]&quot; as hiding it under. Understand &quot;hide [something preferably held] under [something]&quot; as hiding it under. Understand the commands &quot;shove&quot; and &quot;conceal&quot; and &quot;stick&quot; as &quot;hide&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11558_400" -->
<a id="c11558_400"></a><blockquote class="code"><p class="quoted">
Check hiding it under:
<br />&#160;&#160;&#160;&#160;if the second noun is not fixed in place, say &quot;[The second noun] wouldn't be a very effective place of concealment.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11559_400" -->
<a id="c11559_400"></a><blockquote class="code"><p class="quoted">
Carry out hiding it under:
<br />&#160;&#160;&#160;&#160;now the noun is nowhere;
<br />&#160;&#160;&#160;&#160;now the noun underlies the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11560_400" -->
<a id="c11560_400"></a><blockquote class="code"><p class="quoted">
Report hiding it under:
<br />&#160;&#160;&#160;&#160;say &quot;You shove [the noun] out of sight beneath [the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11561_400" -->
<a id="c11561_400"></a><blockquote class="code"><p class="quoted">
Section 2 - In Which They are Put To Use
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11562_400" -->
<a id="c11562_400"></a><blockquote class="code"><p class="quoted">
The Room of Hidden Objects is a room. It contains a sofa, an easy chair, and a rug. The sofa supports a lime-green pillow and an innocent-looking Chinese finger toy. The rug is fixed in place. The chair is a supporter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11563_400" -->
<a id="c11563_400"></a><blockquote class="code"><p class="quoted">
A treasure map underlies the easy chair. A skeleton is beneath the sofa. A blueprint of Atlantis, a lexicon of Linear A, and the key to Jimmy Hoffa's Mausoleum are under the rug.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11564_400" -->
<a id="c11564_400"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look under the sofa / look under the rug / look under the easy chair / hide lexicon under rug&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "425: Oyster Wide Shut" "e279" -->
<a id="e279"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e279" class="eglink"><b>425</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e279" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Oyster Wide Shut</span></b></a><br />Replacing Inform's default printing of properties such as "(closed)", "(open and providing light)", etc., with our own, more flexible variation.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_21.html#e279"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example279">
<p>As we've seen in earlier examples such as &quot;Equipment List&quot;, it is possible to vary the way Inform creates inventory listings in general (to create lists that look more like paragraphs of prose, lists divided between what the player is wearing and what he isn't, and so on). We can also use activities to alter the printing of specific objects' names and contents, as with the &quot;omit contents in listing&quot; feature after printing the name of something.</p>
<p>We may find, however, that we would like a great deal more control over Inform's printing of inventory details, not just as a special effect for a few items, but throughout the game.</p>
<p>We start by turning off Inform's native property writer:</p>
<!-- START CODE "c11565_279" -->
<a id="c11565_279"></a><blockquote class="code"><p class="quoted">
 &quot;Oyster Wide Shut&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11566_279" -->
<a id="c11566_279"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11567_279" -->
<a id="c11567_279"></a><blockquote class="code"><p class="quoted">
The print standard inventory rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11568_279" -->
<a id="c11568_279"></a><blockquote class="code"><p class="quoted">
Carry out taking inventory (this is the new print inventory rule):
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, including contents, with extra indentation.
</p></blockquote>
<!-- END CODE -->
<p>This is very much like the library's standard behavior, but with the exception that &quot;giving inventory information&quot; or even &quot;giving brief inventory information&quot; are omitted. Here's how we supplant it:</p>
<!-- START CODE "c11569_279" -->
<a id="c11569_279"></a><blockquote class="code"><p class="quoted">
After printing the name of something (called target) while taking inventory:
<br />&#160;&#160;&#160;&#160;follow the property-aggregation rules for the target.
</p></blockquote>
<!-- END CODE -->
<p>Now, our property-aggregation rulebook is going to look at a given object and decide on a list of features that should be mentioned in inventory. We'll start by producing something quite similar to Inform's default behavior:</p>
<!-- START CODE "c11570_279" -->
<a id="c11570_279"></a><blockquote class="code"><p class="quoted">
The property-aggregation rules are an object-based rulebook.
<br />The property-aggregation rulebook has a list of text called the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11571_279" -->
<a id="c11571_279"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable open thing (this is the mention open openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;open&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11572_279" -->
<a id="c11572_279"></a><blockquote class="code"><p class="quoted">
A first property-aggregation rule for an openable closed thing (this is the mention closed openables rule):
<br />&#160;&#160;&#160;&#160;add &quot;closed&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11573_279" -->
<a id="c11573_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a closed transparent container which contains nothing (this is the mention empty transparent containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11574_279" -->
<a id="c11574_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for an open container which contains nothing (this is the mention empty open containers rule):
<br />&#160;&#160;&#160;&#160;add &quot;empty&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11575_279" -->
<a id="c11575_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a lit thing (this is the mention lit objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;providing light&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11576_279" -->
<a id="c11576_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a thing worn by the player (this is the mention worn objects rule):
<br />&#160;&#160;&#160;&#160;add &quot;being worn&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11577_279" -->
<a id="c11577_279"></a><blockquote class="code"><p class="quoted">
The last property-aggregation rule (this is the print aggregated properties rule):
<br />&#160;&#160;&#160;&#160;if the number of entries in the tagline is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; ([tagline])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we don't need to write any rules about how to print that list of text: because Inform is printing out a list, it will automatically insert commas, spaces, and the word &quot;and&quot; where appropriate; and it will automatically follow the &quot;use serial comma&quot; option, if we have it set.</p>
<p>Now we're free to meddle. Let's give the player a bunch of possessions that will be listed in interesting ways in inventory:</p>
<!-- START CODE "c11578_279" -->
<a id="c11578_279"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11579_279" -->
<a id="c11579_279"></a><blockquote class="code"><p class="quoted">
The Curved Beach is a room. &quot;White sand stretches away both northeast and northwest, enclosing this attractive little bay. Gentle waves lap at the beach.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11580_279" -->
<a id="c11580_279"></a><blockquote class="code"><p class="quoted">
The player carries a glowing plastic sack. The glowing plastic sack is lit and transparent and openable and open. It contains a rock. It is wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11581_279" -->
<a id="c11581_279"></a><blockquote class="code"><p class="quoted">
The player wears a flashlight lanyard. The flashlight lanyard is a device.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11582_279" -->
<a id="c11582_279"></a><blockquote class="code"><p class="quoted">
Carry out switching on the lanyard: now the noun is lit.
<br />Carry out switching off the lanyard: now the noun is unlit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11583_279" -->
<a id="c11583_279"></a><blockquote class="code"><p class="quoted">
The player carries an oyster. The oyster contains a pearl. The oyster is openable.
</p></blockquote>
<!-- END CODE -->
<p>Now suppose that we don't want the oyster to say &quot;closed&quot; when it's closed. Instead, we'd like it to say &quot;clamped shut&quot;. As this is the only property the oyster will ever have, we can simply override his whole property-aggregation rulebook:</p>
<!-- START CODE "c11584_279" -->
<a id="c11584_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the oyster:
<br />&#160;&#160;&#160;&#160;if the oyster is closed:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (clamped shut)&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>That's fine for the oyster because &quot;clamped shut&quot; is the only property he'll ever have. What if we'd like instead just to revise the way the sack (and only the sack) gets described as providing light?</p>
<!-- START CODE "c11585_279" -->
<a id="c11585_279"></a><blockquote class="code"><p class="quoted">
The sacklight rule is listed after the mention lit objects rule in the property-aggregation rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11586_279" -->
<a id="c11586_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for the plastic sack (this is the sacklight rule):
<br />&#160;&#160;&#160;&#160;if &quot;providing light&quot; is listed in the tagline:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;remove &quot;providing light&quot; from the tagline;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;gently glowing&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<p>Now the flashlight (and any other regular light sources we might add to the game) will be described as &quot;providing light&quot;, but the sack will only be said to be gently glowing -- a bit more appropriate for its rather fainter gleam.</p>
<p>We might also wish to add a systematic feature across the board to include a new property in the inventory list? Let's say the player can enchant his possessions, and enchanted possessions should thereafter be listed accordingly:</p>
<!-- START CODE "c11587_279" -->
<a id="c11587_279"></a><blockquote class="code"><p class="quoted">
A thing can be magical or non-magical. A thing is usually non-magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11588_279" -->
<a id="c11588_279"></a><blockquote class="code"><p class="quoted">
Understand &quot;enchant [something]&quot; as enchanting. Enchanting is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11589_279" -->
<a id="c11589_279"></a><blockquote class="code"><p class="quoted">
Carry out enchanting something:
<br />&#160;&#160;&#160;&#160;now the noun is magical.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11590_279" -->
<a id="c11590_279"></a><blockquote class="code"><p class="quoted">
Report enchanting something:
<br />&#160;&#160;&#160;&#160;say &quot;Ding! You turn [the noun] magical.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11591_279" -->
<a id="c11591_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11592_279" -->
<a id="c11592_279"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / close oyster / i  / turn on flashlight / i / take off flashlight / i / turn off flashlight / i / close sack / i / open sack / i / take all from sack / i / close sack / i  / wear sack / i / enchant sack / i / open sack / put all in sack / i / close sack / i&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Further variations are possible as well: if we used a &quot;before printing the name...&quot; rather than an &quot;after printing the name...&quot; rule, we could automatically generate lines like &quot;an open and empty phosphorescent plastic sack&quot;, removing some of the artificiality of the parentheses.</p>
<p>Or we could add more logic to the rules about which properties are mentioned, so that some features of objects were mentioned in inventory only if the player was wearing the correct detection device, like so:</p>
<!-- START CODE "c11593_279" -->
<a id="c11593_279"></a><blockquote class="code"><p class="quoted">
The player wears enchantment-detecting goggles.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11594_279" -->
<a id="c11594_279"></a><blockquote class="code"><p class="quoted">
A property-aggregation rule for a magical thing:
<br />&#160;&#160;&#160;&#160;if the player is wearing the goggles:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add &quot;enchanted&quot; to the tagline.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "177: Equipment List" "e126" -->
<a id="e126"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e126" class="eglink"><b>177</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e126" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Equipment List</span></b></a><br />Overview of all the phrase options associated with listing, and examples of how to change the inventory list into some other standard formats.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_11.html#e126"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example126">
<p>Most of the phrase options above are relatively self-explanatory; a few are less so. Here is an overview:</p>
<p>&quot;With newlines&quot; tells Inform to put a new line before each listed object. Indented tells it to indent contents of objects, when listing these.</p>
<p>&quot;Giving inventory information&quot; means to append information such as (closed) or (being worn) to objects.</p>
<p>&quot;As a sentence&quot; means to put &quot;and&quot; before the last object and commas between them; this is usually not used in conjunction with newline listing. &quot;As a sentence&quot; obeys whatever conventions about the use of the serial comma we may have established with the &quot;Use serial comma&quot; option.</p>
<p>&quot;Including contents&quot; means to list the contents of open or transparent containers and all supporters, whereas including all contents means to list the contents of all containers, even opaque closed ones.</p>
<p>&quot;Tersely&quot;, perhaps unexpectedly, puts parentheses around objects listed as the contents of other objects.</p>
<p>&quot;Giving brief inventory information&quot; omits most of the inventory tags, such as &quot;(open)&quot; and &quot;(worn)&quot;, but does list &quot;(closed)&quot; for closed containers which might not otherwise be obviously openable.</p>
<p>&quot;Using the definite article&quot; means prefixing objects with &quot;the&quot;, if applicable, rather than &quot;a&quot;.</p>
<p>&quot;Listing marked items only&quot; means including only objects that have already been declared &quot;marked for listing&quot;.</p>
<p>&quot;Prefacing with is-are&quot; means that Inform will write &quot;is&quot; before the list if it contains only one item, and &quot;are&quot; if the list contains more than one.</p>
<p>&quot;Not listing concealed items&quot; means to omit from the list anything which is scenery.</p>
<p>Finally, &quot;with extra indentation&quot; means that the whole list should be indented slightly, in emulation of the default inventory listing.</p>
<p>With this information, we can try rewriting the inventory behavior to emulate the standard or to explore alternate versions:</p>
<!-- START CODE "c11595_126" -->
<a id="c11595_126"></a><blockquote class="code"><p class="quoted">
&quot;Equipment List&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11596_126" -->
<a id="c11596_126"></a><blockquote class="code"><p class="quoted">
The Watery Room is a room. The player carries a snorkel and a waterproof sack. The waterproof sack contains an undersea map, a diving guide, a cup, and 500 Argentine pesos. The cup contains a worm. The player wears a swimsuit and a pair of flippers. The sack is openable and open.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11597_126" -->
<a id="c11597_126"></a><blockquote class="code"><p class="quoted">
Inventory listing style is a kind of value. The inventory listing styles are tall, wide, curt, minimal, divided tall, and divided wide. Current inventory listing style is an inventory listing style that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11598_126" -->
<a id="c11598_126"></a><blockquote class="code"><p class="quoted">
Understand &quot;inventory [inventory listing style]&quot; as requesting styled inventory. Requesting styled inventory is an action applying to an inventory listing style. It is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11599_126" -->
<a id="c11599_126"></a><blockquote class="code"><p class="quoted">
Carry out requesting styled inventory:
<br />&#160;&#160;&#160;&#160;now current inventory listing style is the inventory listing style understood.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11600_126" -->
<a id="c11600_126"></a><blockquote class="code"><p class="quoted">
Report requesting styled inventory:
<br />&#160;&#160;&#160;&#160;say &quot;Inventory listing is now set to [current inventory listing style].&quot;
</p></blockquote>
<!-- END CODE -->
<p>We begin by emulating the standard inventory listing style:</p>
<!-- START CODE "c11601_126" -->
<a id="c11601_126"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is tall:
<br />&#160;&#160;&#160;&#160;if the number of things enclosed by the player is 0, say &quot;You are empty-handed.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, giving inventory information, including contents, with extra indentation.
</p></blockquote>
<!-- END CODE -->
<p>Here we offer the alternative of listing everything together as a paragraph:</p>
<!-- START CODE "c11602_126" -->
<a id="c11602_126"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is wide:
<br />&#160;&#160;&#160;&#160;if the number of things enclosed by the player is 0, say &quot;You are empty-handed.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying &quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, giving inventory information, as a sentence, including contents;
<br />&#160;&#160;&#160;&#160;say &quot;.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This may be unsatisfactory, however. Items that are inside other items are not set off from those merely carried by the player. One way around this is to use terse listing, giving such descriptions as &quot;a waterproof sack (in which are an undersea map, a diving guide, a cup (in which is a worm) and a 500 Argentine pesos)&quot; as opposed to the more confusing &quot; a waterproof sack (open), inside which are an undersea map, a diving guide, a cup, inside which is a worm and a 500 Argentine pesos&quot;.</p>
<!-- START CODE "c11603_126" -->
<a id="c11603_126"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is curt:
<br />&#160;&#160;&#160;&#160;if the number of things enclosed by the player is 0, say &quot;You are empty-handed.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying &quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, tersely, giving brief inventory information, as a sentence, including contents;
<br />&#160;&#160;&#160;&#160;say &quot;.&quot;
</p></blockquote>
<!-- END CODE -->
<p>If, using the above style, we close the sack, we will still get &quot;(closed)&quot; after the sack's listing. The following minimalist listing style abolishes even that nicety:</p>
<!-- START CODE "c11604_126" -->
<a id="c11604_126"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory when current inventory listing style is minimal:
<br />&#160;&#160;&#160;&#160;if the number of things enclosed by the player is 0, say &quot;You are empty-handed.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying &quot;;
<br />&#160;&#160;&#160;&#160;list the contents of the player, tersely, as a sentence, including contents;
<br />&#160;&#160;&#160;&#160;say &quot;.&quot;
</p></blockquote>
<!-- END CODE -->
<p>If we want to list worn things separately from carried things, we have occasion to put &quot;listing marked items only&quot; to work:</p>
<!-- START CODE "c11605_126" -->
<a id="c11605_126"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory when the current inventory listing style is divided wide:
<br />&#160;&#160;&#160;&#160;if the number of things enclosed by the player is 0, say &quot;You are empty-handed.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;You are wearing &quot;;
<br />&#160;&#160;&#160;&#160;now all things enclosed by the player are unmarked for listing;
<br />&#160;&#160;&#160;&#160;now all things worn by the player are marked for listing;
<br />&#160;&#160;&#160;&#160;if no things worn by the player are marked for listing, say &quot;nothing&quot;;
<br />&#160;&#160;&#160;&#160;otherwise list the contents of the player, as a sentence, listing marked items only;
<br />&#160;&#160;&#160;&#160;say &quot;.[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;You are carrying &quot;;
<br />&#160;&#160;&#160;&#160;now all things carried by the player are marked for listing;
<br />&#160;&#160;&#160;&#160;now all things worn by the player are unmarked for listing;
<br />&#160;&#160;&#160;&#160;if no things carried by the player are marked for listing, say &quot;nothing&quot;;
<br />&#160;&#160;&#160;&#160;otherwise list the contents of the player, as a sentence, tersely, giving brief inventory information, listing marked items only;
<br />&#160;&#160;&#160;&#160;say &quot;.[paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>And similarly for a tall divided inventory:</p>
<!-- START CODE "c11606_126" -->
<a id="c11606_126"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory when the current inventory listing style is divided tall:
<br />&#160;&#160;&#160;&#160;if the number of things enclosed by the player is 0, say &quot;You are empty-handed.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player carries something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all things enclosed by the player are unmarked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all things carried by the player are marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are carrying: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, giving inventory information, including contents, with extra indentation, listing marked items only;
<br />&#160;&#160;&#160;&#160;if the player wears something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all things enclosed by the player are unmarked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all things worn by the player are marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are wearing: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list the contents of the player, with newlines, indented, including contents, with extra indentation, listing marked items only.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11607_126" -->
<a id="c11607_126"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / inventory wide / i / inventory curt / i / close sack / i / open sack / inventory minimal / i / close sack / i / open sack / inventory divided wide / i / inventory divided tall / i / drop all / i / take all / take off swimsuit / take off flippers / i / i divided wide / i / wear swimsuit / drop all / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "65: Persephone" "e110" -->
<a id="e110"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e110" class="eglink"><b>65</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e110" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Persephone</span></b></a><br />Separate the player's inventory listing into two parts, so that it says "you are carrying..." and then (if the player is wearing anything) "You are also wearing...".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_5.html#e110"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example110">
<p>If we wanted, we might replace the rule for taking inventory as follows:</p>
<!-- START CODE "c11608_110" -->
<a id="c11608_110"></a><blockquote class="code"><p class="quoted">
&quot;Persephone&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11609_110" -->
<a id="c11609_110"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][otherwise][We]['re] empty-handed&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;[if the player wears something]. [We]['re] wearing [a list of things worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11610_110" -->
<a id="c11610_110"></a><blockquote class="code"><p class="quoted">
The Fancy Party is a room. The player carries a sword, a strawberry stem, and 20 credits worth of platinum. The player wears a sash indicating lordhood.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11611_110" -->
<a id="c11611_110"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / take off sash / i / drop all / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "204: Trying Taking Manhattan" "e257" -->
<a id="e257"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e257" class="eglink"><b>204</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e257" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Trying Taking Manhattan</span></b></a><br />Replacing the inventory reporting rule with another which does something slightly different.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e257"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example257">
<p>Inform has built-in commands for other people, and sometimes we may want to adjust the way these work without completely disabling and replacing the command. Suppose, for instance, that instead of</p>
<!-- START CODE "c11612_257" -->
<a id="c11612_257"></a><blockquote class="code"><p class="quoted">
Kermit the Frog looks through his possessions.
</p></blockquote>
<!-- END CODE -->
<p>we'd like someone taking inventory to report what he's got, thus:</p>
<!-- START CODE "c11613_257" -->
<a id="c11613_257"></a><blockquote class="code"><p class="quoted">
Kermit the Frog says, &quot;I seem to be carrying a microphone and wearing a hat and a trenchcoat.&quot;
</p></blockquote>
<!-- END CODE -->
<p>To do this, we could replace the built-in report rule with a different one.</p>
<!-- START CODE "c11614_257" -->
<a id="c11614_257"></a><blockquote class="code"><p class="quoted">
&quot;Trying Taking Manhattan&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11615_257" -->
<a id="c11615_257"></a><blockquote class="code"><p class="quoted">
The loud inventory rule is listed instead of the report other people taking inventory rule in the report taking inventory rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11616_257" -->
<a id="c11616_257"></a><blockquote class="code"><p class="quoted">
This is the loud inventory rule:
<br />&#160;&#160;&#160;&#160;unless the player is the person asked:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The person asked] says, 'I seem to be carrying [a list of things carried by the person asked][if the person asked is wearing something] and wearing [a list of things worn by the person asked][end if].'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11617_257" -->
<a id="c11617_257"></a><blockquote class="code"><p class="quoted">
Persuasion rule for asking someone to try doing something: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11618_257" -->
<a id="c11618_257"></a><blockquote class="code"><p class="quoted">
Grand Central Station is a room. &quot;Here you are in New York, New York. Any minute now someone is going to burst into song.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11619_257" -->
<a id="c11619_257"></a><blockquote class="code"><p class="quoted">
Kermit the Frog is a man in Grand Central Station. &quot;Kermit the Frog stands nearby, enjoying being green.&quot; Kermit is wearing a hat and a trenchcoat. He is carrying a microphone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11620_257" -->
<a id="c11620_257"></a><blockquote class="code"><p class="quoted">
Test me with &quot;inventory / kermit, inventory&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "16: Replanting" "e271" -->
<a id="e271"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e271" class="eglink"><b>16</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e271" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Replanting</span></b></a><br />Changing the response when the player tries to take something that is scenery.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_3.html#e271"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example271">
<p>By default, &quot;TAKE OAK&quot; in the example above will produce the response &quot;That's hardly portable.&quot; This is fine under many circumstances, but also a bit generic, so we might want to override it for a specific game.</p>
<!-- START CODE "c11621_271" -->
<a id="c11621_271"></a><blockquote class="code"><p class="quoted">
&quot;Replanting&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11622_271" -->
<a id="c11622_271"></a><blockquote class="code"><p class="quoted">
The Orchard is a room. &quot;Within this quadrille of pear trees, a single gnarled old oak remains as a memory of centuries past.&quot; The gnarled old oak tree is scenery in the Orchard.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11623_271" -->
<a id="c11623_271"></a><blockquote class="code"><p class="quoted">
Instead of taking some scenery: say &quot;You lack the hulk-like strength.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11624_271" -->
<a id="c11624_271"></a><blockquote class="code"><p class="quoted">
Test me with &quot;take oak&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Here we've used an &quot;instead&quot; rule; we will learn more about these in the section on actions. This allows us to define our own results for taking an object.</p>
<p>Note: &quot;scenery&quot; is a property of an object (about which we will hear more later). So when we use it in rules, we can talk about &quot;some scenery&quot;, &quot;something that is scenery&quot;, or even &quot;a scenery thing&quot; -- the last one doesn't sound much like English, but is a more plausible construction with other adjectives.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "90: Morning After" "e128" -->
<a id="e128"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e128" class="eglink"><b>90</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e128" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Morning After</span></b></a><br />When the player picks something up which he hasn't already examined, the object is described.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e128"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example128">
<p>Suppose we want to make the player's life slightly easier by examining everything he picks up, if he hasn't already examined it.</p>
<!-- START CODE "c11625_128" -->
<a id="c11625_128"></a><blockquote class="code"><p class="quoted">
&quot;Morning After&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11626_128" -->
<a id="c11626_128"></a><blockquote class="code"><p class="quoted">
A thing can be examined or unexamined.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11627_128" -->
<a id="c11627_128"></a><blockquote class="code"><p class="quoted">
After taking something unexamined:
<br />&#160;&#160;&#160;&#160;say &quot;Taken. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;try examining the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11628_128" -->
<a id="c11628_128"></a><blockquote class="code"><p class="quoted">
Carry out examining something:
<br />&#160;&#160;&#160;&#160;now the noun is examined.
</p></blockquote>
<!-- END CODE -->
<p>Carry out rules are explained in more detail in the chapter on advanced action handling. For now, it may be enough to know that what we put into this carry out rule for examining will happen any time anything is examined, but that it will not interfere with the rest of the predefined behavior of the action. The player will still see the object description and so on, as usual.</p>
<!-- START CODE "c11629_128" -->
<a id="c11629_128"></a><blockquote class="code"><p class="quoted">
The Red Door Saloon is a room. &quot;This old place is in pretty bad shape since the mine shut down. Now there's not much to see but the pair of deep gouges in the floorboards where they dragged away the Sheriff's corpse with the spurs still on.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11630_128" -->
<a id="c11630_128"></a><blockquote class="code"><p class="quoted">
Jed is a man in the Red Door Saloon. &quot;At 8:30 AM the only person around is old Jed, collecting his hangover cure.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11631_128" -->
<a id="c11631_128"></a><blockquote class="code"><p class="quoted">
The pistol is a thing in the Red Door Saloon. The description of the pistol is &quot;It ain't too accurate, but for two dollars you can't expect much.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11632_128" -->
<a id="c11632_128"></a><blockquote class="code"><p class="quoted">
The hangover cure is a thing in the Red Door Saloon. The description of the hangover cure is &quot;Two yellow egg-yolks unbroken in a red-brown liquid. Yep.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11633_128" -->
<a id="c11633_128"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x pistol / get all&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "198: Removal" "e137" -->
<a id="e137"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e137" class="eglink"><b>198</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e137" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Removal</span></b></a><br />TAKE expanded to give responses such as "You take the book from the shelf." or "You pick up the toy from the ground."</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e137"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example137">
<p>Suppose that we want to change the reporting of &quot;take&quot; so that the player is always told something like &quot;You take the book from the shelf.&quot; or &quot;You pick up the toy from the ground.&quot; In order to generate these reports, we will need to know where the object started, even though by the time we are printing the output, the object will have moved.</p>
<!-- START CODE "c11634_137" -->
<a id="c11634_137"></a><blockquote class="code"><p class="quoted">
&quot;Removal&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11635_137" -->
<a id="c11635_137"></a><blockquote class="code"><p class="quoted">
The Pharmacy is a room. A desk and a trash can are in the Pharmacy. The pill-counter, a prescription, and a computer are on the desk. The computer is fixed in place. The pill-counter contains some Vicodin. The trash can contains an empty box.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11636_137" -->
<a id="c11636_137"></a><blockquote class="code"><p class="quoted">
The taking action has an object called previous locale (matched as &quot;from&quot;).
</p></blockquote>
<!-- END CODE -->
<p>The previous locale could in theory be either a thing or a room, so we make it &quot;an object&quot; -- that is, the most generic possible kind, to which both things and rooms belong. Now we record what the previous locale is at the beginning of each taking action:</p>
<!-- START CODE "c11637_137" -->
<a id="c11637_137"></a><blockquote class="code"><p class="quoted">
Setting action variables for taking:
<br />&#160;&#160;&#160;&#160;now previous locale is the holder of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11638_137" -->
<a id="c11638_137"></a><blockquote class="code"><p class="quoted">
Report taking something from the location:
<br />&#160;&#160;&#160;&#160;say &quot;You pick up [the noun] from the ground.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11639_137" -->
<a id="c11639_137"></a><blockquote class="code"><p class="quoted">
Report taking something:
<br />&#160;&#160;&#160;&#160;say &quot;You take [the noun] from [the previous locale].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11640_137" -->
<a id="c11640_137"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get all&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "224: Celadon" "e70" -->
<a id="e70"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e70" class="eglink"><b>224</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e70" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Celadon</span></b></a><br />Using the enclosure relation to let the player drop things which he only indirectly carries.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_13.html#e70"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example70">
<p>By default, Inform only lets the player drop those things which he is carrying -- that is, those directly in his possession. Things inside satchels or on portable trays have to be taken first.</p>
<p>If we want to change this behavior, we might add a dropping rule that distinguishes between carrying and mere enclosure (introduced back in &quot;The location of something&quot; in the chapter on Things):</p>
<!-- START CODE "c11641_70" -->
<a id="c11641_70"></a><blockquote class="code"><p class="quoted">
 &quot;Celadon&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11642_70" -->
<a id="c11642_70"></a><blockquote class="code"><p class="quoted">
The Tea Room is a room. The player carries a black lacquer tray. The lacquer tray is portable. On the lacquer tray are a celadon teapot and a napkin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11643_70" -->
<a id="c11643_70"></a><blockquote class="code"><p class="quoted">
Before dropping something:
<br />&#160;&#160;&#160;&#160;if the player does not carry the noun and the player encloses the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first taking [the noun] from [the holder of the noun])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player does not carry the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11644_70" -->
<a id="c11644_70"></a><blockquote class="code"><p class="quoted">
Instead of taking the napkin:
<br />&#160;&#160;&#160;&#160;say &quot;It seems to be stuck to the tray, possibly by an underlying wad of gum.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11645_70" -->
<a id="c11645_70"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / drop teapot / i / look / drop teapot / drop napkin / i / drop tray&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "86: Democratic Process" "e307" -->
<a id="e307"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e307" class="eglink"><b>86</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e307" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Democratic Process</span></b></a><br />Make PUT and INSERT commands automatically take objects if the player is not holding them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e307"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example307">
<p>&quot;Stop&quot; and &quot;Continue&quot; are most useful when we need to write rules that will have to stop the action some of the time but at other times let it pass; so for instance:</p>
<!-- START CODE "c11646_307" -->
<a id="c11646_307"></a><blockquote class="code"><p class="quoted">
&quot;Democratic Process&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11647_307" -->
<a id="c11647_307"></a><blockquote class="code"><p class="quoted">
Before inserting something which is not carried by the player into something:
<br />&#160;&#160;&#160;&#160;if the noun is in the second noun, say &quot;Already done.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;(first taking [the noun])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try taking the noun;
<br />&#160;&#160;&#160;&#160;if the player is not holding the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11648_307" -->
<a id="c11648_307"></a><blockquote class="code"><p class="quoted">
Before putting something which is not carried by the player on something:
<br />&#160;&#160;&#160;&#160;if the noun is on the second noun, say &quot;Already done.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;(first taking [the noun])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try taking the noun;
<br />&#160;&#160;&#160;&#160;if the player is not holding the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11649_307" -->
<a id="c11649_307"></a><blockquote class="code"><p class="quoted">
The Assembly Room is a room. &quot;On most days, this room is used for elementary school assemblies; at the moment, it serves as a voting place.&quot; The ballot is on the desk. The desk is in the Assembly Room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11650_307" -->
<a id="c11650_307"></a><blockquote class="code"><p class="quoted">
The machine is a container in the Assembly Room. &quot;On the ballot machine is a sign which reads 'PUT BALLOTS IN ME :)'.&quot; Understand &quot;ballot machine&quot; as the machine.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11651_307" -->
<a id="c11651_307"></a><blockquote class="code"><p class="quoted">
Test me with &quot;put ballot in machine&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "202: Croft" "e98" -->
<a id="e98"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e98" class="eglink"><b>202</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e98" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Croft</span></b></a><br />Adding special reporting and handling for objects dropped when the player is on a supporter, and special entering rules for moving from one supporter to another.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e98"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example98">
<p>Suppose that we have a design in which the player spends lots of time on enterable supporters, and in which we want to report certain actions -- dropping things onto those supporters, or leaping from one to another -- in a new way. We might begin by adding some action variables to help us keep track of the situation:</p>
<!-- START CODE "c11652_98" -->
<a id="c11652_98"></a><blockquote class="code"><p class="quoted">
 &quot;Croft&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11653_98" -->
<a id="c11653_98"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the container dropped into (matched as &quot;into&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11654_98" -->
<a id="c11654_98"></a><blockquote class="code"><p class="quoted">
The dropping action has an object called the supporter dropped onto (matched as &quot;onto&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11655_98" -->
<a id="c11655_98"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for dropping:
<br />&#160;&#160;&#160;&#160;if the actor is in a container (called C), now the container dropped into is C;
<br />&#160;&#160;&#160;&#160;if the actor is on a supporter (called C), now the supporter dropped onto is C.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11656_98" -->
<a id="c11656_98"></a><blockquote class="code"><p class="quoted">
Report dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;You drop [the noun], and [the supporter dropped onto] clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11657_98" -->
<a id="c11657_98"></a><blockquote class="code"><p class="quoted">
Report someone dropping a heavy thing onto a metallic thing:
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] drops [the noun] onto [the supporter dropped onto], which clangs protestingly.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11658_98" -->
<a id="c11658_98"></a><blockquote class="code"><p class="quoted">
A thing can be heavy or light. A thing can be metallic or ordinary. A thing is usually ordinary. A thing is usually light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11659_98" -->
<a id="c11659_98"></a><blockquote class="code"><p class="quoted">
The Ancient Cambodian Temple is a room. &quot;A vast space built for ancient and forgotten rituals. The stone floor crawls with vermin. Well above the floor, and separated by some feet, are twin platforms built into the wall: the one carved of jointed wood, the other of sheets of graven bronze.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11660_98" -->
<a id="c11660_98"></a><blockquote class="code"><p class="quoted">
A platform is a kind of supporter. A platform is always enterable. A platform is usually scenery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11661_98" -->
<a id="c11661_98"></a><blockquote class="code"><p class="quoted">
The bronze platform is a metallic platform in the Temple. Lara is a woman. She is on the bronze platform. She wears safari pants and a tank top. She carries a gun and a map. The gun is heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11662_98" -->
<a id="c11662_98"></a><blockquote class="code"><p class="quoted">
The wood platform is an ordinary platform in the Temple. The player is on the wood platform. The player carries a rope, an Ancient Cambodian/English Phrasebook, a pickaxe, and a precious idol. The idol and the pickaxe are heavy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11663_98" -->
<a id="c11663_98"></a><blockquote class="code"><p class="quoted">
Persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11664_98" -->
<a id="c11664_98"></a><blockquote class="code"><p class="quoted">
The entering action has an object called the place left (matched as &quot;from&quot;).
<br />&#160;&#160;&#160;&#160;Check entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if actor is the player, say &quot;You leap into midair to cross the distance...&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The actor] leaps gracefully across the distance...&quot;;
<br />&#160;&#160;&#160;&#160;move the actor to the holder of the noun, without printing a room description.
</p></blockquote>
<!-- END CODE -->
<p>Because this rule occurs before the &quot;implicitly pass through other barriers rule&quot;, that rule will not occur when we move from platform to platform; we'll use our own custom rule instead.</p>
<!-- START CODE "c11665_98" -->
<a id="c11665_98"></a><blockquote class="code"><p class="quoted">
Rule for setting action variables for entering:
<br />&#160;&#160;&#160;&#160;now the place left is the holder of the actor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11666_98" -->
<a id="c11666_98"></a><blockquote class="code"><p class="quoted">
Report entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;You land in a cat-like crouch on [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11667_98" -->
<a id="c11667_98"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a platform:
<br />&#160;&#160;&#160;&#160;say &quot;Lara lands soundlessly on [the noun][if the noun supports the player] beside you[end if].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11668_98" -->
<a id="c11668_98"></a><blockquote class="code"><p class="quoted">
Report entering a platform from the location:
<br />&#160;&#160;&#160;&#160;say &quot;You jump, catch the edge of [the noun] in your hands, and -- exerting considerable upper-body strength -- pull yourself up onto it.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11669_98" -->
<a id="c11669_98"></a><blockquote class="code"><p class="quoted">
Report Lara entering a platform from a location:
<br />&#160;&#160;&#160;&#160;say &quot;Lara jumps, catches the edge of [the noun], and is standing upright on it, all in less time than it takes to tell.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11670_98" -->
<a id="c11670_98"></a><blockquote class="code"><p class="quoted">
Instead of examining a person who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] carries [list of things carried by the noun] and wears [list of things worn by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11671_98" -->
<a id="c11671_98"></a><blockquote class="code"><p class="quoted">
Instead of climbing a platform, try entering the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11672_98" -->
<a id="c11672_98"></a><blockquote class="code"><p class="quoted">
Test me with &quot;Lara, drop map / lara, drop gun / drop idol / enter bronze platform / drop pickaxe / get off / climb wood&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "379: Lollipop Guild" "e228" -->
<a id="e228"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e228" class="eglink"><b>379</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e228" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lollipop Guild</span></b></a><br />Overriding the rules to allow the player to show something to another character without first taking it.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e228"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example228">
<p>As mentioned in this section, the &quot;implicitly taking&quot; activity does not allow us to skip an implicit take entirely. In order to do this, we need to borrow from the chapter on Rulebooks and tell Inform that one of the rules normally built in to the Standard Rules does nothing in certain circumstances:</p>
<!-- START CODE "c11673_228" -->
<a id="c11673_228"></a><blockquote class="code"><p class="quoted">
  &quot;Lollipop Guild&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11674_228" -->
<a id="c11674_228"></a><blockquote class="code"><p class="quoted">
The carrying requirements rule does nothing when showing something to the guardian.
<br />The can't show what you haven't got rule does nothing when showing something to the guardian.
<br />The block showing rule does nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11675_228" -->
<a id="c11675_228"></a><blockquote class="code"><p class="quoted">
Candyland is a room. &quot;A fizzing, popping wonderland of sugary delights. A path tiled with butterscotch sweets leads to the horizon.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11676_228" -->
<a id="c11676_228"></a><blockquote class="code"><p class="quoted">
The butterscotch path is scenery in Candyland.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11677_228" -->
<a id="c11677_228"></a><blockquote class="code"><p class="quoted">
The player carries a basket. In the basket are a licorice gumdrop and a can of tuna. The gumdrop is edible. The description of the gumdrop is &quot;Covered all over with grains of sugar.&quot; The can of tuna is edible. The description of the can of tuna is &quot;A rare import in this place.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11678_228" -->
<a id="c11678_228"></a><blockquote class="code"><p class="quoted">
The giant lollipop is a fixed in place edible thing in Candyland. &quot;Growing right next to the path, on a trunk of white paper, is a giant lollipop colored green and red and white.&quot; The description of the lollipop is &quot;If you were very blind, like Aunt Myrtle, you might mistake it for a young sapling just planted: the lollipop is just that leafy shade of green, with swirls of white and red that might be branches or flowers.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11679_228" -->
<a id="c11679_228"></a><blockquote class="code"><p class="quoted">
The guardian is a man in Candyland. &quot;Right beside you is a guardian in a mint-colored uniform.&quot; The description of the guardian is &quot;A killjoy wielding a gigantic toothbrush.&quot; The guardian carries a gigantic toothbrush. The description of the toothbrush is &quot;Bristles as long as your hand. Firm bristles, too, not those soft ones. The guardian doesn't care about your tender gums.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11680_228" -->
<a id="c11680_228"></a><blockquote class="code"><p class="quoted">
A thing can be sweet. The butterscotch path, the lollipop, and the gumdrop are sweet.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11681_228" -->
<a id="c11681_228"></a><blockquote class="code"><p class="quoted">
Carry out showing a sweet thing to the guardian:
<br />&#160;&#160;&#160;&#160;say &quot;The guardian shrieks! You don't understand its language, but from its ululations you understand the idea of decay. There may have been a bit in there about a root canal.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11682_228" -->
<a id="c11682_228"></a><blockquote class="code"><p class="quoted">
Carry out showing something to the guardian:
<br />&#160;&#160;&#160;&#160;say &quot;The guardian nods approvingly at the unsweetened [noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11683_228" -->
<a id="c11683_228"></a><blockquote class="code"><p class="quoted">
Report eating a sweet thing in the presence of the guardian:
<br />&#160;&#160;&#160;&#160;say &quot;The guardian looks mournful, but unholsters his tube of paste and begins applying it to the toothbrush, as though to say that he really did not want to have to do this...&quot;;
<br />&#160;&#160;&#160;&#160;end the story saying &quot;Everything goes minty&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11684_228" -->
<a id="c11684_228"></a><blockquote class="code"><p class="quoted">
Report eating something:
<br />&#160;&#160;&#160;&#160;say &quot;You consume [the noun] with gusto.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11685_228" -->
<a id="c11685_228"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x guardian / x toothbrush / show gumdrop to guardian / show path to guardian / show tuna to guardian / look  / eat gumdrop&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that because we only deactivate the carrying requirements rule for showing purposes, the player still takes the gumdrop before eating it.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "87: Sand" "e308" -->
<a id="e308"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e308" class="eglink"><b>87</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e308" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Sand</span></b></a><br />Extend PUT and INSERT handling to cases where multiple objects are intended at once.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e308"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example308">
<p>The above example does not quite work when we want the player to be allowed to take multiple objects at once before putting them somewhere: we also need to add a couple of &quot;understand&quot; rules borrowed from many chapters later. While the reasons may not be immediately clear, we include the demonstration here for the sake of thoroughness:</p>
<!-- START CODE "c11686_308" -->
<a id="c11686_308"></a><blockquote class="code"><p class="quoted">
&quot;Sand&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11687_308" -->
<a id="c11687_308"></a><blockquote class="code"><p class="quoted">
Before inserting something which is not carried by the player into something:
<br />&#160;&#160;&#160;&#160;if the noun is in the second noun, say &quot;Already done.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;(first taking [the noun]) &quot;;
<br />&#160;&#160;&#160;&#160;silently try taking the noun;
<br />&#160;&#160;&#160;&#160;if the player is not holding the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11688_308" -->
<a id="c11688_308"></a><blockquote class="code"><p class="quoted">
Before putting something which is not carried by the player on something:
<br />&#160;&#160;&#160;&#160;if the noun is on the second noun, say &quot;Already done.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;(first taking [the noun])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;silently try taking the noun;
<br />&#160;&#160;&#160;&#160;if the player is not holding the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11689_308" -->
<a id="c11689_308"></a><blockquote class="code"><p class="quoted">
Understand &quot;put [things] in [something]&quot; as inserting it into. Understand &quot;put [things] on [something]&quot; as putting it on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11690_308" -->
<a id="c11690_308"></a><blockquote class="code"><p class="quoted">
The Closet is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11691_308" -->
<a id="c11691_308"></a><blockquote class="code"><p class="quoted">
A lentil is a kind of thing. A black-eyed pea is a kind of thing. The closet contains 3 lentils. The Closet contains 14 black-eyed peas. The round tin is a container in the closet. The round tin contains 17 lentils. The square tin is a container in the Closet. The square tin contains 20 black-eyed peas.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11692_308" -->
<a id="c11692_308"></a><blockquote class="code"><p class="quoted">
Sorting is a scene. Sorting begins when play begins. Sorting ends when all the lentils are in the round tin and all the black-eyed peas are in the square tin. When Sorting ends, end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11693_308" -->
<a id="c11693_308"></a><blockquote class="code"><p class="quoted">
When play begins: say &quot;Thanks to your cruel stepmother, you're not going anywhere until the lentils and peas are sorted.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11694_308" -->
<a id="c11694_308"></a><blockquote class="code"><p class="quoted">
Test me with &quot;put peas in square tin / put lentils in round tin&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "100: Veronica" "e320" -->
<a id="e320"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e320" class="eglink"><b>100</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e320" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Veronica</span></b></a><br />An effect that occurs only when the player leaves a region entirely.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e320"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example320">
<p>Suppose that we want to have something happen when the player leaves a region we've defined. &quot;Instead of going from (the region)...&quot; will not suffice for this, because this rule will be invoked every time the player successfully leaves a room within the region, whether or not he is going to a room that is also in the same region.</p>
<p>Instead we need a rule that is a bit more specific, like this:</p>
<!-- START CODE "c11695_320" -->
<a id="c11695_320"></a><blockquote class="code"><p class="quoted">
&quot;Veronica&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11696_320" -->
<a id="c11696_320"></a><blockquote class="code"><p class="quoted">
Neptune is a region.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11697_320" -->
<a id="c11697_320"></a><blockquote class="code"><p class="quoted">
Tijuana is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11698_320" -->
<a id="c11698_320"></a><blockquote class="code"><p class="quoted">
High School is north of Tijuana. It is in Neptune.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11699_320" -->
<a id="c11699_320"></a><blockquote class="code"><p class="quoted">
Detective Offices is west of High School. It is in Neptune.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11700_320" -->
<a id="c11700_320"></a><blockquote class="code"><p class="quoted">
The player is in High School.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11701_320" -->
<a id="c11701_320"></a><blockquote class="code"><p class="quoted">
Instead of going from Neptune to a room which is not in Neptune:
<br />&#160;&#160;&#160;&#160;say &quot;It's a bad time to leave Neptune.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11702_320" -->
<a id="c11702_320"></a><blockquote class="code"><p class="quoted">
Test me with &quot;s / w / e&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "105: Mattress King" "e243" -->
<a id="e243"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e243" class="eglink"><b>105</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e243" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mattress King</span></b></a><br />Adding extra phrasing to the action to PUSH something in a direction.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e243"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example243">
<p>By default, when the player pushes something a direction, Inform checks to make sure that the object is pushable between rooms. If not, it blocks the action; if so, it carries out a normal going action with the pushed object taken along.</p>
<p>Also by default, this action produces only a description of the new room that we've traveled into. But suppose we would like to print a short message describing the pushing action first:</p>
<!-- START CODE "c11703_243" -->
<a id="c11703_243"></a><blockquote class="code"><p class="quoted">
 &quot;Mattress King&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11704_243" -->
<a id="c11704_243"></a><blockquote class="code"><p class="quoted">
Monica's Bedroom is a room. The Living Room is south of Monica's Bedroom. Rachel's Bedroom is south of the Living Room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11705_243" -->
<a id="c11705_243"></a><blockquote class="code"><p class="quoted">
After going a direction (called way-pushed) with something (called the thing-pushed):
<br />&#160;&#160;&#160;&#160;say &quot;You push [the thing-pushed] [way-pushed] to [the location].&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11706_243" -->
<a id="c11706_243"></a><blockquote class="code"><p class="quoted">
The race car bed is an enterable supporter in Monica's Bedroom. It is pushable between rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11707_243" -->
<a id="c11707_243"></a><blockquote class="code"><p class="quoted">
Test me with &quot;push bed south&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "200: The Second Oldest Problem" "e342" -->
<a id="e342"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e342" class="eglink"><b>200</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e342" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Second Oldest Problem</span></b></a><br />Adapting the going action so that something special can happen when going from a dark room to another dark room.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e342"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example342">
<p>Text in this example is drawn from Will Crowther's original 1976 FORTRAN implementation of ADVENTURE, the founding work of the genre, whose source code was rediscovered by Dennis G. Jerz in 2007. Note the capitals: the program ran on an early computer without lower case lettering. They look a little mimsy now, but picture them glowing green on an old-style cathode ray tube monitor in a darkened room late at night.</p>
<p>The problem alluded to is that the player is forbidden to walk between two dark rooms, so that he must always have light to see by from at least one end of any movement. Writing source text to achieve this is tricky to get right in every case, because the determination of light is hard to do. Here we interleave the necessary rules into the existing &quot;going&quot; action, using a new action variable to record the number of ends which are dark as experienced by the player, which might be 0, 1 or 2:</p>
<!-- START CODE "c11708_342" -->
<a id="c11708_342"></a><blockquote class="code"><p class="quoted">
&quot;THE SECOND OLDEST PROBLEM&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11709_342" -->
<a id="c11709_342"></a><blockquote class="code"><p class="quoted">
The going action has a number called the dark terminus count.
<br />Setting action variables for going:
<br />&#160;&#160;&#160;&#160;now the dark terminus count is 0;
<br />&#160;&#160;&#160;&#160;if in darkness, increment the dark terminus count.
<br />The last carry out going rule:
<br />&#160;&#160;&#160;&#160;if in darkness, increment the dark terminus count;
<br />&#160;&#160;&#160;&#160;if the dark terminus count is 2, end the story saying &quot;YOU FELL INTO A PIT AND BROKE EVERY BONE IN YOUR BODY!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And now three early rooms to try this out.</p>
<!-- START CODE "c11710_342" -->
<a id="c11710_342"></a><blockquote class="code"><p class="quoted">
COBBLE CRAWL is a room. &quot;YOU ARE CRAWLING OVER COBBLES IN A LOW PASSAGE. THERE IS A DIM LIGHT AT THE EAST END OF THE PASSAGE.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11711_342" -->
<a id="c11711_342"></a><blockquote class="code"><p class="quoted">
DEBRIS ROOM is west of COBBLE CRAWL. &quot;YOU ARE IN A DEBRIS ROOM, FILLED WITH STUFF WASHED IN FROM THE SURFACE. A LOW WIDE PASSAGE WITH COBBLES BECOMES PLUGGED WITH MUD AND DEBRIS HERE,BUT AN AWKWARD CANYON LEADS UPWARD AND WEST.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11712_342" -->
<a id="c11712_342"></a><blockquote class="code"><p class="quoted">
AWKWARD CANYON is west of DEBRIS ROOM. &quot;YOU ARE IN AN AWKWARD SLOPING EAST/WEST CANYON.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11713_342" -->
<a id="c11713_342"></a><blockquote class="code"><p class="quoted">
DEBRIS ROOM and AWKWARD CANYON are dark.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11714_342" -->
<a id="c11714_342"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a dark room: say &quot;DARKNESS&quot; instead.
<br />Rule for printing the description of a dark room: say &quot;IT IS NOW PITCH BLACK. IF YOU PROCEED YOU WILL LIKELY FALL INTO A PIT.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11715_342" -->
<a id="c11715_342"></a><blockquote class="code"><p class="quoted">
Test me with &quot;w / e / w / w&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This is only the second oldest problem in the IF literature: the earliest puzzle is unlocking the steel grate which bars entrance to the cave.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "306: Misadventure" "e89" -->
<a id="e89"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e89" class="eglink"><b>306</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e89" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Misadventure</span></b></a><br />A going by name command which does respect movement rules, and accepts names of rooms as commands.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e89"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example89">
<p>The original Adventure allowed the player to type the names of rooms in order to move to them, and it is now not too difficult for us to do the same. Adventure restricted this option to adjacent rooms, but we might want to be a bit more flexible, so we will accept any room:</p>
<!-- START CODE "c11716_89" -->
<a id="c11716_89"></a><blockquote class="code"><p class="quoted">
&quot;Misadventure&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11717_89" -->
<a id="c11717_89"></a><blockquote class="code"><p class="quoted">
Plover Room is a room. &quot;You're in a small chamber lit by an eerie green light. An extremely narrow tunnel exits to the west. A dark corridor leads northeast.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11718_89" -->
<a id="c11718_89"></a><blockquote class="code"><p class="quoted">
The Dark Corridor is northeast of Plover Room. Plover Room is south of the Dark Corridor. The printed name of the Dark Corridor is &quot;Dark Room&quot;. The description of the Dark Corridor is &quot;You're in the dark-room. A corridor leading south is the only exit.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11719_89" -->
<a id="c11719_89"></a><blockquote class="code"><p class="quoted">
The Alcove is west of Plover Room. &quot;You are in an alcove. A small northwest path seems to widen after a short distance. An extremely tight tunnel leads east. It looks like a very tight squeeze. An eerie light can be seen at the other end.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11720_89" -->
<a id="c11720_89"></a><blockquote class="code"><p class="quoted">
Northwest of the Alcove is the Misty Cavern. The description of Misty Cavern is &quot;You are following a wide path around the outer edge of a large cavern. Far below, through a heavy white mist, strange splashing noises can be heard. The mist rises up through a fissure in the ceiling. The path exits to the south and west.&quot; West of Misty Cavern is the Alcove.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11721_89" -->
<a id="c11721_89"></a><blockquote class="code"><p class="quoted">
Understand &quot;[any room]&quot; as going by name. Understand &quot;go to [any room]&quot; as going by name.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11722_89" -->
<a id="c11722_89"></a><blockquote class="code"><p class="quoted">
Going by name is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<p>We should reject movement to the player's current location, or to anywhere he hasn't been and can't see:</p>
<!-- START CODE "c11723_89" -->
<a id="c11723_89"></a><blockquote class="code"><p class="quoted">
Check going by name:
<br />&#160;&#160;&#160;&#160;if the noun is the location, say &quot;You're already in [the location].&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is not adjacent and the noun is unvisited, say &quot;That noun did not make sense in this context.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>The assumption here is that the player does know the names of the rooms adjacent to his current location, even if he hasn't been there yet.</p>
<p>Now for the travel itself. The simplest way to ensure that the usual movement rules will still apply is to convert GO BY NAME into a GO action, and here the best route comes to our aid:</p>
<!-- START CODE "c11724_89" -->
<a id="c11724_89"></a><blockquote class="code"><p class="quoted">
Carry out going by name:
<br />&#160;&#160;&#160;&#160;let aim be the best route from the location to the noun, using doors;
<br />&#160;&#160;&#160;&#160;if aim is not a direction, say &quot;You can't think how to get there from here.&quot; instead;
<br />&#160;&#160;&#160;&#160;say &quot;(heading [aim])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;try going aim;
<br />&#160;&#160;&#160;&#160;if the location is not the noun, say &quot;You'll have to stop here.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This will allow the player to travel toward rooms he has already visited even if they are several moves away.</p>
<p>Finally, so that the player can also use the names of doors as commands:</p>
<!-- START CODE "c11725_89" -->
<a id="c11725_89"></a><blockquote class="code"><p class="quoted">
Understand &quot;[door]&quot; as entering.
</p></blockquote>
<!-- END CODE -->
<p>And in keeping with the original, we might add to our scenario a rule or two about restrictions on movement, just to test that it's all working right:</p>
<!-- START CODE "c11726_89" -->
<a id="c11726_89"></a><blockquote class="code"><p class="quoted">
The player carries a plover egg and a platinum pyramid. The description of the egg is &quot;Plover's eggs, by the way, are quite large.&quot; The printed name of the egg is &quot;emerald the size of a plover's egg&quot;. Understand &quot;emerald&quot; as the egg. The description of the pyramid is &quot;The platinum pyramid is 8 inches on a side!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11727_89" -->
<a id="c11727_89"></a><blockquote class="code"><p class="quoted">
Instead of going to the Plover Room from the Alcove when the player carries something which is not the plover egg:
<br />&#160;&#160;&#160;&#160;say &quot;Something you're carrying won't fit through the tunnel with you. You'd best take inventory and drop something.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11728_89" -->
<a id="c11728_89"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go to misty cavern / go to dark corridor / go to plover room / go to alcove / go to dark corridor / drop pyramid / go to dark corridor / g / go to alcove / g / go to misty cavern&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "372: Minimal Movement" "e406" -->
<a id="e406"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e406" class="eglink"><b>372</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e406" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Minimal Movement</span></b></a><br />Supplying a default direction for "go", so that "leave", "go", etc., are always interpreted as "out".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e406"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example406">
<p>Sometimes it would be nice to respond a little more sensitively to a vague command such as &quot;leave&quot; -- converting it, perhaps, to a &quot;go out&quot; command.</p>
<!-- START CODE "c11729_406" -->
<a id="c11729_406"></a><blockquote class="code"><p class="quoted">
&quot;Minimal Movement&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11730_406" -->
<a id="c11730_406"></a><blockquote class="code"><p class="quoted">
The Doll-like House is a room. The Postage-Stamp-Sized Garden is outside from the House.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11731_406" -->
<a id="c11731_406"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing noun while going:
<br />&#160;&#160;&#160;&#160;now noun is outside.
</p></blockquote>
<!-- END CODE -->
<p>This particular situation is very slightly complicated by the existing rules about vague movement, but fortunately we can easily turn those off.</p>
<!-- START CODE "c11732_406" -->
<a id="c11732_406"></a><blockquote class="code"><p class="quoted">
The block vaguely going rule is not listed in the for supplying a missing noun rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11733_406" -->
<a id="c11733_406"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "393: Saint Eligius" "e337" -->
<a id="e337"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e337" class="eglink"><b>393</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e337" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Saint Eligius</span></b></a><br />Adding a first look rule that comments on locations when we visit them for the first time, inserting text after objects are listed but before any "every turn" rules might occur.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_19.html#e337"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example337">
<p>A not-infrequent desire in IF is to provide a few lines of comment when the player first enters a new room, after the objects are described but before anything else (such as an every turn rule) can fire. The cleanest, most systematic solution is to add a rule to the carry out looking rulebook, so:</p>
<!-- START CODE "c11734_337" -->
<a id="c11734_337"></a><blockquote class="code"><p class="quoted">
&quot;Saint Eligius&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11735_337" -->
<a id="c11735_337"></a><blockquote class="code"><p class="quoted">
The first look rule is listed after the room description paragraphs about objects rule in the carry out looking rules. A room can be commented or uncommented. A room is usually uncommented.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11736_337" -->
<a id="c11736_337"></a><blockquote class="code"><p class="quoted">
This is the first look rule:
<br />&#160;&#160;&#160;&#160;if the location is uncommented, carry out the gawking at activity with the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11737_337" -->
<a id="c11737_337"></a><blockquote class="code"><p class="quoted">
Gawking at something is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11738_337" -->
<a id="c11738_337"></a><blockquote class="code"><p class="quoted">
Rule for gawking at the Diamond Market:
<br />&#160;&#160;&#160;&#160;say &quot;Your throat closes and your eyes begin to sting. You have long disdained pomp and luxury, and railed against the oppression that brings such wealth to some men at the cost of the lives of others; you were not prepared for the magnificence.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11739_337" -->
<a id="c11739_337"></a><blockquote class="code"><p class="quoted">
After gawking at a room (called the target): now the target is commented.
</p></blockquote>
<!-- END CODE -->
<p>And now the scene itself:</p>
<!-- START CODE "c11740_337" -->
<a id="c11740_337"></a><blockquote class="code"><p class="quoted">
The Cobbled Alley is a room. &quot;The Alley has never been made into a proper street: the buildings on either side are simply too important to tear down. For all that, there isn't much sign of the magnificence nearby. The entrance you seek is set below street level, four grimy steps down to a half-basement.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11741_337" -->
<a id="c11741_337"></a><blockquote class="code"><p class="quoted">
After going to Diamond Market:
<br />&#160;&#160;&#160;&#160;say &quot;You descend the steps quickly and step into the small foyer, allowing yourself to be searched for weapons, before going on to...&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11742_337" -->
<a id="c11742_337"></a><blockquote class="code"><p class="quoted">
Diamond Market is down from Cobbled Alley. &quot;The roof is vaulted and painted in allegorical images representing Plenty, the Riches of the Earth, and Saint Eligius, patron of goldsmiths and jewelers.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11743_337" -->
<a id="c11743_337"></a><blockquote class="code"><p class="quoted">
Under their watchful eye, dozens of men in sober black robes sit; and on the tables before them are rubies, emeralds, sapphires from oversea, but most of all diamonds, both raw and cut.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11744_337" -->
<a id="c11744_337"></a><blockquote class="code"><p class="quoted">
The burly guard is a man in Diamond Market. &quot;A burly guard patrols quite close to you, but even he is more sumptuously dressed than the average burly guard, and his buttons shine.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11745_337" -->
<a id="c11745_337"></a><blockquote class="code"><p class="quoted">
Test me with &quot;d / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "6: Up and Up" "e392" -->
<a id="e392"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e392" class="eglink"><b>6</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e392" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Up and Up</span></b></a><br />Adding a short message as the player approaches a room, before the room description itself appears.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_3.html#e392"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example392">
<p>Sometimes when a player moves from one room to another, we want to imply that a considerable amount of time elapses, or that something interesting occurs on the way. In that case, we might want to print more than just the room description itself. Here is how we might define a couple of rooms that are far apart:</p>
<!-- START CODE "c11746_392" -->
<a id="c11746_392"></a><blockquote class="code"><p class="quoted">
&quot;Up and Up&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11747_392" -->
<a id="c11747_392"></a><blockquote class="code"><p class="quoted">
The Plain of the Skull is below the Endless Tower. The description of the Plain of the Skull is &quot;A vast and trackless plain, enlivened only by the bones of those who have previously tried and failed to cross. Above you is the Endless Tower, which rises half-way to the moon.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11748_392" -->
<a id="c11748_392"></a><blockquote class="code"><p class="quoted">
The description of the Endless Tower is &quot;From up here the Plain of the Skull seems only a small bald patch: the world is round and most of it is covered with trees. Far off to the southwest is a shimmering surface that might be water; but there are no signs of cities or civilizations, only the lizard-skeletons.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And now we borrow from the instructions on Actions to create our actual message. &quot;Before...&quot; introduces a rule that occurs when the player tries to do something; in this case, we will make a Before rule for going to the tower.</p>
<!-- START CODE "c11749_392" -->
<a id="c11749_392"></a><blockquote class="code"><p class="quoted">
Before going to the Endless Tower:
<br />&#160;&#160;&#160;&#160;say &quot;You climb... and climb... and climb... The sun sets. The moon rises. The wind begins to blow. You continue to climb...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11750_392" -->
<a id="c11750_392"></a><blockquote class="code"><p class="quoted">
The player carries a bit of harness. The description of the harness is &quot;A strip of worked leather and a loop of metal, scavenged from one of the skeletons on the plain. Without it, you might think your entire quest was in vain.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11751_392" -->
<a id="c11751_392"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / up&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "256: Wonderland" "e314" -->
<a id="e314"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e314" class="eglink"><b>256</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e314" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wonderland</span></b></a><br />Hiking Mount Rainier, with attention to which locations are higher and which lower than the present location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_15.html#e314"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example314">
<p>Suppose we have a landscape with a great deal of up and down variation, where GO UP and GO DOWN will be significant almost everywhere, and specifying them all individually a tremendous pain:</p>
<!-- START CODE "c11752_314" -->
<a id="c11752_314"></a><blockquote class="code"><p class="quoted">
&quot;Wonderland&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11753_314" -->
<a id="c11753_314"></a><blockquote class="code"><p class="quoted">
An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11754_314" -->
<a id="c11754_314"></a><blockquote class="code"><p class="quoted">
Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11755_314" -->
<a id="c11755_314"></a><blockquote class="code"><p class="quoted">
Instead of going down:
<br />&#160;&#160;&#160;&#160;if an adjacent room is lower than the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the valley be the lowest adjacent room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the valley;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're in a local valley: there's no down from here.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11756_314" -->
<a id="c11756_314"></a><blockquote class="code"><p class="quoted">
Instead of going up:
<br />&#160;&#160;&#160;&#160;if an adjacent room is higher than the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the peak be the highest adjacent room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the peak;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're on a local peak.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11757_314" -->
<a id="c11757_314"></a><blockquote class="code"><p class="quoted">
Paradise is a room. Paradise has altitude 5400 feet. &quot;A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11758_314" -->
<a id="c11758_314"></a><blockquote class="code"><p class="quoted">
Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. &quot;Numerous individual campsites and (on the road inventively labeled 'F') a handful of larger campgrounds suitable for church groups and family reunions.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11759_314" -->
<a id="c11759_314"></a><blockquote class="code"><p class="quoted">
Longmire is southwest of Cougar Rock. It has altitude 2760 feet. &quot;A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11760_314" -->
<a id="c11760_314"></a><blockquote class="code"><p class="quoted">
Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.
</p></blockquote>
<!-- END CODE -->
<p>Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:</p>
<!-- START CODE "c11761_314" -->
<a id="c11761_314"></a><blockquote class="code"><p class="quoted">
Instead of going up in the highest room:
<br />&#160;&#160;&#160;&#160;say &quot;You're standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11762_314" -->
<a id="c11762_314"></a><blockquote class="code"><p class="quoted">
Test me with &quot;up / up / up / down / down / up / up&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "307: Safari Guide" "e229" -->
<a id="e229"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e229" class="eglink"><b>307</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e229" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Safari Guide</span></b></a><br />The same functionality, but making the player continue to move until he reaches his destination or a barrier, handling all openable doors on the way.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e229"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example229">
<p>The foregoing example moves the player one location towards his destination, and requires that rooms have been visited before. But suppose we wanted to be a bit more lenient about movement, and let the player make as many steps as necessary per turn. We will also show consideration about doors, using the &quot;Locksmith&quot; extension supplied with Inform. (Now every time the code attempts opening a door, unlocking rules will also be invoked.)</p>
<!-- START CODE "c11763_229" -->
<a id="c11763_229"></a><blockquote class="code"><p class="quoted">
&quot;Safari Guide&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11764_229" -->
<a id="c11764_229"></a><blockquote class="code"><p class="quoted">
Include Locksmith by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11765_229" -->
<a id="c11765_229"></a><blockquote class="code"><p class="quoted">
The Monkey House is a room. The African Grasslands Exhibit is north of the Monkey House. The bird door is north of the African Grasslands Exhibit and south of the Aviary. The Ostrich Enclosure is west of the Aviary. The bird door is a door. It is closed, lockable, and locked. The silver key is a passkey. It unlocks the bird door. The player carries the silver key.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11766_229" -->
<a id="c11766_229"></a><blockquote class="code"><p class="quoted">
Understand &quot;go to [any room]&quot; as going by name. Understand &quot;[any room]&quot; as going by name. Understand &quot;[door]&quot; as entering.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11767_229" -->
<a id="c11767_229"></a><blockquote class="code"><p class="quoted">
Going by name is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11768_229" -->
<a id="c11768_229"></a><blockquote class="code"><p class="quoted">
Check going by name:
<br />&#160;&#160;&#160;&#160;if the noun is the location, say &quot;You're already in [the location].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11769_229" -->
<a id="c11769_229"></a><blockquote class="code"><p class="quoted">
Carry out going by name:
<br />&#160;&#160;&#160;&#160;while the player is not in the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let heading be the best route from the location to the noun, using even locked doors;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if heading is not a direction, say &quot;You can't think how to get there from here.&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let destination be the room heading from the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(heading [heading])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going heading;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is not in the destination, rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11770_229" -->
<a id="c11770_229"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go to aviary / go to ostrich enclosure / african grasslands&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Notice that we continue the movement until one of two things happens: either the player reaches the room that is his destination, or the going attempt doesn't work. In the latter case we stop the action in order to avoid hanging the game up in a loop. This event might occur when the player runs into a locked door, for instance.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "102: Bumping into Walls" "e46" -->
<a id="e46"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e46" class="eglink"><b>102</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e46" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Bumping into Walls</span></b></a><br />Offering the player a list of valid directions if he tries to go in a direction that leads nowhere.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e46"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example46">
<!-- START CODE "c11771_46" -->
<a id="c11771_46"></a><blockquote class="code"><p class="quoted">
&quot;Bumping into Walls&quot;
</p></blockquote>
<!-- END CODE -->
<p>First we add an instruction to determine which ways lead to other rooms.</p>
<!-- START CODE "c11772_46" -->
<a id="c11772_46"></a><blockquote class="code"><p class="quoted">
Definition: a direction (called thataway) is viable if the room thataway from the location is a room.
</p></blockquote>
<!-- END CODE -->
<p>Now we build in the instruction for what Inform should say if the player tries to head in a direction that leads nowhere:</p>
<!-- START CODE "c11773_46" -->
<a id="c11773_46"></a><blockquote class="code"><p class="quoted">
Instead of going nowhere:
<br />&#160;&#160;&#160;&#160;let count of exits be the number of viable directions;
<br />&#160;&#160;&#160;&#160;if the count of exits is 0, say &quot;You appear to be trapped in here.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the count of exits is 1, say &quot;From here, the only way out is [list of viable directions].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;From here, the viable exits are [list of viable directions].&quot;
</p></blockquote>
<!-- END CODE -->
<p>There is no theoretical reason why we have to define &quot;count of exits&quot; here: we could, if we wanted, just say &quot;if the number of viable directions is 0&quot;, &quot;if the number of viable directions is 1&quot;, and so on. However, each calculation of a &quot;viable direction&quot; takes a bit of computing power, so there is some slight savings in not requiring the game to count viable directions more than once in this routine.</p>
<!-- START CODE "c11774_46" -->
<a id="c11774_46"></a><blockquote class="code"><p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11775_46" -->
<a id="c11775_46"></a><blockquote class="code"><p class="quoted">
The Crypt is below the dome.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11776_46" -->
<a id="c11776_46"></a><blockquote class="code"><p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11777_46" -->
<a id="c11777_46"></a><blockquote class="code"><p class="quoted">
Test me with &quot;u / n / n / e / n / s / u / open door / e / n&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "103: Polarity" "e155" -->
<a id="e155"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e155" class="eglink"><b>103</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e155" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Polarity</span></b></a><br />A "go back" command that keeps track of the direction from which the player came, and sends him back.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e155"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example155">
<p>The main trick of this is always to record where the player has gone when he has just moved.</p>
<!-- START CODE "c11778_155" -->
<a id="c11778_155"></a><blockquote class="code"><p class="quoted">
&quot;Polarity&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11779_155" -->
<a id="c11779_155"></a><blockquote class="code"><p class="quoted">
The former location is a room that varies.
</p></blockquote>
<!-- END CODE -->
<p>Here we record where the player has been before moving him; by calling this the &quot;first carry out going rule&quot;, we make sure that this rule is followed during the going action before any other pieces of the movement occur. For more detail, see the chapters on advanced actions and on rules.</p>
<!-- START CODE "c11780_155" -->
<a id="c11780_155"></a><blockquote class="code"><p class="quoted">
First carry out going rule:
<br />&#160;&#160;&#160;&#160;now the former location is the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11781_155" -->
<a id="c11781_155"></a><blockquote class="code"><p class="quoted">
Understand &quot;go back&quot; as retreating. Understand &quot;back&quot; or &quot;return&quot; or &quot;retreat&quot; as retreating.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11782_155" -->
<a id="c11782_155"></a><blockquote class="code"><p class="quoted">
Retreating is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11783_155" -->
<a id="c11783_155"></a><blockquote class="code"><p class="quoted">
Carry out retreating:
<br />&#160;&#160;&#160;&#160;let way be the best route from the location to the former location, using doors;
<br />&#160;&#160;&#160;&#160;if way is a direction, try going way;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You can't see an open way back.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And to deal with the case where the player has not yet moved:</p>
<!-- START CODE "c11784_155" -->
<a id="c11784_155"></a><blockquote class="code"><p class="quoted">
When play begins: now the former location is the Dome.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11785_155" -->
<a id="c11785_155"></a><blockquote class="code"><p class="quoted">
Instead of retreating when the former location is the location: say &quot;You haven't gone anywhere yet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11786_155" -->
<a id="c11786_155"></a><blockquote class="code"><p class="quoted">
Dome is a room. North of Dome is North Chapel. South of the Dome is South Chapel. West of the Dome is Western End. Quiet Corner is northwest of the Dome, north of Western End, and west of North Chapel. Loud Corner is east of North Chapel, northeast of Dome, and north of Eastern End. Eastern End is north of Dim Corner and east of Dome. Dim Corner is southeast of Dome and east of South Chapel. Ruined Corner is southwest of Dome, west of South Chapel, and south of Western End.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11787_155" -->
<a id="c11787_155"></a><blockquote class="code"><p class="quoted">
The church door is east of Eastern End and west of the Courtyard. The church door is a door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11788_155" -->
<a id="c11788_155"></a><blockquote class="code"><p class="quoted">
Test me with &quot;back / n / go back / e / open door / go through door / go back&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "107: Provenance Unknown" "e304" -->
<a id="e304"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e304" class="eglink"><b>107</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e304" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Provenance Unknown</span></b></a><br />Allowing something like PUSH TELEVISION EAST to push the cart on which the television rests.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e304"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example304">
<p>Suppose we have a series of items that might be stacked on top of one another -- say a heavy television on a rolling cart, and we want the player to be able to move the cart with PUSH TELEVISION EAST just as well as with PUSH CART EAST.</p>
<p>This takes a little redirection, using a setting action variables rule. This is not a kind of rule we've encountered yet, and in fact we won't meet it until the Advanced Actions chapter; it is included here for the convenience of authors who want to modify the effect of pushing without reading that far ahead:</p>
<!-- START CODE "c11789_304" -->
<a id="c11789_304"></a><blockquote class="code"><p class="quoted">
&quot;Provenance Unknown&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11790_304" -->
<a id="c11790_304"></a><blockquote class="code"><p class="quoted">
Setting action variables for pushing something to:
<br />&#160;&#160;&#160;&#160;if the noun is enclosed by a pushable between rooms thing (called the pushed item) which is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is the pushed item instead.
</p></blockquote>
<!-- END CODE -->
<p>This rule says that any time we push an object that is on top of a stack of pushable objects, we should transfer the action to the item at the bottom of the stack.</p>
<p>The rest is merely a test case.</p>
<!-- START CODE "c11791_304" -->
<a id="c11791_304"></a><blockquote class="code"><p class="quoted">
The heavy golden idol is on a roller board. The roller board is on a hovercraft.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11792_304" -->
<a id="c11792_304"></a><blockquote class="code"><p class="quoted">
The hovercraft, the tea trolley, and the skateboard are pushable between rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11793_304" -->
<a id="c11793_304"></a><blockquote class="code"><p class="quoted">
The hovercraft is in Zeta Proximan Dig Field.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11794_304" -->
<a id="c11794_304"></a><blockquote class="code"><p class="quoted">
Zeta Proximan Dig Field is a room. &quot;During the day, the field is massed with sweating native workers, overseers, and officials from central command. Now the spades, trowels, brushes, metal detectors, ground probes, plumb lines, and sighting tripods have been laid aside.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11795_304" -->
<a id="c11795_304"></a><blockquote class="code"><p class="quoted">
All that remains are the trenches and the fine grey dust that blows slowly across them; the moonlight; and the just-emerging outlines of an ancient and alien wall.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11796_304" -->
<a id="c11796_304"></a><blockquote class="code"><p class="quoted">
The Hover-Road is west of the Dig Field. &quot;A long road hastily laid down, stretching east to west, from the dig site toward the safety of the city.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11797_304" -->
<a id="c11797_304"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;say &quot;You have, at last, loaded your illicit cargo without setting off any of the many and sensitive alarms set here; now it remains only to sneak out of the area, under the light of Zeta Proxima's lone green moon.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11798_304" -->
<a id="c11798_304"></a><blockquote class="code"><p class="quoted">
Test me with &quot;push idol west / look / push roller board east / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "108: Zorb" "e452" -->
<a id="e452"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e452" class="eglink"><b>108</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e452" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Zorb</span></b></a><br />Replacing the message the player receives when attempting to push something that isn't pushable, and also to remove the restriction that objects cannot be pushed up or down.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e452"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example452">
<p>There are two aspects of Inform's handling of pushable objects that are particularly prime for modification. One is that we may want to change the language used to refuse the pushing of unpushable objects.</p>
<p>Second, Inform by default assumes that it is impossible to push objects in up or down directions. This makes lots of sense if the player is trying to push a wheelbarrow up a ladder; it makes less sense if instead we're pushing a ball up a slope.</p>
<p>We solve both problems with some syntax borrowed from the chapter on rulebooks: in the first case, we replace the old rule with a new one with more friendly phrasing; in the second, we remove the rule entirely. More about how to do this is described in the rulebooks chapter; and in general we can find out what rules contribute to any given action by looking at the Actions index. In this case, the action is &quot;pushing it to&quot;, which has its own set of prerequisites (called check rules) that make sure the object can safely be pushed, before turning processing over to the going action.</p>
<!-- START CODE "c11799_452" -->
<a id="c11799_452"></a><blockquote class="code"><p class="quoted">
&quot;Zorb&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11800_452" -->
<a id="c11800_452"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11801_452" -->
<a id="c11801_452"></a><blockquote class="code"><p class="quoted">
The new can't push unpushable things rule is listed instead of the can't push unpushable things rule in the check pushing it to rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11802_452" -->
<a id="c11802_452"></a><blockquote class="code"><p class="quoted">
This is the new can't push unpushable things rule:
<br />&#160;&#160;&#160;&#160;if the noun is not pushable between rooms:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] [are] not amenable to being pushed from place to place.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11803_452" -->
<a id="c11803_452"></a><blockquote class="code"><p class="quoted">
The can't push vertically rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>And now to provide a scenario where the player can push something up and down a hillside. Most of the rest of the example is there for local color and to provide a way to demonstrate these rule adjustments:</p>
<!-- START CODE "c11804_452" -->
<a id="c11804_452"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11805_452" -->
<a id="c11805_452"></a><blockquote class="code"><p class="quoted">
The Steep Hill is a room. The Crest is above Steep Hill. The Valley is below Steep Hill.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11806_452" -->
<a id="c11806_452"></a><blockquote class="code"><p class="quoted">
The flat rock is a fixed in place thing in the Steep Hill.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11807_452" -->
<a id="c11807_452"></a><blockquote class="code"><p class="quoted">
The Zorb is a transparent open enterable container in the Steep Hill. &quot;[if the player props the Zorb]The Zorb rests here, kept from further rolling by your support[otherwise]The Zorb is here[end if].&quot;. It is pushable between rooms. The description of the Zorb is &quot;A giant plastic inflatable ball, like a hamster ball for humans[if someone is in the Zorb]. Inside [is-are list of people in the Zorb][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11808_452" -->
<a id="c11808_452"></a><blockquote class="code"><p class="quoted">
Lucy is a woman in the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11809_452" -->
<a id="c11809_452"></a><blockquote class="code"><p class="quoted">
Carry out going with the Zorb when the Zorb contains Lucy:
<br />&#160;&#160;&#160;&#160;say &quot;Lucy whoops delightedly as she rides along in the Zorb.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11810_452" -->
<a id="c11810_452"></a><blockquote class="code"><p class="quoted">
Every turn when the Zorb is not in the Valley and the player does not prop the Zorb:
<br />&#160;&#160;&#160;&#160;let next room be the room down from the location of the Zorb;
<br />&#160;&#160;&#160;&#160;if the player is not in the Zorb and the player can see the Zorb:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The Zorb succumbs to gravity and rolls down toward [the next room].&quot;;
<br />&#160;&#160;&#160;&#160;move the Zorb to the next room;
<br />&#160;&#160;&#160;&#160;if the player is in the Zorb:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The Zorb rolls you down the hill!&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try looking;
<br />&#160;&#160;&#160;&#160;otherwise if the player can see the Zorb:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The Zorb rolls ponderously but inevitably into the vicinity.&quot;;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11811_452" -->
<a id="c11811_452"></a><blockquote class="code"><p class="quoted">
Propping relates one person to one thing. The verb to prop means the propping relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11812_452" -->
<a id="c11812_452"></a><blockquote class="code"><p class="quoted">
Carry out going with the Zorb:
<br />&#160;&#160;&#160;&#160;now the player props the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11813_452" -->
<a id="c11813_452"></a><blockquote class="code"><p class="quoted">
Before doing something when the action requires a touchable noun:
<br />&#160;&#160;&#160;&#160;if the noun is not the Zorb, now the player does not prop the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11814_452" -->
<a id="c11814_452"></a><blockquote class="code"><p class="quoted">
Check waving hands when the player is propping something (called casualty):
<br />&#160;&#160;&#160;&#160;try the player releasing the casualty.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11815_452" -->
<a id="c11815_452"></a><blockquote class="code"><p class="quoted">
Carry out entering the Zorb:
<br />&#160;&#160;&#160;&#160;now the player does not prop the Zorb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11816_452" -->
<a id="c11816_452"></a><blockquote class="code"><p class="quoted">
Understand &quot;let go of [something]&quot; or &quot;let [something] go&quot; or &quot;release [something]&quot; or &quot;free [something]&quot; as releasing. Releasing is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11817_452" -->
<a id="c11817_452"></a><blockquote class="code"><p class="quoted">
Check releasing:
<br />&#160;&#160;&#160;&#160;if the player carries the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try dropping the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11818_452" -->
<a id="c11818_452"></a><blockquote class="code"><p class="quoted">
Check releasing:
<br />&#160;&#160;&#160;&#160;if the player does not prop the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are not supporting [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11819_452" -->
<a id="c11819_452"></a><blockquote class="code"><p class="quoted">
Carry out releasing:
<br />&#160;&#160;&#160;&#160;now the player does not prop the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11820_452" -->
<a id="c11820_452"></a><blockquote class="code"><p class="quoted">
Report releasing:
<br />&#160;&#160;&#160;&#160;say &quot;You let go of [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11821_452" -->
<a id="c11821_452"></a><blockquote class="code"><p class="quoted">
Test me with &quot;d / push zorb up / look / push zorb up / wave / d / d / push zorb up / release zorb / d / push zorb up / touch rock / push the flat rock south&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "179: Owen's Law" "e278" -->
<a id="e278"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e278" class="eglink"><b>179</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e278" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Owen's Law</span></b></a><br />OUT always means "move to an outdoors room, or else to a room with more exits than this one has"; IN always means the opposite.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_11.html#e278"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example278">
<p>Suppose we want the game to interpret &quot;GO OUT&quot; as &quot;move towards an outdoors room, or towards a room with more exits than the current room&quot;, while &quot;GO IN&quot; means &quot;move toward a room with fewer exits, or towards an indoors room&quot;. Thus going in repeatedly within a building would lead towards dead-ends, while going out repeatedly would lead towards the center of the building and then towards an exit to the outside world.</p>
<p>We start by encoding these rules as definitions:</p>
<!-- START CODE "c11822_278" -->
<a id="c11822_278"></a><blockquote class="code"><p class="quoted">
&quot;Owen's Law&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11823_278" -->
<a id="c11823_278"></a><blockquote class="code"><p class="quoted">
A room can be indoors or outdoors. A room is usually indoors.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11824_278" -->
<a id="c11824_278"></a><blockquote class="code"><p class="quoted">
Definition: a room is outward:
<br />&#160;&#160;&#160;&#160;if it is not adjacent, no;
<br />&#160;&#160;&#160;&#160;if it is indoors and the location is outdoors, no;
<br />&#160;&#160;&#160;&#160;if it is outdoors and the location is indoors, yes;
<br />&#160;&#160;&#160;&#160;if the number of rooms adjacent to it is greater than the number of rooms adjacent to the location, yes;
<br />&#160;&#160;&#160;&#160;otherwise no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11825_278" -->
<a id="c11825_278"></a><blockquote class="code"><p class="quoted">
Definition: a room is inward:
<br />&#160;&#160;&#160;&#160;if it is not adjacent, no;
<br />&#160;&#160;&#160;&#160;if it is outdoors and the location is indoors, no;
<br />&#160;&#160;&#160;&#160;if it is indoors and the location is outdoors, yes;
<br />&#160;&#160;&#160;&#160;if the number of rooms adjacent to it is less than the number of rooms adjacent to the location, yes;
<br />&#160;&#160;&#160;&#160;otherwise no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11826_278" -->
<a id="c11826_278"></a><blockquote class="code"><p class="quoted">
Instead of going nowhere when the noun is outside: try exiting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11827_278" -->
<a id="c11827_278"></a><blockquote class="code"><p class="quoted">
Instead of exiting when the player is in a room:
<br />&#160;&#160;&#160;&#160;if at least one room is outward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the destination be a random outward room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to	 the destination;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way instead;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It's not entirely obvious which way you mean. &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the listing available exits activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11828_278" -->
<a id="c11828_278"></a><blockquote class="code"><p class="quoted">
Instead of going inside when the room inside from the location is not a room and at least one room is inward:
<br />&#160;&#160;&#160;&#160;if more than one room is inward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the listing available exits activity;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the destination be a random inward room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the destination;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11829_278" -->
<a id="c11829_278"></a><blockquote class="code"><p class="quoted">
Instead of going nowhere:
<br />&#160;&#160;&#160;&#160;carry out the listing available exits activity.
</p></blockquote>
<!-- END CODE -->
<p>This &quot;listing available exits&quot; is a refinement borrowed from a future chapter, which allows us to specify special listing and printing rules:</p>
<!-- START CODE "c11830_278" -->
<a id="c11830_278"></a><blockquote class="code"><p class="quoted">
Listing available exits is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11831_278" -->
<a id="c11831_278"></a><blockquote class="code"><p class="quoted">
Rule for listing available exits:
<br />&#160;&#160;&#160;&#160;if going inside and an adjacent room is inward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;From here 'in' could reasonably mean [a list of adjacent inward rooms].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;if exiting and an adjacent room is outward:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;From here 'out' could reasonably mean [a list of outward adjacent rooms].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;From here you can go [a list of adjacent rooms].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11832_278" -->
<a id="c11832_278"></a><blockquote class="code"><p class="quoted">
Before printing the name of a room (called the target) while listing available exits:
<br />&#160;&#160;&#160;&#160;let aim be the best route from the location to the target;
<br />&#160;&#160;&#160;&#160;say &quot;[aim] to the &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11833_278" -->
<a id="c11833_278"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of an unvisited room which is not the location:
<br />&#160;&#160;&#160;&#160;say &quot;unknown location&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11834_278" -->
<a id="c11834_278"></a><blockquote class="code"><p class="quoted">
Dune is an outdoors room. &quot;Hundreds of feet of dune stretch west to the beach, crisscrossed with dune-buggy tracks and the footprints of birds. To the east is a low-lying, boxy concrete installation.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11835_278" -->
<a id="c11835_278"></a><blockquote class="code"><p class="quoted">
Ocean Shores Military Installation is east of the Dune. It is an outdoors room. &quot;The World War II emplacements, built in case of Japanese invasion, have never been destroyed, though with all the weapons and furnishings gone it is difficult to make much sense of the original structure. A doorway leads west into concrete-lined darkness; a rusty but reliable ladder ascends to a walkway overlooking the sea.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11836_278" -->
<a id="c11836_278"></a><blockquote class="code"><p class="quoted">
Walkway is above Ocean Shores Military Installation. &quot;From here you have a long view of the dunes and the Pacific Ocean, complete with the rotting hull of a long-stranded vessel.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11837_278" -->
<a id="c11837_278"></a><blockquote class="code"><p class="quoted">
Dark Echoing Room is inside from Ocean Shores Military Installation. Dank Dripping Room is east of Dark Echoing Room. Narrow Room is south of Dark Echoing Room. Small Sealed Chamber is north of Dark Echoing Room. Room Smelling of Animal Urine is north of Dank Dripping Room. The description of a room is usually &quot;It is dark in here, and feels unsafe.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11838_278" -->
<a id="c11838_278"></a><blockquote class="code"><p class="quoted">
Test me with &quot;e / u / d / in / s / out / n / out / e / in / out / out / out&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "206: Get Axe" "e373" -->
<a id="e373"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e373" class="eglink"><b>206</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e373" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Get Axe</span></b></a><br />Changing the check rules to try automatically leaving a container before attempting to take it. (And arranging things so that other people will do likewise.)</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e373"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example373">
<p>We could now re-write the check rules so that any time someone (the player or someone else) tries to pick up a container which he is in, he will first get out:</p>
<!-- START CODE "c11839_373" -->
<a id="c11839_373"></a><blockquote class="code"><p class="quoted">
&quot;GET AXE&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11840_373" -->
<a id="c11840_373"></a><blockquote class="code"><p class="quoted">
This is the clever can't take what you're inside rule:
<br />&#160;&#160;&#160;&#160;if the person asked is in the noun, try the person asked exiting;
<br />&#160;&#160;&#160;&#160;if the person asked is in the noun, rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11841_373" -->
<a id="c11841_373"></a><blockquote class="code"><p class="quoted">
The clever can't take what you're inside rule is listed instead of the can't take what you're inside rule in the check taking rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11842_373" -->
<a id="c11842_373"></a><blockquote class="code"><p class="quoted">
Attic is a room. The unused coffin is in the Attic. The coffin is enterable and openable and open. Raskolnikov is a man in the coffin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11843_373" -->
<a id="c11843_373"></a><blockquote class="code"><p class="quoted">
Persuasion rule for asking Raskolnikov to try doing something:
<br />&#160;&#160;&#160;&#160;persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11844_373" -->
<a id="c11844_373"></a><blockquote class="code"><p class="quoted">
Test me with &quot;raskolnikov, get coffin&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "290: Anchorite" "e170" -->
<a id="e170"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e170" class="eglink"><b>290</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e170" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Anchorite</span></b></a><br />By default, Inform understands GET OFF, GET UP, or GET OUT when the player is sitting or standing on an enterable object. We might also want to add GET DOWN and DOWN as exit commands, though.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e170"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example170">
<p>With GET DOWN, we can replace the whole command, which will not interfere with the normal function of the TAKE verb, or allow the player to attempt to GET any other directions:</p>
<!-- START CODE "c11845_170" -->
<a id="c11845_170"></a><blockquote class="code"><p class="quoted">
&quot;Anchorite&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11846_170" -->
<a id="c11846_170"></a><blockquote class="code"><p class="quoted">
The Solitary Place is a room. &quot;A glittering, shimmering desert without either locusts or honey.&quot; The pillar is an enterable supporter in the Solitary Place. &quot;The broken pillar is short enough to climb and sit on.&quot; The description of the pillar is &quot;Once it was a monument: a long frieze of battles and lion-hunts spirals up the side, in honor of an earthly king.&quot; The player is on the pillar.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11847_170" -->
<a id="c11847_170"></a><blockquote class="code"><p class="quoted">
Understand &quot;get down&quot; as exiting.
</p></blockquote>
<!-- END CODE -->
<p>This doesn't cover the case where the player just types &quot;DOWN&quot;, and we don't want to preempt the normal operation of the GO action here. So instead of writing a new understand instruction, we might catch this one at the action-processing level:</p>
<!-- START CODE "c11848_170" -->
<a id="c11848_170"></a><blockquote class="code"><p class="quoted">
Instead of going down when the player is on a supporter:
<br />&#160;&#160;&#160;&#160;try exiting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11849_170" -->
<a id="c11849_170"></a><blockquote class="code"><p class="quoted">
Test me with &quot;down / enter pillar / get down / down / get down&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "310: Lies" "e225" -->
<a id="e225"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e225" class="eglink"><b>310</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e225" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lies</span></b></a><br />Commands to allow the player to lie down in three different ways.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e225"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example225">
<p>To set the scene, and make new actions to provide for two of these ways:</p>
<!-- START CODE "c11850_225" -->
<a id="c11850_225"></a><blockquote class="code"><p class="quoted">
&quot;Lies&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11851_225" -->
<a id="c11851_225"></a><blockquote class="code"><p class="quoted">
The Laundry is a room. &quot;An old Limehouse haunt, the Chinese laundry used by the down-trodden wives of the Tong of the Black Scorpion.&quot; The vast marble sink is here. &quot;There is nothing obviously oriental about the vast marble sink, which is large enough to lie down inside. A wooden-rack floor, equipped for easy drainage, turns out also to be equipped for snagging the shoes of passers-by.&quot; The sink is an enterable container, fixed in place.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11852_225" -->
<a id="c11852_225"></a><blockquote class="code"><p class="quoted">
Lying down is an action applying to nothing. Report lying down: say &quot;You lie down for a while in the middle of the Laundry, wondering about the point of existence, then get up again.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11853_225" -->
<a id="c11853_225"></a><blockquote class="code"><p class="quoted">
Lying near is an action applying to one thing. Report lying near: say &quot;You lie down next to [the noun] for a while, mumbling to yourself.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11854_225" -->
<a id="c11854_225"></a><blockquote class="code"><p class="quoted">
Instead of lying near the sink, say &quot;Lying down close to the cool butcher's marble slabs of the sink, your attention is caught by the sight of coolie shoes through a floor-level grille for ventilation. The game is afoot!&quot;
</p></blockquote>
<!-- END CODE -->
<p>So far, so good. Now for the grammar, where we create two new tokens: one for each of two groups of alternative prepositions.</p>
<!-- START CODE "c11855_225" -->
<a id="c11855_225"></a><blockquote class="code"><p class="quoted">
Understand &quot;beneath/under/by/near/beside/alongside/against&quot; or &quot;next to&quot; or &quot;in front of&quot; as &quot;[beside]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11856_225" -->
<a id="c11856_225"></a><blockquote class="code"><p class="quoted">
Understand &quot;on/in/inside&quot; or &quot;on top of&quot; as &quot;[within]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11857_225" -->
<a id="c11857_225"></a><blockquote class="code"><p class="quoted">
Understand &quot;lie down&quot; as lying down.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11858_225" -->
<a id="c11858_225"></a><blockquote class="code"><p class="quoted">
Understand &quot;lie down [within] [something]&quot; as entering.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11859_225" -->
<a id="c11859_225"></a><blockquote class="code"><p class="quoted">
Understand &quot;lie [beside] [something]&quot; or &quot;lie down [beside] [something]&quot; as lying near.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11860_225" -->
<a id="c11860_225"></a><blockquote class="code"><p class="quoted">
Test me with &quot;lie down / lie down on top of the sink / get out / lie down inside the sink / get out / lie down in front of the sink&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "388: Nine AM Appointment" "e420" -->
<a id="e420"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e420" class="eglink"><b>388</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e420" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Nine AM Appointment</span></b></a><br />A WAIT [number] MINUTES command which advances through an arbitrary number of turns.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_19.html#e420"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example420">
<p>If there's some reason the player needs to be at a specific place and time, we might want to allow him to wait a number of minutes at once.</p>
<!-- START CODE "c11861_420" -->
<a id="c11861_420"></a><blockquote class="code"><p class="quoted">
&quot;Nine AM Appointment&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11862_420" -->
<a id="c11862_420"></a><blockquote class="code"><p class="quoted">
Waiting more is an action applying to one number.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11863_420" -->
<a id="c11863_420"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait [a time period]&quot; or &quot;wait for [a time period]&quot; or &quot;wait for a/an [a time period]&quot; or &quot;wait a/an [a time period]&quot; as waiting more.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11864_420" -->
<a id="c11864_420"></a><blockquote class="code"><p class="quoted">
Carry out waiting more:
<br />&#160;&#160;&#160;&#160;let the target time be the time of day plus the time understood;
<br />&#160;&#160;&#160;&#160;decrease the target time by one minute;
<br />&#160;&#160;&#160;&#160;while the time of day is not the target time:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<p>The one nuance here is that after our wait command occurs, the turn sequence rules will occur one more time. So we need to subtract one minute from the parsed time to make the turn end on the desired number of minutes.</p>
<!-- START CODE "c11865_420" -->
<a id="c11865_420"></a><blockquote class="code"><p class="quoted">
Report waiting more:
<br />&#160;&#160;&#160;&#160;say &quot;It is now [time of day + 1 minute].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And if we want to ensure that the player doesn't (accidentally or intentionally) put the interpreter through a really long loop, we could put an upper limit on his patience:</p>
<!-- START CODE "c11866_420" -->
<a id="c11866_420"></a><blockquote class="code"><p class="quoted">
Check waiting more:
<br />&#160;&#160;&#160;&#160;if the time understood is greater than one hour, say &quot;You really haven't got that kind of patience.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11867_420" -->
<a id="c11867_420"></a><blockquote class="code"><p class="quoted">
The Specialist's Office is a room. The secretary is a woman in the Office. Instead of asking the secretary about &quot;[appointment]&quot;, say &quot;'Hang on just five more minutes,' she says, in a distracted manner.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11868_420" -->
<a id="c11868_420"></a><blockquote class="code"><p class="quoted">
Understand &quot;appointment&quot; or &quot;specialist&quot; or &quot;doctor&quot; as &quot;[appointment]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11869_420" -->
<a id="c11869_420"></a><blockquote class="code"><p class="quoted">
At 9:45 AM: say &quot;At [the time of day in words], secretary glances at you and gives a reassuring smile.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11870_420" -->
<a id="c11870_420"></a><blockquote class="code"><p class="quoted">
Test me with &quot;ask secretary about appointment / wait five minutes / g / g / wait 61 minutes / wait for half an hour / wait for a quarter of an hour / wait for an hour&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "47: Change of Basis" "e114" -->
<a id="e114"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e114" class="eglink"><b>47</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e114" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Change of Basis</span></b></a><br />Implementing sleeping and wakeful states.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_4.html#e114"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example114">
<p>Suppose we want to allow the player to go to sleep some of the time:</p>
<!-- START CODE "c11871_114" -->
<a id="c11871_114"></a><blockquote class="code"><p class="quoted">
&quot;Change of Basis&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11872_114" -->
<a id="c11872_114"></a><blockquote class="code"><p class="quoted">
A person is either awake or asleep. A person is usually awake.
</p></blockquote>
<!-- END CODE -->
<p>The important thing to note here is that it does not work to say &quot;the player is either asleep or awake&quot;. This is because the player is not necessarily one specific person or thing during the game: the identity of the player can be changed, as we will see later.</p>
<p>So if we want to make rules about the properties of the player, we should attach these rules to the &quot;person&quot; kind.</p>
<!-- START CODE "c11873_114" -->
<a id="c11873_114"></a><blockquote class="code"><p class="quoted">
Linear Algebra Class is a room. &quot;The blackboard is covered with square arrangements of numbers. These are supposed to convey something to you, but mostly you're finding them soporific.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now a few rules about changing from one state to the other:</p>
<!-- START CODE "c11874_114" -->
<a id="c11874_114"></a><blockquote class="code"><p class="quoted">
Instead of sleeping: now the player is asleep; say &quot;You drop off.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11875_114" -->
<a id="c11875_114"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than waking up, waiting or sleeping when the player is asleep:
<br />&#160;&#160;&#160;&#160;say &quot;Ssh! You're sleeping!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11876_114" -->
<a id="c11876_114"></a><blockquote class="code"><p class="quoted">
Instead of sleeping when the player is asleep:
<br />&#160;&#160;&#160;&#160;say &quot;Zzzz.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11877_114" -->
<a id="c11877_114"></a><blockquote class="code"><p class="quoted">
Instead of waking up when the player is asleep:
<br />&#160;&#160;&#160;&#160;now the player is awake;
<br />&#160;&#160;&#160;&#160;say &quot;You come to suddenly, wiping drool from your lips.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11878_114" -->
<a id="c11878_114"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than looking or sleeping when the player is awake:
<br />&#160;&#160;&#160;&#160;say &quot;You'd really rather just sleep through this.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11879_114" -->
<a id="c11879_114"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wake up / sleep / look / z / sleep / wake up / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "389: Delayed Gratification" "e421" -->
<a id="e421"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e421" class="eglink"><b>389</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e421" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Delayed Gratification</span></b></a><br />A WAIT UNTIL [time] command which advances until the game clock reaches the correct hour.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_19.html#e421"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example421">
<!-- START CODE "c11880_421" -->
<a id="c11880_421"></a><blockquote class="code"><p class="quoted">
&quot;Delayed Gratification&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11881_421" -->
<a id="c11881_421"></a><blockquote class="code"><p class="quoted">
Hanging around until is an action applying to one time.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11882_421" -->
<a id="c11882_421"></a><blockquote class="code"><p class="quoted">
Check hanging around until:
<br />&#160;&#160;&#160;&#160;if the time of day is the time understood, say &quot;It is [time understood] now!&quot; instead;
<br />&#160;&#160;&#160;&#160;if the time of day is after the time understood, say &quot;It is too late for that now.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11883_421" -->
<a id="c11883_421"></a><blockquote class="code"><p class="quoted">
Carry out hanging around until:
<br />&#160;&#160;&#160;&#160;while the time of day is before the time understood:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11884_421" -->
<a id="c11884_421"></a><blockquote class="code"><p class="quoted">
Report hanging around until:
<br />&#160;&#160;&#160;&#160;say &quot;You yawn until [time understood].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11885_421" -->
<a id="c11885_421"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait until [time]&quot; as hanging around until.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11886_421" -->
<a id="c11886_421"></a><blockquote class="code"><p class="quoted">
The Empty Field is a room. &quot;It's an ordinary empty field. Nothing to see here at all-- yet. Wait until 11:45 PM, though.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11887_421" -->
<a id="c11887_421"></a><blockquote class="code"><p class="quoted">
At 11:45 PM:
<br />&#160;&#160;&#160;&#160;say &quot;Suddenly the air is filled with light and the sounds of an approaching band. Over the crest of the hill comes a parade of singing, stomping, hooting people: and not just people, but dogs, horses, elephants, giraffes... There are banners, and candles, and a flag that glows eerie-green in the dark; there is a float shaped like an enormous turtle, its shell covered with winking green lights; there is an old man dressed as a skeleton, carried in a litter, his neck garlanded with dried chiles. There are small girls throwing rose petals from a basket, and grown women half-naked carrying the emblems of Bacchic revelry, and two little boys each with a silver basin of clear water. All these go by in procession, and you join on at the end.&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11888_421" -->
<a id="c11888_421"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / z / z / wait until 11:45 PM&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "287: XYZZY" "e447" -->
<a id="e447"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e447" class="eglink"><b>287</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e447" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">XYZZY</span></b></a><br />Basics of adding a new command reviewed, for the case of the simple magic word XYZZY.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e447"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example447">
<p>We have seen before how to define a new action from scratch, but we may want to review here, using a simple command that requires no objects.</p>
<!-- START CODE "c11889_447" -->
<a id="c11889_447"></a><blockquote class="code"><p class="quoted">
&quot;XYZZY&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11890_447" -->
<a id="c11890_447"></a><blockquote class="code"><p class="quoted">
Understand &quot;xyzzy&quot; or &quot;say xyzzy&quot; or &quot;cast xyzzy&quot; as casting xyzzy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11891_447" -->
<a id="c11891_447"></a><blockquote class="code"><p class="quoted">
Casting xyzzy is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11892_447" -->
<a id="c11892_447"></a><blockquote class="code"><p class="quoted">
Check casting xyzzy:
<br />&#160;&#160;&#160;&#160;if the player does not wear the amulet of elocution, say &quot;You are unable to articulate the second 'z' separately from the first, and the spell fails in a disdainful puff. Must be Parisian magic.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player has the plate, say &quot;The plate of cheeses twitches uncomfortably, aware that it should be doing something, but not sure what.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11893_447" -->
<a id="c11893_447"></a><blockquote class="code"><p class="quoted">
Carry out casting xyzzy:
<br />&#160;&#160;&#160;&#160;move the plate to the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11894_447" -->
<a id="c11894_447"></a><blockquote class="code"><p class="quoted">
Report casting xyzzy:
<br />&#160;&#160;&#160;&#160;say &quot;Under the influence of the Amulet of Elocution, you pronounce this as Xhi-zee. And lo, from nowhere, a [plate] appears!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11895_447" -->
<a id="c11895_447"></a><blockquote class="code"><p class="quoted">
The amulet of elocution is a wearable thing. It is carried by the player. The description is &quot;A heavy gold ring on a chain. If heated in an ordinary house fire, it glows with the words, 'Moses Supposes His Toeses Are Roses.'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11896_447" -->
<a id="c11896_447"></a><blockquote class="code"><p class="quoted">
The plate is a portable supporter. On the plate is a very ripe ooze. Instead of smelling the ooze, say &quot;It smells like socks. This is going to be wonderful.&quot; The ooze is edible. The printed name of the plate is &quot;plate[if the plate supports the ooze] of cheese[end if]&quot;. The description of the ooze is &quot;Definitely genuinely cheese.&quot; Understand &quot;cheese&quot; as the ooze.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11897_447" -->
<a id="c11897_447"></a><blockquote class="code"><p class="quoted">
Instead of eating the ooze: now the ooze is nowhere; say &quot;You are transported...&quot;; move the player to Paradise.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11898_447" -->
<a id="c11898_447"></a><blockquote class="code"><p class="quoted">
The Cheez Factory is a room. &quot;All around you are squares of pressed orange polymer, or possibly cheez. Your only hope is the magic word your uncle taught you: XYZZY.&quot; The squares of pressed orange polymer are scenery in the Factory. The description is &quot;You see nothing special about the squares of pressed orange polymer. Nothing special at all.&quot; Understand &quot;square&quot; or &quot;cheez&quot; as the squares.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11899_447" -->
<a id="c11899_447"></a><blockquote class="code"><p class="quoted">
Paradise is a room. The description is &quot;Well, it might just be one of the posh upper rings of purgatory, if you're entirely honest with yourself.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11900_447" -->
<a id="c11900_447"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x squares / x amulet / x cheese / xyzzy / wear amulet / xyzzy / x ooze / smell ooze /  eat ooze&quot;.
</p></blockquote>
<!-- END CODE -->
<p>XYZZY is a magic word from the original Adventure, and many other games respond to it with some sort of amusing message.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "88: Fine Laid" "e144" -->
<a id="e144"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e144" class="eglink"><b>88</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e144" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Fine Laid</span></b></a><br />Making writing that can be separately examined from the paper on which it appears, but which directs all other actions to the paper.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e144"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example144">
<p>Sometimes it is useful to direct all -- or almost all -- actions from one object to another. For the sake of argument, say we have a sheet of paper with writing on it, and (because we're very meticulous) we want to let the player examine the writing and get a customized response, different from when he just examines the sheet of paper. But for all other purposes -- say, TAKE or TASTE -- we want the two objects to be treated as one.</p>
<p>Here, we approach the problem by changing the noun and/or the second noun of the current action, then issuing a new command to &quot;try the current action&quot;. Because we've changed the noun and second noun, the &quot;current action&quot; at this point is different from the one generated originally by the player's command.</p>
<!-- START CODE "c11901_144" -->
<a id="c11901_144"></a><blockquote class="code"><p class="quoted">
 &quot;Fine Laid&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11902_144" -->
<a id="c11902_144"></a><blockquote class="code"><p class="quoted">
High Street Stationer is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11903_144" -->
<a id="c11903_144"></a><blockquote class="code"><p class="quoted">
The sheet of paper is a thing in High Street Stationer. The writing is part of the sheet of paper.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11904_144" -->
<a id="c11904_144"></a><blockquote class="code"><p class="quoted">
The description of the sheet of paper is &quot;A beautiful sheet of heavy cream paper.&quot; The description of the writing is &quot;Delicate and spidery.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11905_144" -->
<a id="c11905_144"></a><blockquote class="code"><p class="quoted">
Instead of tasting the sheet of paper, say &quot;You might need more fiber in your diet, but this isn't the way.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11906_144" -->
<a id="c11906_144"></a><blockquote class="code"><p class="quoted">
Before doing something other than examining when the current action involves the writing:
<br />&#160;&#160;&#160;&#160;if the writing is the noun, now the noun is the sheet of paper;
<br />&#160;&#160;&#160;&#160;if the writing is the second noun, now the second noun is the sheet of paper;
<br />&#160;&#160;&#160;&#160;try the current action instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11907_144" -->
<a id="c11907_144"></a><blockquote class="code"><p class="quoted">
Test me with &quot;examine sheet of paper / examine writing / get writing / taste writing&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "92: Lucy" "e232" -->
<a id="e232"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e232" class="eglink"><b>92</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e232" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lucy</span></b></a><br />Redirecting a question about one topic to ask about another.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_7.html#e232"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example232">
<p>Occasionally we will want to replace the player's question topic with another of our own devising. We can do this in the simplest possible case like so:</p>
<!-- START CODE "c11908_232" -->
<a id="c11908_232"></a><blockquote class="code"><p class="quoted">
&quot;Lucy&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11909_232" -->
<a id="c11909_232"></a><blockquote class="code"><p class="quoted">
The International Boardgame Championship is a room. Lucy is a woman in the Championship.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11910_232" -->
<a id="c11910_232"></a><blockquote class="code"><p class="quoted">
Instead of asking Lucy about &quot;checkers&quot;:
<br />&#160;&#160;&#160;&#160;try asking Lucy about &quot;games&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11911_232" -->
<a id="c11911_232"></a><blockquote class="code"><p class="quoted">
Instead of asking Lucy about &quot;games&quot;,
<br />&#160;&#160;&#160;&#160;say &quot;'I don't like games,' she sniffs.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11912_232" -->
<a id="c11912_232"></a><blockquote class="code"><p class="quoted">
Test me with &quot;ask lucy about checkers / ask lucy about games&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that this syntax did not work in older versions of Inform; it is now safe.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "220: Cactus Will Outlive Us All" "e59" -->
<a id="e59"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e59" class="eglink"><b>220</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e59" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Cactus Will Outlive Us All</span></b></a><br />For every character besides the player, there is an action that will cause that character to wither right up and die.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e59"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example59">
<!-- START CODE "c11913_59" -->
<a id="c11913_59"></a><blockquote class="code"><p class="quoted">
 &quot;Cactus Will Outlive Us All&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11914_59" -->
<a id="c11914_59"></a><blockquote class="code"><p class="quoted">
Death Valley is a room. Luckless Luke and Dead-Eye Pete are men in the Valley. A cactus is in the Valley. Persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11915_59" -->
<a id="c11915_59"></a><blockquote class="code"><p class="quoted">
A person has an action called death knell. The death knell of Luckless Luke is pulling the cactus. The death knell of Dead-Eye Pete is Luke trying dropping the cactus.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11916_59" -->
<a id="c11916_59"></a><blockquote class="code"><p class="quoted">
Before an actor doing something:
<br />&#160;&#160;&#160;&#160;repeat with the victim running through people in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the DK be the death knell of the victim;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the DK is not waiting and the current action is the DK:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It looks as if [the DK] was the death knell for [the victim], who looks startled, then nonexistent.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the victim is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>If we leave it at that, then pulling the cactus will kill Luckless Luke but then say &quot;Nothing obvious happens.&quot;, which seems like a bit of an anti-climax. So we add a special case response for that one:</p>
<!-- START CODE "c11917_59" -->
<a id="c11917_59"></a><blockquote class="code"><p class="quoted">
After pulling the cactus when Luckless Luke was in the location:
<br />&#160;&#160;&#160;&#160;say &quot;That's a real shame.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11918_59" -->
<a id="c11918_59"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get cactus / drop cactus / luke, get cactus / luke, drop cactus / pull cactus / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "430: Leopard-skin" "e224" -->
<a id="e224"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e224" class="eglink"><b>430</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e224" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Leopard-skin</span></b></a><br />A maze that the player can escape if he performs an exact sequence of actions.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_21.html#e224"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example224">
<p>Suppose (as in Infocom's Leather Goddesses of Phobos) that we have a maze that the player can escape only by performing the correct sequence of actions in the correct order. One way to do this would be to keep a list of the player's most recent actions, and see whether these match up with the combination we have established as the maze's solution.</p>
<p>For instance:</p>
<!-- START CODE "c11919_224" -->
<a id="c11919_224"></a><blockquote class="code"><p class="quoted">
 &quot;Leopard-skin&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11920_224" -->
<a id="c11920_224"></a><blockquote class="code"><p class="quoted">
The Fur-Lined Maze is a room. &quot;This seemingly endless sequence of rooms is decorated in a tasteful selection of exotic furs and gilded fixtures.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11921_224" -->
<a id="c11921_224"></a><blockquote class="code"><p class="quoted">
Clapping is an action applying to nothing. Understand &quot;clap&quot; as clapping.
<br />Kweepaing is an action applying to nothing. Understand &quot;kweepa&quot; as kweepaing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11922_224" -->
<a id="c11922_224"></a><blockquote class="code"><p class="quoted">
Carry out clapping:
<br />&#160;&#160;&#160;&#160;say &quot;You clap.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11923_224" -->
<a id="c11923_224"></a><blockquote class="code"><p class="quoted">
Carry out kweepaing:
<br />&#160;&#160;&#160;&#160;say &quot;You holler 'KWEEPA!' triumphantly.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11924_224" -->
<a id="c11924_224"></a><blockquote class="code"><p class="quoted">
The maze-sequence is a list of stored actions that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11925_224" -->
<a id="c11925_224"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;add jumping to the maze-sequence;
<br />&#160;&#160;&#160;&#160;add clapping to the maze-sequence;
<br />&#160;&#160;&#160;&#160;add kweepaing to the maze-sequence.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11926_224" -->
<a id="c11926_224"></a><blockquote class="code"><p class="quoted">
The attempted-sequence is a list of stored actions that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11927_224" -->
<a id="c11927_224"></a><blockquote class="code"><p class="quoted">
Every turn when the player is in the Fur-Lined Maze:
<br />&#160;&#160;&#160;&#160;truncate the attempted-sequence to the last two entries;
<br />&#160;&#160;&#160;&#160;add the current action to the attempted-sequence;
<br />&#160;&#160;&#160;&#160;if the attempted-sequence is the maze-sequence:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;That does it! You are instantly transported from the maze!&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11928_224" -->
<a id="c11928_224"></a><blockquote class="code"><p class="quoted">
Test me with &quot;hop / clap / clap / hop / kweepa / hop / clap / kweepa&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "435: I Didn't Come All The Way From Great Portland Street" "e177" -->
<a id="e177"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e177" class="eglink"><b>435</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e177" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">I Didn't Come All The Way From Great Portland Street</span></b></a><br />In this fiendishly difficult puzzle, which may perhaps owe some inspiration to a certain BBC Radio panel game (1967-), a list is used as a set of actions to help enforce the rule that the player must keep going for ten turns without hesitation, repetition, or deviating from the subject on the card.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_21.html#e177"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example177">
<p>There is very little to this, in fact. The tricky rule to enforce is Repetition: the player is forbidden to repeat any previously tried action. We keep track of this by keeping a set of past actions, which for want of a better term is called the &quot;tally&quot;. All we need to do is:</p>
<!-- START CODE "c11929_177" -->
<a id="c11929_177"></a><blockquote class="code"><p class="quoted">
if the current action is listed in the tally, challenge for &quot;Repetition of [the current action]!&quot;;
<br />otherwise add the current action to the tally.
</p></blockquote>
<!-- END CODE -->
<p>Note that the tally can never contain duplicates, and that when, at the end of the round, we print it out, we sort it first - this makes a more natural-looking sentence. (Sorting a list of actions uses the natural order for actions: compare the sequence on the Actions page of the Index.) The full text, then, is:</p>
<!-- START CODE "c11930_177" -->
<a id="c11930_177"></a><blockquote class="code"><p class="quoted">
&quot;I Didn't Come All The Way From Great Portland Street&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11931_177" -->
<a id="c11931_177"></a><blockquote class="code"><p class="quoted">
The Paris Theatre is a room. An instrument is a kind of thing. The violin, the tuba, the xylophone and the triangle are instruments. The violin is inside the case. The tuba, the xylophone, the radish, the case, the bust of Nicholas Parsons, the purple felt hat and the triangle are in the Paris Theatre.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11932_177" -->
<a id="c11932_177"></a><blockquote class="code"><p class="quoted">
The Round is a scene. The Round begins when play begins. The Round ends when the turn count is 10.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11933_177" -->
<a id="c11933_177"></a><blockquote class="code"><p class="quoted">
The tally is a list of stored actions that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11934_177" -->
<a id="c11934_177"></a><blockquote class="code"><p class="quoted">
When the Round begins:
<br />&#160;&#160;&#160;&#160;say &quot;'And the subject on the card is... musical instruments. Will you carry out for us something to do with that, please, for ten turns starting - now!'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11935_177" -->
<a id="c11935_177"></a><blockquote class="code"><p class="quoted">
When the Round ends:
<br />&#160;&#160;&#160;&#160;sort the tally;
<br />&#160;&#160;&#160;&#160;say &quot;Phweeep![paragraph break]'So, when the whistle goes ten turns are up, you get a point for acting when the whistle blows, and in that round you entertained us by [the tally], and you also get a bonus point for keeping going until the whistle went.'&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11936_177" -->
<a id="c11936_177"></a><blockquote class="code"><p class="quoted">
To challenge for (infraction - text):
<br />&#160;&#160;&#160;&#160;say &quot;Bzzzzt! 'And [one of]Clement Freud[or]Derek Nimmo[or]Kenneth Williams[or]Peter Jones[at random] has challenged.'[paragraph break]'[infraction]'[paragraph break]'Well, as it's your first time playing the game, and the audience was enjoying your contribution so much, I will disallow the challenge, you have [10 minus the turn count] turn[s] left on musical instruments, starting... now!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11937_177" -->
<a id="c11937_177"></a><blockquote class="code"><p class="quoted">
Before doing something:
<br />&#160;&#160;&#160;&#160;if the current action is listed in the tally, challenge for &quot;Repetition of [the current action]!&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise add the current action to the tally;
<br />&#160;&#160;&#160;&#160;if waiting, challenge for &quot;Hesitation!&quot; instead;
<br />&#160;&#160;&#160;&#160;if not looking and not waiting and the noun is not an instrument and the second noun is not an instrument, challenge for &quot;Deviation!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11938_177" -->
<a id="c11938_177"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / wait / examine bust / take tuba / get triangle / hit xylophone / get tuba / examine tuba / get violin&quot;.
</p></blockquote>
<!-- END CODE -->
<p>(The Paris Theatre in Lower Regent Street, London, was for many years the home of BBC radio panel games.)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "222: Anteaters" "e11" -->
<a id="e11"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e11" class="eglink"><b>222</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e11" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Anteaters</span></b></a><br />The player carries a gizmo that is able to record actions performed by the player, then force him to repeat them when the gizmo is dropped. This includes storing actions that apply to topics, as in "look up anteater colonies in the guide".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_12.html#e11"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example11">
<!-- START CODE "c11939_11" -->
<a id="c11939_11"></a><blockquote class="code"><p class="quoted">
 &quot;Anteaters&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11940_11" -->
<a id="c11940_11"></a><blockquote class="code"><p class="quoted">
A book is a kind of thing. Understand &quot;book&quot; as a book. A book has a table name called the contents.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11941_11" -->
<a id="c11941_11"></a><blockquote class="code"><p class="quoted">
Report consulting a book about:
<br />&#160;&#160;&#160;&#160;say &quot;You flip through [the noun], but find no reference to [the topic understood].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11942_11" -->
<a id="c11942_11"></a><blockquote class="code"><p class="quoted">
Instead of consulting a book about a topic listed in the contents of the noun:
<br />&#160;&#160;&#160;&#160;say &quot;[reply entry][paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11943_11" -->
<a id="c11943_11"></a><blockquote class="code"><p class="quoted">
The Guide to Desert Fauna is a book. The contents of the Guide is the Table of Critters.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11944_11" -->
<a id="c11944_11"></a><blockquote class="code"><p class="quoted">
Table of Critters
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;spines&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;You flip through the Guide for a while and eventually realise that spines are flora, not fauna.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;anteater colonies&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;The giant anteater, which grows to six feet in size and can kill a jaguar, is a solitary animal, found in many habitats, including grasslands, deciduous forests and rainforests. It does not form colonies. That's ants. They're actually quite easy to tell apart.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11945_11" -->
<a id="c11945_11"></a><blockquote class="code"><p class="quoted">
Death Valley is a room. The Guide is in the Valley.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11946_11" -->
<a id="c11946_11"></a><blockquote class="code"><p class="quoted">
The gizmo is in Death Valley. The gizmo has an action called idea. The description of the gizmo is &quot;The gizmo is hard to describe, but it projects an idea of [idea].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11947_11" -->
<a id="c11947_11"></a><blockquote class="code"><p class="quoted">
Before when the player carries the gizmo and the idea of the gizmo is waiting:
<br />&#160;&#160;&#160;&#160;say &quot;[The gizmo] eagerly soaks up the whole idea of [the current action].&quot;;
<br />&#160;&#160;&#160;&#160;now the idea of the gizmo is the current action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11948_11" -->
<a id="c11948_11"></a><blockquote class="code"><p class="quoted">
After dropping the gizmo:
<br />&#160;&#160;&#160;&#160;say &quot;The percussion of the fall seems to have shaken the gizmo's idea loose! There's nothing for it now but [idea of the gizmo].&quot;;
<br />&#160;&#160;&#160;&#160;try the idea of the gizmo;
<br />&#160;&#160;&#160;&#160;now the idea of the gizmo is waiting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11949_11" -->
<a id="c11949_11"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get guide / look up spines in guide / x gizmo / get gizmo / i / x gizmo / drop gizmo / get gizmo / look up anteater colonies in guide / x gizmo / drop gizmo&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "294: Shawn's Bad Day" "e256" -->
<a id="e256"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e256" class="eglink"><b>294</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e256" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Shawn's Bad Day</span></b></a><br />Allowing the player to EXAMINE ALL.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e256"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example256">
<p>We can add the handling of multiple objects to an existing action simply by adding in a line of grammar using &quot;[things]&quot;. In response, Inform will consider every object accepted by the token, and perform the action once for each of those objects. Thus:</p>
<!-- START CODE "c11950_256" -->
<a id="c11950_256"></a><blockquote class="code"><p class="quoted">
&quot;Shawn's Bad Day&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11951_256" -->
<a id="c11951_256"></a><blockquote class="code"><p class="quoted">
The Treasury is a room. The vault is a lockable locked closed openable container in the Treasury. It is fixed in place. &quot;A massive vault fills up one wall.&quot; The description is &quot;The vault's system includes [a list of things which are part of the vault].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11952_256" -->
<a id="c11952_256"></a><blockquote class="code"><p class="quoted">
A little green light, a little blue light, a little red light, a thin black pane of glass, a laser beam, a retinal scanner, a thumbprint ID plate, a dial, and a large lever are part of the vault.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11953_256" -->
<a id="c11953_256"></a><blockquote class="code"><p class="quoted">
The security guard is a man in the Treasury. The description is &quot;His name is Shawn, and he doesn't look happy.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11954_256" -->
<a id="c11954_256"></a><blockquote class="code"><p class="quoted">
The description of the green light is &quot;Off.&quot; The description of the blue light is &quot;Tranquilly on.&quot; The description of the red light is &quot;Angrily flashing.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11955_256" -->
<a id="c11955_256"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things]&quot; as examining.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11956_256" -->
<a id="c11956_256"></a><blockquote class="code"><p class="quoted">
Test me with &quot;examine all&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "327: The Best Till Last" "e30" -->
<a id="e30"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e30" class="eglink"><b>327</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e30" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Best Till Last</span></b></a><br />Reordering multiple objects for dramatic effect.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e30"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example30">
<p>If a single command asks to do many things, some dull and some exciting, we may want to save the good ones for the end.</p>
<!-- START CODE "c11957_30" -->
<a id="c11957_30"></a><blockquote class="code"><p class="quoted">
&quot;The Best Till Last&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11958_30" -->
<a id="c11958_30"></a><blockquote class="code"><p class="quoted">
The Funky Ignition Lounge is a room. &quot;This is where all evenings end.&quot; The stick of gelignite, the solid magnesium footstool, the vetiver candle, and the vodka bottle are here.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11959_30" -->
<a id="c11959_30"></a><blockquote class="code"><p class="quoted">
The burn description of the vetiver candle is &quot;It burns right down, expensively but gothically.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11960_30" -->
<a id="c11960_30"></a><blockquote class="code"><p class="quoted">
The player carries an inexpensive firework. The description of the firework is &quot;It is a cardboard tube with red and green stripes along the outside, and a fuse sticking out of the end.&quot; The burn description of the firework is &quot;It ignites gloriously! You take a few hasty steps back in order to avoid burning yourself, and not a moment too soon. Red and green sparks fly out of the tube, and there's a whistling noise punctuated by several loud cracks.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11961_30" -->
<a id="c11961_30"></a><blockquote class="code"><p class="quoted">
The player carries a lighter. The description of the lighter is &quot;You don't smoke, but you like to have access to flame now and then anyway.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11962_30" -->
<a id="c11962_30"></a><blockquote class="code"><p class="quoted">
Burning it with is an action applying to one thing and one carried thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11963_30" -->
<a id="c11963_30"></a><blockquote class="code"><p class="quoted">
Understand &quot;burn [things] with [something preferably held]&quot; as burning it with.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11964_30" -->
<a id="c11964_30"></a><blockquote class="code"><p class="quoted">
The block burning rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11965_30" -->
<a id="c11965_30"></a><blockquote class="code"><p class="quoted">
A thing has some text called the burn description.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11966_30" -->
<a id="c11966_30"></a><blockquote class="code"><p class="quoted">
Check burning something:
<br />&#160;&#160;&#160;&#160;if the player carries the lighter:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try burning the noun with the lighter;
<br />&#160;&#160;&#160;&#160;else:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try burning the noun with the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11967_30" -->
<a id="c11967_30"></a><blockquote class="code"><p class="quoted">
Check burning something with something when the second noun is not the lighter:
<br />&#160;&#160;&#160;&#160;say &quot;Your trusty lighter is the best flame source available to you.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11968_30" -->
<a id="c11968_30"></a><blockquote class="code"><p class="quoted">
Check burning something with something:
<br />&#160;&#160;&#160;&#160;if the burn description of the noun is &quot;&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Best not.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11969_30" -->
<a id="c11969_30"></a><blockquote class="code"><p class="quoted">
Carry out burning something with something:
<br />&#160;&#160;&#160;&#160;remove the noun from play.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11970_30" -->
<a id="c11970_30"></a><blockquote class="code"><p class="quoted">
Report burning something with something:
<br />&#160;&#160;&#160;&#160;say &quot;[burn description of the noun][line break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11971_30" -->
<a id="c11971_30"></a><blockquote class="code"><p class="quoted">
A multiple action processing rule when the action name part of the current action is the burning it with action (this is the orderly burn rule):
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;let dull list be a list of objects;
<br />&#160;&#160;&#160;&#160;let fun list be a list of objects;
<br />&#160;&#160;&#160;&#160;repeat with item running through L:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the burn description of the item is &quot;&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add item to dull list;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add item to fun list;
<br />&#160;&#160;&#160;&#160;let F be the dull list;
<br />&#160;&#160;&#160;&#160;add fun list to F;
<br />&#160;&#160;&#160;&#160;alter the multiple object list to F.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11972_30" -->
<a id="c11972_30"></a><blockquote class="code"><p class="quoted">
Test me with &quot;burn all with lighter&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "328: Western Art History 305" "e162" -->
<a id="e162"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e162" class="eglink"><b>328</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e162" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Western Art History 305</span></b></a><br />Allowing EXAMINE to see multiple objects with a single command.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e162"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example162">
<p>In a gallery, there are many individual things to look at, but you can also get a general impression by just examining them as a collection.</p>
<p>First, we'll make a kind for the paintings exhibited in the gallery, and then we'll also make a special object to represent all of them as a mass:</p>
<!-- START CODE "c11973_162" -->
<a id="c11973_162"></a><blockquote class="code"><p class="quoted">
&quot;Western Art History 305&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11974_162" -->
<a id="c11974_162"></a><blockquote class="code"><p class="quoted">
A painting is a kind of thing. A painting is usually fixed in place. Understand &quot;painting&quot; as a painting. Understand &quot;paintings&quot; as the plural of painting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11975_162" -->
<a id="c11975_162"></a><blockquote class="code"><p class="quoted">
The painting-collective is a thing. The printed name of the painting-collective is &quot;paintings&quot;. The description of the painting-collective is &quot;There's [a list of visible paintings].&quot;
</p></blockquote>
<!-- END CODE -->
<p>We could if we wanted tweak the description to be different in style in different rooms of the gallery, but this will do for now. Next we need to make it possible to type something like EXAMINE PAINTINGS, which normally wouldn't work because the Standard Rules don't tell Inform to recognise multiple objects with the EXAMINE command (unlike, say, DROP or TAKE). This is easy:</p>
<!-- START CODE "c11976_162" -->
<a id="c11976_162"></a><blockquote class="code"><p class="quoted">
Understand &quot;examine [things]&quot; as examining.
</p></blockquote>
<!-- END CODE -->
<p>Now to make use of the special object. If the player types EXAMINE PAINTINGS, the multiple object list will become a list of the visible paintings. The following rule looks at this list: if it contains more than one painting, it replaces them with the painting-collective instead. Now there's only one examining action, so we get a reply like &quot;There's an abstract painting, a pointilist painting and a French academic painting.&quot; instead of a list of descriptions of each in turn.</p>
<!-- START CODE "c11977_162" -->
<a id="c11977_162"></a><blockquote class="code"><p class="quoted">
A multiple action processing rule when the current action is examining (this is the examine kinds rule):
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;let F be L;
<br />&#160;&#160;&#160;&#160;let the painting count be 0;
<br />&#160;&#160;&#160;&#160;repeat with item running through L:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is a painting:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the painting count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;remove the item from F;
<br />&#160;&#160;&#160;&#160;if the painting count is greater than one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add the painting-collective to F;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;alter the multiple object list to F.
</p></blockquote>
<!-- END CODE -->
<p>And now some art to try this out on:</p>
<!-- START CODE "c11978_162" -->
<a id="c11978_162"></a><blockquote class="code"><p class="quoted">
Gallery is a room. &quot;Various paintings hang on the walls of this gallery, awaiting critical attention. A side chamber to the north contains smaller works.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11979_162" -->
<a id="c11979_162"></a><blockquote class="code"><p class="quoted">
The abstract painting, the pointilist painting, and the French academic painting are paintings in the Gallery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11980_162" -->
<a id="c11980_162"></a><blockquote class="code"><p class="quoted">
North of the Gallery is the Side Chamber. A handsome miniature is a painting in the Side Chamber. The description of the handsome miniature is &quot;The miniature depicts a uniformed soldier of the late 18th century, with braid on his shoulders and a curl in his beard.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11981_162" -->
<a id="c11981_162"></a><blockquote class="code"><p class="quoted">
The player carries a small notebook. The description of the notebook is &quot;It contains the notes you've taken so far towards a paper for Western Art History 305. So far you're still feeling a bit uninspired.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11982_162" -->
<a id="c11982_162"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x paintings / x all / n / x paintings / x all&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "411: Escape from the Seraglio" "e127" -->
<a id="e127"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e127" class="eglink"><b>411</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e127" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Escape from the Seraglio</span></b></a><br />Replacing the usual response to TAKE ALL so that instead of output such as "grapes: Taken. orange: Taken.", Inform produces variable responses in place of "grapes:".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_19.html#e127"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example127">
<!-- START CODE "c11983_127" -->
<a id="c11983_127"></a><blockquote class="code"><p class="quoted">
&quot;Escape from the Seraglio&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11984_127" -->
<a id="c11984_127"></a><blockquote class="code"><p class="quoted">
Section 1 - Special Announcement Rules
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11985_127" -->
<a id="c11985_127"></a><blockquote class="code"><p class="quoted">
The number of takes this turn is a number that varies. Every turn: now the number of takes this turn is 0.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11986_127" -->
<a id="c11986_127"></a><blockquote class="code"><p class="quoted">
The friskily announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11987_127" -->
<a id="c11987_127"></a><blockquote class="code"><p class="quoted">
This is the friskily announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;if taking:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the number of takes this turn;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if number of takes this turn is 1]First [otherwise if the number of takes this turn is 2]And then [otherwise if the number of takes this turn is 3]And I suppose also [otherwise if the number of takes this turn is 7]And on we wearily go with [otherwise if the number of takes this turn is 9]Oh, and not forgetting [otherwise]And [end if][the current item from the multiple object list]: [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11988_127" -->
<a id="c11988_127"></a><blockquote class="code"><p class="quoted">
Rule for deciding whether all includes the person asked: it does not.
<br />Rule for deciding whether all includes a person when taking: it does not.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11989_127" -->
<a id="c11989_127"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11990_127" -->
<a id="c11990_127"></a><blockquote class="code"><p class="quoted">
The Palm Chamber is a room. Sarissa is a woman in the Palm Chamber.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11991_127" -->
<a id="c11991_127"></a><blockquote class="code"><p class="quoted">
The Palm Chamber contains a bottle of ink, a quill pen, a tangerine, a bunch of grapes, a length of silken rope, some perfume, a cake of incense, a fitted leather bodice, a sapphire anklet, an illustrated novel, a whip, and a heavy iron key.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11992_127" -->
<a id="c11992_127"></a><blockquote class="code"><p class="quoted">
A persuasion rule for asking Sarissa to try taking the key:
<br />&#160;&#160;&#160;&#160;say &quot;Sarissa nervously demurs, knowing that it is forbidden.&quot;;
<br />&#160;&#160;&#160;&#160;persuasion fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11993_127" -->
<a id="c11993_127"></a><blockquote class="code"><p class="quoted">
A persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11994_127" -->
<a id="c11994_127"></a><blockquote class="code"><p class="quoted">
Test me with &quot;take all / drop all / sarissa, take all&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "428: Formicidae" "e156" -->
<a id="e156"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e156" class="eglink"><b>428</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e156" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Formicidae</span></b></a><br />Manipulating the order in which items are handled after TAKE ALL.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_21.html#e156"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example156">
<p>Suppose we have an item that produces an interesting result the first time the player lifts it -- a rock with dangerous ants revealed underneath. The effect of the surprise is a little weakened, though, if the player sees that response as the result of a TAKE ALL, when it might be printed like this:</p>
<!-- START CODE "c11995_156" -->
<a id="c11995_156"></a><blockquote class="code"><p class="quoted">
&gt;[3] get all
<br />tent peg: Taken.
<br />water flask: Taken.
<br />trading permit: Taken.
<br />innocent-looking rock: You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.
<br />rusty nail: Taken.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11996_156" -->
<a id="c11996_156"></a><blockquote class="code"><p class="quoted">
[Your score has just gone down by two points.]
</p></blockquote>
<!-- END CODE -->
<p>The calm response to &quot;rusty nail&quot; looks odd now, and the score change is disconnected from the event that caused it.</p>
<p>To manage this, we might institute a system so that interesting objects are handled last in their list, like so:</p>
<!-- START CODE "c11997_156" -->
<a id="c11997_156"></a><blockquote class="code"><p class="quoted">
&quot;Formicidae&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11998_156" -->
<a id="c11998_156"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c11999_156" -->
<a id="c11999_156"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12000_156" -->
<a id="c12000_156"></a><blockquote class="code"><p class="quoted">
The magic rule is listed before the generate action rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12001_156" -->
<a id="c12001_156"></a><blockquote class="code"><p class="quoted">
A thing has a number called dramatic potential.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12002_156" -->
<a id="c12002_156"></a><blockquote class="code"><p class="quoted">
This is the magic rule:
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;if the number of entries in L is greater than 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort L in dramatic potential order;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;alter the multiple object list to L.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12003_156" -->
<a id="c12003_156"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12004_156" -->
<a id="c12004_156"></a><blockquote class="code"><p class="quoted">
The Foothills is a room. &quot;The land has become hilly; though the soil is still mostly coarse yellow sand, clumps of grass are able to grow in the shadier places. Deep wagon ruts running from the southwest towards the mountains in the northeast show where generations of caravans have already passed.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12005_156" -->
<a id="c12005_156"></a><blockquote class="code"><p class="quoted">
The water flask, the tent peg, and the trading permit are things in Foothills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12006_156" -->
<a id="c12006_156"></a><blockquote class="code"><p class="quoted">
The rock is a thing in Foothills. Before printing the name of the rock when the rock is not handled: say &quot;innocent-looking &quot;. The dramatic potential of the rock is 10.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12007_156" -->
<a id="c12007_156"></a><blockquote class="code"><p class="quoted">
The rusty nail is a thing in Foothills.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12008_156" -->
<a id="c12008_156"></a><blockquote class="code"><p class="quoted">
The ant colony is a fixed in place thing. &quot;A busy group of ants are crawling to and fro in the unaccustomed sun.&quot; Rule for deciding whether all includes the ant colony while taking: it does not.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12009_156" -->
<a id="c12009_156"></a><blockquote class="code"><p class="quoted">
Instead of taking the rock when the rock is handled:
<br />&#160;&#160;&#160;&#160;say &quot;It might still have a stray ant or two on it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12010_156" -->
<a id="c12010_156"></a><blockquote class="code"><p class="quoted">
After taking the rock:
<br />&#160;&#160;&#160;&#160;now the rock is handled;
<br />&#160;&#160;&#160;&#160;move ant colony to the location;
<br />&#160;&#160;&#160;&#160;move the rock to the location;
<br />&#160;&#160;&#160;&#160;say &quot;You reach for the rock and turn it over to reveal a thriving colony of flesh-eating ants. Needless to say, you drop the rock and jump back with a decidedly effeminate scream. They can probably hear you all the way back in the base camp.&quot;;
<br />&#160;&#160;&#160;&#160;decrease score by 2.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12011_156" -->
<a id="c12011_156"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get peg / drop peg / get all / get rock&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that while one could also manipulate the object list to add or remove items at this stage, there's a simpler way to control what Inform considers &quot;ALL&quot; to mean in commands: see the activity &quot;Deciding whether all includes&quot; in the activities chapter.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "431: The Facts Were These" "e135" -->
<a id="e135"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e135" class="eglink"><b>431</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e135" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Facts Were These</span></b></a><br />Creating a variant GIVE action that lets the player give multiple objects simultaneously with commands like GIVE ALL TO ATTENDANT or GIVE THREE DOLLARS TO ATTENDANT or GIVE PIE AND HAT TO ATTENDANT. The attendant accepts the gifts only if their total combined value matches some minimum amount.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_21.html#e135"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example135">
<p>Occasionally it happens that we want to process an action on multiple items differently than we would if the player had just typed each of the individual actions separately. In this example, the reason is that we can only successfully GIVE items when their combined value passes a certain threshold amount; otherwise the recipient will reject them.</p>
<p>This works as an implementation of money, if we give value only to cash objects (though several other implementations of cash are available, most of which are simpler and more efficient). We could also imagine a mechanic like this being used for a bargaining or auction game as well, given a society that deals in objects rather than credits.</p>
<p>In order to consider all the items in the gift at once, we create an action that applies to multiple objects, but will in fact test the whole object collection during the first pass and print a definitive answer to whether the action succeeded. All subsequent times the game consults the rulebook will be stopped at the very beginning. No further processing will occur or output be printed.</p>
<!-- START CODE "c12012_135" -->
<a id="c12012_135"></a><blockquote class="code"><p class="quoted">
&quot;The Facts Were These&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12013_135" -->
<a id="c12013_135"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<p>We start by creating the idea that everything in the game has a monetary value:</p>
<!-- START CODE "c12014_135" -->
<a id="c12014_135"></a><blockquote class="code"><p class="quoted">
A price is a kind of value. $10 specifies a price. A thing has a price.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12015_135" -->
<a id="c12015_135"></a><blockquote class="code"><p class="quoted">
Understand &quot;give [things preferably held] to [someone]&quot; as multiply-giving it to. Understand &quot;give [things] to [someone]&quot; as multiply-giving it to.  Multiply-giving it to is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<p>A subtlety here: we say &quot;things preferably held&quot; to prefer items that the player is holding (so if the player has two dollars in hand and a third lies on the ground, he will use just the two he has).</p>
<p>The second grammar line allows Inform to match things that aren't held if it can't make up the list from things that are. If all three dollars are on the ground, the player can pick them up before spending them.</p>
<p>We do not, however, make multiply-giving apply to a &quot;carried&quot; item, because that will generate implicit takes of those items in a way that will mess up our action reporting. Instead, we're going to build the implicit takes into the system in a different way, one that permits us to collate the reports more attractively and print a short, one-sentence list of anything that the player had to pick up.</p>
<!-- START CODE "c12016_135" -->
<a id="c12016_135"></a><blockquote class="code"><p class="quoted">
A thing can be given or ungiven. A thing is usually ungiven.
</p></blockquote>
<!-- END CODE -->
<p>This is for record-keeping purposes so that we can print an attractive list of what was given at the end of the turn.</p>
<!-- START CODE "c12017_135" -->
<a id="c12017_135"></a><blockquote class="code"><p class="quoted">
First check multiply-giving it to:
<br />&#160;&#160;&#160;&#160;if already gave at the office is true:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12018_135" -->
<a id="c12018_135"></a><blockquote class="code"><p class="quoted">
Already gave at the office is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<p>&quot;Already gave at the office&quot; is the perhaps-excessively-named flag that keeps track of whether we've already done this action once.</p>
<!-- START CODE "c12019_135" -->
<a id="c12019_135"></a><blockquote class="code"><p class="quoted">
Check multiply-giving something to the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can hardly bribe yourself.[paragraph break]&quot; instead;
</p></blockquote>
<!-- END CODE -->
<p>The following rule is longish because it processes the entire list at once, generating implicit takes if necessary (but processing those implicit takes silently according to its own special rule, so that the output can be managed attractively). We are also, at the same time, calculating the total value of the player's offer.</p>
<!-- START CODE "c12020_135" -->
<a id="c12020_135"></a><blockquote class="code"><p class="quoted">
Check multiply-giving it to:
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;let bribe-price be $0;
<br />&#160;&#160;&#160;&#160;repeat with item running through L:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player does not carry the item:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;abide by the ungivability rules for the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the implicitly taking activity with the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player does not carry the item:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can't include [the item] in your bribe, since you're not holding [them]![paragraph break]&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase bribe-price by the price of item;
<br />&#160;&#160;&#160;&#160;if the number of entries in the recently-collected list is greater than 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through the recently-collected list:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now item is marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You pick up [the list of marked for listing things] and make your offer. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now everything is unmarked for listing;
<br />&#160;&#160;&#160;&#160;if the bribe-price is less than the price of the second noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The second noun] angrily rejects your piffling bribe.[paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>The bit about making some items &quot;marked for listing&quot;, above, rather than printing the list directly, is that using the &quot;[the list of....]&quot; syntax guarantees that Inform will respect grouping rules in writing its description. For instance, if the player has automatically taken all three dollars, the output will say &quot;the three dollars&quot; instead of &quot;the dollar, the dollar, and the dollar.&quot;</p>
<!-- START CODE "c12021_135" -->
<a id="c12021_135"></a><blockquote class="code"><p class="quoted">
Carry out multiply-giving it to:
<br />&#160;&#160;&#160;&#160;let L be the multiple object list;
<br />&#160;&#160;&#160;&#160;repeat with item running through L:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the second noun carries the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is given;
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12022_135" -->
<a id="c12022_135"></a><blockquote class="code"><p class="quoted">
Report multiply-giving it to:
<br />&#160;&#160;&#160;&#160;say &quot;[The second noun] rather shamefacedly tucks [the list of given things] away into a pocket.[paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Now we create our own variation of implicitly taking in order to customize the output for the multiply-giving action. The &quot;ungivability rules&quot; should disallow any object that the player absolutely cannot take, because we want &quot;carry out the implicitly taking activity&quot; to succeed every time -- and therefore not print out any less-attractive results from implicit takes that don't succeed. Otherwise, the player's GIVE TREE AND DOG TO ATTENDANT might produce the reply &quot;That's fixed in place&quot; -- without specifying which object is fixed in place.</p>
<p>Because of the way this works, we will want to be careful: if we have any &quot;instead of taking...&quot; rules for special objects in the game, we should be sure to mirror those with an ungivability rule to print something more suitable in the case that the player tries taking that object as part of the multiple giving action.</p>
<!-- START CODE "c12023_135" -->
<a id="c12023_135"></a><blockquote class="code"><p class="quoted">
The ungivability rules are an object-based rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12024_135" -->
<a id="c12024_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for a person:
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;Slavery is illegal.[paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12025_135" -->
<a id="c12025_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for something (called the item) which is enclosed by someone who is not the player:
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;[The item] [aren't] yours to give.[paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12026_135" -->
<a id="c12026_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for something which encloses the player:
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;You don't want to end up as part of the gift.[paragraph break]&quot; instead;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12027_135" -->
<a id="c12027_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for something (called the item) which is part of something:
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;[The item] [are] attached to [a random thing which incorporates the item][paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12028_135" -->
<a id="c12028_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for something (called the item) which is scenery:
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;[The item] [are] unremovable.[paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12029_135" -->
<a id="c12029_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for something (called the item) which is fixed in place:
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;[The item] [are] fixed in place.[paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12030_135" -->
<a id="c12030_135"></a><blockquote class="code"><p class="quoted">
An ungivability rule for a direction (called the item):
<br />&#160;&#160;&#160;&#160;now already gave at the office is true;
<br />&#160;&#160;&#160;&#160;say &quot;[The item] [are] not susceptible to giving.[paragraph break]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12031_135" -->
<a id="c12031_135"></a><blockquote class="code"><p class="quoted">
Rule for implicitly taking something (called target) while multiply-giving:
<br />&#160;&#160;&#160;&#160;silently try taking the target;
<br />&#160;&#160;&#160;&#160;if the player carries the target:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;add the target to the recently-collected list.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12032_135" -->
<a id="c12032_135"></a><blockquote class="code"><p class="quoted">
The recently-collected list is a list of objects that varies.
</p></blockquote>
<!-- END CODE -->
<p>And since we don't want to list the individual objects separately:</p>
<!-- START CODE "c12033_135" -->
<a id="c12033_135"></a><blockquote class="code"><p class="quoted">
The selectively announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12034_135" -->
<a id="c12034_135"></a><blockquote class="code"><p class="quoted">
This is the selectively announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;if multiply-giving:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;do nothing;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>And now, since this ought to work symmetrically if the player provides just one high-value item:</p>
<!-- START CODE "c12035_135" -->
<a id="c12035_135"></a><blockquote class="code"><p class="quoted">
Check giving something to someone:
<br />&#160;&#160;&#160;&#160;if the price of the noun is less than the price of the second noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The second noun] angrily rejects your piffling bribe.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>As we've seen elsewhere, the giving action by default returns a refusal, but is also written to start working if we remove the blockage. So we do that here, and revise the report rule to match the report rule we have for multiple giving.</p>
<!-- START CODE "c12036_135" -->
<a id="c12036_135"></a><blockquote class="code"><p class="quoted">
The block giving rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12037_135" -->
<a id="c12037_135"></a><blockquote class="code"><p class="quoted">
The new report giving rule is listed instead of the standard report giving rule in the report giving it to rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12038_135" -->
<a id="c12038_135"></a><blockquote class="code"><p class="quoted">
This is the new report giving rule:
<br />&#160;&#160;&#160;&#160;say &quot;[The second noun] rather shamefacedly tucks [the noun] away into a pocket.&quot;
</p></blockquote>
<!-- END CODE -->
<p>After each instance of the multiply-giving action, we need to clear the variables we used to track its state. We could do this in &quot;Before reading a command&quot;, but that's unsafe because the player might type GIVE PIE AND CAP TO ATTENDANT. GIVE DOLLARS TO ATTENDANT. all on a single line, and we would like to be able to clear the variables between one action and the next. The correct place to attach this behavior is immediately before the generate action rule, thus:</p>
<!-- START CODE "c12039_135" -->
<a id="c12039_135"></a><blockquote class="code"><p class="quoted">
The before-generation rule is listed before the generate action rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12040_135" -->
<a id="c12040_135"></a><blockquote class="code"><p class="quoted">
This is the before-generation rule:
<br />&#160;&#160;&#160;&#160;now every thing is ungiven;
<br />&#160;&#160;&#160;&#160;now already gave at the office is false;
<br />&#160;&#160;&#160;&#160;truncate the recently-collected list to 0 entries.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12041_135" -->
<a id="c12041_135"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12042_135" -->
<a id="c12042_135"></a><blockquote class="code"><p class="quoted">
The Morgue Office is a room. &quot;This is not the Morgue itself; this is only its outer office. The familiar room full of silver drawers and cold air lies beyond.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12043_135" -->
<a id="c12043_135"></a><blockquote class="code"><p class="quoted">
The Morgue Attendant is a man in the Morgue Office. &quot;The Attendant has seen you come through a number of times, and is becoming suspicious of your abiding interest in dead people.&quot; The description is &quot;The Morgue Attendant is fifty-four years, six months, five days, and three minutes old.&quot; The price of the Morgue Attendant is $3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12044_135" -->
<a id="c12044_135"></a><blockquote class="code"><p class="quoted">
A dollar is a kind of thing. The player carries three dollars.  The price of a dollar is always $1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12045_135" -->
<a id="c12045_135"></a><blockquote class="code"><p class="quoted">
The player carries a miniature rhubarb pie. The price of the miniature rhubarb pie is $5.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12046_135" -->
<a id="c12046_135"></a><blockquote class="code"><p class="quoted">
The player carries a knitted cap. The price of the knitted cap is $2.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12047_135" -->
<a id="c12047_135"></a><blockquote class="code"><p class="quoted">
Test me with &quot;test dollars / purloin three dollars / test multi-line / purloin three dollars / purloin pie / purloin cap / test specificity / purloin three dollars / test largesse / test mixed-gift&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12048_135" -->
<a id="c12048_135"></a><blockquote class="code"><p class="quoted">
Test multi-line with &quot;give dollar and pie to attendant. give dollars and cap to attendant&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12049_135" -->
<a id="c12049_135"></a><blockquote class="code"><p class="quoted">
Test dollars with &quot;drop all / give dollar to Morgue Attendant / give dollars to Morgue Attendant / get dollars / give dollars to morgue attendant / purloin three dollars / drop dollars / give dollars to Morgue Attendant&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12050_135" -->
<a id="c12050_135"></a><blockquote class="code"><p class="quoted">
Test specificity with &quot;give three dollars to Morgue Attendant&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12051_135" -->
<a id="c12051_135"></a><blockquote class="code"><p class="quoted">
Test largesse with &quot;give pie to Morgue Attendant&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12052_135" -->
<a id="c12052_135"></a><blockquote class="code"><p class="quoted">
Test mixed-gift with &quot;give dollar and cap to Morgue Attendant / get cap / give dollar and cap to morgue attendant / give me and dollar to attendant&quot;.
</p></blockquote>
<!-- END CODE -->
<p>PURLOIN, used in the tests here, is a special debugging command that allows the player to acquire objects that wouldn't otherwise be possible to take. It is only active in non-release versions of the story. For more about debugging commands, see the chapter on Testing and Debugging.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "289: Alpaca Farm" "e7" -->
<a id="e7"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e7" class="eglink"><b>289</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e7" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Alpaca Farm</span></b></a><br />A generic USE action which behaves sensibly with a range of different objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e7"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example7">
<p>This example takes the ordering of grammar lines to its logical extreme, sorting the player's input into different categories depending on the kind and condition of the objects mentioned.</p>
<!-- START CODE "c12053_7" -->
<a id="c12053_7"></a><blockquote class="code"><p class="quoted">
&quot;Alpaca Farm&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12054_7" -->
<a id="c12054_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [an edible thing]&quot; as eating.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12055_7" -->
<a id="c12055_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [a wearable thing]&quot; as wearing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12056_7" -->
<a id="c12056_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [a closed openable container]&quot; as opening. Understand &quot;use [an open openable container]&quot; as closing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12057_7" -->
<a id="c12057_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [something preferably held] on [a locked lockable thing]&quot; as unlocking it with (with nouns reversed). Understand &quot;use [something preferably held] on [an unlocked lockable thing]&quot; as locking it with (with nouns reversed).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12058_7" -->
<a id="c12058_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [a switched off device]&quot; as switching on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12059_7" -->
<a id="c12059_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [something]&quot; as using. Using is an action applying to one thing. Carry out using: say &quot;You will have to be more specific about your intentions.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12060_7" -->
<a id="c12060_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [a door]&quot; as opening. Understand &quot;use [an open door]&quot; as entering.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12061_7" -->
<a id="c12061_7"></a><blockquote class="code"><p class="quoted">
The Llama Pen is a room. North of the Pen is the gate. The gate is a door. North of the gate is the Rocky Path. The brown llama is an animal in the Llama Pen.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12062_7" -->
<a id="c12062_7"></a><blockquote class="code"><p class="quoted">
Appearance is a kind of value. The appearances are muddy, scruffy, fluffy, and dapper. The brown llama has an appearance. The brown llama is muddy. Before printing the name of the brown llama, say &quot;[appearance] &quot;. Before printing the name of the brown llama while grooming: say &quot;now-[if appearance of the brown llama is less than dapper]merely-[end if]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12063_7" -->
<a id="c12063_7"></a><blockquote class="code"><p class="quoted">
A grooming tool is a kind of thing. Understand &quot;use [a grooming tool] on [something]&quot; as grooming it with (with nouns reversed). Grooming it with is an action applying to two things. Understand &quot;groom [something] with [something]&quot; as grooming it with.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12064_7" -->
<a id="c12064_7"></a><blockquote class="code"><p class="quoted">
Carry out grooming it with:
<br />&#160;&#160;&#160;&#160;if the appearance of the noun is less than dapper, now the appearance of the noun is the appearance after the appearance of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12065_7" -->
<a id="c12065_7"></a><blockquote class="code"><p class="quoted">
Report grooming it with:
<br />&#160;&#160;&#160;&#160;say &quot;You attend diligently to the appearance and hygiene of [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12066_7" -->
<a id="c12066_7"></a><blockquote class="code"><p class="quoted">
Instead of using a grooming tool in the presence of the brown llama:
<br />&#160;&#160;&#160;&#160;try grooming the brown llama with the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12067_7" -->
<a id="c12067_7"></a><blockquote class="code"><p class="quoted">
The player carries some nail nippers, a slicker brush, and an apple. The apple is edible. The brush and the nippers are grooming tools. The player wears a sombrero.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12068_7" -->
<a id="c12068_7"></a><blockquote class="code"><p class="quoted">
The description of the nail nippers is &quot;Ten inches long, to give you the necessary leverage to cut tough llama toenails. It still helps to soften them up by making the llama stand in a bucket of water first, though.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12069_7" -->
<a id="c12069_7"></a><blockquote class="code"><p class="quoted">
The description of the slicker brush is &quot;Fine, angled soft bristles set into a broad back, perfect for removing mud from the coat of a long-woolled llama.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12070_7" -->
<a id="c12070_7"></a><blockquote class="code"><p class="quoted">
The industrial-strength blower is a fixed in place device in the Llama Pen. &quot;Attached to the nearest wall, on its own movable boom, is an industrial-strength blower for doing llama hair.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12071_7" -->
<a id="c12071_7"></a><blockquote class="code"><p class="quoted">
Understand &quot;use [switched off blower]&quot; as switching on. Understand &quot;use [switched on blower] on [brown llama]&quot; as grooming it with (with nouns reversed). Instead of using the blower in the presence of the brown llama, try grooming the brown llama with the blower.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12072_7" -->
<a id="c12072_7"></a><blockquote class="code"><p class="quoted">
Test me with &quot;use gate / use blower / use nippers / use brush / use apple / remove sombrero / use sombrero&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Whether we actually want a USE action is a subject of some theoretical debate in the IF community. On the one hand, it helps avoid guess-the-verb problems where the player cannot figure out what term to use in order to express a fairly simple idea. On the other, it encourages the player to think that all items have one and exactly one use, rather than getting him to consider the range of possibilities that arise from having a complex vocabulary.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "368: Apples" "e13" -->
<a id="e13"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e13" class="eglink"><b>368</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e13" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Apples</span></b></a><br />Prompting the player on how to disambiguate otherwise similar objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e13"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example13">
<p>Inform by default detects whether two objects can be disambiguated by any vocabulary available to the player. If so, it asks a question; if not, it picks one of the identical objects at random.</p>
<p>Generally this produces good behavior. Occasionally, though, two objects have some distinguishing characteristic that doesn't appear in the object name. For instance, suppose we've created a class of apples that can be told apart depending on whether they've been bitten or not:</p>
<!-- START CODE "c12073_13" -->
<a id="c12073_13"></a><blockquote class="code"><p class="quoted">
An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is &quot;It is [consumption].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12074_13" -->
<a id="c12074_13"></a><blockquote class="code"><p class="quoted">
Understand the consumption property as describing an apple.
</p></blockquote>
<!-- END CODE -->
<p>The player can meaningfully type</p>
<!-- START CODE "c12075_13" -->
<a id="c12075_13"></a><blockquote class="code"><p class="quoted">
&gt;EAT BITTEN APPLE
</p></blockquote>
<!-- END CODE -->
<p>or</p>
<!-- START CODE "c12076_13" -->
<a id="c12076_13"></a><blockquote class="code"><p class="quoted">
&gt;EAT PRISTINE APPLE
</p></blockquote>
<!-- END CODE -->
<p>but if he types</p>
<!-- START CODE "c12077_13" -->
<a id="c12077_13"></a><blockquote class="code"><p class="quoted">
&gt;EAT APPLE
</p></blockquote>
<!-- END CODE -->
<p>Inform will, annoyingly, ask</p>
<!-- START CODE "c12078_13" -->
<a id="c12078_13"></a><blockquote class="code"><p class="quoted">
Which do you mean, an apple or the apple?
</p></blockquote>
<!-- END CODE -->
<p>This gives the player no indication of why Inform is making a distinction. So here we add a special &quot;printing the name&quot; rule to get around that situation:</p>
<!-- START CODE "c12079_13" -->
<a id="c12079_13"></a><blockquote class="code"><p class="quoted">
 &quot;Apples&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12080_13" -->
<a id="c12080_13"></a><blockquote class="code"><p class="quoted">
Orchard is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12081_13" -->
<a id="c12081_13"></a><blockquote class="code"><p class="quoted">
An apple is a kind of thing. Consumption is a kind of value. The consumptions are pristine and bitten. An apple has a consumption. The description of an apple is &quot;It is [consumption].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12082_13" -->
<a id="c12082_13"></a><blockquote class="code"><p class="quoted">
Understand the consumption property as describing an apple.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12083_13" -->
<a id="c12083_13"></a><blockquote class="code"><p class="quoted">
Before printing the name of an apple while asking which do you mean: say &quot;[consumption] &quot;. Before printing the plural name of an apple while asking which do you mean: say &quot;[consumption] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12084_13" -->
<a id="c12084_13"></a><blockquote class="code"><p class="quoted">
The player carries three apples.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12085_13" -->
<a id="c12085_13"></a><blockquote class="code"><p class="quoted">
Instead of eating a pristine apple (called the fruit):
<br />&#160;&#160;&#160;&#160;say &quot;You take a satisfying bite.&quot;;
<br />&#160;&#160;&#160;&#160;now the fruit is bitten.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12086_13" -->
<a id="c12086_13"></a><blockquote class="code"><p class="quoted">
Instead of eating a bitten apple (called the fruit):
<br />&#160;&#160;&#160;&#160;say &quot;You consume the apple entirely.&quot;;
<br />&#160;&#160;&#160;&#160;now the fruit is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>Inform will also separate the bitten from the pristine apples in inventory listings and room descriptions, even though it's not clear why; we can improve on that behavior thus:</p>
<!-- START CODE "c12087_13" -->
<a id="c12087_13"></a><blockquote class="code"><p class="quoted">
Before listing contents: group apples together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12088_13" -->
<a id="c12088_13"></a><blockquote class="code"><p class="quoted">
Rule for grouping together an apple (called target):
<br />&#160;&#160;&#160;&#160;let source be the holder of the target;
<br />&#160;&#160;&#160;&#160;say &quot;[number of apples held by the source in words] apple[s], some bitten&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12089_13" -->
<a id="c12089_13"></a><blockquote class="code"><p class="quoted">
Before printing the plural name of an apple (called target):
<br />&#160;&#160;&#160;&#160;let source be the holder of the target;
<br />&#160;&#160;&#160;&#160;if every apple held by the source is bitten, say &quot;bitten &quot;;
<br />&#160;&#160;&#160;&#160;if every apple held by the source is pristine, say &quot;pristine &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12090_13" -->
<a id="c12090_13"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / eat apple / i / eat apple / pristine / i / eat apple / pristine / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "380: WXPQ" "e444" -->
<a id="e444"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e444" class="eglink"><b>380</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e444" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">WXPQ</span></b></a><br />Creating a more sensible parser error than "that noun did not make sense in this context".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e444"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example444">
<p>The parser error &quot;That noun did not make sense in this context&quot; arises instead of &quot;You can't see any such thing&quot; when the player uses a command that could apply to any item in the game -- that is, a command such as</p>
<!-- START CODE "c12091_444" -->
<a id="c12091_444"></a><blockquote class="code"><p class="quoted">
Understand &quot;go to [any room]&quot; as going directly to.
<br />Understand &quot;talk about [any subject]&quot; as discussing.
</p></blockquote>
<!-- END CODE -->
<p>...and so on. The idea here is that &quot;You can't see any such thing&quot; isn't a sensible rejoinder when the player doesn't really need to be able to see the object.</p>
<p>Nonetheless, &quot;That noun did not make sense...&quot; is itself a fairly dry and uninformative response, and we may want to override it to something more appropriate for the specific kind of context in which it might appear. For instance:</p>
<!-- START CODE "c12092_444" -->
<a id="c12092_444"></a><blockquote class="code"><p class="quoted">
 &quot;WXPQ&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12093_444" -->
<a id="c12093_444"></a><blockquote class="code"><p class="quoted">
WXPQ Studio is a room. &quot;After about 2 AM, no one is listening anyway, so you can more or less make up whatever you like to fill the airwaves.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12094_444" -->
<a id="c12094_444"></a><blockquote class="code"><p class="quoted">
John F Kennedy, Elvis, Ralph Nader, Tony Blair, and single-origin chocolate are things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12095_444" -->
<a id="c12095_444"></a><blockquote class="code"><p class="quoted">
Understand &quot;talk about [any thing]&quot; or &quot;discuss [any thing]&quot; as discussing. Discussing is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12096_444" -->
<a id="c12096_444"></a><blockquote class="code"><p class="quoted">
Carry out discussing:
<br />&#160;&#160;&#160;&#160;say &quot;You babble for a while about your [one of]interest in[or]hatred of[or]passionate devotion to[or]conspiracy theory concerning[or]mother's secret love affair with[as decreasingly likely outcomes] [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12097_444" -->
<a id="c12097_444"></a><blockquote class="code"><p class="quoted">
Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
<br />&#160;&#160;&#160;&#160;say &quot;For once, you're at a loss for anything to say.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12098_444" -->
<a id="c12098_444"></a><blockquote class="code"><p class="quoted">
Test me with &quot;discuss Elvis / discuss Kennedy / discuss chocolate / discuss narratology vs ludology debate&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that this solution works as simply as it does because we only have one command in the game that can apply to an &quot;[any]&quot; token. If we had several, we'd need to distinguish between the parser error attached to &quot;discuss&quot; and the parser error attached to &quot;go to&quot; (for instance). In that case, we might instead write something like</p>
<!-- START CODE "c12099_444" -->
<a id="c12099_444"></a><blockquote class="code"><p class="quoted">
Rule for printing a parser error when the latest parser error is the noun did not make sense in that context error:
<br />if the player's command includes &quot;go&quot;:
<br />&#160;&#160;&#160;&#160;say &quot;There's no such place you know how to get to.&quot;;
<br />otherwise:
<br />&#160;&#160;&#160;&#160;say &quot;For once, you're at a loss for anything to say.&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "370: Walls and Noses" "e423" -->
<a id="e423"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e423" class="eglink"><b>370</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e423" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Walls and Noses</span></b></a><br />Responding to "EXAMINE WALL" with "In which direction?", and to "EXAMINE NOSE" with "Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?"</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e423"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example423">
<p>Suppose we want our game to respond to &quot;EXAMINE WALL&quot; with &quot;In which direction?&quot;, and to &quot;EXAMINE NOSE&quot; with &quot;Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?&quot;</p>
<p>For the case of EXAMINE WALL, we need a way to determine whether every item being disambiguated is a direction. We'll start by making a &quot;matched&quot; adjective which will identify items being disambiguated:</p>
<!-- START CODE "c12100_423" -->
<a id="c12100_423"></a><blockquote class="code"><p class="quoted">
&quot;Walls and Noses&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12101_423" -->
<a id="c12101_423"></a><blockquote class="code"><p class="quoted">
Eight-Walled Chamber is a room. &quot;A perfectly octagonal room whose walls are tinted in various hues.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12102_423" -->
<a id="c12102_423"></a><blockquote class="code"><p class="quoted">
Understand &quot;wall&quot; as a direction.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12103_423" -->
<a id="c12103_423"></a><blockquote class="code"><p class="quoted">
Definition: a direction is matched if it fits the parse list.
<br />Definition: a room is matched if it fits the parse list.
<br />Definition: a thing is matched if it fits the parse list.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12104_423" -->
<a id="c12104_423"></a><blockquote class="code"><p class="quoted">
Rule for asking which do you mean when everything matched is direction:
<br />&#160;&#160;&#160;&#160;say &quot;In which direction?&quot;
</p></blockquote>
<!-- END CODE -->
<p>Checking the parse list requires a bit of behind-the-scenes work with Inform 6. Fortunately, you don't have to understand this entirely in order to use the rest of the example:</p>
<!-- START CODE "c12105_423" -->
<a id="c12105_423"></a><blockquote class="code"><p class="quoted">
To decide whether (N - an object) fits the parse list:
<br />&#160;&#160;&#160;&#160;(- (FindInParseList({N})) -)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12106_423" -->
<a id="c12106_423"></a><blockquote class="code"><p class="quoted">
Include (-
<br />[ FindInParseList obj i k marker;
<br />&#160;&#160;&#160;&#160;marker = 0;
<br />&#160;&#160;&#160;&#160;for (i=1 : i&lt;=number_of_classes : i++) {
<br />&#160;&#160;&#160;&#160;while (((match_classes--&gt;marker) ~= i) &amp;&amp; ((match_classes--&gt;marker) ~= -i)) marker++;
<br />&#160;&#160;&#160;&#160;k = match_list--&gt;marker;
<br />&#160;&#160;&#160;&#160;if (k==obj) rtrue;
<br />&#160;&#160;&#160;&#160;}
<br />&#160;&#160;&#160;&#160;rfalse;
<br />];
<br />-)
</p></blockquote>
<!-- END CODE -->
<p>Now that we've defined our &quot;matched&quot; adjective, we can use it for other purposes as well -- even generating our own lists. Our second challenge was to respond to EXAMINE NOSE with &quot;Whose nose do you mean, Frederica's, Betty's, Wilma's or your own?&quot;</p>
<p>Here we need to change the way the question is worded (not &quot;which do you mean&quot; but &quot;whose nose do you mean&quot;). We also have to the names of the noses as they're printed in this particular context, so that they don't repeat the word &quot;nose&quot; over and over. And -- as a point of good English style -- we also want &quot;your own&quot; nose always to be last on the list.</p>
<p>For this purpose we may want to use the built-in &quot;Complex Listing&quot; extension, which allows us to print specially ordered lists. So:</p>
<!-- START CODE "c12107_423" -->
<a id="c12107_423"></a><blockquote class="code"><p class="quoted">
Include Complex Listing by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12108_423" -->
<a id="c12108_423"></a><blockquote class="code"><p class="quoted">
Wilma, Betty, and Frederica are women in the Eight-Walled Chamber. Understand &quot;lady&quot; or &quot;woman&quot; as a woman. A nose is a kind of thing. A nose is part of every person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12109_423" -->
<a id="c12109_423"></a><blockquote class="code"><p class="quoted">
Rule for asking which do you mean when everything matched is a nose:
<br />&#160;&#160;&#160;&#160;prepare a list of matched things;
<br />&#160;&#160;&#160;&#160;if your nose is an output listed in the Table of Scored Listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row with an output of your nose in the Table of Scored Listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the assigned score entry is -1;
<br />&#160;&#160;&#160;&#160;say &quot;Whose nose do you mean, [the prepared list delimited in disjunctive style]?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12110_423" -->
<a id="c12110_423"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a nose (called target) while asking which do you mean :
<br />&#160;&#160;&#160;&#160;if everything matched is a nose:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the target is part of a person (called owner):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the owner is the player, say &quot;your own&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[the owner][apostrophe]s&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;make no decision.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12111_423" -->
<a id="c12111_423"></a><blockquote class="code"><p class="quoted">
Understand &quot;own&quot; or &quot;mine&quot; as your nose.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12112_423" -->
<a id="c12112_423"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x wall / north / x nose / mine&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "424: Cave-troll" "e69" -->
<a id="e69"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e69" class="eglink"><b>424</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e69" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Cave-troll</span></b></a><br />Determining that the command the player typed is invalid, editing it, and re-examining it to see whether it now reads correctly.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_20.html#e69"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example69">
<p>Novice players of interactive fiction, unfamiliar with its conventions, will often try to add extra phrases to a command that the game cannot properly parse: HIT DOOR WITH FIST, for instance, instead of HIT DOOR.</p>
<p>While we can deal with some of these instances by expanding our range of actions, at some point it becomes impossible to account for all the possible prepositional phrases that the player might want to tack on. So what do we do if we want to handle those appended bits of text sensibly?</p>
<p>We could go through and remove any piece of text containing &quot;with ...&quot; from the end of a player's command; the problem with that is that it overzealously lops off the ends of valid commands like UNLOCK DOOR WITH KEY, as well. So clearly we don't want to do this as part of the &quot;After reading a command...&quot; stage.</p>
<p>A better time to cut off the offending text is right before issuing a parser error. At that point, Inform has already determined that it definitely cannot parse the instruction as given, so we know that there's something wrong with it.</p>
<p>The next problem, though, is that after we've edited the player's text we want to feed the corrected version back to Inform and try once more to interpret it.</p>
<p>This is where we have a valid reason to write a new &quot;rule for reading a command&quot;. We will tell Inform that when we have just corrected the player's input to something new, it should not ask for a new command (by printing a prompt and waiting for another line of input); it should instead paste our stored corrected command back into &quot;the player's command&quot; and proceed as though that new text had just been typed.</p>
<p>Thanks to John Clemens for the specifics of the implementation.</p>
<!-- START CODE "c12113_69" -->
<a id="c12113_69"></a><blockquote class="code"><p class="quoted">
&quot;Cave-troll&quot; by JDC
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12114_69" -->
<a id="c12114_69"></a><blockquote class="code"><p class="quoted">
Section 1 - The Mechanism
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12115_69" -->
<a id="c12115_69"></a><blockquote class="code"><p class="quoted">
The last command is a text that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12116_69" -->
<a id="c12116_69"></a><blockquote class="code"><p class="quoted">
The parser error flag is a truth state that varies. The parser error flag is false.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12117_69" -->
<a id="c12117_69"></a><blockquote class="code"><p class="quoted">
Rule for printing a parser error when the latest parser error is the only understood as far as error and the player's command matches the text &quot;with&quot;:
<br />&#160;&#160;&#160;&#160;now the last command is the player's command;
<br />&#160;&#160;&#160;&#160;now the parser error flag is true;
<br />&#160;&#160;&#160;&#160;let n be &quot;[the player's command]&quot;;
<br />&#160;&#160;&#160;&#160;replace the regular expression &quot;.* with (.*)&quot; in n with &quot;with \1&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;(ignoring the unnecessary words '[n]')[line break]&quot;;
<br />&#160;&#160;&#160;&#160;replace the regular expression &quot;with .*&quot; in the last command with &quot;&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12118_69" -->
<a id="c12118_69"></a><blockquote class="code"><p class="quoted">
Rule for reading a command when the parser error flag is true:
<br />&#160;&#160;&#160;&#160;now the parser error flag is false;
<br />&#160;&#160;&#160;&#160;change the text of the player's command to the last command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12119_69" -->
<a id="c12119_69"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12120_69" -->
<a id="c12120_69"></a><blockquote class="code"><p class="quoted">
The Cave is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12121_69" -->
<a id="c12121_69"></a><blockquote class="code"><p class="quoted">
The troll is a man in the cave.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12122_69" -->
<a id="c12122_69"></a><blockquote class="code"><p class="quoted">
The player carries a sword.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12123_69" -->
<a id="c12123_69"></a><blockquote class="code"><p class="quoted">
The chest is a locked lockable container in the cave.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12124_69" -->
<a id="c12124_69"></a><blockquote class="code"><p class="quoted">
Test me with &quot;attack troll with sword / unlock chest with sword / attack troll as a test&quot;.
</p></blockquote>
<!-- END CODE -->
<p>A caveat about using this method in a larger game: &quot;parser error flag&quot; will not automatically control the behavior of any rules we might have written for Before reading a command... or After reading a command..., so they may now fire at inappropriate times. It is a good idea to check for parser error flag in those rules as well.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "304: Down in Oodville" "e111" -->
<a id="e111"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e111" class="eglink"><b>304</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e111" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Down in Oodville</span></b></a><br />Offering the player a choice of numbered options at certain times, without otherwise interfering with his ability to give regular commands.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_17.html#e111"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example111">
<p>Now and then in IF there is a situation where we need to ask the player for a numbered choice rather than an ordinary action command. What's more, that numbered choice might change during the game, so we don't want to just hard-wire the meanings of &quot;1&quot;, &quot;2&quot;, and &quot;3&quot; whenever the player types them.</p>
<p>A better trick is to keep a list or table (we'll use a table here because it involves slightly less overhead) recording what the player's numerical choices currently mean. Then every time the player selects a number, the table is consulted, and if the number corresponds to something, the player's choice is acted on.</p>
<p>In our example, we'll have a transporter pad that can take the player to any room in the game that he's already visited. (Just for the sake of example, we'll start him off with a few pre-visited rooms.)</p>
<!-- START CODE "c12125_111" -->
<a id="c12125_111"></a><blockquote class="code"><p class="quoted">
&quot;Down in Oodville&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12126_111" -->
<a id="c12126_111"></a><blockquote class="code"><p class="quoted">
Section 1 - Method
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12127_111" -->
<a id="c12127_111"></a><blockquote class="code"><p class="quoted">
Understand &quot;[number]&quot; as selecting.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12128_111" -->
<a id="c12128_111"></a><blockquote class="code"><p class="quoted">
Selecting is an action applying to one number.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12129_111" -->
<a id="c12129_111"></a><blockquote class="code"><p class="quoted">
Check selecting: [assuming we don't want to be able to transport from just anywhere]
<br />&#160;&#160;&#160;&#160;if the player is not on the transporter pad:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can transport only from the transporter pad. From other places than the transporter room, you can HOME to your base ship, but not leap sideways to other locations.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;empty the transport options instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12130_111" -->
<a id="c12130_111"></a><blockquote class="code"><p class="quoted">
Check selecting:
<br />&#160;&#160;&#160;&#160;if the number understood is greater than the number of filled rows in the Table of Transport Options or the number understood is less than one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The number understood] is not a valid option. &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;list the transport options instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12131_111" -->
<a id="c12131_111"></a><blockquote class="code"><p class="quoted">
Carry out selecting:
<br />&#160;&#160;&#160;&#160;let N be the number understood; [not actually a necessary step, but it makes the next line easier to understand]
<br />&#160;&#160;&#160;&#160;choose row N in the Table of Transport Options;
<br />&#160;&#160;&#160;&#160;if the transport entry is a room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the player to the transport entry;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;*** BUG: Improperly filled table of transport options ***&quot; [It should not be possible for this to occur, but we add an error message for it so that, if it ever does, we will know what is causing the programming error in our code]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12132_111" -->
<a id="c12132_111"></a><blockquote class="code"><p class="quoted">
To list the transport options:
<br />&#160;&#160;&#160;&#160;let N be 1;
<br />&#160;&#160;&#160;&#160;say &quot;From here you could choose to go to: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Transport Options:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [N]: [transport entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment N.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12133_111" -->
<a id="c12133_111"></a><blockquote class="code"><p class="quoted">
To empty the transport options:
<br />&#160;&#160;&#160;&#160;repeat through the Table of Transport Options:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row; [first we empty the table]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12134_111" -->
<a id="c12134_111"></a><blockquote class="code"><p class="quoted">
To load the transport options:
<br />&#160;&#160;&#160;&#160;repeat with interesting room running through visited rooms which are not the Transporter Room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose a blank row in the Table of Transport Options;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the transport entry is the interesting room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12135_111" -->
<a id="c12135_111"></a><blockquote class="code"><p class="quoted">
Table of Transport Options
<br />transport
<br />an object
<br />with 3 blank rows. [In the current scenario, the number of blank rows need never be greater than the number of rooms in the game, minus the transport room itself.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12136_111" -->
<a id="c12136_111"></a><blockquote class="code"><p class="quoted">
Understand &quot;home&quot; as homing. Homing is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12137_111" -->
<a id="c12137_111"></a><blockquote class="code"><p class="quoted">
Check homing:
<br />&#160;&#160;&#160;&#160;if the player is in the Transporter Room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're already here!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12138_111" -->
<a id="c12138_111"></a><blockquote class="code"><p class="quoted">
Carry out homing:
<br />&#160;&#160;&#160;&#160;move the player to the transporter room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12139_111" -->
<a id="c12139_111"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12140_111" -->
<a id="c12140_111"></a><blockquote class="code"><p class="quoted">
The Transporter Room is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12141_111" -->
<a id="c12141_111"></a><blockquote class="code"><p class="quoted">
Oodville is a visited room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12142_111" -->
<a id="c12142_111"></a><blockquote class="code"><p class="quoted">
Midnight is a visited room. The Diamond City is west of Midnight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12143_111" -->
<a id="c12143_111"></a><blockquote class="code"><p class="quoted">
The transporter pad is an enterable supporter in the Transporter Room. &quot;The transporter pad in the middle of the floor is currently dull blue: powered but unoccupied.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12144_111" -->
<a id="c12144_111"></a><blockquote class="code"><p class="quoted">
After entering the transporter pad:
<br />&#160;&#160;&#160;&#160;say &quot;The transporter beeps and glows amber as you step onto its surface. A moment later a hologram displays your options. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;empty the transport options;
<br />&#160;&#160;&#160;&#160;load the transport options;
<br />&#160;&#160;&#160;&#160;list the transport options.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12145_111" -->
<a id="c12145_111"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get on pad / 0 / -1 / 8 / 2 / look / w / home / get on pad / get off pad / 3&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted to replace the regular command structure entirely with numbered menus, or use menus to hold conversation options, we could: several Inform extensions provide these functions.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "373: Cloves" "e86" -->
<a id="e86"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e86" class="eglink"><b>373</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e86" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Cloves</span></b></a><br />Accepting adverbs anywhere in a command, registering what the player typed but then cutting them out before interpreting the command.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e86"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example86">
<p>It has sometimes been suggested that IF should allow for the player to use adverbs, so that doing something &quot;carefully&quot; will have a different effect from doing it &quot;quickly&quot;. There are several inherent challenges here: it's a good idea to make very sure the player knows all his adverb options, and the list of possibilities should probably not be too long.</p>
<p>Another trick is that adverbs complicate understanding commands, because they can occur anywhere: one might type &gt;GO WEST CAREFULLY or &gt;CAREFULLY GO WEST, and ideally the game should understand both. After reading a command is the best point to do this sort of thing, because we can find adverbs, interpret them, and remove them from the command stream. So:</p>
<!-- START CODE "c12146_86" -->
<a id="c12146_86"></a><blockquote class="code"><p class="quoted">
&quot;Cloves&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12147_86" -->
<a id="c12147_86"></a><blockquote class="code"><p class="quoted">
Manner is a kind of value. The manners are insouciantly, sheepishly, and defiantly.
</p></blockquote>
<!-- END CODE -->
<p>Now we have, automatically, a value called manner understood to be used whenever parsing manners, and we can use this even during the &quot;after reading a command&quot; stage, so:</p>
<!-- START CODE "c12148_86" -->
<a id="c12148_86"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;[manner]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut the matched text;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;But how, my dear boy, how? You simply can't do something without a pose. Thus far you have mastered doing things [list of manners].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reject the player's command.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12149_86" -->
<a id="c12149_86"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;Behaving [manner understood]&quot;;
<br />&#160;&#160;&#160;&#160;now the right hand status line is &quot;[location]&quot;;
<br />&#160;&#160;&#160;&#160;now the manner understood is insouciantly.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12150_86" -->
<a id="c12150_86"></a><blockquote class="code"><p class="quoted">
The Poseur Club is a room. &quot;Lady Mary is laid out on a sofa, her wrists bandaged importantly[if the manner understood is insouciantly] -- and she looks all the more depressed by your indifference to her state[end if]; Salvatore is at the gaming table, clutching his hair with both hands[if the manner understood is defiantly] -- though he looks up long enough to snarl in response to that expression of yours[end if]; Frackenbush is muttering lines from another of his works in progress, as though poetry has nearly made him mad[if the manner understood is sheepishly]. But he spares you a reassuring smile. He's not a bad fellow, Frackenbush[end if].
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12151_86" -->
<a id="c12151_86"></a><blockquote class="code"><p class="quoted">
The usual people, in short.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12152_86" -->
<a id="c12152_86"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than waiting or looking:
<br />&#160;&#160;&#160;&#160;say &quot;Dear. No. That would smack of effort.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12153_86" -->
<a id="c12153_86"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the manner understood is sheepishly:
<br />&#160;&#160;&#160;&#160;say &quot;You scuff your foot against the ground for a moment, and allow a seemly blush to creep over your cheek. It's quite effective, you are sure, though you can't look up and see how it is going.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12154_86" -->
<a id="c12154_86"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the manner understood is insouciantly:
<br />&#160;&#160;&#160;&#160;say &quot;Thrusting your hands into your pockets, you whistle a jaunty tune.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12155_86" -->
<a id="c12155_86"></a><blockquote class="code"><p class="quoted">
'Do shut up,' says a Melancholy Poseur from over by the window.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12156_86" -->
<a id="c12156_86"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the manner understood is defiantly:
<br />&#160;&#160;&#160;&#160;say &quot;You raise your chin and give a pointed glance around the room as though to say that you are waiting for someone; you are unembarrassed about waiting for her; you have by no means been stood up; and the first person to comment will receive a poke in the eye.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12157_86" -->
<a id="c12157_86"></a><blockquote class="code"><p class="quoted">
Before looking when the manner understood is sheepishly:
<br />&#160;&#160;&#160;&#160;say &quot;You gaze up from under your brows...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12158_86" -->
<a id="c12158_86"></a><blockquote class="code"><p class="quoted">
Before looking when the manner understood is defiantly:
<br />&#160;&#160;&#160;&#160;say &quot;You cast a withering gaze over the room.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12159_86" -->
<a id="c12159_86"></a><blockquote class="code"><p class="quoted">
Before looking when the manner understood is insouciantly:
<br />&#160;&#160;&#160;&#160;if turn count &gt; 1,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You turn an eye to your surroundings, looking faintly-- just faintly-- amused.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12160_86" -->
<a id="c12160_86"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wait / wait insouciantly / sheepishly look / defiantly look / look insouciantly&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The qualification about turn count is to prevent this before message from occurring when the player first looks around the room (automatically) at the start of play.</p>
<p>Note that to test this example, one must type INSOUCIANTLY TEST ME, and not simply TEST ME: a poseur's work is never done.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "374: Fragment of a Greek Tragedy" "e192" -->
<a id="e192"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="RB_6.html#e192" class="eglink"><b>374</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="RB_6.html#e192" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Fragment of a Greek Tragedy</span></b></a><br />Responding to the player's input based on keywords only, and overriding the original parser entirely.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="WI_18.html#e192"><i>WI</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example192">
<p>Apologies to the shade of A. E. Housman.</p>
<!-- START CODE "c12161_192" -->
<a id="c12161_192"></a><blockquote class="code"><p class="quoted">
&quot;Fragment of a Greek Tragedy&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12162_192" -->
<a id="c12162_192"></a><blockquote class="code"><p class="quoted">
Understand &quot;restart/restore/save/quit&quot; as &quot;[meta-command]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12163_192" -->
<a id="c12163_192"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command matches &quot;[meta-command]&quot;, make no decision;
<br />&#160;&#160;&#160;&#160;say line break;
<br />&#160;&#160;&#160;&#160;repeat through Table of Current Topics:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player's command includes topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;CHORUS: [reply entry][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the advance time rule;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;[italic type]   Pause.[roman type][line break]&quot;;
<br />&#160;&#160;&#160;&#160;follow the advance time rule;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12164_192" -->
<a id="c12164_192"></a><blockquote class="code"><p class="quoted">
Table of Current Topics
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;journey/trip/travel/came/arrived&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Sailing on horseback, or with feet for oars?&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;horseback/legs/feet/oars&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Beneath a shining or a rainy Zeus?&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;shining/rainy/weather/zeus&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;Mud's sister, not herself, adorns thy boots.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>This would be a bit bare if we didn't provide the player with some sort of context at the outset, so let's put some remarks before the first command prompt:</p>
<!-- START CODE "c12165_192" -->
<a id="c12165_192"></a><blockquote class="code"><p class="quoted">
Before reading a command while the turn count is 1:
<br />&#160;&#160;&#160;&#160;say &quot;CHORUS: O suitably-attired-in-leather-boots
<br />&#160;&#160;&#160;&#160;Head of a traveller, wherefore seeking whom
<br />&#160;&#160;&#160;&#160;Whence by what way how purposed art thou come
<br />&#160;&#160;&#160;&#160;To this well-nightingaled vicinity?
<br />&#160;&#160;&#160;&#160;My object in inquiring is to know.
<br />&#160;&#160;&#160;&#160;But if you happen to be deaf and dumb
<br />&#160;&#160;&#160;&#160;And do not understand a word I say,
<br />&#160;&#160;&#160;&#160;Then wave your hand, to signify as much.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This &quot;turn count&quot; condition is why it was useful to follow the advance time rule in &quot;after reading a command&quot;: the game (or drama, if you like) will continue to count moves elapsed even though the rest of Inform's command parsing and world model is being ignored. In a longer and more ambitious implementation of this idea, we might want to allow scenes to govern the behavior and responses of the Chorus.</p>
<p>And then to give the whole exchange a play's format:</p>
<!-- START CODE "c12166_192" -->
<a id="c12166_192"></a><blockquote class="code"><p class="quoted">
The Stage is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12167_192" -->
<a id="c12167_192"></a><blockquote class="code"><p class="quoted">
The room description heading rule is not listed in the carry out looking rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c12168_192" -->
<a id="c12168_192"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;YOU: &quot;;
<br />&#160;&#160;&#160;&#160;now left hand status line is &quot;Fragment of a Greek Tragedy&quot;;
<br />&#160;&#160;&#160;&#160;now right hand status line is &quot;A. E. Housman&quot;.
</p></blockquote>
<!-- END CODE -->
<p>(Because this example manipulates commands outside of the normal parser, the mechanism for TEST will not work here. Try typing commands such as: TELL CHORUS ABOUT JOURNEY / TELL CHORUS ABOUT FEET / TELL CHORUS ABOUT SHROPSHIRE / TELL CHORUS ABOUT ZEUS)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
