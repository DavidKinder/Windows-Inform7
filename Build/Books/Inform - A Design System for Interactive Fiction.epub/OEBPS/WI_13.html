<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Generated by indoc on 11 Aug 2016 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>Chapter 13: Relations</title>
</head>
<body class="paper papertint"><p class="chapterheading">Chapter 13: Relations</p>
<p class="chaptercontents"><a href="WI_13.html#s1" class="standardlink"><span class="chaptercontentsitem">§13.1. Sentence verbs</span></a>; <a href="WI_13.html#s2" class="standardlink"><span class="chaptercontentsitem">§13.2. What sentences are made up from</span></a>; <a href="WI_13.html#s3" class="standardlink"><span class="chaptercontentsitem">§13.3. What are relations?</span></a>; <a href="WI_13.html#s4" class="standardlink"><span class="chaptercontentsitem">§13.4. To carry, to wear, to have</span></a>; <a href="WI_13.html#s5" class="standardlink"><span class="chaptercontentsitem">§13.5. Making new relations</span></a>; <a href="WI_13.html#s6" class="standardlink"><span class="chaptercontentsitem">§13.6. Making reciprocal relations</span></a>; <a href="WI_13.html#s7" class="standardlink"><span class="chaptercontentsitem">§13.7. Relations in groups</span></a>; <a href="WI_13.html#s8" class="standardlink"><span class="chaptercontentsitem">§13.8. The built-in verbs and their meanings</span></a>; <a href="WI_13.html#s9" class="standardlink"><span class="chaptercontentsitem">§13.9. Defining new assertion verbs</span></a>; <a href="WI_13.html#s10" class="standardlink"><span class="chaptercontentsitem">§13.10. Defining new prepositions</span></a>; <a href="WI_13.html#s11" class="standardlink"><span class="chaptercontentsitem">§13.11. Indirect relations</span></a>; <a href="WI_13.html#s12" class="standardlink"><span class="chaptercontentsitem">§13.12. Relations which express conditions</span></a>; <a href="WI_13.html#s13" class="standardlink"><span class="chaptercontentsitem">§13.13. Relations involving values</span></a>; <a href="WI_13.html#s14" class="standardlink"><span class="chaptercontentsitem">§13.14. Relations as values in their own right</span></a>; <a href="WI_13.html#s15" class="standardlink"><span class="chaptercontentsitem">§13.15. Temporary relations</span></a>; <a href="WI_13.html#s16" class="standardlink"><span class="chaptercontentsitem">§13.16. What are relations for?</span></a></p><table class="centredtable"><tr><td class="roadsigndirection"><a href="WI_1.html" class="standardlink"><img alt="arrow-up-left.png" src="images/arrow-up-left.png" /></a></td><td><a href="WI_1.html" class="standardlink">Contents of <i>Writing with Inform</i></a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12.html" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_12.html" class="standardlink">Chapter 12: Advanced Actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_14.html" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_14.html" class="standardlink">Chapter 14: Adaptive Text and Responses</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><p class="sectionheading"><a id="s1"></a>§13.1. Sentence verbs</p>
<p>Descriptions of things - &quot;open door&quot;, &quot;people in the Drawing Room&quot; - have already had a whole chapter to themselves. But descriptions are only half of the story of Inform's highly flexible language for talking about places, things and circumstances: this chapter is the other half, and is about the &quot;sentence&quot;. Of course all text is made up of sentences, but Inform has a more specific meaning than that. Consider the following pieces of source text:</p>
<!-- START CODE "c3727" -->
<a id="c3727"></a><blockquote class="code"><p class="quoted">
The mouse is in the teapot.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3728" -->
<a id="c3728"></a><blockquote class="code"><p class="quoted">
Every turn when the mouse is in the teapot, say &quot;A tail hangs out of the spout.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3729" -->
<a id="c3729"></a><blockquote class="code"><p class="quoted">
Instead of taking the mouse:
<br />&#160;&#160;&#160;&#160;say &quot;The mouse slips from your hand and disappears into the teapot!&quot;;
<br />&#160;&#160;&#160;&#160;now the mouse is in the teapot.
</p></blockquote>
<!-- END CODE -->
<p>What these three extracts have in common is the sentence &quot;the mouse is in the teapot&quot;. Such a sentence can be used in three different ways: to declare the original state of the world, to ask during play if the world currently has that state, or to change things during play so that it does.</p>
<p>Actually, though, only definite sentences about the present can be used in all three ways. A vague instruction like</p>
<!-- START CODE "c3730" -->
<a id="c3730"></a><blockquote class="code"><p class="quoted">
now Mr Darcy can see the mouse;
</p></blockquote>
<!-- END CODE -->
<p>will fail, because there are so many ways in which Darcy might be able to see the mouse that Inform has no way to know how to arrange matters. And this by contrast is not merely difficult but impossible:</p>
<!-- START CODE "c3731" -->
<a id="c3731"></a><blockquote class="code"><p class="quoted">
now Mr Darcy has never seen the mouse;
</p></blockquote>
<!-- END CODE -->
<p>Which cannot be arranged because the past cannot be changed.</p>
<p>Verbs also turn up inside the more complicated descriptions. For instance,</p>
<!-- START CODE "c3732" -->
<a id="c3732"></a><blockquote class="code"><p class="quoted">
things which are in the teapot
<br />people who can see the mouse
</p></blockquote>
<!-- END CODE -->
<p>are both descriptions, not sentences, but they contain &quot;to be&quot; and &quot;to be able to see&quot; respectively.</p>
<p>This chapter is about the verbs which can be used in sentences and descriptions. Inform involves many other features which use verbs - the action &quot;taking the mouse&quot; and the phrase &quot;end the story&quot; both use forms of verbs (to take and to end) - but this chapter has nothing to do with them: so for the sake of clarity, we will call verbs that occur in sentences &quot;sentence verbs&quot;.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_12.html#s21" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_12.html#s21" class="standardlink">Back to Chapter 12: Advanced Actions: §12.21. Guidelines on how to write rules about actions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s2" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s2" class="standardlink">Onward to §13.2. What sentences are made up from</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s2"></a>§13.2. What sentences are made up from</p>
<p>A sentence consists of two nouns with a verb between them. Usually, the two nouns are descriptions, as in:</p>
<!-- START CODE "c3733" -->
<a id="c3733"></a><blockquote class="code"><p class="quoted">
Mr Collins is in a lighted room.
</p></blockquote>
<!-- END CODE -->
<p>Here &quot;Mr Collins&quot; and &quot;a lighted room&quot; are descriptions. But there are sentences where one or both of the nouns is a value of some other kind. For instance, in</p>
<!-- START CODE "c3734" -->
<a id="c3734"></a><blockquote class="code"><p class="quoted">
if the score is greater than 10, ...
</p></blockquote>
<!-- END CODE -->
<p>the sentence &quot;the score is greater than 10&quot; consists of two number values (&quot;the score&quot; and &quot;10&quot;) connected by a verb part (&quot;is greater than&quot;).</p>
<p>This chapter is about getting the most out of sentences by defining new verbs to express ideas not already built in to Inform. Before we can define a new sentence verb, however, we must first look at the meanings of verbs: which Inform calls &quot;relations&quot;.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s1" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s1" class="standardlink">Back to §13.1. Sentence verbs</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s3" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s3" class="standardlink">Onward to §13.3. What are relations?</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e175" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e175" class="standardlink">Example 223: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Formal syntax of sentences</b>&#160;&#160;&#160; A more formal description of the sentence grammar used by Inform for both assertions and conditions.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s3"></a>§13.3. What are relations?</p>
<p>Relations are what sentences express. They are yes/no questions about pairs of things: for example, to say that the coin is in the purse is to say that a particular relation (&quot;being in&quot;) is true about a specific pair of things (the coin, the purse). It is neither a fact about the coin nor about the purse, but about the two together.</p>
<p>Inform comes with a number of relations built in, almost all of which have been used in previous chapters already. The following table names some of the more useful ones, giving examples of sentences to bring them about:</p>
<!-- START CODE "c3735" -->
<a id="c3735"></a><blockquote class="code"><p class="quoted">
containment relation - The coin is in the purse.
<br />support relation - The coin is on the table.
<br />incorporation relation - The coin is part of the sculpture.
<br />carrying relation - The coin is carried by Peter.
<br />wearing relation - The jacket is worn by Peter.
<br />possession relation - if Mr Darcy has a rapier...
<br />adjacency relation - The Study is east of the Hallway.
<br />visibility relation - if Darcy can see Elizabeth...
<br />touchability relation - if Darcy can touch Elizabeth...
</p></blockquote>
<!-- END CODE -->
<p>These relation names do not trip off the tongue, but they relatively seldom need to be referred to.</p>
<p>The same meaning can often be expressed by using several different verbs, or using the same verb in several different ways, as in the following examples:</p>
<!-- START CODE "c3736" -->
<a id="c3736"></a><blockquote class="code"><p class="quoted">
The coin is in the purse.
<br />The purse contains the coin.
<br />The coin is contained by the purse.
</p></blockquote>
<!-- END CODE -->
<p>all of which boil down to saying that the coin and purse satisfy the containment relation. Because of that, <span class="italic">relations are not the same as verbs</span>. To create a new idea, we will need first to create a new relation, and only then can we set up a verb which allows us to talk about that relation.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s2" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s2" class="standardlink">Back to §13.2. What sentences are made up from</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s4" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s4" class="standardlink">Onward to §13.4. To carry, to wear, to have</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s4"></a>§13.4. To carry, to wear, to have</p>
<p>Inform has altogether five mutually exclusive ways in which one thing can be physically joined to another one:</p>
<!-- START CODE "c3737" -->
<a id="c3737"></a><blockquote class="code"><p class="quoted">
containment relation - The coin is in the purse.
<br />support relation - The coin is on the table.
<br />incorporation relation - The coin is part of the sculpture.
<br />carrying relation - The coin is carried by Peter.
<br />wearing relation - The jacket is worn by Peter.
</p></blockquote>
<!-- END CODE -->
<p>This is why we cannot have</p>
<!-- START CODE "c3738" -->
<a id="c3738"></a><blockquote class="code"><p class="quoted">
The coin is on the table.
<br />The coin is part of the table.
</p></blockquote>
<!-- END CODE -->
<p>simultaneously, and it is a rare exception to the general rule that having one relation does not affect having another.</p>
<p>But there is also a sixth relation used in Inform for these meanings: the possession relation, which is the meaning of the verb &quot;to have&quot;. At first sight this looks the same as the carrying relation, but in fact it is a convenient shorthand for &quot;carrying or wearing&quot;, provided for conditions rather than assertions:</p>
<!-- START CODE "c3739" -->
<a id="c3739"></a><blockquote class="code"><p class="quoted">
if Mr Darcy has a wet shirt ...
</p></blockquote>
<!-- END CODE -->
<p>will be true during play if he is either carrying or wearing the shirt.</p>
<p>Still another relation exists which can be tested, but not declared to be true or false: the concealment relation, which is the meaning of the verb &quot;to conceal&quot;. So we can ask:</p>
<!-- START CODE "c3740" -->
<a id="c3740"></a><blockquote class="code"><p class="quoted">
if Mr Darcy conceals a fob watch ...
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s3" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s3" class="standardlink">Back to §13.3. What are relations?</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s5" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s5" class="standardlink">Onward to §13.5. Making new relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e70" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e70" class="standardlink">Example 224: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Celadon</b>&#160;&#160;&#160; Using the enclosure relation to let the player drop things which he only indirectly carries.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e200" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e200" class="standardlink">Example 225: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Interrogation</b>&#160;&#160;&#160; A wand which, when waved, reveals the concealed items carried by people the player can see.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s5"></a>§13.5. Making new relations</p>
<p>We can create new relations like so:</p>
<!-- START CODE "c3741" -->
<a id="c3741"></a><blockquote class="code"><p class="quoted">
Loving relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<p>Every relation has a name which ends with the word &quot;relation&quot;, and in this case the name is &quot;loving relation&quot;. While the name is often just two words long, as here, it doesn't have to be:</p>
<!-- START CODE "c3742" -->
<a id="c3742"></a><blockquote class="code"><p class="quoted">
Adept sensitivity relates one person to one vehicle.
</p></blockquote>
<!-- END CODE -->
<p>makes the &quot;adept sensitivity relation&quot;. (The limit is 32 words.)</p>
<p>In such a definition, we have to say what kind of thing appears on the left and right of any relation, and also whether &quot;one&quot; or &quot;various&quot; possibilities can exist. In the example</p>
<!-- START CODE "c3743" -->
<a id="c3743"></a><blockquote class="code"><p class="quoted">
Loving relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<p>what we are saying is that only people love; that they only love people; and that each person loves only one other person (at any given moment).</p>
<p>The &quot;various&quot; part comes in because, for instance, we might have:</p>
<!-- START CODE "c3744" -->
<a id="c3744"></a><blockquote class="code"><p class="quoted">
Verenka <span class="italic">loving relation</span> Stankevich
<br />Liubov <span class="italic">loving relation</span> Stankevich
</p></blockquote>
<!-- END CODE -->
<p>so that various people (Verenka and Liubov, to name but two) love one person (Stankevich). But we are forbidding anyone to love two other people at the same time: Stankevich must decide which of them to love, or pick someone else, or no-one at all. Similarly, we would not allow</p>
<!-- START CODE "c3745" -->
<a id="c3745"></a><blockquote class="code"><p class="quoted">
Liubov <span class="italic">loving relation</span> Belinsky
</p></blockquote>
<!-- END CODE -->
<p>It is sometimes convenient to give a name to the other side of a relationship, so to speak. We might imagine:</p>
<!-- START CODE "c3746" -->
<a id="c3746"></a><blockquote class="code"><p class="quoted">
Pet-ownership relates various animals to one person (called the owner).
</p></blockquote>
<!-- END CODE -->
<p>It would then make sense to talk about &quot;the owner of Loulou&quot;, and we could have phrases like &quot;now Flaubert is the owner of Loulou&quot; or &quot;if the owner of Loulou is a woman...&quot; and so forth. This, however, would not be allowed:</p>
<!-- START CODE "c3747" -->
<a id="c3747"></a><blockquote class="code"><p class="quoted">
Pet-ownership relates various animals (called the pet) to one person.
</p></blockquote>
<!-- END CODE -->
<p>because &quot;the pet of Flaubert&quot; would be ambiguous: he might have owned dozens.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s4" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s4" class="standardlink">Back to §13.4. To carry, to wear, to have</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s6" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s6" class="standardlink">Onward to §13.6. Making reciprocal relations</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s6"></a>§13.6. Making reciprocal relations</p>
<p>The relationships described in this chapter so far are by no means always reciprocated. For instance, if a stone is on a table, then it is never true that the table is also on the stone. And the question may not even be meaningful to ask. If Peter wears a jacket, the jacket does not even have the possibility of wearing Peter.</p>
<p>But sometimes we do want a relation which works both ways equally well. These are simple to set up:</p>
<!-- START CODE "c3748" -->
<a id="c3748"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
</p></blockquote>
<!-- END CODE -->
<p>The effect is that various people know various other people, and this is always reciprocated. If Daisy knows Sophie then, automatically, Sophie knows Daisy. This even-handedness is maintained throughout play, so that whatever changes are made it is always true that if A knows B then B knows A.</p>
<p>And similarly for a reciprocal relation between one and another:</p>
<!-- START CODE "c3749" -->
<a id="c3749"></a><blockquote class="code"><p class="quoted">
Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>In this case, we can again give a name to the partner under a relation:</p>
<!-- START CODE "c3750" -->
<a id="c3750"></a><blockquote class="code"><p class="quoted">
Marriage relates one person to another (called the spouse).
</p></blockquote>
<!-- END CODE -->
<p>and now, for instance, we may have that the spouse of John is Yoko and the spouse of Yoko is John.</p>
<p>Since many of these examples have involved people, it might be worth mentioning again that any kind can be involved, not just the &quot;person&quot; kind.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s5" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s5" class="standardlink">Back to §13.5. Making new relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s7" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s7" class="standardlink">Onward to §13.7. Relations in groups</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e376" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e376" class="standardlink">Example 226: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Four Cheeses</b>&#160;&#160;&#160; A system of telephones on which the player can call distant persons and have conversations.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s7"></a>§13.7. Relations in groups</p>
<p>Finally, there is a kind of relation which binds even more strongly.</p>
<!-- START CODE "c3751" -->
<a id="c3751"></a><blockquote class="code"><p class="quoted">
Nationality relates people to each other in groups.
</p></blockquote>
<!-- END CODE -->
<p>This is a kind of relation which divides people up: we might wish to have all the Icelandic people related to each other, all the Peruvians to each other, and so on. If there were a Pacific island called Informia with one inhabitant, then that person would be related only to himself. As time goes by, we could imagine people emigrating, and so on, so that these groupings would switch: perhaps everyone would leave Belgium and, for a while, there would be no Belgian nationals at all.</p>
<p>The testing command RELATIONS prints out the current state of all the relations created in the source code. For instance:</p>
<!-- START CODE "c3752" -->
<a id="c3752"></a><blockquote class="code"><p class="quoted">
&gt;relations
<br />Overlooking relates various rooms to various rooms:
<br />&#160;&#160;&#160;&#160;The Pub  &gt;=&gt;  the Garden
<br />&#160;&#160;&#160;&#160;The Garden  &gt;=&gt;  the Shrubbery
<br />&#160;&#160;&#160;&#160;The Shrubbery  &gt;=&gt;  the Sundial Plot
<br />Friendship relates people to each other:
<br />&#160;&#160;&#160;&#160;Mr Wickham  &lt;=&gt;  Sophie
<br />&#160;&#160;&#160;&#160;Charlotte  &lt;=&gt;  Sophie
<br />Marriage relates one person to another:
<br />&#160;&#160;&#160;&#160;Mr Wickham  ==  Sophie
</p></blockquote>
<!-- END CODE -->
<p>That can produce a lot of output. To see only a single relation, or to see it at some intermediate point in a calculation, there's also a testing phrase:</p>
<!-- START PHRASE "defn156" -->
<div class="definition"><a id="defn156"></a><p class="defnprototype"><b>show relation </b>(relation of values to values)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_showrelation -->

<p>This phrase is for testing purposes only. It shows the current state of the named relation, that is, it shows which values relate to which other ones, where it's possible to do this in any sensible way.</p>

<!-- end definition -->
</div>

<p>But this is a phrase - not a typed command.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s6" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s6" class="standardlink">Back to §13.6. Making reciprocal relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s8" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s8" class="standardlink">Onward to §13.8. The built-in verbs and their meanings</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e390" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e390" class="standardlink">Example 227: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Transmutations</b>&#160;&#160;&#160; A machine that turns objects into other, similar objects.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e330" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e330" class="standardlink">Example 228: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Otranto</b>&#160;&#160;&#160; A kind of rope which can be tied to objects and used to anchor the player or drag items from room to room.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s8"></a>§13.8. The built-in verbs and their meanings</p>
<p>It is all very well to define new relations, but this does nothing if there is no way to assert that they are true, or to ask whether they are true or false. That requires a verb: in fact, a relation is nothing more than what Inform uses as the &quot;meaning&quot; of a verb. The assertion verbs built in to Inform have the following built-in relations as their meanings:</p>
<!-- START CODE "c3753" -->
<a id="c3753"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Verb - Relation</span>
<br />to be - equality relation
<br />to have - possession relation
<br />to contain - containment relation
<br />to support - support relation
<br />to carry - carrying relation
<br />to wear - wearing relation
<br />to incorporate - incorporation relation
</p></blockquote>
<!-- END CODE -->
<p>Two of Inform's built-in relations are expressed using prepositions instead:</p>
<!-- START CODE "c3754" -->
<a id="c3754"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Preposition - Relation</span>
<br />to be part of - (reversed) incorporation relation
<br />to be adjacent to - adjacency relation
</p></blockquote>
<!-- END CODE -->
<p>It would be easy to make verbs for these if we wanted (&quot;to adjoin&quot;, say) using the techniques of the next section.</p>
<p>The verb <span class="italic">to be</span> is grammatically different from any other, and its meaning is too complicated to be fully expressed by any one relation. A great deal of the Inform program is given over to its &quot;meaning&quot;, which we are not allowed to change or imitate. The &quot;equality relation&quot; is simple enough, and is the one implied by conditions like</p>
<!-- START CODE "c3755" -->
<a id="c3755"></a><blockquote class="code"><p class="quoted">
if the score is 20, ...
</p></blockquote>
<!-- END CODE -->
<p>but <span class="italic">to be</span> can have more complicated implications - &quot;if Mr Wickham is hungry&quot; clearly doesn't test whether two quantities are equal. Fortunately the other verbs are much simpler.</p>
<p>There are a few other built-in verbs, as can be seen in the Index, but these are mostly for experts only. For example:</p>
<!-- START CODE "c3756" -->
<a id="c3756"></a><blockquote class="code"><p class="quoted">
<span class="boldface">Verb - Relation</span>
<br />to mean - meaning relation
<br />to provide - provision relation
</p></blockquote>
<!-- END CODE -->
<p>&quot;To mean&quot; can be used to make new verbs, as we'll soon see. Provision is to do with whether something can have a given property: for example, &quot;if R provides the property lighted&quot; tests whether R is able to have this property, not whether it actually has it at the moment.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s7" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s7" class="standardlink">Back to §13.7. Relations in groups</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s9" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s9" class="standardlink">Onward to §13.9. Defining new assertion verbs</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s9"></a>§13.9. Defining new assertion verbs</p>
<p>Here is an example definition of a new verb:</p>
<!-- START CODE "c3757" -->
<a id="c3757"></a><blockquote class="code"><p class="quoted">
The verb to sport means the wearing relation.
</p></blockquote>
<!-- END CODE -->
<p>Once this is done, we can write the assertion</p>
<!-- START CODE "c3758" -->
<a id="c3758"></a><blockquote class="code"><p class="quoted">
Mr Wickham sports a Tory rosette.
</p></blockquote>
<!-- END CODE -->
<p>which will do the the same thing as</p>
<!-- START CODE "c3759" -->
<a id="c3759"></a><blockquote class="code"><p class="quoted">
Mr Wickham wears a Tory rosette.
</p></blockquote>
<!-- END CODE -->
<p>because both verbs have the same relation as their meaning.</p>
<p>Earlier versions of Inform needed to be told how to make other parts of the verb, but that's rarely true now. Just writing:</p>
<!-- START CODE "c3760" -->
<a id="c3760"></a><blockquote class="code"><p class="quoted">
The verb to sport means the wearing relation.
</p></blockquote>
<!-- END CODE -->
<p>is enough for Inform to understand &quot;he sports&quot;, &quot;they sport&quot;, &quot;he sported&quot;, &quot;it is sported&quot;, &quot;he is sporting&quot;, &quot;he had sported&quot; and so on. It works with irregular verbs, too; it has a very comprehensive dictionary. But it's legal to spell out the conjugation if need be:</p>
<!-- START CODE "c3761" -->
<a id="c3761"></a><blockquote class="code"><p class="quoted">
The verb to sport (he sports, they sport, he sported, it is sported) implies the knowledge relation.
</p></blockquote>
<!-- END CODE -->
<p>Occasionally it's convenient to have the relation the other way around. For instance:</p>
<!-- START CODE "c3762" -->
<a id="c3762"></a><blockquote class="code"><p class="quoted">
The verb to grace means the reversed wearing relation.
</p></blockquote>
<!-- END CODE -->
<p>With that defined, these two sentences have identical meanings:</p>
<!-- START CODE "c3763" -->
<a id="c3763"></a><blockquote class="code"><p class="quoted">
Mr Wickham sports a Tory rosette.
<br />A Tory rosette graces Mr Wickham.
</p></blockquote>
<!-- END CODE -->
<p>Reversed in this sense means that the things related - the subject and object of the verb - are the other way round.</p>
<p>The Phrasebook index contains all the verbs associated with assertions, in the Verbs section. When we add new verbs to our source, those will appear in the Phrasebook as well.</p>
<p>The verbs above (&quot;to grace&quot;, &quot;to sport&quot;) are short ones, but we're free to make them longer than that. For example:</p>
<!-- START CODE "c3764" -->
<a id="c3764"></a><blockquote class="code"><p class="quoted">
The verb to cover oneself with means the wearing relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3765" -->
<a id="c3765"></a><blockquote class="code"><p class="quoted">
Peter is covering himself with a tent-like raincoat.
</p></blockquote>
<!-- END CODE -->
<p>Here we have &quot;to cover oneself with&quot;, four words long; the limit is 29.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s8" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s8" class="standardlink">Back to §13.8. The built-in verbs and their meanings</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s10" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s10" class="standardlink">Onward to §13.10. Defining new prepositions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e6" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e6" class="standardlink">Example 229: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Unthinkable Alliances</b>&#160;&#160;&#160; People are to be grouped into alliances. To kiss someone is to join his or her faction, which may make a grand alliance; to strike them is to give notice of quitting, and to become a lone wolf.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e438" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e438" class="standardlink">Example 230: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Unexamined Life</b>&#160;&#160;&#160; An adaptive hint system that tracks what the player needs to have seen or to possess in order to solve a given puzzle, and doles out suggestions accordingly. Handles changes in the game state with remarkable flexibility, and allows the player to decide how explicit a nudge he wants at any given moment.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s10"></a>§13.10. Defining new prepositions</p>
<p>The term preposition is used here, a little loosely, to mean anything which we add to the verb <span class="italic">to be</span> in order to talk about some relation or other. We have seen many examples already, such as:</p>
<!-- START CODE "c3766" -->
<a id="c3766"></a><blockquote class="code"><p class="quoted">
To be in - The ball is in the box.
<br />To be part of - The lever is part of the slot machine.
</p></blockquote>
<!-- END CODE -->
<p>These are defined just the way verbs are. Compare the following:</p>
<!-- START CODE "c3767" -->
<a id="c3767"></a><blockquote class="code"><p class="quoted">
Suspicion relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3768" -->
<a id="c3768"></a><blockquote class="code"><p class="quoted">
The verb to suspect means the suspicion relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3769" -->
<a id="c3769"></a><blockquote class="code"><p class="quoted">
The verb to be suspicious of means the suspicion relation.
</p></blockquote>
<!-- END CODE -->
<p>The result of this is that</p>
<!-- START CODE "c3770" -->
<a id="c3770"></a><blockquote class="code"><p class="quoted">
Hercule Poirot suspects Colonel Hotchkiss.
<br />Hercule Poirot is suspicious of Colonel Hotchkiss.
</p></blockquote>
<!-- END CODE -->
<p>are exactly equivalent, and so are these two descriptions:</p>
<!-- START CODE "c3771" -->
<a id="c3771"></a><blockquote class="code"><p class="quoted">
somebody who suspects Colonel Hotchkiss
<br />somebody suspicious of Colonel Hotchkiss
</p></blockquote>
<!-- END CODE -->
<p>While most prepositions are short (&quot;in&quot;, &quot;part of&quot;, &quot;suspicious of&quot;), they're free to be longer if need be (&quot;inordinately far away from&quot;): the limit is 30 words, which should be ample.</p>
<p>We can also define verbs as auxiliaries, like so:</p>
<!-- START CODE "c3772" -->
<a id="c3772"></a><blockquote class="code"><p class="quoted">
The verb to be able to approach means the approachability relation.
</p></blockquote>
<!-- END CODE -->
<p>Now we can ask if Poirot &quot;can approach&quot; Hotchkiss, and so on.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s9" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s9" class="standardlink">Back to §13.9. Defining new assertion verbs</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s11" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s11" class="standardlink">Onward to §13.11. Indirect relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e0" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e0" class="standardlink">Example 231: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Abolition of Love</b>&#160;&#160;&#160; A thorough exploration of all the kinds of relations established so far, with the syntax to set and unset them.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e239" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e239" class="standardlink">Example 232: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Swerve left? Swerve right? Or think about it and die?</b>&#160;&#160;&#160; Building a marble chute track in which a dropped marble will automatically roll downhill.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e400" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e400" class="standardlink">Example 233: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Beneath the Surface</b>&#160;&#160;&#160; An "underlying" relation which adds to the world model the idea of objects hidden under other objects.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e85" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e85" class="standardlink">Example 234: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Bogart</b>&#160;&#160;&#160; Clothing for the player that layers, so that items cannot be taken off in the wrong order, and the player's inventory lists only the clothing that is currently visible.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s11"></a>§13.11. Indirect relations</p>
<p>We have already seen, in the chapter on Descriptions which is a forerunner of this one, that Inform provides not only &quot;adjacent&quot; as a way of seeing if one room is directly connected to another, but also &quot;the best route from A to B&quot;, which allows us to see if any sequence of moves connects them.</p>
<p>Something similar - in fact, simpler - is allowed for any relation between objects. Suppose we would like to go sledging: we can go downhill, but not up. Some quite distant places may be reachable, while others close by may not be, even if lower than us, because they would involve climbing again at some point. The following would implement this:</p>
<!-- START CODE "c3773" -->
<a id="c3773"></a><blockquote class="code"><p class="quoted">
Overlooking relates various rooms to various rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3774" -->
<a id="c3774"></a><blockquote class="code"><p class="quoted">
The verb to overlook means the overlooking relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3775" -->
<a id="c3775"></a><blockquote class="code"><p class="quoted">
The Garden overlooks the Shrubbery. The Folly overlooks the Garden. The Shrubbery overlooks the Sundial Plot. The Old Ice House overlooks the Garden.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3776" -->
<a id="c3776"></a><blockquote class="code"><p class="quoted">
After looking:
<br />&#160;&#160;&#160;&#160;say &quot;This wintry vantage point overlooks [the list of rooms overlooked by the location].&quot;;
<br />&#160;&#160;&#160;&#160;let the way be the next step via the overlooking relation from the location to the Sundial Plot;
<br />&#160;&#160;&#160;&#160;if the way is a room, say &quot;To sledge downhill to the Sundial, aim for [the way].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;It is not possible to sledge downhill to the Sundial.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Here we're making use of:</p>
<!-- START PHRASE "defn157" -->
<div class="definition"><a id="defn157"></a><p class="defnprototype"><b>next step via </b>(relation of values to values)<b> from </b>(object)<b> to </b>(object)<b> ... object</b></p>
<!-- END PHRASE -->
<!-- definition of ph_nextstep -->

<p>This phrase tries to find a shortest route between the two given endpoints, using the given relation of objects to determine single steps. Example:</p>
<!-- START CODE "c3777" -->
<a id="c3777"></a><blockquote class="code"><p class="quoted">
next step via the overlooking relation from the Folly to the Chinese Lake
</p></blockquote>
<!-- END CODE -->
<p>The result is the special object value &quot;nothing&quot; if the two endpoints are the same or if no route exists.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn158" -->
<div class="definition"><a id="defn158"></a><p class="defnprototype"><b>number of steps via </b>(relation of values to values)<b> from </b>(object)<b> to </b>(object)<b> ... number</b></p>
<!-- END PHRASE -->
<!-- definition of ph_numbersteps -->

<p>This phrase tries to find the length of a shortest route between the two given endpoints, using the given relation of objects to determine single steps. Example:</p>
<!-- START CODE "c3778" -->
<a id="c3778"></a><blockquote class="code"><p class="quoted">
number of steps via the overlooking relation from the Folly to the Chinese Lake
</p></blockquote>
<!-- END CODE -->
<p>The result is 0 if the two endpoints are the same, or -1 if no route exists.</p>

<!-- end definition -->
</div>

<p>Another example would be the &quot;six degrees of separation&quot; game, where it is claimed that any two people on Earth are connected by a sequence of up to six acquaintances. In an Inform implementation, we might talk about &quot;the next step via the friendship relation from George Bush to Saddam Hussein&quot;, for instance, a phrase likely to evaluate to Donald Rumsfeld, and then</p>
<!-- START CODE "c3779" -->
<a id="c3779"></a><blockquote class="code"><p class="quoted">
the number of steps via the friendship relation from George Bush to Saddam Hussein
</p></blockquote>
<!-- END CODE -->
<p>would be... but that would be telling.</p>
<p>As with route-finding through the map, finding &quot;the next step via&quot; a relation can be slow. For instance, suppose we have dozens of articles of clothing all partially revealing each other, connected by two relations - overlying and underlying. Then &quot;the next step via&quot; these relations allows us to establish what can be worn on top of what else. If we need to calculate this often, and there are enormous wardrobes of clothes to choose from, speed starts to matter.</p>
<p>Once again there is a choice of algorithms: &quot;fast&quot; and &quot;slow&quot;, where &quot;fast&quot; needs much more memory. To make route-finding for a given relation &quot;fast&quot;, we have to declare it that way:</p>
<!-- START CODE "c3780" -->
<a id="c3780"></a><blockquote class="code"><p class="quoted">
Overlying relates various garments to various garments with fast route-finding.
<br />Overlapping relates various garments to each other with fast route-finding.
</p></blockquote>
<!-- END CODE -->
<p>Otherwise, the &quot;slow&quot; method will be used.</p>
<p>This &quot;with fast route-finding&quot; note can only be added to various-to-various relations. (Although route-finding through various-to-one and one-to-various relations is fully supported, it exploits the relative simplicity of these problems to use a more efficient algorithm than either &quot;fast&quot; or &quot;slow&quot;.)</p>
<p class="crossreference"><a href="WI_6.html#s14" class="xreflink"><img class="asterisk" alt="*" src="images/xref.png" />&#160;<i>See </i><b>Adjacent rooms and routes through the map</b></a><i> for route-finding through the map rather than a relation</i></p><hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s10" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s10" class="standardlink">Back to §13.10. Defining new prepositions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s12" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s12" class="standardlink">Onward to §13.12. Relations which express conditions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e45" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e45" class="standardlink">Example 235: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Problem of Edith</b>&#160;&#160;&#160; A conversation in which the main character tries to build logical connections between what the player is saying now and what went immediately before.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s12"></a>§13.12. Relations which express conditions</p>
<p>One last way to create a new relation and, in many ways, the easiest of all. If we write:</p>
<!-- START CODE "c3781" -->
<a id="c3781"></a><blockquote class="code"><p class="quoted">
Contact relates a thing (called X) to a thing (called Y) when X is part of Y or Y is part of X. The verb to be joined to means the contact relation.
</p></blockquote>
<!-- END CODE -->
<p>then we would be able to talk about a handle being joined to a door, and a door being joined to a handle, and so on. We are not allowed to declare:</p>
<!-- START CODE "c3782" -->
<a id="c3782"></a><blockquote class="code"><p class="quoted">
The hook is joined to the line.
</p></blockquote>
<!-- END CODE -->
<p>because the question of whether they are joined is not for us to decide: that will be for the condition to determine, whenever we test it. Similarly, we cannot meaningfully write</p>
<!-- START CODE "c3783" -->
<a id="c3783"></a><blockquote class="code"><p class="quoted">
now the hook is joined to the line;
</p></blockquote>
<!-- END CODE -->
<p>(and Inform will not let us) because this relation is not something we can force either way: we can make it come true by other means, maybe, but we cannot simply make it true by saying so. Lastly, this kind of relation is restricted in that we are not allowed to find paths or calculate numbers of steps through it.</p>
<p>So this way to define relations is, on the face of it, just a sort of verbal trick to write conditions in a more attractive way. The more flexible, changeable relations in previous sections have much greater expressive power. All the same, it is nice to be able to write -</p>
<!-- START CODE "c3784" -->
<a id="c3784"></a><blockquote class="code"><p class="quoted">
Nearness relates a room (called A) to a room (called B) when the number of moves from B to A is less than 3. The verb to be near means the nearness relation.
</p></blockquote>
<!-- END CODE -->
<p>and then to be able to write rules like:</p>
<!-- START CODE "c3785" -->
<a id="c3785"></a><blockquote class="code"><p class="quoted">
Instead of listening when the location is near the Sundial: say &quot;You hear a splashing of water.&quot;
</p></blockquote>
<!-- END CODE -->
<p>As with other relations, there's no reason why we have to use objects. For example:</p>
<!-- START CODE "c3786" -->
<a id="c3786"></a><blockquote class="code"><p class="quoted">
Material is a kind of value. The materials are wood and metal. A thing has a material.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3787" -->
<a id="c3787"></a><blockquote class="code"><p class="quoted">
Materiality relates a thing (called X) to a material (called Y) when Y is the material of X. The verb to be made of means the materiality relation.
</p></blockquote>
<!-- END CODE -->
<p>which enables us to write:</p>
<!-- START CODE "c3788" -->
<a id="c3788"></a><blockquote class="code"><p class="quoted">
if the cube is made of wood, ...
<br />say &quot;The carpenter looks at [the list of things which are made of wood].&quot;;
</p></blockquote>
<!-- END CODE -->
<p>And here is a mathematical one:</p>
<!-- START CODE "c3789" -->
<a id="c3789"></a><blockquote class="code"><p class="quoted">
Divisibility relates a number (called N) to a number (called M) when the remainder after dividing M by N is 0. The verb to divide means the divisibility relation. The verb to be a factor of means the divisibility relation.
</p></blockquote>
<!-- END CODE -->
<p>We now find that &quot;2 divides 12&quot;, &quot;5 is not a factor of 12&quot; and &quot;12 is divisible by 3&quot; are all true. Again, we are only really gaining a nice form of words, but improving the clarity of the source text is never a bad thing.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s11" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s11" class="standardlink">Back to §13.11. Indirect relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s13" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s13" class="standardlink">Onward to §13.13. Relations involving values</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e418" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e418" class="standardlink">Example 236: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Wainwright Acts</b>&#160;&#160;&#160; A technical note about checking the location of door objects when characters other than the player are interacting with them.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e38" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e38" class="standardlink">Example 237: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>A Humble Wayside Flower</b>&#160;&#160;&#160; Relations track the relationships between one character and another. Whenever the player meets a relative of someone he already knows, he receives a brief introduction.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s13"></a>§13.13. Relations involving values</p>
<p>Although most of the examples in this chapter have involved objects, relations can connect almost any values together. We can create relations in groups, one to various relations, various to one relations, one to one relations, and various to various relations for any combination of kinds. For example:</p>
<!-- START CODE "c3790" -->
<a id="c3790"></a><blockquote class="code"><p class="quoted">
Partnership relates various texts to various texts.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3791" -->
<a id="c3791"></a><blockquote class="code"><p class="quoted">
The verb to belong with means the
<br />partnership relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3792" -->
<a id="c3792"></a><blockquote class="code"><p class="quoted">
&quot;cheese&quot; belongs with &quot;crackers&quot;.
<br />&quot;clam&quot; belongs with &quot;chowder&quot;.
</p></blockquote>
<!-- END CODE -->
<p>How might we make use of this? Clearly it would be impractical to keep trying:</p>
<!-- START CODE "c3793" -->
<a id="c3793"></a><blockquote class="code"><p class="quoted">
if &quot;caviar&quot; belongs with &quot;aardvarks&quot;, ...
<br />if &quot;caviar&quot; belongs with &quot;abacuses&quot;, ...
<br />...
</p></blockquote>
<!-- END CODE -->
<p>to find out what &quot;caviar&quot; belongs with. It's still harder to find out if it belongs with anything at all -- in theory we would have to try every possibility, which of course is impossible. Instead we have these phrases:</p>
<!-- START PHRASE "defn159" -->
<div class="definition"><a id="defn159"></a><p class="defnprototype"><b>if </b>(value)<b> relates to </b>(name of kind)<b> by </b>(relation of values to values)<b>:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_ifleft -->

<p>This condition is true if the value V is such that V relates to something by the given relation. Example: suppose partnership relates various texts to various texts. Then we can test</p>
<!-- START CODE "c3794" -->
<a id="c3794"></a><blockquote class="code"><p class="quoted">
if &quot;chalk&quot; relates to a text by the partnership relation, ...
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn160" -->
<div class="definition"><a id="defn160"></a><p class="defnprototype"><b>if </b>(name of kind)<b> relates to </b>(value)<b> by </b>(relation of values to values)<b>:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_ifright -->

<p>This condition is true if the value V is such that something relates to V by the given relation. Example: suppose partnership relates various texts to various texts. Then we can test</p>
<!-- START CODE "c3795" -->
<a id="c3795"></a><blockquote class="code"><p class="quoted">
if a text relates to &quot;cheese&quot; by the partnership relation, ...
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>If a partner does exist, then we can find it with:</p>
<!-- START PHRASE "defn161" -->
<div class="definition"><a id="defn161"></a><p class="defnprototype"><b></b>(name of kind)<b> to which</b>/whom<b> </b>(value)<b> relates by </b>(relation of values to values)<b> ... value</b></p><br /><i>or:</i>&#160;&#160;&#160;<p class="defnprototype"><b></b>(name of kind)<b> that</b>/which/whom<b> </b>(value)<b> relates to by </b>(relation of values to values)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_rightlookup -->

<p>This phrase produces an Y such that the given value V relates to Y by the given relation. Example: suppose partnership relates various texts to various texts. Then we can obtain</p>
<!-- START CODE "c3796" -->
<a id="c3796"></a><blockquote class="code"><p class="quoted">
the text to which &quot;chalk&quot; relates by the partnership relation
</p></blockquote>
<!-- END CODE -->
<p>which might be, say, &quot;cheese&quot;. It's a run-time problem to use this if no such Y exists.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn162" -->
<div class="definition"><a id="defn162"></a><p class="defnprototype"><b></b>(name of kind)<b> that</b>/which/who<b> relates to </b>(value)<b> by </b>(relation of values to values)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_leftlookup -->

<p>This phrase produces an X such that X relates to the given value V by the given relation. Example: suppose partnership relates various texts to various texts. Then we can obtain</p>
<!-- START CODE "c3797" -->
<a id="c3797"></a><blockquote class="code"><p class="quoted">
the text which relates to &quot;cheese&quot; by the partnership relation
</p></blockquote>
<!-- END CODE -->
<p>which might be, say, &quot;chalk&quot;. It's a run-time problem to use this if no such X exists.</p>

<!-- end definition -->
</div>

<p>Of course, there might be many answers to this question, so perhaps these are neater:</p>
<!-- START PHRASE "defn163" -->
<div class="definition"><a id="defn163"></a><p class="defnprototype"><b>list of </b>(name of kind)<b> that</b>/which/who<b> relate to </b>(value)<b> by </b>(relation of values to values)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_leftlookuplist -->

<p>This phrase produces a list of all the X such that X relates to the given value V by the given relation. Example: suppose partnership relates various texts to various texts. Then we can obtain</p>
<!-- START CODE "c3798" -->
<a id="c3798"></a><blockquote class="code"><p class="quoted">
list of texts which relate to &quot;cheese&quot; by the partnership relation
</p></blockquote>
<!-- END CODE -->
<p>which might be, say, { &quot;chalk&quot;, &quot;grapes&quot;, &quot;macaroni&quot; }. The answer might be the empty set, but that's not a problem.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn164" -->
<div class="definition"><a id="defn164"></a><p class="defnprototype"><b>list of </b>(name of kind)<b> to which</b>/whom<b> </b>(value)<b> relates by </b>(relation of values to values)<b> ... value</b></p><br /><i>or:</i>&#160;&#160;&#160;<p class="defnprototype"><b>list of </b>(name of kind)<b> that</b>/which/whom<b> </b>(value)<b> relates to by </b>(relation of values to values)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_rightlookuplist -->

<p>This phrase produces a list of all Y such that the given value V relates to Y by the given relation. Example: suppose partnership relates various texts to various texts. Then we can obtain</p>
<!-- START CODE "c3799" -->
<a id="c3799"></a><blockquote class="code"><p class="quoted">
list of texts to which &quot;chalk&quot; relates by the partnership relation
</p></blockquote>
<!-- END CODE -->
<p>which might be, say, { &quot;cheese&quot;, &quot;blackboard&quot;, &quot;cliffs&quot; }. The answer might be the empty set, but that's not a problem.</p>

<!-- end definition -->
</div>

<p>Finally, it's sometimes useful to get at the list of all values which can appear on the left or right hand side of a relation. We need tongue-twister like wording to do it, but:</p>
<!-- START PHRASE "defn165" -->
<div class="definition"><a id="defn165"></a><p class="defnprototype"><b>list of </b>(name of kind)<b> that</b>/which/whom<b> </b>(relation of values to values)<b> relates ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_leftdomain -->

<p>This phrase produces a list of all X which relate to anything under the given relation. Example: suppose partnership relates various texts to various texts. Then we can obtain</p>
<!-- START CODE "c3800" -->
<a id="c3800"></a><blockquote class="code"><p class="quoted">
list of texts which the partnership relation relates
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn166" -->
<div class="definition"><a id="defn166"></a><p class="defnprototype"><b>list of </b>(name of kind)<b> to which</b>/whom<b> </b>(relation of values to values)<b> relates ... value</b></p><br /><i>or:</i>&#160;&#160;&#160;<p class="defnprototype"><b>list of </b>(name of kind)<b> that</b>/which/whom<b> </b>(relation of values to values)<b> relates to ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_rightdomain -->

<p>This phrase produces a list of all Y which anything relates to under the given relation. Example: suppose partnership relates various texts to various texts. Then we can obtain</p>
<!-- START CODE "c3801" -->
<a id="c3801"></a><blockquote class="code"><p class="quoted">
list of texts which the partnership relation relates to
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>For efficiency reasons, there are no guarantees about what order these lists have - but they can of course always be sorted when found.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s12" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s12" class="standardlink">Back to §13.12. Relations which express conditions</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s14" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s14" class="standardlink">Onward to §13.14. Relations as values in their own right</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e245" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e245" class="standardlink">Example 238: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Meet Market</b>&#160;&#160;&#160; A case in which relations give characters multiple values of the same kind.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e153" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e153" class="standardlink">Example 239: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>For Demonstration Purposes</b>&#160;&#160;&#160; A character who learns new actions by watching the player performing them.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s14"></a>§13.14. Relations as values in their own right</p>
<p>As we've seen, most relations have names - &quot;containment relation&quot;, for instance. These are themselves values in Inform, though there are a few restrictions on how they are used. (Relations can contain a colossal amount of data, so we don't want to have to copy them casually.)</p>
<p>Consider these two examples:</p>
<!-- START CODE "c3802" -->
<a id="c3802"></a><blockquote class="code"><p class="quoted">
Parity relates a number (called N) to a number (called M) when N minus M is even.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3803" -->
<a id="c3803"></a><blockquote class="code"><p class="quoted">
Joint magnitude relates a number (called N) to a number (called M) when N plus M is greater than 7.
</p></blockquote>
<!-- END CODE -->
<p>Here &quot;parity relation&quot; and &quot;joint magnitude relation&quot; are both values of the same kind: &quot;relation of numbers to numbers&quot;. In general, every relation is a value of kind &quot;relation of K to L&quot;, for the appropriate kinds K and L. So the parity relation doesn't have the same kind as the containment relation, for example. Because it often happens that K and L are the same, we can just say &quot;relation of K&quot; in this case, so we could equally say that the kind of the parity relation is &quot;relation of numbers&quot;.</p>
<p>This is useful to know when writing phrases like so:</p>
<!-- START CODE "c3804" -->
<a id="c3804"></a><blockquote class="code"><p class="quoted">
To chart (R - a relation of numbers):
<br />&#160;&#160;&#160;&#160;repeat with N running from 1 to 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with M running from 1 to 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if R relates N to M, say &quot;[N] &lt;=&gt; [M]   &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]&quot;;
</p></blockquote>
<!-- END CODE -->
<p>and now &quot;chart parity relation&quot; will work nicely, but &quot;chart visibility relation&quot; will be rejected (as it should be, because it relates things, not numbers). In general, if R is any relation, we can write</p>
<!-- START CODE "c3805" -->
<a id="c3805"></a><blockquote class="code"><p class="quoted">
if R relates X to Y, ...
<br />now R relates X to Y;
<br />now R does not relate X to Y;
</p></blockquote>
<!-- END CODE -->
<p>to test, set and unset a relation R between two values. (Inform checks that the values X and Y have the right kind and produces a problem message if not.)</p>
<p>Several useful adjectives can be applied to relations:</p>
<!-- START CODE "c3806" -->
<a id="c3806"></a><blockquote class="code"><p class="quoted">
&quot;empty&quot; - nothing relates to anything else
<br />&quot;symmetric&quot; - by definition X relates to Y if and only if Y relates to X
<br />&quot;equivalence&quot; - this is a relation &quot;in groups&quot;, or an &quot;equivalence relation&quot;
<br />&quot;one-to-one&quot; - it relates one K to one L
<br />&quot;one-to-various&quot; - similarly
<br />&quot;various-to-one&quot; - similarly
<br />&quot;various-to-various&quot; - similarly
</p></blockquote>
<!-- END CODE -->
<p>So for example it's possible to ask</p>
<!-- START CODE "c3807" -->
<a id="c3807"></a><blockquote class="code"><p class="quoted">
if R is a symmetric one-to-one relation of texts, ...
</p></blockquote>
<!-- END CODE -->
<p>With some relations, it's possible to clear them out by writing:</p>
<!-- START CODE "c3808" -->
<a id="c3808"></a><blockquote class="code"><p class="quoted">
now R is empty;
</p></blockquote>
<!-- END CODE -->
<p>and with temporary relations (see the next section), it's even possible to change their valencies (one-to-one vs. one-to-various, etc.) using &quot;now&quot;, but only when they are empty. The exceptions where &quot;empty&quot; can't be used are those which can't be changed at all, like the parity relation above, and a few built-in cases such as the support, containment and incorporation relations, where emptying would dissolve the model world in a disastrous way.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s13" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s13" class="standardlink">Back to §13.13. Relations involving values</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s15" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s15" class="standardlink">Onward to §13.15. Temporary relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e270" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e270" class="standardlink">Example 240: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Number Study</b>&#160;&#160;&#160; The parity and joint magnitude relations explored.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s15"></a>§13.15. Temporary relations</p>
<p>So far in this chapter, we've only seen relations which exist permanently during play. The relationships might change - sometimes Red Riding Hood would be in the Woodcutter's Cottage, sometimes not - but the relations themselves were eternal.</p>
<p>In fact, though, we can also create relations to be dynamic data structures, like lists:</p>
<!-- START PHRASE "defn167" -->
<div class="definition"><a id="defn167"></a><p class="defnprototype"><b>let </b>(a name not so far used)<b> be </b>(description of relations of values to values)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_letrelation -->

<p>This phrase creates a new temporary variable, and sets its value to the identity of a newly created and equally temporary relation. These last only for the present block of phrases, which certainly means that they exist only in the current rule. Example:</p>
<!-- START CODE "c3809" -->
<a id="c3809"></a><blockquote class="code"><p class="quoted">
let the password dictionary be a relation of texts;
</p></blockquote>
<!-- END CODE -->
<p>This makes a purely temporary various-to-various relation between texts, which lasts as long as the temporary value &quot;password dictionary&quot; lasts. By default, relations are various-to-various, but we could instead write, say:</p>
<!-- START CODE "c3810" -->
<a id="c3810"></a><blockquote class="code"><p class="quoted">
let the nicknames catalogue be a various-to-one relation of texts;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>Such a relation exists only in the current phrase, and is destroyed when the phrase finishes, like any other &quot;let&quot;. Of course there's no verb whose meaning is this relation, but that's no obstacle, because we can manipulate it using &quot;relates&quot;:</p>
<!-- START CODE "c3811" -->
<a id="c3811"></a><blockquote class="code"><p class="quoted">
now the nicknames catalogue relates &quot;Trudy&quot; to &quot;Snake-eyes&quot;;
</p></blockquote>
<!-- END CODE -->
<p>(At present such a relation cannot be used outside its own phrase.)</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s14" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s14" class="standardlink">Back to §13.14. Relations as values in their own right</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s16" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_13.html#s16" class="standardlink">Onward to §13.16. What are relations for?</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s16"></a>§13.16. What are relations for?</p>
<p>It is easy to say what verbs are for: they are to express relations. But what are relations for?</p>
<p>Inform 7's focus on relations between objects is unusual as an approach to interactive fiction; the concept does not exist in most design systems, or rather, it does but is submerged. Traditional design systems do, after all, have the spatial relations of being inside, on top of, and so on. It could well be said that these are the only relationships that inanimate objects ever have. A stone can be on top of a table, and if so then that expresses their entire association.</p>
<p>This is because the stone, and the table, have no opinions, emotions, knowledge or memory. If the stone is taken away and then put back, nothing has changed. People, on the other hand, tend to remember having met each other before; they like being in some places, but not others; their behaviour depends on who, or what, is nearby. Being conscious, they have internal states, unlike the stone. Relations are a simple but powerful way to express and talk about such connections, and although they have numerous uses in physical contexts too, they are at their most powerful when helping to make the characters of interactive fiction come alive.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of Chapter 13: Relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#s15" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_13.html#s15" class="standardlink">Back to §13.15. Temporary relations</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_14.html#s1" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_14.html#s1" class="standardlink">Onward to Chapter 14: Adaptive Text and Responses: §14.1. Tense and narrative viewpoint</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e258" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e258" class="standardlink">Example 241: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Murder on the Orient Express</b>&#160;&#160;&#160; A number of sleuths (the player among them) find themselves aboard the Orient Express, where a murder has taken place, and one of them is apparently the culprit. Naturally they do not agree on whom, but there is physical evidence which may change their minds...</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e435" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e435" class="standardlink">Example 242: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>What Not To Wear</b>&#160;&#160;&#160; A general-purpose clothing system that handles a variety of different clothing items layered in different combinations over different areas of the body.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e240" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e240" class="standardlink">Example 243: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Mathematical view of relations</b>&#160;&#160;&#160; Some notes on relations from a mathematical point of view, provided only to clarify some technicalities for those who are interested.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_13.html#e241" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_13.html#e241" class="standardlink">Example 244: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Graph-theory view of relations</b>&#160;&#160;&#160; Some notes on relations from the point of view of graph theory.</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading">Examples from Chapter 13: Relations</p><table class="centredtable"><tr><td class="roadsigndirection"><a href="WI_13.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_13.html" class="standardlink">Start of this chapter</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_14.html" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_14.html" class="standardlink">Chapter 14: Adaptive Text and Responses</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><!-- START EXAMPLE "223: Formal syntax of sentences" "e175" -->
<a id="e175"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e175" class="eglink"><b>223</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e175" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Formal syntax of sentences</span></b></a><br />A more formal description of the sentence grammar used by Inform for both assertions and conditions.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_1.html#e175"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example175">
<p>An entire grammar for the whole mass of Inform would not be linguistically interesting: it contains many convenient wordings which are not really part of a grand pattern. Inform does, however, have a formal notion of a Sentence, a grammatical structure which we shall call S. It is almost true that conditions (&quot;if the flowerpot is on the wall&quot;) have the same grammar as assertions (&quot;The flowerpot is on the wall&quot;) and &quot;now&quot; phrases (&quot;now the flowerpot is on the wall&quot;). All three use the S grammar, so we could define an assertion as &quot;S.&quot;, say that &quot;if S&quot;, &quot;while S&quot;, &quot;when S&quot; and so on are conditions, and say that &quot;now S&quot; defines the &quot;now&quot; declaration.</p>
<p>Grammatical sentences do not necessarily make sense, of course. Many perfectly grammatical assertions in fact give rise to problem messages:</p>
<!-- START CODE "c3812_175" -->
<a id="c3812_175"></a><blockquote class="code"><p class="quoted">
The wicker basket is not in the kitchen. (<span class="italic">Unhelpfully negative.</span>)
<br />The wicker basket has been in the kitchen. (<span class="italic">Talks about a time which never existed.</span>)
<br />The wicker basket is full. (<span class="italic">Full of what? Too vague.</span>)
<br />The wicker basket is the ginger cat. (<span class="italic">Demonstrably false.</span>)
</p></blockquote>
<!-- END CODE -->
<p>Whereas the first three, at least, would be sensible as conditions. So saying that assertions are &quot;just like&quot; conditions is a little misleading: what they have in common is S, the underlying grammar they each use as a starting-point.</p>
<p>To define S, we break it up into subsidiary structures. The most important is the Description Phrase (DP), examples of which include &quot;the red basket&quot;, &quot;somewhere lighted&quot; and &quot;an empty open container&quot;. Clearly sentences include DPs, but they also include other ingredients. The general pattern used in Inform is very simple:</p>
<!-- START CODE "c3813_175" -->
<a id="c3813_175"></a><blockquote class="code"><p class="quoted">
1. S = DP + VP
<br />2. VP = Verb + DP
</p></blockquote>
<!-- END CODE -->
<p>where VP is another structure, the Verb Phrase. For instance:</p>
<!-- START CODE "c3814_175" -->
<a id="c3814_175"></a><blockquote class="code"><p class="quoted">
S (The horseman wears a riding helmet)
<br />&#160;&#160;&#160;&#160;= DP (The horseman) + VP (wears a riding helmet)
<br />VP (wears a riding helmet)
<br />&#160;&#160;&#160;&#160;= Verb (wears) + DP (a riding helmet)
</p></blockquote>
<!-- END CODE -->
<p>In that example, the Verb was the single word &quot;wears&quot;. More generally, Inform allows a Verb to include adverbs and prepositions, to be negated, and to come in any of four tenses, so the following are all valid examples of Verb in our grammar:</p>
<!-- START CODE "c3815_175" -->
<a id="c3815_175"></a><blockquote class="code"><p class="quoted">
wore
<br />carries
<br />is carried by
<br />had not been inside
</p></blockquote>
<!-- END CODE -->
<p>Although we are not going through the definition of Description Phrases in detail, it is worth noticing how &quot;which&quot; and &quot;who&quot; behave:</p>
<!-- START CODE "c3816_175" -->
<a id="c3816_175"></a><blockquote class="code"><p class="quoted">
3a. DP = DP + which + VP
<br />3b. DP = DP + who + VP
</p></blockquote>
<!-- END CODE -->
<p>Thus &quot;an open container which is in the Ballroom&quot; can be broken down as:</p>
<!-- START CODE "c3817_175" -->
<a id="c3817_175"></a><blockquote class="code"><p class="quoted">
DP (an open container) + which + VP (is in the Ballroom)
</p></blockquote>
<!-- END CODE -->
<p>To understand compounds like &quot;something in a container&quot;, we have to invent a new grammatical structure for &quot;in a container&quot; and similar: let's call this a Relative Phrase (RP).</p>
<!-- START CODE "c3818_175" -->
<a id="c3818_175"></a><blockquote class="code"><p class="quoted">
4. DP = DP + RP
</p></blockquote>
<!-- END CODE -->
<p>Thus &quot;an open container in the Ballroom&quot; is DP (an open container) + RP (in the Ballroom). Relative Phrases have two different forms:</p>
<!-- START CODE "c3819_175" -->
<a id="c3819_175"></a><blockquote class="code"><p class="quoted">
5a. RP = Preposition + DP
<br />5b. RP = Participle + DP
</p></blockquote>
<!-- END CODE -->
<p>so that &quot;in a container&quot; is an example of 5a. An example of 5b would be</p>
<!-- START CODE "c3820_175" -->
<a id="c3820_175"></a><blockquote class="code"><p class="quoted">
RP (worn by Mr Darcy) = Participle (worn by) + DP (Mr Darcy)
</p></blockquote>
<!-- END CODE -->
<p>That is nearly it, but not quite: we must go back to the &quot;almost&quot; in the statement above that assertions and conditions &quot;almost&quot; have the same grammar S. The difference arises from a curious irregularity in English called subject-verb inversion (see the <span class="italic">Oxford English Grammar</span> at 3.22F), whereby assertions can be reversed but not conditions. For instance,</p>
<!-- START CODE "c3821_175" -->
<a id="c3821_175"></a><blockquote class="code"><p class="quoted">
In the Garden is a sunflower.
</p></blockquote>
<!-- END CODE -->
<p>This does not follow the pattern S = DP + VP, because &quot;in the garden&quot; is not a DP: indeed, it is not a noun at all. To make sense of this sentence, Inform reverses it to &quot;A sunflower is in the Garden&quot;, which does indeed follow DP + VP. Hence the final rule:</p>
<!-- START CODE "c3822_175" -->
<a id="c3822_175"></a><blockquote class="code"><p class="quoted">
6 (assertions only). S = RP + Verb + DP
</p></blockquote>
<!-- END CODE -->
<p>So the condition &quot;if in the garden is a sunflower...&quot; fails because rule 6 does not apply to the grammar for conditions: while occasional poetic uses of subject-verb inversion do turn up in conditions (&quot;If On A Winter's Night A Traveller&quot;, say), they are rare in ordinary English usage, and illegal in Inform. That completes the S grammar, so to recap:</p>
<!-- START CODE "c3823_175" -->
<a id="c3823_175"></a><blockquote class="code"><p class="quoted">
1. S = DP + VP
<br />2. VP = Verb + DP
<br />3a. DP = DP + which + VP
<br />3b. DP = DP + who + VP
<br />4. DP = DP + RP
<br />5a. RP = Preposition + DP
<br />5b. RP = Participle + DP
<br />6 (assertions only). S = RP + Verb + DP
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "224: Celadon" "e70" -->
<a id="e70"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e70" class="eglink"><b>224</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e70" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Celadon</span></b></a><br />Using the enclosure relation to let the player drop things which he only indirectly carries.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e70"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example70">
<p>By default, Inform only lets the player drop those things which he is carrying -- that is, those directly in his possession. Things inside satchels or on portable trays have to be taken first.</p>
<p>If we want to change this behavior, we might add a dropping rule that distinguishes between carrying and mere enclosure (introduced back in &quot;The location of something&quot; in the chapter on Things):</p>
<!-- START CODE "c3824_70" -->
<a id="c3824_70"></a><blockquote class="code"><p class="quoted">
 &quot;Celadon&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3825_70" -->
<a id="c3825_70"></a><blockquote class="code"><p class="quoted">
The Tea Room is a room. The player carries a black lacquer tray. The lacquer tray is portable. On the lacquer tray are a celadon teapot and a napkin.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3826_70" -->
<a id="c3826_70"></a><blockquote class="code"><p class="quoted">
Before dropping something:
<br />&#160;&#160;&#160;&#160;if the player does not carry the noun and the player encloses the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first taking [the noun] from [the holder of the noun])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player does not carry the noun, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3827_70" -->
<a id="c3827_70"></a><blockquote class="code"><p class="quoted">
Instead of taking the napkin:
<br />&#160;&#160;&#160;&#160;say &quot;It seems to be stuck to the tray, possibly by an underlying wad of gum.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3828_70" -->
<a id="c3828_70"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / drop teapot / i / look / drop teapot / drop napkin / i / drop tray&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "225: Interrogation" "e200" -->
<a id="e200"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e200" class="eglink"><b>225</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e200" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Interrogation</span></b></a><br />A wand which, when waved, reveals the concealed items carried by people the player can see.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e200"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example200">
<!-- START CODE "c3829_200" -->
<a id="c3829_200"></a><blockquote class="code"><p class="quoted">
&quot;Interrogation&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3830_200" -->
<a id="c3830_200"></a><blockquote class="code"><p class="quoted">
The X-Ray Vision Wand is carried by the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3831_200" -->
<a id="c3831_200"></a><blockquote class="code"><p class="quoted">
Instead of waving the X-Ray Vision Wand:
<br />&#160;&#160;&#160;&#160;say &quot;Disappointingly, nothing happens.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3832_200" -->
<a id="c3832_200"></a><blockquote class="code"><p class="quoted">
Instead of waving the X-Ray Vision Wand when the player can see someone who is concealing something:
<br />&#160;&#160;&#160;&#160;say &quot;The wand glows green. Immediately you see on the monitor [a list of things which are concealed by people who can be seen by the player].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3833_200" -->
<a id="c3833_200"></a><blockquote class="code"><p class="quoted">
After printing the name of a thing (called target) which is carried by someone while waving the wand:
<br />&#160;&#160;&#160;&#160;say &quot; (carried by [a random person who carries the target])&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3834_200" -->
<a id="c3834_200"></a><blockquote class="code"><p class="quoted">
The Interrogation Chamber is a room. &quot;Despite its gothic name, this room is a rather civilized place for your work, with large plate-glass windows and a fitted carpet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3835_200" -->
<a id="c3835_200"></a><blockquote class="code"><p class="quoted">
A thing can be secret or obvious. A thing is usually obvious.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3836_200" -->
<a id="c3836_200"></a><blockquote class="code"><p class="quoted">
Brian is in the Interrogation Chamber.&quot;Brian lounges against the wall.&quot; Brian carries a quantity of plastic explosive. The explosive is secret.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3837_200" -->
<a id="c3837_200"></a><blockquote class="code"><p class="quoted">
Janine is in the Interrogation Chamber. &quot;Janine toys nervously with a laptop bag.&quot; Janine carries a chocolate biscuit, a laptop bag, and a microfilm. The microfilm is secret. The laptop bag is wearable. In the bag is a laptop computer.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3838_200" -->
<a id="c3838_200"></a><blockquote class="code"><p class="quoted">
Rule for deciding the concealed possessions of something: if the particular possession is secret, yes; otherwise no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3839_200" -->
<a id="c3839_200"></a><blockquote class="code"><p class="quoted">
Instead of examining someone: say &quot;[The noun] is openly carrying [a list of unconcealed things carried by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3840_200" -->
<a id="c3840_200"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wave wand / examine janine / examine brian&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "226: Four Cheeses" "e376" -->
<a id="e376"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e376" class="eglink"><b>226</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e376" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Four Cheeses</span></b></a><br />A system of telephones on which the player can call distant persons and have conversations.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_9.html#e376"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example376">
<!-- START CODE "c3841_376" -->
<a id="c3841_376"></a><blockquote class="code"><p class="quoted">
&quot;Four Cheeses&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3842_376" -->
<a id="c3842_376"></a><blockquote class="code"><p class="quoted">
Section 1 - Telephones and Connections
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3843_376" -->
<a id="c3843_376"></a><blockquote class="code"><p class="quoted">
A telephone is a kind of thing. Understand &quot;phone&quot; as a telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3844_376" -->
<a id="c3844_376"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [any telephone] on [something]&quot; as calling it on. Understand &quot;call [any telephone]&quot; as calling it on. Understand the commands &quot;dial&quot; or &quot;phone&quot; or &quot;telephone&quot; as &quot;call&quot;. Understand &quot;call [any known person]&quot; as calling it by name on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3845_376" -->
<a id="c3845_376"></a><blockquote class="code"><p class="quoted">
Connection relates one thing to another (called the other party).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3846_376" -->
<a id="c3846_376"></a><blockquote class="code"><p class="quoted">
The verb to reach means the connection relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3847_376" -->
<a id="c3847_376"></a><blockquote class="code"><p class="quoted">
Calling it on is an action applying to one visible thing and one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3848_376" -->
<a id="c3848_376"></a><blockquote class="code"><p class="quoted">
Check calling it on:
<br />&#160;&#160;&#160;&#160;if the second noun is not a telephone, say &quot;[The second noun] is unlikely to be much use in that respect.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is the noun, say &quot;You get a busy signal.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3849_376" -->
<a id="c3849_376"></a><blockquote class="code"><p class="quoted">
Carry out calling it on:
<br />&#160;&#160;&#160;&#160;if a person (called the listener) can see the noun, now the player reaches the listener.
</p></blockquote>
<!-- END CODE -->
<p>Because we've said that connection is a reciprocal, one-to-one relationship, Inform will do the rest of the bookkeeping: if (for instance) we telephone someone else, the first connection will be broken automatically.</p>
<!-- START CODE "c3850_376" -->
<a id="c3850_376"></a><blockquote class="code"><p class="quoted">
Report calling it on:
<br />&#160;&#160;&#160;&#160;say &quot;'Hello?' says [the other party of the player].&quot;
</p></blockquote>
<!-- END CODE -->
<p>To avoid annoyance, we should also let the player use CALL #### as well as CALL #### ON TELEPHONE. A rule from the chapter on Activities comes in handy here:</p>
<!-- START CODE "c3851_376" -->
<a id="c3851_376"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing second noun while calling something on:
<br />&#160;&#160;&#160;&#160;assign a phone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3852_376" -->
<a id="c3852_376"></a><blockquote class="code"><p class="quoted">
To assign a phone:
<br />&#160;&#160;&#160;&#160;if the player can touch a telephone (called the current phone):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(on [the current phone])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the second noun is the current phone;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You don't have a phone handy.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Things might be a little more complicated if we had cell phones that could be moved around, but for right now the player can only touch a maximum of one phone at a time.</p>
<p>Suppose we further want to allow the player to call people up by name, but only if they've already been encountered or are familiar to the player for some reason.</p>
<!-- START CODE "c3853_376" -->
<a id="c3853_376"></a><blockquote class="code"><p class="quoted">
A person can be known or unknown.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3854_376" -->
<a id="c3854_376"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [any known person]&quot; as calling it by name on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3855_376" -->
<a id="c3855_376"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [any known person] on [something]&quot; as calling it by name on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3856_376" -->
<a id="c3856_376"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing second noun while calling something by name on:
<br />&#160;&#160;&#160;&#160;assign a phone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3857_376" -->
<a id="c3857_376"></a><blockquote class="code"><p class="quoted">
Calling it by name on is an action applying to one visible thing and one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3858_376" -->
<a id="c3858_376"></a><blockquote class="code"><p class="quoted">
Check calling it by name on:
<br />&#160;&#160;&#160;&#160;if the noun is in the location, say &quot;[The noun] is right here.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3859_376" -->
<a id="c3859_376"></a><blockquote class="code"><p class="quoted">
Carry out calling it by name on:
<br />&#160;&#160;&#160;&#160;if the noun can touch a telephone (called the link), try calling the link on the second noun;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You can't reach [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3860_376" -->
<a id="c3860_376"></a><blockquote class="code"><p class="quoted">
Before calling something on something when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;(first ending your conversation with [the other party of the player])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;end current conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3861_376" -->
<a id="c3861_376"></a><blockquote class="code"><p class="quoted">
Understand &quot;hang up [something]&quot; as hanging up.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3862_376" -->
<a id="c3862_376"></a><blockquote class="code"><p class="quoted">
Hanging up is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3863_376" -->
<a id="c3863_376"></a><blockquote class="code"><p class="quoted">
Check hanging up:
<br />&#160;&#160;&#160;&#160;if the noun is not a telephone, say &quot;You can't hang up [the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;if the player does not reach someone, say &quot;You're not on the line with anyone.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3864_376" -->
<a id="c3864_376"></a><blockquote class="code"><p class="quoted">
Carry out hanging up:
<br />&#160;&#160;&#160;&#160;now the player does not reach anyone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3865_376" -->
<a id="c3865_376"></a><blockquote class="code"><p class="quoted">
Report hanging up:
<br />&#160;&#160;&#160;&#160;say &quot;You put down [the noun], cutting the connection.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3866_376" -->
<a id="c3866_376"></a><blockquote class="code"><p class="quoted">
Before going somewhere when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;(first hanging up on [the other party of the player])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;end current conversation.
</p></blockquote>
<!-- END CODE -->
<p>And finally we want to make sure that calling random other numbers produces a sensible result:</p>
<!-- START CODE "c3867_376" -->
<a id="c3867_376"></a><blockquote class="code"><p class="quoted">
Understand &quot;call [text]&quot; as misdialling. Misdialling is an action applying to one topic. Carry out misdialling: say &quot;The phone rings and rings but no one answers.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3868_376" -->
<a id="c3868_376"></a><blockquote class="code"><p class="quoted">
Understand &quot;call 911&quot; or &quot;call 999&quot; or &quot;call police&quot; or &quot;call fire department&quot; as a mistake (&quot;After strict warnings, you've given up making prank calls to emergency services.&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3869_376" -->
<a id="c3869_376"></a><blockquote class="code"><p class="quoted">
Before misdialling when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;(first ending your conversation with [the other party of the player])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;end current conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3870_376" -->
<a id="c3870_376"></a><blockquote class="code"><p class="quoted">
To end current conversation:
<br />&#160;&#160;&#160;&#160;let the current phone be a random telephone which can be touched by the player;
<br />&#160;&#160;&#160;&#160;silently try hanging up the current phone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3871_376" -->
<a id="c3871_376"></a><blockquote class="code"><p class="quoted">
After deciding the scope of the player while the player reaches someone:
<br />&#160;&#160;&#160;&#160;place the other party of the player in scope, but not its contents.
</p></blockquote>
<!-- END CODE -->
<p>A note about this scope addition: the player can refer to the other party whenever he has the other person on the phone. He can't, however, see or refer to anything that person might be holding or wearing, thanks to the &quot;but not its contents&quot; option.</p>
<p>Furthermore, the player can't actually do anything to that person that requires touching. That's because of the reaching inside rules, which govern whether the player can reach through intervening barriers such as rooms. (See the Advanced Actions chapter for more about changing reachability.) There are two things we might want to be careful about, though.</p>
<p>First, we should specifically disallow the player from looking at the person on the other end of the line. Since sight doesn't require touching, the reaching inside rules will not be consulted about a command such as EXAMINE BOSS or LOOK UNDER BOSS. We can, however, intervene in such cases using the visibility rules, which are consulted for any actions that &quot;require light&quot; (including EXAMINE and LOOK UNDER). Here again we borrow some options from the Advanced Actions chapter:</p>
<!-- START CODE "c3872_376" -->
<a id="c3872_376"></a><blockquote class="code"><p class="quoted">
To decide whether acting through the line:
<br />&#160;&#160;&#160;&#160;if the noun is something and the location of the noun is not the location of the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;yes;
<br />&#160;&#160;&#160;&#160;if the second noun is something and the location of the second noun is not the location of the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3873_376" -->
<a id="c3873_376"></a><blockquote class="code"><p class="quoted">
Visibility rule when acting through the line:
<br />&#160;&#160;&#160;&#160;there is insufficient light.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3874_376" -->
<a id="c3874_376"></a><blockquote class="code"><p class="quoted">
Rule for printing a refusal to act in the dark when acting through the line:
<br />&#160;&#160;&#160;&#160;say &quot;You're not on a video phone, so you can only hear.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Second, though the existing reaching inside rules are adequate to stop us from touching the person on the other end of the line, the response that's currently printed is a bit generic: it just says &quot;You can't reach into [the room containing the person].&quot; Let's add our own custom reply, instead:</p>
<!-- START CODE "c3875_376" -->
<a id="c3875_376"></a><blockquote class="code"><p class="quoted">
A rule for reaching inside a room (called destination):
<br />&#160;&#160;&#160;&#160;if the other party of the player is enclosed by the destination:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Though you're on the line with [the other party of the player], you can't physically reach to [the destination].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deny access.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3876_376" -->
<a id="c3876_376"></a><blockquote class="code"><p class="quoted">
Section 2 - Conversation over the Phone, In General
</p></blockquote>
<!-- END CODE -->
<p>This portion supplies a simple method of conversation; but we could substitute some completely different conversation system if appropriate. The effect of the telephones is that we are allowed to talk to characters in distant locations under certain circumstances, after which the usual conversation rules apply.</p>
<!-- START CODE "c3877_376" -->
<a id="c3877_376"></a><blockquote class="code"><p class="quoted">
Instead of listening to a telephone when the player reaches someone:
<br />&#160;&#160;&#160;&#160;say &quot;You can hear [the other party of the player] breathing.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3878_376" -->
<a id="c3878_376"></a><blockquote class="code"><p class="quoted">
Before listening to someone when the player cannot touch the noun:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is waiting for you to carry on the conversation.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3879_376" -->
<a id="c3879_376"></a><blockquote class="code"><p class="quoted">
A person has a table name called chatter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3880_376" -->
<a id="c3880_376"></a><blockquote class="code"><p class="quoted">
Before telling someone about something:
<br />&#160;&#160;&#160;&#160;try asking the noun about it instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3881_376" -->
<a id="c3881_376"></a><blockquote class="code"><p class="quoted">
Before answering someone that something:
<br />&#160;&#160;&#160;&#160;say &quot;Best to confine your conversation to questions and answers.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3882_376" -->
<a id="c3882_376"></a><blockquote class="code"><p class="quoted">
Before asking someone about something:
<br />&#160;&#160;&#160;&#160;if the topic understood is a topic listed in the chatter of the noun, say &quot;[reply entry][paragraph break]&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The noun] does not reply.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3883_376" -->
<a id="c3883_376"></a><blockquote class="code"><p class="quoted">
Section 3 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3884_376" -->
<a id="c3884_376"></a><blockquote class="code"><p class="quoted">
The Guard House is a room. &quot;Here you spend all your nights. Bullet-proof windows offer a panoramic view of serene cliffs, palm trees, and a moonlit ocean. Occasionally someone is foolish enough to try a cliff ascent or even an attack by helicopter, but lately things have been pretty quiet.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3885_376" -->
<a id="c3885_376"></a><blockquote class="code"><p class="quoted">
The mansion is up the hill behind you, security lights ablaze.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3886_376" -->
<a id="c3886_376"></a><blockquote class="code"><p class="quoted">
The grey telephone is a telephone in the Guard House. Understand &quot;6885&quot; as the grey telephone. &quot;Before you is a grey telephone. In black marker someone has written on it: MAIN OFFICE 2802.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3887_376" -->
<a id="c3887_376"></a><blockquote class="code"><p class="quoted">
Before going a direction in the Guard House, say &quot;And leave your post? The boss would have you flayed. No kidding.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>In a game where the player could walk around, we would of course want to add a before rule so that he automatically hung up any phone he was using before leaving the room.</p>
<!-- START CODE "c3888_376" -->
<a id="c3888_376"></a><blockquote class="code"><p class="quoted">
The Main Office is a room. The boss is a known woman in the Main Office. A telephone called the red telephone is in the Main Office. Understand &quot;2802&quot; as the red telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3889_376" -->
<a id="c3889_376"></a><blockquote class="code"><p class="quoted">
The Guild is a room. The ninja is an unknown man in the Guild. A telephone called the black telephone is in the Guild. Understand &quot;4431&quot; as the black telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3890_376" -->
<a id="c3890_376"></a><blockquote class="code"><p class="quoted">
Potter's Pizza is a room. The pizza delivery boy is a known man in Pizza. A telephone called the saucy telephone is in Pizza. Understand &quot;8885&quot; as the saucy telephone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3891_376" -->
<a id="c3891_376"></a><blockquote class="code"><p class="quoted">
The chatter of the boss is the Table of Boss Conversation. The chatter of the delivery boy is the Table of Pizza Conversation. The chatter of the ninja is the Table of Ninja Conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3892_376" -->
<a id="c3892_376"></a><blockquote class="code"><p class="quoted">
After calling the red telephone on something for the first time:
<br />&#160;&#160;&#160;&#160;say &quot;'Yes?' asks the boss. Her voice is especially husky this evening. Maybe that night of passion isn't so far off after all.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3893_376" -->
<a id="c3893_376"></a><blockquote class="code"><p class="quoted">
Table of Boss Conversation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;love/passion/tonight/night&quot; or &quot;night of passion&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'...Sorry, what?' she asks. 'I wasn't listening.' Oh. Maybe she'd go for some pizza, though.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pizza&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'I'd love some. No pepperoni, though,' she says, sounding dreamy. Yes, this is definitely time for a call to your old friend, the pizza boy.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;imminent ninja attack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Don't worry about it,' says the boss crisply. 'I have everything under control.'&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3894_376" -->
<a id="c3894_376"></a><blockquote class="code"><p class="quoted">
Table of Pizza Conversation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pizza&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Pepperoni special tonight!' he says proudly.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pepperoni&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Pepperoni is included free on ALL our pizzas,' he says proudly.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;no pepperoni&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Well, I don't see why you'd want that,' replies the boy sniffily. 'It's free!'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;jalapeno&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Sorry, we're out of jalapenos this evening. There was a run on them.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;sausage&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Sausage, sure, we can do you sausage.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;canadian bacon&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'There's currently an embargo on Canadian pig products.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cheese&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'We use four kinds,' says the boy, then lowers his voice confidentially. 'Actually, two of them are the same. Nobody ever counts. The stringy one, the one that comes in dollops and the orangey one. You know.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pineapple&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'We could put pineapple on there, sure,' says the delivery boy, in a tone that lets you know his opinion of people who order fruit-based pizzas.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pineapple and garlic&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'What kind of crazy combination is that?' demands the delivery boy, finally losing all self-control.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;delivery&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Well, I don't know,' says the boy in a worried voice. 'Last time I came there were attack dogs. And ninjas.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;massive gratuity&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'There's no use in a big tip you don't live to spend,' says the delivery boy quite firmly.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3895_376" -->
<a id="c3895_376"></a><blockquote class="code"><p class="quoted">
Table of Ninja Conversation
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;imminent attack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Yes, still on for tonight,' confirms the voice at the other end of the line.&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;pizza delivery boy&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;The voice, in tones of velvet, indicates that it cannot guarantee the safety of any delivery persons whomsoever.&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3896_376" -->
<a id="c3896_376"></a><blockquote class="code"><p class="quoted">
Test me with &quot;call 2802 / examine boss / ask boss about night of passion / ask boss about pizza / listen to telephone / call delivery boy on telephone / ask boy about cheese / tell boy about no pepperoni / ask boy about delivery / tell boy about massive gratuity / attack boy&quot;.
</p></blockquote>
<!-- END CODE -->
<p>...and it more or less writes itself from there.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "227: Transmutations" "e390" -->
<a id="e390"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e390" class="eglink"><b>227</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e390" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Transmutations</span></b></a><br />A machine that turns objects into other, similar objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e390"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example390">
<p>Suppose we want to have a machine in our game that can transmute one item into another, similar object with different properties: a bag of jelly beans into a bag of jewels, for instance. Thus each item will be associated with some number of equivalents -- the other objects it can turn into. This is a handy use for group relations:</p>
<!-- START CODE "c3897_390" -->
<a id="c3897_390"></a><blockquote class="code"><p class="quoted">
&quot;Transmutations&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3898_390" -->
<a id="c3898_390"></a><blockquote class="code"><p class="quoted">
Workshop is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3899_390" -->
<a id="c3899_390"></a><blockquote class="code"><p class="quoted">
Transmutation relates things to each other in groups. The verb to become means the transmutation relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3900_390" -->
<a id="c3900_390"></a><blockquote class="code"><p class="quoted">
Definition: a thing is transmutable if it becomes more than one thing. [* It always becomes itself.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3901_390" -->
<a id="c3901_390"></a><blockquote class="code"><p class="quoted">
A thing can be valuable. Something valuable called a bag of jewels is carried by the player. It becomes the bag of gunpowder and the bag of jelly beans.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3902_390" -->
<a id="c3902_390"></a><blockquote class="code"><p class="quoted">
A thing can be dangerous. The bag of gunpowder is a dangerous thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3903_390" -->
<a id="c3903_390"></a><blockquote class="code"><p class="quoted">
The bag of jelly beans is an edible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3904_390" -->
<a id="c3904_390"></a><blockquote class="code"><p class="quoted">
The machine is fixed in place in the workshop.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3905_390" -->
<a id="c3905_390"></a><blockquote class="code"><p class="quoted">
The can't insert into what's not a container rule does nothing when inserting something into the machine.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3906_390" -->
<a id="c3906_390"></a><blockquote class="code"><p class="quoted">
Check inserting something which is not transmutable into the machine:
<br />&#160;&#160;&#160;&#160;instead say &quot;You can't transmute that.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3907_390" -->
<a id="c3907_390"></a><blockquote class="code"><p class="quoted">
To decide which thing is new form of (obj - edible thing): decide on a random valuable thing which becomes obj.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3908_390" -->
<a id="c3908_390"></a><blockquote class="code"><p class="quoted">
To decide which thing is new form of (obj - dangerous thing): decide on a random edible thing which becomes obj.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3909_390" -->
<a id="c3909_390"></a><blockquote class="code"><p class="quoted">
To decide which thing is new form of (obj - valuable thing): decide on a random dangerous thing which becomes obj.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3910_390" -->
<a id="c3910_390"></a><blockquote class="code"><p class="quoted">
Carry out inserting something into the machine:
<br />&#160;&#160;&#160;&#160;now the noun is nowhere;
<br />&#160;&#160;&#160;&#160;now the player carries the new form of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3911_390" -->
<a id="c3911_390"></a><blockquote class="code"><p class="quoted">
Report inserting something edible into the machine:
<br />&#160;&#160;&#160;&#160;say &quot;The machine clicks, whirrs, and spits out [a new form of the noun]. You're rich!&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3912_390" -->
<a id="c3912_390"></a><blockquote class="code"><p class="quoted">
Report inserting something dangerous into the machine:
<br />&#160;&#160;&#160;&#160;say &quot;The machine clicks, whirrs, and in a shower of flavor crystals, spits out [a new form of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3913_390" -->
<a id="c3913_390"></a><blockquote class="code"><p class="quoted">
Report inserting something valuable into the machine:
<br />&#160;&#160;&#160;&#160;say &quot;The machine clicks, whirrs, and with a violent roar, spits out [a new form of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3914_390" -->
<a id="c3914_390"></a><blockquote class="code"><p class="quoted">
&#160;&#160;&#160;&#160;Test me with &quot;i / put jewels in machine / i / put gunpowder in machine / i / put beans in machine&quot;.
</p></blockquote>
<!-- END CODE -->
<p>In this example we have only defined a single set of transmutable objects, but we could easily expand to include other groups.</p>
<p>(Thanks to Jesse McGrew for proposing this example.)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "228: Otranto" "e330" -->
<a id="e330"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e330" class="eglink"><b>228</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e330" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Otranto</span></b></a><br />A kind of rope which can be tied to objects and used to anchor the player or drag items from room to room.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e330"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example330">
<p>The range of things one might want to do with a rope in a work of interactive fiction is fairly overwhelming. One might, in theory, swing from ropes; use them to tie containers shut; cut them up into smaller ropes; tie them together into longer ropes; employ them as fuses; bind other characters with them, or the player character.</p>
<p>Our rope implementation is, by these lights, reasonably simple, but it does account for the possibility of tying and untying both ends; using ropes to descend into lower rooms; pulling objects tied to the far end of the rope; and dragging objects from place to place.</p>
<!-- START CODE "c3915_330" -->
<a id="c3915_330"></a><blockquote class="code"><p class="quoted">
&quot;Otranto&quot;
</p></blockquote>
<!-- END CODE -->
<p>We start by coming up with a rope.</p>
<!-- START CODE "c3916_330" -->
<a id="c3916_330"></a><blockquote class="code"><p class="quoted">
A rope is a kind of thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3917_330" -->
<a id="c3917_330"></a><blockquote class="code"><p class="quoted">
Definition: a thing is nonrope if it is not a rope. [The perfect idiocy of this statement notwithstanding, having a shortcut will come in very handy later]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3918_330" -->
<a id="c3918_330"></a><blockquote class="code"><p class="quoted">
Attachment relates things to each other in groups. The verb to be stuck to means the attachment relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3919_330" -->
<a id="c3919_330"></a><blockquote class="code"><p class="quoted">
Definition: a thing is tied if the number of things stuck to it is greater than 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3920_330" -->
<a id="c3920_330"></a><blockquote class="code"><p class="quoted">
Definition: a thing is free if it is not tied.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3921_330" -->
<a id="c3921_330"></a><blockquote class="code"><p class="quoted">
Definition: a rope is free if the number of nonrope things stuck to it is less than 2.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3922_330" -->
<a id="c3922_330"></a><blockquote class="code"><p class="quoted">
Definition: a thing is hindering if it is stuck to the noun and it is not within the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3923_330" -->
<a id="c3923_330"></a><blockquote class="code"><p class="quoted">
A thing can be round or unevenly shaped. A thing is usually round.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3924_330" -->
<a id="c3924_330"></a><blockquote class="code"><p class="quoted">
Definition: something is anchored if it is fixed in place or it is scenery or it is part of an anchored thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3925_330" -->
<a id="c3925_330"></a><blockquote class="code"><p class="quoted">
Definition: something is draggable if it is not had by the player and it is not the player and it is not anchored.
</p></blockquote>
<!-- END CODE -->
<p>Now, we want a rope to be described in terms of the way it is tied, when it's described in a room description.</p>
<!-- START CODE "c3926_330" -->
<a id="c3926_330"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about a rope (called the coil):
<br />&#160;&#160;&#160;&#160;if the coil is stuck to something which is in a room (called the next room) which is not the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the next room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the way is up or the way is down:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The coil] runs [way] into [the next room].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The coil] snakes across the floor [way] towards [the next room].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;There is [a coil] here[if the coil is stuck to a visible nonrope thing], tied to [the list of nonrope visible things which are stuck to the coil][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3927_330" -->
<a id="c3927_330"></a><blockquote class="code"><p class="quoted">
To decide what room is the home of (item - a thing):
<br />&#160;&#160;&#160;&#160;if item is a door:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let front cut be the number of moves from the location to the front side of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let back cut be the number of moves from the location to the back side of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if front cut is -1, let front cut be 999;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if back cut is -1, let back cut be 999;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the location encloses the item, decide on the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if front cut is greater than back cut, decide on the back side of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decide on the front side of the item;
<br />&#160;&#160;&#160;&#160;decide on the location of the item.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3928_330" -->
<a id="c3928_330"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about a nonrope thing (called the anchor) which is stuck to a rope (called the coil):
<br />&#160;&#160;&#160;&#160;if the coil is in an adjacent room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the next room be the home of the coil;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the next room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the way is up or the way is down:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The coil] runs [way] from [the anchor] into [the next room].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;From [the anchor] runs [a coil], heading off toward [the way].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the coil is stuck to something which is not visible,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The coil] is tied to [the anchor][if the coil is stuck to something in an adjacent room (called the next room)], and from there runs off towards [the next room][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<p>We need a way to account for it when it's being carried, as well.</p>
<!-- START CODE "c3929_330" -->
<a id="c3929_330"></a><blockquote class="code"><p class="quoted">
After printing the name of a rope (called the tied object) while taking inventory:
<br />&#160;&#160;&#160;&#160;if something nonrope is stuck to the tied object:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (attached to [the list of nonrope things which are stuck to the tied object])&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; (with both ends free)&quot;.
</p></blockquote>
<!-- END CODE -->
<p>And, indeed, whenever the player examines a rope, we should see what's connected.</p>
<!-- START CODE "c3930_330" -->
<a id="c3930_330"></a><blockquote class="code"><p class="quoted">
Instead of examining a rope (called the cord) when something is stuck to the cord:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is tied to [the list of secondary things which are stuck to the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Similarly, any time the player looks at something tied to a rope.</p>
<!-- START CODE "c3931_330" -->
<a id="c3931_330"></a><blockquote class="code"><p class="quoted">
After examining the player when the player is stuck to something which is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;You're currently lashed to [the list of secondary things stuck to the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3932_330" -->
<a id="c3932_330"></a><blockquote class="code"><p class="quoted">
After examining something which is stuck to something secondary:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is currently attached to [the list of secondary things stuck to the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>We also need to make sure that the rope can be interacted with properly even when it's partly in the next room.</p>
<!-- START CODE "c3933_330" -->
<a id="c3933_330"></a><blockquote class="code"><p class="quoted">
After deciding the scope of the player:
<br />&#160;&#160;&#160;&#160;if something stuck to a rope (called the coil) is in the location, place the coil in scope.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3934_330" -->
<a id="c3934_330"></a><blockquote class="code"><p class="quoted">
A reaching inside rule:
<br />&#160;&#160;&#160;&#160;if the noun is a rope:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the anchor be a random visible thing stuck to the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the anchor is touchable, allow access.
</p></blockquote>
<!-- END CODE -->
<p>Now tying:</p>
<!-- START CODE "c3935_330" -->
<a id="c3935_330"></a><blockquote class="code"><p class="quoted">
Before tying something to a rope:
<br />&#160;&#160;&#160;&#160;if the noun is stuck to the second noun, say &quot;[The noun] and [the second noun] are already tied together.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the second noun is not free, say &quot;[The second noun] has no ends free.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is round, say &quot;You can't realistically tie anything to [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3936_330" -->
<a id="c3936_330"></a><blockquote class="code"><p class="quoted">
Instead of tying a rope to something:
<br />&#160;&#160;&#160;&#160;try tying the second noun to the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3937_330" -->
<a id="c3937_330"></a><blockquote class="code"><p class="quoted">
Instead of tying something to a rope:
<br />&#160;&#160;&#160;&#160;now the noun is stuck to the second noun;
<br />&#160;&#160;&#160;&#160;say &quot;You loop [the second noun] around [the noun] and knot firmly.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3938_330" -->
<a id="c3938_330"></a><blockquote class="code"><p class="quoted">
Instead of tying something to a nonrope tied thing:
<br />&#160;&#160;&#160;&#160;let the coil be a random rope stuck to the second noun;
<br />&#160;&#160;&#160;&#160;try tying the noun to the coil.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3939_330" -->
<a id="c3939_330"></a><blockquote class="code"><p class="quoted">
Instead of tying a nonrope tied thing to something:
<br />&#160;&#160;&#160;&#160;let the coil be a random rope stuck to the noun;
<br />&#160;&#160;&#160;&#160;try tying the second noun to the coil.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3940_330" -->
<a id="c3940_330"></a><blockquote class="code"><p class="quoted">
Instead of tying a free nonrope thing to a free nonrope thing:
<br />&#160;&#160;&#160;&#160;if the player carries a free rope (called the coil):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try tying the noun to the coil;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun is stuck to the coil and the coil is free:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try tying the second noun to the coil;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You lack the requisite spare rope.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3941_330" -->
<a id="c3941_330"></a><blockquote class="code"><p class="quoted">
Understand &quot;untie [something] from [something]&quot; as untying it from. Understand &quot;untie [something]&quot; as untying  it from.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3942_330" -->
<a id="c3942_330"></a><blockquote class="code"><p class="quoted">
Rule for supplying a missing second noun while untying something from:
<br />&#160;&#160;&#160;&#160;if the number of secondary things stuck to the noun is 0, say &quot;[The noun] is already entirely free.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is a rope:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the number of touchable nonrope things which are stuck to the noun &gt; 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You'll have to say which thing you want to untie [the noun] from.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule fails;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the number of touchable nonrope things stuck to the noun is 0, say &quot;You can't reach [the random nonrope thing stuck to the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the tied object be a random touchable nonrope thing which is stuck to the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(from [the tied object])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the second noun is the tied object;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun is stuck to a rope (called the tied object):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(from [the tied object])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the second noun is the tied object.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3943_330" -->
<a id="c3943_330"></a><blockquote class="code"><p class="quoted">
Untying it from is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3944_330" -->
<a id="c3944_330"></a><blockquote class="code"><p class="quoted">
Before untying a rope from something: try untying the second noun from the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3945_330" -->
<a id="c3945_330"></a><blockquote class="code"><p class="quoted">
Before untying something from a rope:
<br />&#160;&#160;&#160;&#160;if the second noun is not held:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first picking up [the second noun])[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try taking the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3946_330" -->
<a id="c3946_330"></a><blockquote class="code"><p class="quoted">
Check untying it from:
<br />&#160;&#160;&#160;&#160;unless the noun is stuck to the second noun or the second noun is stuck to the noun,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] and [the second noun] are already not tied together.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3947_330" -->
<a id="c3947_330"></a><blockquote class="code"><p class="quoted">
Carry out untying it from:
<br />&#160;&#160;&#160;&#160;now the noun is not stuck to the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3948_330" -->
<a id="c3948_330"></a><blockquote class="code"><p class="quoted">
Report untying it from:
<br />&#160;&#160;&#160;&#160;say &quot;Untied.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Another part of the fun of a rope is that you can drag things from another room:</p>
<!-- START CODE "c3949_330" -->
<a id="c3949_330"></a><blockquote class="code"><p class="quoted">
After reading a command: now every thing is unmentioned.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3950_330" -->
<a id="c3950_330"></a><blockquote class="code"><p class="quoted">
Before pulling something anchored: say &quot;[The noun] is firmly anchored.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3951_330" -->
<a id="c3951_330"></a><blockquote class="code"><p class="quoted">
Instead of pulling something tied:
<br />&#160;&#160;&#160;&#160;if the noun is unmentioned:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The impulse is transmitted to [the list of pullable things stuck to the noun].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through pullable things stuck to the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[item]: [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try pulling the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun is a rope and the noun is not within the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the number of nonrope hindering things is 0, move the noun to the location;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3952_330" -->
<a id="c3952_330"></a><blockquote class="code"><p class="quoted">
Before pulling something which is not visible:
<br />&#160;&#160;&#160;&#160;if the noun is anchored:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] resists, for whatever reason.&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let space be the holder of the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let way be the best route from the space to the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the way is a direction:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] [if the way is up]rises[otherwise]slides[end if] into view.&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] slides into view.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3953_330" -->
<a id="c3953_330"></a><blockquote class="code"><p class="quoted">
Definition: a thing is secondary if it is not the noun.  Definition: a thing is pullable if it is not the noun and it is not the player.
</p></blockquote>
<!-- END CODE -->
<p>A player who is tied to things should also have some restrictions on his ability to move.</p>
<!-- START CODE "c3954_330" -->
<a id="c3954_330"></a><blockquote class="code"><p class="quoted">
Before going a direction (called the way) when the player has something (called the link) which is stuck to something anchored (called the anchor):
<br />&#160;&#160;&#160;&#160;let the next room be the home of the anchor;
<br />&#160;&#160;&#160;&#160;if the next room is not a room, continue the action;
<br />&#160;&#160;&#160;&#160;if the next room is the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the link is stuck to at least two anchored things,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can't go far while you're carrying [the link] tied to [the list of anchored things stuck to the link].&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the safe way be the best route from the location to the next room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the safe way is the way:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is not stuck to the anchor, say &quot;(coiling up your rope again as you go...)&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the safe way is a direction,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;While you have [the link] you can't really head any direction but [best route from the location to the next room].&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;You're tied up here.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3955_330" -->
<a id="c3955_330"></a><blockquote class="code"><p class="quoted">
Before going a direction (called the way) when the player is stuck to something anchored (called the anchor):
<br />&#160;&#160;&#160;&#160;let the next room be the home of the anchor;
<br />&#160;&#160;&#160;&#160;if the next room is not a room, continue the action;
<br />&#160;&#160;&#160;&#160;if the next room is the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is stuck to at least two anchored things,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can't go far while you're tied to [the list of anchored things stuck to the player].&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the best route from the location to the next room is the way:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(coiling up your rope again as you go...)&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Your attachments prevent you going any way but [best route from the location to the next room].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Sometimes, if the player is tied to a movable object, the moved object will move with him.</p>
<!-- START CODE "c3956_330" -->
<a id="c3956_330"></a><blockquote class="code"><p class="quoted">
After going somewhere when the player has something (called the link) which is stuck to something draggable:
<br />&#160;&#160;&#160;&#160;if the player is not stuck to the link:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You drag along behind you [the list of draggable things which are stuck to the link].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every draggable thing which is stuck to the link is in the location;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3957_330" -->
<a id="c3957_330"></a><blockquote class="code"><p class="quoted">
Report going somewhere when the player is stuck to something draggable:
<br />&#160;&#160;&#160;&#160;say &quot;You drag along behind you [the list of draggable things which are stuck to the player].&quot;;
<br />&#160;&#160;&#160;&#160;now every draggable thing which is stuck to the player is in the location.
</p></blockquote>
<!-- END CODE -->
<p>And now the actual game and puzzles.</p>
<!-- START CODE "c3958_330" -->
<a id="c3958_330"></a><blockquote class="code"><p class="quoted">
Use full-length room descriptions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3959_330" -->
<a id="c3959_330"></a><blockquote class="code"><p class="quoted">
The Fallow Field is a room. &quot;The very land is gloomy, the earth plowed into untended rows that yield no fruit, shadowed by the castle to the north. A chasm, no doubt the product of some upheaval of the earth, opens before your feet.&quot;. An oak stump is fixed in place in the Field. &quot;From an oak stump, a few hopeful shoots grow.&quot; A hempen rope is a rope in the field. It is stuck to the oak stump and the wooden chest. The stump is unevenly shaped.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3960_330" -->
<a id="c3960_330"></a><blockquote class="code"><p class="quoted">
The Chasm is below the Field. &quot;Your person is most uncomfortably pressed on every side by the closeness of the walls; to which you may add as a further inconvenience, that the irregularity of the floor making it difficult to walk upright.&quot; An iron key is in the Chasm. &quot;An iron key nestles in the cleft of earth, its age indicated by its implausibly great size.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3961_330" -->
<a id="c3961_330"></a><blockquote class="code"><p class="quoted">
The wooden chest is a unevenly shaped closed openable container in the Chasm. The description of the wooden chest is &quot;A handsome, solid case not long committed to its dank enclosure, or it would long since have rotted.&quot; Rule for printing the name of the wooden chest when the chest is not handled: say &quot;deadweight&quot;. Understand &quot;dead&quot; or &quot;weight&quot; or &quot;deadweight&quot; as the chest. Before pulling the wooden chest: now the chest is handled.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3962_330" -->
<a id="c3962_330"></a><blockquote class="code"><p class="quoted">
In the chest is a heavy dagger. The description of the dagger is &quot;Set with red jewels and of a wicked aspect.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3963_330" -->
<a id="c3963_330"></a><blockquote class="code"><p class="quoted">
Before going down from the Field when the player is not stuck to something anchored:
<br />&#160;&#160;&#160;&#160;say &quot;You don't quite dare simply leap into the darkness without some anchor.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3964_330" -->
<a id="c3964_330"></a><blockquote class="code"><p class="quoted">
Before going down from the Field:
<br />&#160;&#160;&#160;&#160;let anchor be a random anchored thing which is stuck to the player;
<br />&#160;&#160;&#160;&#160;say &quot;You lower yourself gingerly, hoping that [the anchor] holds your weight...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3965_330" -->
<a id="c3965_330"></a><blockquote class="code"><p class="quoted">
Before going up from the Chasm:
<br />&#160;&#160;&#160;&#160;if the player cannot touch a rope which is stuck to an anchored thing which is in the Field, say &quot;And how, precisely, do you mean to do that?&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3966_330" -->
<a id="c3966_330"></a><blockquote class="code"><p class="quoted">
The Castle Hall is north of the Field. &quot;All is desolate: the great hall has no roof, nor is there any glass in the windows. A staircase without banister ascends inside the wall to a musician's gallery without song.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3967_330" -->
<a id="c3967_330"></a><blockquote class="code"><p class="quoted">
The Musician's Gallery is above the Castle Hall. &quot;Of its former cheery aspect only this remains to the Gallery: that chevrons of red and yellow are painted on the wall. But as these are streaked with rain and grime, the banister pulled away, the roof open to the sky, and the corners made a nesting place for birds, the consolation thereby afforded is but slight.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3968_330" -->
<a id="c3968_330"></a><blockquote class="code"><p class="quoted">
The pointed door is north of the Musician's Gallery and south of the Sinister Attic. It is a closed locked openable door. &quot;A pointed door of particularly grim and uninviting aspect leads north.&quot; The pointed door is lockable and unevenly shaped. The description of the pointed door is &quot;A door coming to a gothic point and fitted with iron fittings of great strength. The handle looks particularly well-attached.&quot; The iron key unlocks the pointed door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3969_330" -->
<a id="c3969_330"></a><blockquote class="code"><p class="quoted">
A rule for reaching inside the Musician's Gallery:
<br />&#160;&#160;&#160;&#160;allow access.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3970_330" -->
<a id="c3970_330"></a><blockquote class="code"><p class="quoted">
A rule for reaching inside the Sinister Attic:
<br />&#160;&#160;&#160;&#160;allow access.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3971_330" -->
<a id="c3971_330"></a><blockquote class="code"><p class="quoted">
Instead of opening the pointed door for the first time:
<br />&#160;&#160;&#160;&#160;say &quot;When you rattle at the door, there arises from beyond a terrible shrill noise as though something beyond exults in its imminent release.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3972_330" -->
<a id="c3972_330"></a><blockquote class="code"><p class="quoted">
After opening the trapped pointed door when the player can see the pointed door:
<br />&#160;&#160;&#160;&#160;say &quot;Thousands of bats fly from the pointed door, attacking you!&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3973_330" -->
<a id="c3973_330"></a><blockquote class="code"><p class="quoted">
After opening the pointed door when the player cannot see the pointed door: now the pointed door is untrapped; continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3974_330" -->
<a id="c3974_330"></a><blockquote class="code"><p class="quoted">
The pointed door can be trapped or untrapped. The pointed door is trapped.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3975_330" -->
<a id="c3975_330"></a><blockquote class="code"><p class="quoted">
Before pulling the pointed door: try opening the pointed door instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3976_330" -->
<a id="c3976_330"></a><blockquote class="code"><p class="quoted">
The player is unevenly shaped.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3977_330" -->
<a id="c3977_330"></a><blockquote class="code"><p class="quoted">
After going to the sinister attic:
<br />&#160;&#160;&#160;&#160;say &quot;You have arrived at the goal of your quest!&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3978_330" -->
<a id="c3978_330"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x rope / pull rope / get chest / untie rope from chest / tie rope to me / down / get key / up / untie rope from stump / north / up / unlock pointed door with key / open it / tie rope to door / down / pull rope / up / north&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3979_330" -->
<a id="c3979_330"></a><blockquote class="code"><p class="quoted">
Test death with &quot;x rope / pull rope / get chest / untie rope from chest / tie rope to me / down / get key / up / untie rope from stump / north / up / unlock pointed door with key / open it / g&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "229: Unthinkable Alliances" "e6" -->
<a id="e6"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e6" class="eglink"><b>229</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e6" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Unthinkable Alliances</span></b></a><br />People are to be grouped into alliances. To kiss someone is to join his or her faction, which may make a grand alliance; to strike them is to give notice of quitting, and to become a lone wolf.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e6"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example6">
<p>The following is best tested by experimentally kissing and/or attacking, and typing RELATIONS after every change to see the effect.</p>
<!-- START CODE "c3980_6" -->
<a id="c3980_6"></a><blockquote class="code"><p class="quoted">
&quot;Unthinkable Alliances&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3981_6" -->
<a id="c3981_6"></a><blockquote class="code"><p class="quoted">
Unthinkable Solutions is a room. Sophie, Daisy, Ryan and Owen are in Unthinkable Solutions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3982_6" -->
<a id="c3982_6"></a><blockquote class="code"><p class="quoted">
Alliance relates people to each other in groups. The verb to help means the alliance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3983_6" -->
<a id="c3983_6"></a><blockquote class="code"><p class="quoted">
Sophie helps Ryan. Daisy helps Ryan. Owen helps the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3984_6" -->
<a id="c3984_6"></a><blockquote class="code"><p class="quoted">
Instead of kissing someone (called the blessed one):
<br />&#160;&#160;&#160;&#160;say &quot;Smack!&quot;;
<br />&#160;&#160;&#160;&#160;now the player helps the blessed one.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3985_6" -->
<a id="c3985_6"></a><blockquote class="code"><p class="quoted">
Instead of attacking someone (called the vilified one):
<br />&#160;&#160;&#160;&#160;say &quot;Smack!&quot;;
<br />&#160;&#160;&#160;&#160;now the player does not help the vilified one.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3986_6" -->
<a id="c3986_6"></a><blockquote class="code"><p class="quoted">
Test me with &quot;relations / kiss sophie / relations / hit ryan / relations&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "230: The Unexamined Life" "e438" -->
<a id="e438"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e438" class="eglink"><b>230</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e438" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Unexamined Life</span></b></a><br />An adaptive hint system that tracks what the player needs to have seen or to possess in order to solve a given puzzle, and doles out suggestions accordingly. Handles changes in the game state with remarkable flexibility, and allows the player to decide how explicit a nudge he wants at any given moment.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_11.html#e438"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example438">
<p>Hint systems in IF come in a variety of flavors: some are a static, prewritten set of guidelines (which might exist in a menu or outside the game entirely); others are built in as part of the program, and attempt to adapt to the situation the player currently faces. Adaptive hints have the advantage that they are less likely to reveal information for which the player is not ready, and the disadvantage that they are more work for the author.</p>
<p>The exercise here is to write an adaptive hint system that will both respond in agile ways to the state of the world model and require a minimum of authorial fussing. We also want the player to be able to ask for a hint about any object he encounters in the game world: this will let him be specific and avoid accidentally receiving hints about the wrong puzzles.</p>
<p>Our baseline assumption is that a player may find a puzzle unsolvable for one of two reasons: he either hasn't seen the relevant clue, or he hasn't got the relevant equipment. If these are true, then he should be given hints about how to find this information, and then once he has it, more specific hints about the puzzle itself -- ending, as a last resort, with the exact command(s) he will need to use in order to bring about the solution.</p>
<p>In practice, there are other possibilities, but this will do for an example.</p>
<p>We begin by defining our relations:</p>
<!-- START CODE "c3987_438" -->
<a id="c3987_438"></a><blockquote class="code"><p class="quoted">
&quot;The Unexamined Life&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3988_438" -->
<a id="c3988_438"></a><blockquote class="code"><p class="quoted">
Use scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3989_438" -->
<a id="c3989_438"></a><blockquote class="code"><p class="quoted">
Explaining relates one thing to various things. The verb to explain means the explaining relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3990_438" -->
<a id="c3990_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about something when something unexamined (called the clue) explains the noun:
<br />&#160;&#160;&#160;&#160;say &quot;You're still missing some information that might be useful to understanding the problem. [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents, try hinting about the clue.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3991_438" -->
<a id="c3991_438"></a><blockquote class="code"><p class="quoted">
Requiring relates one thing to various things. The verb to require means the requiring relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3992_438" -->
<a id="c3992_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about something when the noun requires something (called the implement) which is not carried by the player:
<br />&#160;&#160;&#160;&#160;say &quot;You're missing an object that might be useful to resolving this problem. [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents, try hinting about the implement.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3993_438" -->
<a id="c3993_438"></a><blockquote class="code"><p class="quoted">
Hinting about is an action applying to one visible thing. Understand &quot;hint about [any thing]&quot; as hinting about.
</p></blockquote>
<!-- END CODE -->
<p>This allows us to create the most absolutely generic sort of hint -- boring, perhaps, but in practice the player often just needs a nudge about what part of the game world he should be examining for a solution:</p>
<!-- START CODE "c3994_438" -->
<a id="c3994_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about:
<br />&#160;&#160;&#160;&#160;if something explains the noun, say &quot;You might want to review [the list of things which explain the noun]. &quot;;
<br />&#160;&#160;&#160;&#160;if the noun requires something:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You should be sure that you have [the list of things required by the noun]. &quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Sorry, I can't advise you further on that.&quot;.
</p></blockquote>
<!-- END CODE -->
<p>These things cover hinting about objects that are themselves puzzles. But what if the player asks for hints about a tool or piece of information because he doesn't know how to apply it yet? We might want to give some guidance there, as well.</p>
<!-- START CODE "c3995_438" -->
<a id="c3995_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about something which explains something (called target):
<br />&#160;&#160;&#160;&#160;if target is unseen, say &quot;[The noun] might prove useful information, sooner or later.&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You could examine [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3996_438" -->
<a id="c3996_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about something which is required by something:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] might be useful to have. [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if a seen thing requires the noun, say &quot;[The noun] may help with [the list of seen things which require the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;There are [number of things which require the noun in words] problems for which [the noun] might come in handy.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Now we have these general hints written, but we want to pre-empt them if the player has not yet fulfilled all the prerequisites.</p>
<!-- START CODE "c3997_438" -->
<a id="c3997_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about something unseen:
<br />&#160;&#160;&#160;&#160;if the noun is visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is seen;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue the action;
<br />&#160;&#160;&#160;&#160;say &quot;Perhaps you should explore further. &quot;;
<br />&#160;&#160;&#160;&#160;if the ultimate location of the noun is an unvisited room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try hinting about the ultimate location of the noun;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the ultimate location of the noun is the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're in the correct room right now[if the visible shell of the noun is a thing]. Try further exploring [the visible shell of the noun][end if].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try hinting about the ultimate location of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3998_438" -->
<a id="c3998_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about a visited room:
<br />&#160;&#160;&#160;&#160;say &quot;There's a room you've visited, but you haven't exhausted all there is to see there. [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Try going back to [the noun]. [More]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if player consents, direct player to the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c3999_438" -->
<a id="c3999_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about an unvisited room:
<br />&#160;&#160;&#160;&#160;say &quot;There's a room you haven't yet visited.  [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents, direct player to the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4000_438" -->
<a id="c4000_438"></a><blockquote class="code"><p class="quoted">
To direct player to (goal - a room):
<br />&#160;&#160;&#160;&#160;let way be the best route from location to the goal, using even locked doors;
<br />&#160;&#160;&#160;&#160;if way is a direction, say &quot;Try going [way] to start your explorations.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Sorry, the route is an indirect one.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4001_438" -->
<a id="c4001_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about a portable seen thing which is not visible:
<br />&#160;&#160;&#160;&#160;if the noun is scenery, continue the action;
<br />&#160;&#160;&#160;&#160;say &quot;You have seen the item you need to solve this problem, but it's not in sight at the moment.  [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try hinting about the ultimate location of the noun.
</p></blockquote>
<!-- END CODE -->
<p>And this business of &quot;seen&quot; things requires, of course, that we keep track:</p>
<!-- START CODE "c4002_438" -->
<a id="c4002_438"></a><blockquote class="code"><p class="quoted">
A thing can be seen or unseen. A thing is usually unseen. The player is seen. After printing the name of something (called target): now the target is seen.
</p></blockquote>
<!-- END CODE -->
<p>That &quot;After printing...&quot; rule means that as soon as the game automatically prints the name of an object, it tags that object as having been &quot;seen&quot; by the player. This requires just a little care on our part, that we never mention an object without using the game's printing rules. Still, it is much easier than most other possible forms of bookkeeping.</p>
<p>We also need to deal with the question of whether the player has examined an object, for those objects whose descriptions carry vital information:</p>
<!-- START CODE "c4003_438" -->
<a id="c4003_438"></a><blockquote class="code"><p class="quoted">
A thing can be examined or unexamined. A thing is usually unexamined. Carry out examining something: now the noun is examined.
</p></blockquote>
<!-- END CODE -->
<p>In practice, there might be other ways of getting vital facts, and in a more sophisticated puzzle game we might need a more sophisticated model to track this. But examined or unexamined will do for now.</p>
<!-- START CODE "c4004_438" -->
<a id="c4004_438"></a><blockquote class="code"><p class="quoted">
To decide what room is the ultimate location of (item - a thing):
<br />&#160;&#160;&#160;&#160;let place be the holder of the item;
<br />&#160;&#160;&#160;&#160;while the place is a thing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the place be the holder of the place;
<br />&#160;&#160;&#160;&#160;if the place is a room, decide on the place.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4005_438" -->
<a id="c4005_438"></a><blockquote class="code"><p class="quoted">
To decide what thing is the visible shell of (item - a thing):
<br />&#160;&#160;&#160;&#160;if item is visible, decide on the item;
<br />&#160;&#160;&#160;&#160;let place be the holder of the item;
<br />&#160;&#160;&#160;&#160;while place is a thing and place is not visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let place be the holder of the place;
<br />&#160;&#160;&#160;&#160;if the place is visible, decide on the place.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4006_438" -->
<a id="c4006_438"></a><blockquote class="code"><p class="quoted">
To say more:
<br />&#160;&#160;&#160;&#160;say &quot;[paragraph break]Shall I go on? &gt; &quot;.
</p></blockquote>
<!-- END CODE -->
<p>That covers most of the generic hints, but let's also add some slightly more precise hints about a few kinds of objects that are especially important in the model world. These hints will probably not be very interesting to a seasoned IF veteran, but a novice player who does not know the wording or cannot guess what something might be for may still find them useful:</p>
<!-- START CODE "c4007_438" -->
<a id="c4007_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about a locked lockable thing:
<br />&#160;&#160;&#160;&#160;say &quot;You could unlock [the noun] with [the matching key of the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4008_438" -->
<a id="c4008_438"></a><blockquote class="code"><p class="quoted">
Instead of hinting about a locked thing when the matching key of the noun is not carried by the player:
<br />&#160;&#160;&#160;&#160;if the player can see the matching key of the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Perhaps [the matching key of the noun] would help.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] is locked. There must be a key around somewhere. [More]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if player consents, try hinting about the matching key of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4009_438" -->
<a id="c4009_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about a closed openable unlocked thing:
<br />&#160;&#160;&#160;&#160;say &quot;You could open [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4010_438" -->
<a id="c4010_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about an open door:
<br />&#160;&#160;&#160;&#160;say &quot;You could enter [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4011_438" -->
<a id="c4011_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about an unexamined thing:
<br />&#160;&#160;&#160;&#160;say &quot;You might find out something if you examine [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4012_438" -->
<a id="c4012_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about an edible thing:
<br />&#160;&#160;&#160;&#160;say &quot;You could eat [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4013_438" -->
<a id="c4013_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about a wearable thing:
<br />&#160;&#160;&#160;&#160;say &quot;You could wear [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4014_438" -->
<a id="c4014_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about a pushable between rooms thing:
<br />&#160;&#160;&#160;&#160;say &quot;You could push [the noun] some direction.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Now to the actual objects in the game:</p>
<!-- START CODE "c4015_438" -->
<a id="c4015_438"></a><blockquote class="code"><p class="quoted">
The Crypt is a room. &quot;This squat, barrel-vaulted chamber runs roughly north-south. Along either side are the graves of Saxon kings and early bishops of the church long since gone to dust -- one [tomb] in particular looks undisturbed.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Notice that we used the bracketed tomb here: the tomb is scenery, and if we do not use the name-printing function, Inform will not register that we have mentioned it to the player.</p>
<!-- START CODE "c4016_438" -->
<a id="c4016_438"></a><blockquote class="code"><p class="quoted">
The tomb is scenery in the Crypt. The tomb is openable and closed. The silver dagger is a thing in the tomb. Understand &quot;tombs&quot; as the tomb. The description of the silver dagger is &quot;Gleaming in a soft light all its own. Its blade is figured with running deer and its hilt is made of horn.&quot; The wight requires the silver dagger. The tomb requires the pry bar.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4017_438" -->
<a id="c4017_438"></a><blockquote class="code"><p class="quoted">
Instead of opening the tomb when the player does not carry the pry bar:
<br />&#160;&#160;&#160;&#160;say &quot;The lids are stone, too heavy for you to raise without some implement.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now we can add specific hints to replace the generic ones:</p>
<!-- START CODE "c4018_438" -->
<a id="c4018_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about the tomb:
<br />&#160;&#160;&#160;&#160;say &quot;The lids are heavy, but you can open them when you carry the pry bar.&quot;
</p></blockquote>
<!-- END CODE -->
<p>The rest of the hint system ensures that the player will not see this final suggestion until he has the pry bar, since the tomb &quot;requires&quot; the pry bar. Having the hint there doesn't excuse us from providing some alternate wording in case the player solves this not-very-difficult conundrum on his own, though:</p>
<!-- START CODE "c4019_438" -->
<a id="c4019_438"></a><blockquote class="code"><p class="quoted">
Understand &quot;pry [something] with [something preferably held]&quot; as unlocking it with. Understand the commands &quot;lever&quot; or &quot;prise&quot; as &quot;pry&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4020_438" -->
<a id="c4020_438"></a><blockquote class="code"><p class="quoted">
Instead of unlocking something with the pry bar, try opening the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4021_438" -->
<a id="c4021_438"></a><blockquote class="code"><p class="quoted">
The wight is a man in the Crypt. &quot;[The wight] lurks near the south exit.&quot; The description of wight is &quot;Old English [italic type]wiht[roman type]: a thing, a creature. It is little more than the memory of a life ill-lived, but it lingers here.&quot; Understand &quot;wiht&quot; or &quot;creature&quot; or &quot;ghost&quot; as the wight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4022_438" -->
<a id="c4022_438"></a><blockquote class="code"><p class="quoted">
Instead of going south in the presence of wight:
<br />&#160;&#160;&#160;&#160;say &quot;The wight breathes chill into your face.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4023_438" -->
<a id="c4023_438"></a><blockquote class="code"><p class="quoted">
Your head swims, and you are aware that you no longer have the willpower to go in that direction.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4024_438" -->
<a id="c4024_438"></a><blockquote class="code"><p class="quoted">
Fresh Air is south from the Crypt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4025_438" -->
<a id="c4025_438"></a><blockquote class="code"><p class="quoted">
After going to Fresh Air:
<br />&#160;&#160;&#160;&#160;increment the score;
<br />&#160;&#160;&#160;&#160;say &quot;Congratulations, you have escaped!&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4026_438" -->
<a id="c4026_438"></a><blockquote class="code"><p class="quoted">
The inscription is fixed in place in the Crypt. &quot;Someone has painstakingly carved [an inscription] into the wall above the door.&quot; The description is &quot;Squinting, you decipher the Latin text: [italic type]Silver causes harm to those that live though dead[roman type].&quot; The inscription explains wight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4027_438" -->
<a id="c4027_438"></a><blockquote class="code"><p class="quoted">
The Treasure Chamber is north of the Crypt. &quot;The walls are thick, the high windows promisingly barred with iron. But for all this there is no hint of any valuable stores remaining.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4028_438" -->
<a id="c4028_438"></a><blockquote class="code"><p class="quoted">
The pry bar is in the Treasure Chamber. &quot;One of the window bars, rusted from its place, lies in a puddle of water.&quot; Understand &quot;window&quot; or &quot;bars&quot; as the pry bar. The description of the pry bar is &quot;A few feet long, and not entirely rusted into uselessness yet.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4029_438" -->
<a id="c4029_438"></a><blockquote class="code"><p class="quoted">
Instead of giving the dagger to wight:
<br />&#160;&#160;&#160;&#160;say &quot;The wight recoils, appalled.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4030_438" -->
<a id="c4030_438"></a><blockquote class="code"><p class="quoted">
Carry out hinting about wight:
<br />&#160;&#160;&#160;&#160;say &quot;You will have to find some way to get wight to come in physical contact with the silver dagger, which he will certainly not do willingly. [More]&quot;;
<br />&#160;&#160;&#160;&#160;if player consents, say &quot;You could, for instance, throw it at him.&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4031_438" -->
<a id="c4031_438"></a><blockquote class="code"><p class="quoted">
Understand &quot;touch [something] with [something]&quot; as putting it on (with nouns reversed). Understand &quot;hit [someone] with [something]&quot; as putting it on (with nouns reversed).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4032_438" -->
<a id="c4032_438"></a><blockquote class="code"><p class="quoted">
Instead of attacking the wight:
<br />&#160;&#160;&#160;&#160;say &quot;You can't force yourself to approach close enough for hand to hand combat: if, indeed, the wight has hands.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4033_438" -->
<a id="c4033_438"></a><blockquote class="code"><p class="quoted">
Instead of putting the dagger on wight:
<br />&#160;&#160;&#160;&#160;say &quot;The wight fades out of your way without ever coming into contact with the dagger. Perhaps a more projectile method would work better.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4034_438" -->
<a id="c4034_438"></a><blockquote class="code"><p class="quoted">
Instead of putting something on wight:
<br />&#160;&#160;&#160;&#160;say &quot;The wight dodges you.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4035_438" -->
<a id="c4035_438"></a><blockquote class="code"><p class="quoted">
Instead of throwing the dagger at wight:
<br />&#160;&#160;&#160;&#160;now the wight is nowhere;
<br />&#160;&#160;&#160;&#160;move the dagger to the location;
<br />&#160;&#160;&#160;&#160;increment the score;
<br />&#160;&#160;&#160;&#160;say &quot;The dagger passes through its airy form with a rending like the rip of silk. The fragments dissipate at once.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4036_438" -->
<a id="c4036_438"></a><blockquote class="code"><p class="quoted">
The maximum score is 2.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4037_438" -->
<a id="c4037_438"></a><blockquote class="code"><p class="quoted">
Test me with &quot;hint about wight / north / get bar / south / open tomb / get dagger / south / hint about wight / read inscription / hint about wight / attack wight / throw dagger at wight / south&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Note that, if using TEST ME to run through the solution on the Z-machine, we will have to answer a few yes/no questions along the way.</p>
<p>For Glulx, the code should instead read something like</p>
<!-- START CODE "c4038_438" -->
<a id="c4038_438"></a><blockquote class="code"><p class="quoted">
 Test me with &quot;hint about wight / y / north / get bar / south / open tomb / get dagger / south / hint about wight / y / read inscription / hint about wight / y / attack wight / throw dagger at wight / south&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "231: The Abolition of Love" "e0" -->
<a id="e0"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e0" class="eglink"><b>231</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e0" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Abolition of Love</span></b></a><br />A thorough exploration of all the kinds of relations established so far, with the syntax to set and unset them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e0"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example0">
<p>Suppose we are modeling a complex society seething with interpersonal relations of every kind.</p>
<!-- START CODE "c4039_0" -->
<a id="c4039_0"></a><blockquote class="code"><p class="quoted">
&quot;The Abolition of Love&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4040_0" -->
<a id="c4040_0"></a><blockquote class="code"><p class="quoted">
Section 1 - Relation types
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4041_0" -->
<a id="c4041_0"></a><blockquote class="code"><p class="quoted">
Loving relates one person to one person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4042_0" -->
<a id="c4042_0"></a><blockquote class="code"><p class="quoted">
Noticing relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4043_0" -->
<a id="c4043_0"></a><blockquote class="code"><p class="quoted">
Impressing relates one person to various people.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4044_0" -->
<a id="c4044_0"></a><blockquote class="code"><p class="quoted">
Fancying relates various people to various people.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4045_0" -->
<a id="c4045_0"></a><blockquote class="code"><p class="quoted">
Acquaintance relates people to each other.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4046_0" -->
<a id="c4046_0"></a><blockquote class="code"><p class="quoted">
Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4047_0" -->
<a id="c4047_0"></a><blockquote class="code"><p class="quoted">
Alliance relates people to each other in groups.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4048_0" -->
<a id="c4048_0"></a><blockquote class="code"><p class="quoted">
The Chapel is a room. Elizabeth, Wickham and Darcy are people in the Chapel. Mr Bennett and Mrs Bennett are people in the Chapel. Georgiana is a person in the Chapel.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4049_0" -->
<a id="c4049_0"></a><blockquote class="code"><p class="quoted">
The verb to love means the loving relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4050_0" -->
<a id="c4050_0"></a><blockquote class="code"><p class="quoted">
The verb to notice means the noticing relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4051_0" -->
<a id="c4051_0"></a><blockquote class="code"><p class="quoted">
The verb to impress means the impressing relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4052_0" -->
<a id="c4052_0"></a><blockquote class="code"><p class="quoted">
The verb to fancy means the fancying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4053_0" -->
<a id="c4053_0"></a><blockquote class="code"><p class="quoted">
The verb to know means the acquaintance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4054_0" -->
<a id="c4054_0"></a><blockquote class="code"><p class="quoted">
The verb to be married to means the marriage relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4055_0" -->
<a id="c4055_0"></a><blockquote class="code"><p class="quoted">
The verb to be related to means the alliance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4056_0" -->
<a id="c4056_0"></a><blockquote class="code"><p class="quoted">
Elizabeth loves Darcy. Elizabeth fancies Darcy. Elizabeth notices Darcy. Elizabeth impresses Darcy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4057_0" -->
<a id="c4057_0"></a><blockquote class="code"><p class="quoted">
Mr Bennett is related to Mrs Bennett and Elizabeth. Mr Bennett is married to Mrs Bennett.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4058_0" -->
<a id="c4058_0"></a><blockquote class="code"><p class="quoted">
Georgiana is related to Darcy.
</p></blockquote>
<!-- END CODE -->
<p>Now we want ways to set and unset all of these relations. (In the interests of thoroughness, we may get a bit far-fetched here. It is not recommended in practice that we make the player guess the verb &quot;traduce&quot;.)</p>
<!-- START CODE "c4059_0" -->
<a id="c4059_0"></a><blockquote class="code"><p class="quoted">
Section 2 - Setting and Unsetting Love (1-1)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4060_0" -->
<a id="c4060_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;infatuate [someone] with [someone]&quot; as infatuating it with. Infatuating it with is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4061_0" -->
<a id="c4061_0"></a><blockquote class="code"><p class="quoted">
Carry out infatuating it with:
<br />&#160;&#160;&#160;&#160;now the noun loves the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4062_0" -->
<a id="c4062_0"></a><blockquote class="code"><p class="quoted">
Report infatuating it with:
<br />&#160;&#160;&#160;&#160;say &quot;Now [the noun] loves [a random person loved by the noun][if the second noun loves someone], while [the second noun] loves [a random person loved by the second noun][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4063_0" -->
<a id="c4063_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;embitter [someone] toward [someone]&quot; as embittering it toward. Embittering it toward is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4064_0" -->
<a id="c4064_0"></a><blockquote class="code"><p class="quoted">
Carry out embittering it toward:
<br />&#160;&#160;&#160;&#160;now the noun does not love the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4065_0" -->
<a id="c4065_0"></a><blockquote class="code"><p class="quoted">
Report embittering it toward:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] sees [the second noun] in a different light and no longer feels any affection.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Because love is a 1-1 relation, a person cannot love more than one other character at a time. Whenever we set a character to love a new person, that person ceases to love the character loved before. It is a fickle world.</p>
<p>One to various relations are a bit more open: we can say someone impresses multiple other characters, and our additions to the list do not override the initial ones.</p>
<!-- START CODE "c4066_0" -->
<a id="c4066_0"></a><blockquote class="code"><p class="quoted">
Section 3 - Setting and Unsetting Impressed (1-V)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4067_0" -->
<a id="c4067_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;commend [someone] to [someone]&quot; as commending it to. Commending it to is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4068_0" -->
<a id="c4068_0"></a><blockquote class="code"><p class="quoted">
Carry out commending it to:
<br />&#160;&#160;&#160;&#160;now the noun impresses the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4069_0" -->
<a id="c4069_0"></a><blockquote class="code"><p class="quoted">
Report commending it to:
<br />&#160;&#160;&#160;&#160;say &quot;[The second noun] takes a very decided interest in [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4070_0" -->
<a id="c4070_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;traduce [someone] to [someone]&quot; as traducing it to. Traducing it to is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4071_0" -->
<a id="c4071_0"></a><blockquote class="code"><p class="quoted">
Carry out traducing it to:
<br />&#160;&#160;&#160;&#160;now the noun does not impress the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4072_0" -->
<a id="c4072_0"></a><blockquote class="code"><p class="quoted">
Report traducing it to:
<br />&#160;&#160;&#160;&#160;say &quot;[The second noun], hearing your story, decides not to be at all impressed with [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And because this is a one-to-various relation, we can also make statements which set multiple relations at once, so:</p>
<!-- START CODE "c4073_0" -->
<a id="c4073_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;celebrate [someone]&quot; as celebrating. Celebrating is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4074_0" -->
<a id="c4074_0"></a><blockquote class="code"><p class="quoted">
Carry out celebrating:
<br />&#160;&#160;&#160;&#160;now the noun impresses every person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4075_0" -->
<a id="c4075_0"></a><blockquote class="code"><p class="quoted">
Report celebrating:
<br />&#160;&#160;&#160;&#160;say &quot;[The list of people who are impressed by the noun] take a very decided interest in [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4076_0" -->
<a id="c4076_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;slander [someone]&quot; as slandering to. Slandering to is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4077_0" -->
<a id="c4077_0"></a><blockquote class="code"><p class="quoted">
Carry out slandering to:
<br />&#160;&#160;&#160;&#160;now every person is not impressed by the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4078_0" -->
<a id="c4078_0"></a><blockquote class="code"><p class="quoted">
Report slandering to:
<br />&#160;&#160;&#160;&#160;say &quot;Now [the noun] impresses [the list of people who are impressed by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Note that the above unsetting is not equivalent to &quot;now the noun does not impress every person&quot; -- which would be ambiguous in spoken English, as well. Various-to-one relations are similar:</p>
<!-- START CODE "c4079_0" -->
<a id="c4079_0"></a><blockquote class="code"><p class="quoted">
Section 4 - Setting and Unsetting Noticing (V-1)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4080_0" -->
<a id="c4080_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;draw the attention of [someone] to [someone]&quot; as drawing the attention of it to. Drawing the attention of it to is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4081_0" -->
<a id="c4081_0"></a><blockquote class="code"><p class="quoted">
Carry out drawing the attention of it to:
<br />&#160;&#160;&#160;&#160;now the noun notices the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4082_0" -->
<a id="c4082_0"></a><blockquote class="code"><p class="quoted">
Report drawing the attention of it to:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] glances thoughtfully in the direction of [the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4083_0" -->
<a id="c4083_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;distract [someone] from [someone]&quot; as distracting it from. Distracting it from is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4084_0" -->
<a id="c4084_0"></a><blockquote class="code"><p class="quoted">
Carry out distracting it from:
<br />&#160;&#160;&#160;&#160;now the noun does not notice the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4085_0" -->
<a id="c4085_0"></a><blockquote class="code"><p class="quoted">
Report distracting it from:
<br />&#160;&#160;&#160;&#160;say &quot;You distract [the noun] from [the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4086_0" -->
<a id="c4086_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;draw attention to [someone]&quot; as drawing attention to. Drawing attention to is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4087_0" -->
<a id="c4087_0"></a><blockquote class="code"><p class="quoted">
Carry out drawing attention to:
<br />&#160;&#160;&#160;&#160;now every person notices the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4088_0" -->
<a id="c4088_0"></a><blockquote class="code"><p class="quoted">
Report drawing attention to:
<br />&#160;&#160;&#160;&#160;say &quot;You quickly cause everyone to attend to [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4089_0" -->
<a id="c4089_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;outshine [someone]&quot; as outshining. Outshining is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4090_0" -->
<a id="c4090_0"></a><blockquote class="code"><p class="quoted">
Carry out outshining:
<br />&#160;&#160;&#160;&#160;now every person does not notice the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4091_0" -->
<a id="c4091_0"></a><blockquote class="code"><p class="quoted">
Report outshining:
<br />&#160;&#160;&#160;&#160;say &quot;You quickly distract everyone from [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4092_0" -->
<a id="c4092_0"></a><blockquote class="code"><p class="quoted">
Section 5 - Setting and Unsetting Fancying (V-V)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4093_0" -->
<a id="c4093_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;flatter [someone]&quot; as flattering. Flattering is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4094_0" -->
<a id="c4094_0"></a><blockquote class="code"><p class="quoted">
Carry out flattering:
<br />&#160;&#160;&#160;&#160;now every person fancies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4095_0" -->
<a id="c4095_0"></a><blockquote class="code"><p class="quoted">
Report flattering:
<br />&#160;&#160;&#160;&#160;say &quot;You draw down universal admiration for [the noun] by casting him or her in a flattering light.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4096_0" -->
<a id="c4096_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;unflatter [someone]&quot; as unflattering. [Okay, okay, but it's four am.] Unflattering is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4097_0" -->
<a id="c4097_0"></a><blockquote class="code"><p class="quoted">
Carry out unflattering:
<br />&#160;&#160;&#160;&#160;now every person does not fancy the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4098_0" -->
<a id="c4098_0"></a><blockquote class="code"><p class="quoted">
Report unflattering:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] gives everyone a universal disgust.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4099_0" -->
<a id="c4099_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;admire [someone]&quot; as admiring. Admiring is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4100_0" -->
<a id="c4100_0"></a><blockquote class="code"><p class="quoted">
Carry out admiring: now the player fancies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4101_0" -->
<a id="c4101_0"></a><blockquote class="code"><p class="quoted">
Report admiring: say &quot;You find you rather fancy [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4102_0" -->
<a id="c4102_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;loathe [someone]&quot; as loathing. Loathing is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4103_0" -->
<a id="c4103_0"></a><blockquote class="code"><p class="quoted">
Carry out loathing: now the player does not fancy the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4104_0" -->
<a id="c4104_0"></a><blockquote class="code"><p class="quoted">
Report loathing: say &quot;You take [the noun] in disgust.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4105_0" -->
<a id="c4105_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;cause chaos&quot; as causing chaos. Causing chaos is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4106_0" -->
<a id="c4106_0"></a><blockquote class="code"><p class="quoted">
Carry out causing chaos:
<br />&#160;&#160;&#160;&#160;now every person fancies every person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4107_0" -->
<a id="c4107_0"></a><blockquote class="code"><p class="quoted">
Report causing chaos: say &quot;Now everyone fancies everyone else, which is quite an inconvenient state of affairs.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4108_0" -->
<a id="c4108_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;relieve chaos&quot; as relieving chaos. Relieving chaos is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4109_0" -->
<a id="c4109_0"></a><blockquote class="code"><p class="quoted">
Carry out relieving chaos:
<br />&#160;&#160;&#160;&#160;now every person is fancied by no one.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4110_0" -->
<a id="c4110_0"></a><blockquote class="code"><p class="quoted">
Report relieving chaos: say &quot;Now no one fancies anyone, which is safe but tedious.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Our options for setting and unsetting symmetrical relations are more limited again:</p>
<!-- START CODE "c4111_0" -->
<a id="c4111_0"></a><blockquote class="code"><p class="quoted">
Section 6 - Setting and Unsetting Marriage (1-1 Symmetrical)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4112_0" -->
<a id="c4112_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;marry [someone] to [someone]&quot; as uniting it in matrimony with. Uniting it in matrimony with is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4113_0" -->
<a id="c4113_0"></a><blockquote class="code"><p class="quoted">
Carry out uniting it in matrimony with:
<br />&#160;&#160;&#160;&#160;now the noun is married to the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4114_0" -->
<a id="c4114_0"></a><blockquote class="code"><p class="quoted">
Report uniting it in matrimony with:
<br />&#160;&#160;&#160;&#160;say &quot;You perform the marriage of [the noun] to [the second noun], joining them to the family of [a list of people related to the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4115_0" -->
<a id="c4115_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;divorce [someone] from [someone]&quot; as divorcing it from. Divorcing it from is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4116_0" -->
<a id="c4116_0"></a><blockquote class="code"><p class="quoted">
Check divorcing it from:
<br />&#160;&#160;&#160;&#160;if the noun is not married to the second noun, say &quot;[The noun] is not married to [the second noun] anyway.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4117_0" -->
<a id="c4117_0"></a><blockquote class="code"><p class="quoted">
Carry out divorcing it from:
<br />&#160;&#160;&#160;&#160;now the noun is not married to the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4118_0" -->
<a id="c4118_0"></a><blockquote class="code"><p class="quoted">
Report divorcing it from:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is now not married to [the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>When we unset the symmetrical relation on one side, it is automatically set or unset on the other. It is not necessary to say &quot;the second noun is married to the noun&quot; or &quot;the second noun is not married to the noun&quot;, even though that is the case.</p>
<!-- START CODE "c4119_0" -->
<a id="c4119_0"></a><blockquote class="code"><p class="quoted">
Section 7 - Setting and Unsetting Acquaintance (V-V Symmetrical)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4120_0" -->
<a id="c4120_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;introduce [someone] to [someone]&quot; as introducing it to. Introducing it to is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4121_0" -->
<a id="c4121_0"></a><blockquote class="code"><p class="quoted">
Carry out introducing it to:
<br />&#160;&#160;&#160;&#160;now the noun knows the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4122_0" -->
<a id="c4122_0"></a><blockquote class="code"><p class="quoted">
Report introducing it to:
<br />&#160;&#160;&#160;&#160;say &quot;You introduce [the noun] to [the second noun]. Now [the noun] is acquainted with [the list of people who are known by the noun], and [the second noun] is acquainted with [the list of people who are known by the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4123_0" -->
<a id="c4123_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;announce [someone]&quot; as announcing. Announcing is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4124_0" -->
<a id="c4124_0"></a><blockquote class="code"><p class="quoted">
Carry out announcing:
<br />&#160;&#160;&#160;&#160;now every person knows the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4125_0" -->
<a id="c4125_0"></a><blockquote class="code"><p class="quoted">
Report announcing:
<br />&#160;&#160;&#160;&#160;say &quot;You announce [the noun] to the whole assembled company.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4126_0" -->
<a id="c4126_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;ostracise [someone]&quot; as ostracising. Ostracising is an action applying to one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4127_0" -->
<a id="c4127_0"></a><blockquote class="code"><p class="quoted">
Carry out ostracising:
<br />&#160;&#160;&#160;&#160;now every person does not know the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4128_0" -->
<a id="c4128_0"></a><blockquote class="code"><p class="quoted">
Report ostracising:
<br />&#160;&#160;&#160;&#160;say &quot;You cause everyone present to forget and pretend not to be acquainted at all with [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And finally, setting groups:</p>
<!-- START CODE "c4129_0" -->
<a id="c4129_0"></a><blockquote class="code"><p class="quoted">
Section 8 - Setting and Unsetting Familial Relations (Groups)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4130_0" -->
<a id="c4130_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;make [someone] adopt [someone]&quot; as forcing it to adopt. Forcing it to adopt is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4131_0" -->
<a id="c4131_0"></a><blockquote class="code"><p class="quoted">
Carry out forcing it to adopt:
<br />&#160;&#160;&#160;&#160;now the noun is related to the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4132_0" -->
<a id="c4132_0"></a><blockquote class="code"><p class="quoted">
Report forcing it to adopt:
<br />&#160;&#160;&#160;&#160;say &quot;Now [the second noun] is related to [the list of people related to the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4133_0" -->
<a id="c4133_0"></a><blockquote class="code"><p class="quoted">
Understand &quot;make [someone] disown [someone]&quot; as forcing it to disown. Forcing it to disown is an action applying to two visible things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4134_0" -->
<a id="c4134_0"></a><blockquote class="code"><p class="quoted">
Carry out forcing it to disown:
<br />&#160;&#160;&#160;&#160;now the second noun is not related to the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4135_0" -->
<a id="c4135_0"></a><blockquote class="code"><p class="quoted">
Report forcing it to disown:
<br />&#160;&#160;&#160;&#160;say &quot;Now [the second noun] is related to [the list of people who are related to the second noun], and [the noun] is related to [the list of people who are related to the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>Notice that when we say &quot;the second noun is not related&quot;, we remove that person from the group: they are now in a separate group of their own, while the rest of the group's members remain related to one another.</p>
<p>And finally, a long litany of test cases, complete with the relations lists:</p>
<!-- START CODE "c4136_0" -->
<a id="c4136_0"></a><blockquote class="code"><p class="quoted">
Test acquaintance with &quot;relations / introduce darcy to elizabeth / introduce darcy to wickham / announce mr bennett / relations / ostracise wickham / introduce georgiana to wickham / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4137_0" -->
<a id="c4137_0"></a><blockquote class="code"><p class="quoted">
Test impression with &quot;commend georgiana to elizabeth / relations / celebrate Mrs bennett / relations / traduce mrs bennett to darcy / relations / slander mrs bennett / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4138_0" -->
<a id="c4138_0"></a><blockquote class="code"><p class="quoted">
Test notice with &quot;draw the attention of darcy to elizabeth / relations / draw attention to mr bennett / relations / distract darcy from mr bennett / relations / outshine mr bennett / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4139_0" -->
<a id="c4139_0"></a><blockquote class="code"><p class="quoted">
Test love with &quot;embitter elizabeth toward darcy / relations / infatuate elizabeth with wickham / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4140_0" -->
<a id="c4140_0"></a><blockquote class="code"><p class="quoted">
Test marriage with &quot;marry elizabeth to darcy / relations / divorce elizabeth from darcy / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4141_0" -->
<a id="c4141_0"></a><blockquote class="code"><p class="quoted">
Test alliance with &quot;make mr bennett adopt georgiana / relations / make mrs bennett disown georgiana / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4142_0" -->
<a id="c4142_0"></a><blockquote class="code"><p class="quoted">
Test fancying with &quot;admire elizabeth / relations / loathe elizabeth / relations / flatter elizabeth / relations / unflatter elizabeth / relations / cause chaos / relations / relieve chaos / relations&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4143_0" -->
<a id="c4143_0"></a><blockquote class="code"><p class="quoted">
Test me with &quot;test acquaintance / test impression / test notice / test love / test alliance / test fancying / test marriage&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "232: Swerve left? Swerve right? Or think about it and die?" "e239" -->
<a id="e239"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e239" class="eglink"><b>232</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e239" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Swerve left? Swerve right? Or think about it and die?</span></b></a><br />Building a marble chute track in which a dropped marble will automatically roll downhill.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e239"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example239">
<p>Suppose we have marbles that roll downhill across our map, in a life-size version of one of those marble-chute toys. We might now want to keep track of both compass relationships and which-room-slopes-into-which, so we make a new relation:</p>
<!-- START CODE "c4144_239" -->
<a id="c4144_239"></a><blockquote class="code"><p class="quoted">
&quot;Swerve left? Swerve right? Or think about it and die?&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4145_239" -->
<a id="c4145_239"></a><blockquote class="code"><p class="quoted">
Overlooking relates various rooms to various rooms.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4146_239" -->
<a id="c4146_239"></a><blockquote class="code"><p class="quoted">
The verb to overlook means the overlooking relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4147_239" -->
<a id="c4147_239"></a><blockquote class="code"><p class="quoted">
A thing can be spherical or lumpy. A marble is a kind of thing. A marble is always spherical. The player carries a marble called a red marble. The player carries a marble called an agate marble. The player carries a marble called a blue cloudy marble.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4148_239" -->
<a id="c4148_239"></a><blockquote class="code"><p class="quoted">
The Long Yellow Slide is north of the Funnel. The Long Yellow Slide overlooks the Blue Funnel. The Ski-jump is below the Blue Funnel. The Blue Funnel overlooks the Ski-jump. The Ski-jump overlooks the Landing Bowl. The Landing Bowl overlooks the Snake Run. The Landing Bowl is north of the Snake Run. The Snake Run overlooks the Goal. The Snake Run is north of the Goal.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4149_239" -->
<a id="c4149_239"></a><blockquote class="code"><p class="quoted">
Definition: a room is sloping if it overlooks a room.
</p></blockquote>
<!-- END CODE -->
<p>And let's say we want the player to be allowed to slide, too, since that would be much more fun than just watching the marbles go:</p>
<!-- START CODE "c4150_239" -->
<a id="c4150_239"></a><blockquote class="code"><p class="quoted">
Understand &quot;sit&quot; as sitting down. Sitting down is an action applying to nothing. Check sitting down: if the player is spherical, say &quot;You are already seated.&quot; Carry out sitting down: now the player is spherical. Report sitting down: say &quot;You sit, ready to slide wherever fate takes you.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4151_239" -->
<a id="c4151_239"></a><blockquote class="code"><p class="quoted">
Understand the command &quot;stand&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4152_239" -->
<a id="c4152_239"></a><blockquote class="code"><p class="quoted">
Understand &quot;stand&quot; or &quot;stand up&quot; as standing up. Standing up is an action applying to nothing. Check standing up: if the player is lumpy, say &quot;You are already standing.&quot; Carry out standing up: now the player is lumpy. Report standing up: say &quot;You get to your feet.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now a rule to control what happens to all our sliding and rolling objects:</p>
<!-- START CODE "c4153_239" -->
<a id="c4153_239"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;repeat with item running through spherical things which are in sloping rooms:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the current space be the holder of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the final space be a random room which is overlooked by the current space;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player can see the item and the item is a marble, say &quot;[The item] rolls out of the room toward [the final space].[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is the item, say &quot;You keep sliding...&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the item to the final space;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player can see the item and the item is a marble, say &quot;[The item] rolls into the room from [the current space].[line break]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Since the Ski-jump overlooks the Landing Bowl, the marble will be able to fly through the air to its destination, even though there is no map connection to allow the player to cross. We might want to let the player make it across this barrier also, so:</p>
<!-- START CODE "c4154_239" -->
<a id="c4154_239"></a><blockquote class="code"><p class="quoted">
Instead of jumping in a sloping room:
<br />&#160;&#160;&#160;&#160;say &quot;You leap...&quot;;
<br />&#160;&#160;&#160;&#160;move the player to a random room overlooked by the location.
</p></blockquote>
<!-- END CODE -->
<p>Because overlooking is various-to-various, we could include that element popular in marble chute toys, the splitter:</p>
<!-- START CODE "c4155_239" -->
<a id="c4155_239"></a><blockquote class="code"><p class="quoted">
The Downhill Splitter is north of the Long Yellow Slide. &quot;The green plastic chute runs downhill towards a Y-junction, forcing incoming marbles right or left.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4156_239" -->
<a id="c4156_239"></a><blockquote class="code"><p class="quoted">
The Downhill Splitter overlooks the Long Yellow Slide and the Purple Snaking Passage. The Purple Snaking Passage is southeast of the Downhill Splitter. The Purple Snaking Passage overlooks the Landing Bowl. The Purple Snaking Passage is above the Landing Bowl.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4157_239" -->
<a id="c4157_239"></a><blockquote class="code"><p class="quoted">
The player is in the Downhill Splitter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4158_239" -->
<a id="c4158_239"></a><blockquote class="code"><p class="quoted">
Test me with &quot;drop red / drop blue / sit / z / stand up / drop agate / sit / z / z / z / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "233: Beneath the Surface" "e400" -->
<a id="e400"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e400" class="eglink"><b>233</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e400" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Beneath the Surface</span></b></a><br />An "underlying" relation which adds to the world model the idea of objects hidden under other objects.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e400"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example400">
<p>The standard world model provides for the idea of containers and supporters, but this is not the only way that objects can relate to one another in the real world. Here we try adding the idea of concealment beneath another object:</p>
<!-- START CODE "c4159_400" -->
<a id="c4159_400"></a><blockquote class="code"><p class="quoted">
&quot;Beneath the Surface&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4160_400" -->
<a id="c4160_400"></a><blockquote class="code"><p class="quoted">
Section 1 - In Which our Terms are Defined
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4161_400" -->
<a id="c4161_400"></a><blockquote class="code"><p class="quoted">
Underlying relates various things to one thing. The verb to underlie means the underlying relation. The verb to be under means the underlying relation. The verb to be beneath means the underlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4162_400" -->
<a id="c4162_400"></a><blockquote class="code"><p class="quoted">
Instead of looking under a thing which is underlaid by something (called the lost object):
<br />&#160;&#160;&#160;&#160;say &quot;You find [the list of things which underlie the noun]!&quot;;
<br />&#160;&#160;&#160;&#160;now every thing which underlies the noun is carried by the player;
<br />&#160;&#160;&#160;&#160;now every thing which underlies the noun does not underlie the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4163_400" -->
<a id="c4163_400"></a><blockquote class="code"><p class="quoted">
Hiding it under is an action applying to one carried thing and one thing. Understand &quot;put [something preferably held] under [something]&quot; as hiding it under. Understand &quot;hide [something preferably held] under [something]&quot; as hiding it under. Understand the commands &quot;shove&quot; and &quot;conceal&quot; and &quot;stick&quot; as &quot;hide&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4164_400" -->
<a id="c4164_400"></a><blockquote class="code"><p class="quoted">
Check hiding it under:
<br />&#160;&#160;&#160;&#160;if the second noun is not fixed in place, say &quot;[The second noun] wouldn't be a very effective place of concealment.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4165_400" -->
<a id="c4165_400"></a><blockquote class="code"><p class="quoted">
Carry out hiding it under:
<br />&#160;&#160;&#160;&#160;now the noun is nowhere;
<br />&#160;&#160;&#160;&#160;now the noun underlies the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4166_400" -->
<a id="c4166_400"></a><blockquote class="code"><p class="quoted">
Report hiding it under:
<br />&#160;&#160;&#160;&#160;say &quot;You shove [the noun] out of sight beneath [the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4167_400" -->
<a id="c4167_400"></a><blockquote class="code"><p class="quoted">
Section 2 - In Which They are Put To Use
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4168_400" -->
<a id="c4168_400"></a><blockquote class="code"><p class="quoted">
The Room of Hidden Objects is a room. It contains a sofa, an easy chair, and a rug. The sofa supports a lime-green pillow and an innocent-looking Chinese finger toy. The rug is fixed in place. The chair is a supporter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4169_400" -->
<a id="c4169_400"></a><blockquote class="code"><p class="quoted">
A treasure map underlies the easy chair. A skeleton is beneath the sofa. A blueprint of Atlantis, a lexicon of Linear A, and the key to Jimmy Hoffa's Mausoleum are under the rug.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4170_400" -->
<a id="c4170_400"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look under the sofa / look under the rug / look under the easy chair / hide lexicon under rug&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "234: Bogart" "e85" -->
<a id="e85"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e85" class="eglink"><b>234</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e85" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Bogart</span></b></a><br />Clothing for the player that layers, so that items cannot be taken off in the wrong order, and the player's inventory lists only the clothing that is currently visible.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_9.html#e85"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example85">
<p>We have two things to keep track of with our layering clothing: what currently is covering something else; and what <span class="italic">can</span> cover something else. This implementation goes for a fairly simple treatment, assuming that each item of clothing will completely conceal those beneath it, and that we are not implementing entire sets of shirts, jackets, etc. But it will do for a demonstration.</p>
<!-- START CODE "c4171_85" -->
<a id="c4171_85"></a><blockquote class="code"><p class="quoted">
&quot;Bogart&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4172_85" -->
<a id="c4172_85"></a><blockquote class="code"><p class="quoted">
Section 1 - Clothing Behavior
</p></blockquote>
<!-- END CODE -->
<p>First we make our relation to represent what *is* underneath another item:</p>
<!-- START CODE "c4173_85" -->
<a id="c4173_85"></a><blockquote class="code"><p class="quoted">
Underlying relates one thing to various things. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.
</p></blockquote>
<!-- END CODE -->
<p>And now we prevent taking a lower layer off before the thing that is worn over it:</p>
<!-- START CODE "c4174_85" -->
<a id="c4174_85"></a><blockquote class="code"><p class="quoted">
Before taking off something which underlies something (called the impediment) which is worn by the player:
<br />say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />silently try taking off the impediment;
<br />if the noun underlies something which is worn by the player, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4175_85" -->
<a id="c4175_85"></a><blockquote class="code"><p class="quoted">
Check taking off:
<br />&#160;&#160;&#160;&#160;if the noun underlies something (called the impediment) which is worn by the player, say &quot;[The impediment] [are] in the way.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4176_85" -->
<a id="c4176_85"></a><blockquote class="code"><p class="quoted">
Carry out taking off:
<br />&#160;&#160;&#160;&#160;now the noun is not underlaid by anything.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4177_85" -->
<a id="c4177_85"></a><blockquote class="code"><p class="quoted">
Report taking off something:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] now wearing [a list of uppermost things worn by the player].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4178_85" -->
<a id="c4178_85"></a><blockquote class="code"><p class="quoted">
Definition: a thing is uppermost if it is not under something.
</p></blockquote>
<!-- END CODE -->
<p>That covers order of clothing removal, but we also want to restrict what can be worn on top of what else. This time we need Inform to have some idea of what customarily can be layered on top of what other clothing:</p>
<!-- START CODE "c4179_85" -->
<a id="c4179_85"></a><blockquote class="code"><p class="quoted">
Overlying relates one thing to various things. The verb to overlie means the overlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4180_85" -->
<a id="c4180_85"></a><blockquote class="code"><p class="quoted">
Covering relates a thing (called A) to a thing (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.
</p></blockquote>
<!-- END CODE -->
<p>With these definitions, we can say that a jacket should go over a shirt and a shirt over an undershirt (say), and then Inform will know that a jacket will cover both shirt and undershirt.</p>
<!-- START CODE "c4181_85" -->
<a id="c4181_85"></a><blockquote class="code"><p class="quoted">
Before wearing something when something (called the impediment) which covers the noun is worn by the player:
<br />&#160;&#160;&#160;&#160;while the player wears something which covers the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is wearing the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4182_85" -->
<a id="c4182_85"></a><blockquote class="code"><p class="quoted">
Carry out wearing:
<br />&#160;&#160;&#160;&#160;if the noun covers something (called the hidden item) worn by the player, now the hidden item underlies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4183_85" -->
<a id="c4183_85"></a><blockquote class="code"><p class="quoted">
Instead of looking under something which is worn by the player:
<br />&#160;&#160;&#160;&#160;if something (called the underwear) underlies the noun, say &quot;[We] [peek] at [the underwear]. Yup, still there.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Just [us] in there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4184_85" -->
<a id="c4184_85"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][else][We]['re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost things worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4185_85" -->
<a id="c4185_85"></a><blockquote class="code"><p class="quoted">
To peek is a verb.
</p></blockquote>
<!-- END CODE -->
<p>Notice that our inventory only describes the things that the player can see as the upper layer of clothing.</p>
<!-- START CODE "c4186_85" -->
<a id="c4186_85"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4187_85" -->
<a id="c4187_85"></a><blockquote class="code"><p class="quoted">
The Trailer is a room. &quot;A full-length mirror is the main amenity in here, and that suits you just fine.&quot;  The full-length mirror is scenery in the Trailer. Instead of examining or searching the mirror, try taking inventory.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4188_85" -->
<a id="c4188_85"></a><blockquote class="code"><p class="quoted">
The player wears a fedora, a jacket, a shirt, some undershorts, an undershirt, some slacks, a pair of socks, and a pair of shoes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4189_85" -->
<a id="c4189_85"></a><blockquote class="code"><p class="quoted">
The shirt underlies the jacket. The pair of socks underlies the pair of shoes. The undershorts underlie the slacks. The undershirt underlies the shirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4190_85" -->
<a id="c4190_85"></a><blockquote class="code"><p class="quoted">
The jacket overlies the shirt. The shoes overlie the socks. The slacks overlie the undershorts. The shirt overlies the undershirt.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4191_85" -->
<a id="c4191_85"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x mirror / remove fedora / remove jacket / remove shirt / remove slacks / remove undershirt / remove shoes / remove socks / remove shorts / remove undershorts&quot;.
</p></blockquote>
<!-- END CODE -->
<p>If we further wanted to prevent the player from taking off clothes in inappropriate places, we might add something like this:</p>
<!-- START CODE "c4192_85" -->
<a id="c4192_85"></a><blockquote class="code"><p class="quoted">
Instead of taking off something in the presence of someone who is not the player:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] far too modest to strip in public.&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "235: The Problem of Edith" "e45" -->
<a id="e45"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e45" class="eglink"><b>235</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e45" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Problem of Edith</span></b></a><br />A conversation in which the main character tries to build logical connections between what the player is saying now and what went immediately before.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e45"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example45">
<p>Suppose that we have a core set of issues we want to be able to bring up with all the characters, and we want characters to draw intelligent connections between different conversation topics. We will need some model of how things relate to one another, so:</p>
<!-- START CODE "c4193_45" -->
<a id="c4193_45"></a><blockquote class="code"><p class="quoted">
&quot;The Problem of Edith&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4194_45" -->
<a id="c4194_45"></a><blockquote class="code"><p class="quoted">
Suggestion relates things to each other. The verb to suggest means the suggestion relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4195_45" -->
<a id="c4195_45"></a><blockquote class="code"><p class="quoted">
A subject is a kind of thing. The current subject is a thing that varies. greeting is a subject.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4196_45" -->
<a id="c4196_45"></a><blockquote class="code"><p class="quoted">
Understand &quot;ask [someone] about [any subject]&quot; as asking it about the subject. Understand &quot;tell [someone] about [any subject]&quot; as asking it about the subject.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4197_45" -->
<a id="c4197_45"></a><blockquote class="code"><p class="quoted">
Asking it about the subject is an action applying to one thing and one visible thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4198_45" -->
<a id="c4198_45"></a><blockquote class="code"><p class="quoted">
Carry out asking it about the subject:
<br />&#160;&#160;&#160;&#160;say &quot;'Hmm, [the second noun],' says [the noun]. &quot;;
<br />&#160;&#160;&#160;&#160;relate the current subject with the second noun;
<br />&#160;&#160;&#160;&#160;now the current subject is the second noun.
</p></blockquote>
<!-- END CODE -->
<p>And if we wanted to offer the player some hints about angles he could pursue:</p>
<!-- START CODE "c4199_45" -->
<a id="c4199_45"></a><blockquote class="code"><p class="quoted">
Instead of thinking:
<br />&#160;&#160;&#160;&#160;say &quot;You contemplate [a list of things suggested by the current subject].&quot;
</p></blockquote>
<!-- END CODE -->
<p>For that matter, we could use the same system to have characters make sense of any physical evidence the character shows them:</p>
<!-- START CODE "c4200_45" -->
<a id="c4200_45"></a><blockquote class="code"><p class="quoted">
Instead of showing something which suggests the current subject to someone:
<br />&#160;&#160;&#160;&#160;say &quot;[The second noun] nods impatiently.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4201_45" -->
<a id="c4201_45"></a><blockquote class="code"><p class="quoted">
Instead of showing something to someone:
<br />&#160;&#160;&#160;&#160;let the next subject be the next step via the suggestion relation from the noun to the current subject;
<br />&#160;&#160;&#160;&#160;if the next subject is a subject:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try asking the second noun about the subject the next subject;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The second noun] shrugs.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4202_45" -->
<a id="c4202_45"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now the left hand status line is &quot;Discussing: [current subject]&quot;;
<br />&#160;&#160;&#160;&#160;now the right hand status line is &quot; &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4203_45" -->
<a id="c4203_45"></a><blockquote class="code"><p class="quoted">
Broughton Hall is a room. Lady Uckfield is a woman in Broughton Hall. &quot;Lady Uckfield sits at her desk, looking wholly composed.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4204_45" -->
<a id="c4204_45"></a><blockquote class="code"><p class="quoted">
The nasty letter is a thing carried by the player. The nasty letter suggests infidelity and penmanship. The ten-pound note is carried by the player. It suggests money.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4205_45" -->
<a id="c4205_45"></a><blockquote class="code"><p class="quoted">
Infidelity is a subject. Infidelity suggests marriage and divorce. Marriage suggests love. Marriage, love, and divorce are subjects.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4206_45" -->
<a id="c4206_45"></a><blockquote class="code"><p class="quoted">
Penmanship is a subject. Penmanship suggests education. Education is a subject. Class status and money are subjects. Class status suggests education. Money suggests class status and marriage.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4207_45" -->
<a id="c4207_45"></a><blockquote class="code"><p class="quoted">
The current subject is divorce.
</p></blockquote>
<!-- END CODE -->
<p>Now we can define what gets said when the subject is changed, regardless of whether the segue was introduced in speech or by a shown object. Since rows are blanked after use, the speaker will never repeat herself; if we provide more than one line about the same pair of topics, the first one will be used, then the second, and so on, until the table runs out:</p>
<!-- START CODE "c4208_45" -->
<a id="c4208_45"></a><blockquote class="code"><p class="quoted">
To relate (initial - a subject) with (next - a subject):
<br />&#160;&#160;&#160;&#160;repeat through Table of Remarks:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the initial is starting entry and the next is the final entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[comment entry][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say paragraph break.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4209_45" -->
<a id="c4209_45"></a><blockquote class="code"><p class="quoted">
Table of Remarks
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">starting</p></td><td class="quotedtablecell"><p class="quoted">final</p></td><td class="quotedtablecell"><p class="quoted">comment</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">divorce</p></td><td class="quotedtablecell"><p class="quoted">love</p></td><td class="quotedtablecell"><p class="quoted">&quot;'As it seems to me, all the love is on one side,' she says crisply. 'And that rarely works.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">divorce</p></td><td class="quotedtablecell"><p class="quoted">love</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Stop making that plea: it won't work.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">divorce</p></td><td class="quotedtablecell"><p class="quoted">infidelity</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Frankly, I rather think there would have been cause enough for divorce without the perversely plentiful evidence of unfaithfulness.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">divorce</p></td><td class="quotedtablecell"><p class="quoted">money</p></td><td class="quotedtablecell"><p class="quoted">&quot;'If you mean that the divorce will be expensive, I know it,' she says. 'But I can think of no happier investment.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">marriage</p></td><td class="quotedtablecell"><p class="quoted">money</p></td><td class="quotedtablecell"><p class="quoted">&quot;'If you wish me to understand that it was a marriage for money, you could have spared your energy. That was patent from the outset.'&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">infidelity</p></td><td class="quotedtablecell"><p class="quoted">money</p></td><td class="quotedtablecell"><p class="quoted">&quot;'I'm sorry, but I don't see how having married for money excuses a subsequent infidelity.'&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>If we had more than one character in the scenario, we could provide multiple tables, but this will do to demonstrate the idea.</p>
<p>Of course, we can override specific instances, if we want the character always to say the same thing regardless of how we came to this point:</p>
<!-- START CODE "c4210_45" -->
<a id="c4210_45"></a><blockquote class="code"><p class="quoted">
Instead of asking Lady Uckfield about the subject penmanship:
<br />&#160;&#160;&#160;&#160;now the current subject is penmanship;
<br />&#160;&#160;&#160;&#160;say &quot;She sighs. 'So few people write really beautifully these days.'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4211_45" -->
<a id="c4211_45"></a><blockquote class="code"><p class="quoted">
Test me with &quot;think / ask lady about infidelity / show nasty letter to lady / show note to lady / think / ask lady about divorce / ask lady about love / ask lady about marriage / ask lady about divorce / ask lady about love / ask lady about penmanship&quot;.
</p></blockquote>
<!-- END CODE -->
<p>We would have to be careful about this system, since we have applied a various-to-various relation to every single object in the game. In practice it would probably be wisest to restrict it a bit, with judicious definitions of kind and so on.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "236: Wainwright Acts" "e418" -->
<a id="e418"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e418" class="eglink"><b>236</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e418" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wainwright Acts</span></b></a><br />A technical note about checking the location of door objects when characters other than the player are interacting with them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_3.html#e418"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example418">
<p>Suppose we wanted to write rules for a character who will interact with doors in other locations even when the player is not present. This poses a little challenge: doors are actually single objects, and -- with the same shuffling of stage properties that applies to backdrops -- they are moved as needed to represent the door object in whatever room contains the player.</p>
<p>That means that it isn't safe to rely on a phrase like</p>
<!-- START CODE "c4212_418" -->
<a id="c4212_418"></a><blockquote class="code"><p class="quoted">
if an open door is in the location of Bernard
</p></blockquote>
<!-- END CODE -->
<p>because, even if Bernard's location is connected by doors to other places, the actual representation of that door may not be &quot;in&quot; Bernard's location, from the model's point of view, at this exact moment.</p>
<p>This does not, of course, mean that we can't ask this question; just that we have to be a little cleverer about how we phrase it. Every door has properties that correspond to the two locations</p>
<p>linked:</p>
<!-- START CODE "c4213_418" -->
<a id="c4213_418"></a><blockquote class="code"><p class="quoted">
the front side of the blue door (a room, which is arbitrarily one side of the door)
<br />the back side of the blue door (arbitrarily the other side)
</p></blockquote>
<!-- END CODE -->
<p>We can make this information easier to check with a conditional relation, like so:</p>
<!-- START CODE "c4214_418" -->
<a id="c4214_418"></a><blockquote class="code"><p class="quoted">
Liminality relates a door (called X) to a room (called Y) when the front side of X is Y or the back side of X is Y. The verb to be a threshold of means the liminality relation.
</p></blockquote>
<!-- END CODE -->
<p>And this allows us to write rules that have characters interacting with doors even in the player's absence:</p>
<!-- START CODE "c4215_418" -->
<a id="c4215_418"></a><blockquote class="code"><p class="quoted">
&quot;Wainwright Acts&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4216_418" -->
<a id="c4216_418"></a><blockquote class="code"><p class="quoted">
The Waiting Room is a room. The waiting room door is west of the Waiting Room and east of the Gents' Loo. The Waiting Room door is an open door. &quot;The waiting room door [if open]stands open[otherwise]is shut firmly[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4217_418" -->
<a id="c4217_418"></a><blockquote class="code"><p class="quoted">
Sir Humphrey is a man in the Gents' Loo.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4218_418" -->
<a id="c4218_418"></a><blockquote class="code"><p class="quoted">
Liminality relates a door (called X) to a room (called Y) when the front side of X is Y or the back side of X is Y. The verb to be a threshold of means the liminality relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4219_418" -->
<a id="c4219_418"></a><blockquote class="code"><p class="quoted">
Definition: a person is other if he is not the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4220_418" -->
<a id="c4220_418"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;repeat with indiscreet one running through other people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with port running through open doors that are a threshold of the location of the indiscreet one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the port is a threshold of the location and the indiscreet one is not in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Through [the port], you overhear [the indiscreet one] discussing [one of]his hopes for your imminent resignation[or]your wife's infidelity[or]your financially straitened circumstances[or]ways to avoid attending your birthday party[or]your halitosis[as decreasingly likely outcomes].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4221_418" -->
<a id="c4221_418"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / z / w / z / e / close door / z&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "237: A Humble Wayside Flower" "e38" -->
<a id="e38"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e38" class="eglink"><b>237</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e38" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">A Humble Wayside Flower</span></b></a><br />Relations track the relationships between one character and another. Whenever the player meets a relative of someone he already knows, he receives a brief introduction.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e38"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example38">
<p>First we define the relationships we choose to acknowledge:</p>
<!-- START CODE "c4222_38" -->
<a id="c4222_38"></a><blockquote class="code"><p class="quoted">
&quot;A Humble Wayside Flower&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4223_38" -->
<a id="c4223_38"></a><blockquote class="code"><p class="quoted">
Marriage relates one person to another (called the spouse). The verb to be married to means the marriage relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4224_38" -->
<a id="c4224_38"></a><blockquote class="code"><p class="quoted">
Fatherhood relates one person (called father) to various people. The verb to engender means the fatherhood relation.
</p></blockquote>
<!-- END CODE -->
<p>For brevity, we will ignore the existence of mothers. It is a sad world.</p>
<!-- START CODE "c4225_38" -->
<a id="c4225_38"></a><blockquote class="code"><p class="quoted">
Siblinghood relates a person (called A) to a person (called B) when a person who engenders A engenders B. The verb to be sibling to means the siblinghood relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4226_38" -->
<a id="c4226_38"></a><blockquote class="code"><p class="quoted">
Family relates a person (called A) to a person (called B) when A is married to B or A engenders B or B engenders A or A is sibling to B. The verb to be related to means the family relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4227_38" -->
<a id="c4227_38"></a><blockquote class="code"><p class="quoted">
A person can be known or unknown. After printing the name of an unknown person (called the alien):
<br />&#160;&#160;&#160;&#160;if a known person (called the contact) is related to the alien:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; ([relation between alien and contact] of [the contact])&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the alien is known;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4228_38" -->
<a id="c4228_38"></a><blockquote class="code"><p class="quoted">
To say relation between (first party - a person) and (second party - a person):
<br />&#160;&#160;&#160;&#160;if the first party is married to the second party:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the first party is female, say &quot;wife&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;husband&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;if the first party is sibling to the second party:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the first party is female, say &quot;sister&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;brother&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;if the first party engenders the second party:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;father&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;if the second party is the father of the first party:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the first party is female, say &quot;daughter&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;son&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4229_38" -->
<a id="c4229_38"></a><blockquote class="code"><p class="quoted">
Pere Blanchard's Hut is a room. Percival Blakeney is a known man in the Hut. Marguerite is a woman in the Hut. Percival is married to Marguerite. Outside from the Hut is the Garden. Louise is a woman in the Garden. The Road to Paris is west of the Garden. Armand St Just is a man in the Road. Louise is married to Armand. Monsieur St Just is a man. He engenders Armand and Marguerite.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4230_38" -->
<a id="c4230_38"></a><blockquote class="code"><p class="quoted">
Test me with &quot;out / west / east / west&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Monsieur St Just never appears on the scene in this piece, but if we did put him somewhere the player could find him, he, too, would be properly introduced.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "238: Meet Market" "e245" -->
<a id="e245"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e245" class="eglink"><b>238</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e245" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Meet Market</span></b></a><br />A case in which relations give characters multiple values of the same kind.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e245"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example245">
<p>We have already seen that we can give things value properties -- a lamp has a brightness, for instance. Relations give us additional flexibility: since we may relate various things to various values, it is possible to describe a thing as having more than one value at the same time.</p>
<p>To demonstrate:</p>
<!-- START CODE "c4231_245" -->
<a id="c4231_245"></a><blockquote class="code"><p class="quoted">
&quot;Meet Market&quot; by &quot;K M and Eric Rossing&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4232_245" -->
<a id="c4232_245"></a><blockquote class="code"><p class="quoted">
Feature is a kind of value.  The features are snub-nosed, gangly, comely, bright-eyed, and sulky.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4233_245" -->
<a id="c4233_245"></a><blockquote class="code"><p class="quoted">
Appearance relates various persons to various features.  The verb to appear means the appearance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4234_245" -->
<a id="c4234_245"></a><blockquote class="code"><p class="quoted">
Meet Market is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4235_245" -->
<a id="c4235_245"></a><blockquote class="code"><p class="quoted">
Bob, Carol, Ted, and Alice are people in the Meet Market.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4236_245" -->
<a id="c4236_245"></a><blockquote class="code"><p class="quoted">
Bob appears snub-nosed and gangly.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4237_245" -->
<a id="c4237_245"></a><blockquote class="code"><p class="quoted">
Ted appears sulky and snub-nosed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4238_245" -->
<a id="c4238_245"></a><blockquote class="code"><p class="quoted">
Carol appears comely and bright-eyed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4239_245" -->
<a id="c4239_245"></a><blockquote class="code"><p class="quoted">
Alice appears bright-eyed and comely.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4240_245" -->
<a id="c4240_245"></a><blockquote class="code"><p class="quoted">
Yourself appears sulky and gangly.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4241_245" -->
<a id="c4241_245"></a><blockquote class="code"><p class="quoted">
Instead of looking:
<br />&#160;&#160;&#160;&#160;say &quot;The snub-nosed ones: [list of people who appear snub-nosed][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;The gangly ones: [list of people who appear gangly][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;The comely ones: [list of people who appear comely][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;The bright-eyed ones: [list of people who appear bright-eyed][line break]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot;The sulky ones: [list of people who appear sulky][paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4242_245" -->
<a id="c4242_245"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The same logic might be used to provide characters who have complex mood states: a person might be angry and sad, not merely one or the other -- feelings being what they are.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "239: For Demonstration Purposes" "e153" -->
<a id="e153"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e153" class="eglink"><b>239</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e153" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">For Demonstration Purposes</span></b></a><br />A character who learns new actions by watching the player performing them.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e153"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example153">
<p>Suppose we want to have a character who can dynamically learn new actions by observing the player performing them. We could do this by adding the actions to a list of things the character can do, but using a relation to express the same idea allows for tidier, easier-to-read code.</p>
<p>Thanks to Jesse McGrew for the initial design of this example.</p>
<!-- START CODE "c4243_153" -->
<a id="c4243_153"></a><blockquote class="code"><p class="quoted">
&quot;For Demonstration Purposes&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4244_153" -->
<a id="c4244_153"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4245_153" -->
<a id="c4245_153"></a><blockquote class="code"><p class="quoted">
Capability relates various people to various stored actions. The verb to be capable of means the capability relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4246_153" -->
<a id="c4246_153"></a><blockquote class="code"><p class="quoted">
Persuasion rule:
<br />&#160;&#160;&#160;&#160;let CA be the current action with no specific actor;
<br />&#160;&#160;&#160;&#160;if the person asked is capable of CA:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;persuasion succeeds;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The person asked] look[s] confused. Maybe a demonstration would help.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;persuasion fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4247_153" -->
<a id="c4247_153"></a><blockquote class="code"><p class="quoted">
The action requester is an object that varies. The action requester variable translates into I6 as &quot;act_requester&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4248_153" -->
<a id="c4248_153"></a><blockquote class="code"><p class="quoted">
To decide which action is the current action with no specific actor:
<br />&#160;&#160;&#160;&#160;let old actor be the person asked;
<br />&#160;&#160;&#160;&#160;let old requester be the action requester;
<br />&#160;&#160;&#160;&#160;now the person asked is the player;
<br />&#160;&#160;&#160;&#160;now the action requester is nothing;
<br />&#160;&#160;&#160;&#160;let CA be the current action;
<br />&#160;&#160;&#160;&#160;now the person asked is the old actor;
<br />&#160;&#160;&#160;&#160;now the action requester is the old requester;
<br />&#160;&#160;&#160;&#160;decide on CA.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4249_153" -->
<a id="c4249_153"></a><blockquote class="code"><p class="quoted">
The learning by observation rule is listed after the report stage rule in the specific action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4250_153" -->
<a id="c4250_153"></a><blockquote class="code"><p class="quoted">
Definition: a person is other if he is not the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4251_153" -->
<a id="c4251_153"></a><blockquote class="code"><p class="quoted">
This is the learning by observation rule:
<br />&#160;&#160;&#160;&#160;repeat with the viewer running through other people who can see the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is the actor and viewer is not capable of the current action:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The viewer] watches your behavior with interest. Seems like [they] [are] learning.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the viewer is capable of the current action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4252_153" -->
<a id="c4252_153"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4253_153" -->
<a id="c4253_153"></a><blockquote class="code"><p class="quoted">
The Daily Planet is a room. Clark is here. He is a man.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4254_153" -->
<a id="c4254_153"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now Clark is capable of taking inventory.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4255_153" -->
<a id="c4255_153"></a><blockquote class="code"><p class="quoted">
Test me with &quot;Clark, inventory / Clark, x me / x me / Clark, x me&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "240: Number Study" "e270" -->
<a id="e270"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e270" class="eglink"><b>240</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e270" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Number Study</span></b></a><br />The parity and joint magnitude relations explored.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e270"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example270">
<p>This is the same case given above, but expanded just slightly to demonstrate that the names of the relations can also be printed, if we like:</p>
<!-- START CODE "c4256_270" -->
<a id="c4256_270"></a><blockquote class="code"><p class="quoted">
&quot;Number Study&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4257_270" -->
<a id="c4257_270"></a><blockquote class="code"><p class="quoted">
Abstraction is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4258_270" -->
<a id="c4258_270"></a><blockquote class="code"><p class="quoted">
Parity relates a number (called N) to a number (called M) when N minus M is even.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4259_270" -->
<a id="c4259_270"></a><blockquote class="code"><p class="quoted">
Joint magnitude relates a number (called N) to a number (called M) when N plus M is greater than 7.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4260_270" -->
<a id="c4260_270"></a><blockquote class="code"><p class="quoted">
To chart (R - a relation of numbers):
<br />&#160;&#160;&#160;&#160;repeat with N running from 1 to 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with M running from 1 to 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if R relates N to M, say &quot;[N] &lt;=&gt; [M] by [R][line break]&quot;;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4261_270" -->
<a id="c4261_270"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;let L be { parity relation, joint magnitude relation };
<br />&#160;&#160;&#160;&#160;repeat with R running through L:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;chart R.
</p></blockquote>
<!-- END CODE -->
<p>As this shows, we can even form lists of relations. The kind of L is &quot;list of relations of numbers&quot;.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "241: Murder on the Orient Express" "e258" -->
<a id="e258"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e258" class="eglink"><b>241</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e258" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Murder on the Orient Express</span></b></a><br />A number of sleuths (the player among them) find themselves aboard the Orient Express, where a murder has taken place, and one of them is apparently the culprit. Naturally they do not agree on whom, but there is physical evidence which may change their minds...</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e258"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example258">
<p>The following example creates two new relations, and two new verbs, in order to set up a tangled web of intrigue.</p>
<!-- START CODE "c4262_258" -->
<a id="c4262_258"></a><blockquote class="code"><p class="quoted">
&quot;Murder on the Orient Express&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4263_258" -->
<a id="c4263_258"></a><blockquote class="code"><p class="quoted">
The Dining Car is a room. Lord Peter is a man in the Dining Car. Sherlock Holmes is a man in the Dining Car. Miss Marple is a woman in the Dining Car. Adam Dalgliesh is a man in the Dining Car.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4264_258" -->
<a id="c4264_258"></a><blockquote class="code"><p class="quoted">
Suspecting relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4265_258" -->
<a id="c4265_258"></a><blockquote class="code"><p class="quoted">
The verb to suspect means the suspecting relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4266_258" -->
<a id="c4266_258"></a><blockquote class="code"><p class="quoted">
Dalgliesh suspects Holmes. Holmes suspects Lord Peter. Lord Peter suspects Holmes. Miss Marple suspects the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4267_258" -->
<a id="c4267_258"></a><blockquote class="code"><p class="quoted">
Exculpating relates one thing to various people.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4268_258" -->
<a id="c4268_258"></a><blockquote class="code"><p class="quoted">
The verb to exculpate means the exculpating relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4269_258" -->
<a id="c4269_258"></a><blockquote class="code"><p class="quoted">
The silver bullet exculpates the player. The pipe ash exculpates Holmes. The poison pen letter exculpates Lord Peter. The poison pen letter exculpates Miss Marple. [Poor Dalgliesh. I guess he did it.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4270_258" -->
<a id="c4270_258"></a><blockquote class="code"><p class="quoted">
The pipe ash, the letter and the silver bullet are carried.
</p></blockquote>
<!-- END CODE -->
<p>Given this, we can then set up elaborate rules:</p>
<!-- START CODE "c4271_258" -->
<a id="c4271_258"></a><blockquote class="code"><p class="quoted">
Instead of showing something to a person who suspects the player:
<br />&#160;&#160;&#160;&#160;say &quot;'You would say that,' remarks [the second noun] darkly.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4272_258" -->
<a id="c4272_258"></a><blockquote class="code"><p class="quoted">
Instead of showing something which exculpates the player to someone:
<br />&#160;&#160;&#160;&#160;say &quot;'How striking!' says [the second noun]. 'Almost I begin to distrust myself.'&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4273_258" -->
<a id="c4273_258"></a><blockquote class="code"><p class="quoted">
Test me with &quot;show the letter to miss marple / show the silver bullet to holmes&quot;.
</p></blockquote>
<!-- END CODE -->
<p>And so on: &quot;if Dalgliesh suspects someone who is exculpated by something carried by the player...&quot;, for instance, makes a fitting final example for this chapter. The description</p>
<!-- START CODE "c4274_258" -->
<a id="c4274_258"></a><blockquote class="code"><p class="quoted">
someone who is exculpated by something carried by the player
</p></blockquote>
<!-- END CODE -->
<p>expresses a complicated idea in very few words, and in such a way that a passer-by looking at the source text would immediately see what was meant.</p>
<p>The moral is that relations allow sophisticated patterns of behaviour to be created in a way that reads back naturally as English.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "242: What Not To Wear" "e435" -->
<a id="e435"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e435" class="eglink"><b>242</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e435" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">What Not To Wear</span></b></a><br />A general-purpose clothing system that handles a variety of different clothing items layered in different combinations over different areas of the body.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_9.html#e435"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example435">
<!-- START CODE "c4275_435" -->
<a id="c4275_435"></a><blockquote class="code"><p class="quoted">
&quot;What Not To Wear&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4276_435" -->
<a id="c4276_435"></a><blockquote class="code"><p class="quoted">
Section 1 - Overlying and Underlying
</p></blockquote>
<!-- END CODE -->
<p>We start by borrowing some of the same ideas from the Bogart example, but we're also going to make a kind called &quot;garment-element&quot;. This kind will include both garments (objects of clothing) and body parts (things that can be covered by clothing); using it allows us to restrict the way our underlying and overlying relations apply, which will make them a bit faster at run-time.</p>
<!-- START CODE "c4277_435" -->
<a id="c4277_435"></a><blockquote class="code"><p class="quoted">
A garment-element is a kind of thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4278_435" -->
<a id="c4278_435"></a><blockquote class="code"><p class="quoted">
Underlying relates various garment-elements to various garment-elements with fast route-finding. The verb to underlie means the underlying relation. The verb to be under implies the underlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4279_435" -->
<a id="c4279_435"></a><blockquote class="code"><p class="quoted">
Check taking off:
<br />&#160;&#160;&#160;&#160;if the noun underlies something (called the impediment) which is worn by the player, say &quot;[The impediment] [are] in the way.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4280_435" -->
<a id="c4280_435"></a><blockquote class="code"><p class="quoted">
Carry out taking off:
<br />&#160;&#160;&#160;&#160;now the noun is not underlaid by anything.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4281_435" -->
<a id="c4281_435"></a><blockquote class="code"><p class="quoted">
Report taking off something:
<br />&#160;&#160;&#160;&#160;say &quot;[We] [are] now wearing [a list of uppermost things worn by the player].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4282_435" -->
<a id="c4282_435"></a><blockquote class="code"><p class="quoted">
Definition: a garment-element is uppermost if it is not under something opaque.
</p></blockquote>
<!-- END CODE -->
<p>Here we've expanded on the previous ideas of 'uppermost' because it is possible for an upper layer to reveal what lies beneath: a tie, a clear plastic trenchcoat, an open-knit sweater, etc. We'll make such items transparent.</p>
<!-- START CODE "c4283_435" -->
<a id="c4283_435"></a><blockquote class="code"><p class="quoted">
Before taking off something which underlies something which is worn by the player:
<br />&#160;&#160;&#160;&#160;while the noun underlies something (called the impediment) which is worn by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun underlies the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4284_435" -->
<a id="c4284_435"></a><blockquote class="code"><p class="quoted">
Overlying relates various garment-elements to various garment-elements. The verb to overlie means the overlying relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4285_435" -->
<a id="c4285_435"></a><blockquote class="code"><p class="quoted">
Covering relates a garment-element (called A) to a garment-element (called B) when the number of steps via the overlying relation from A to B is greater than 0. The verb to cover means the covering relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4286_435" -->
<a id="c4286_435"></a><blockquote class="code"><p class="quoted">
Before wearing something when a garment which covers the noun is worn by the player:
<br />&#160;&#160;&#160;&#160;while the player wears a garment (called the impediment) which covers the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first removing [the impediment])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the impediment;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player is wearing the impediment, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4287_435" -->
<a id="c4287_435"></a><blockquote class="code"><p class="quoted">
Carry out wearing:
<br />&#160;&#160;&#160;&#160;repeat with hidden item running through things worn by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun covers the hidden item, now the hidden item underlies the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4288_435" -->
<a id="c4288_435"></a><blockquote class="code"><p class="quoted">
Instead of looking under something which is worn by the player:
<br />&#160;&#160;&#160;&#160;if something (called the underwear) underlies the noun, say &quot;[We] [peek] at [the underwear]. Yup, still there.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Just [us] in there.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4289_435" -->
<a id="c4289_435"></a><blockquote class="code"><p class="quoted">
Instead of taking inventory:
<br />&#160;&#160;&#160;&#160;say &quot;[if the player carries something][We]['re] carrying [a list of things carried by the player][else][We]['re] empty-handed[end if][if the player wears something]. [We] [are] wearing [a list of uppermost garments worn by the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4290_435" -->
<a id="c4290_435"></a><blockquote class="code"><p class="quoted">
To peek is a verb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4291_435" -->
<a id="c4291_435"></a><blockquote class="code"><p class="quoted">
Section 2 - Regional Coverage
</p></blockquote>
<!-- END CODE -->
<p>Here we draw in the idea that different clothes go over different areas of the body, and that they should be in competition with each other only if both sets of clothes belong at the same level over the same body area.</p>
<!-- START CODE "c4292_435" -->
<a id="c4292_435"></a><blockquote class="code"><p class="quoted">
Before wearing something:
<br />&#160;&#160;&#160;&#160;let N be the layering depth of the noun;
<br />&#160;&#160;&#160;&#160;repeat with item running through things worn by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the layering depth of the item is N and the item covers a body-part which is covered by the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(first taking off [the item])[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try taking off the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the player wears the item, stop the action.
</p></blockquote>
<!-- END CODE -->
<p>This may seem like overkill, but it allows us to create garments that cover different subsets of the body -- pants and shirt vs. a dress, for instance.</p>
<!-- START CODE "c4293_435" -->
<a id="c4293_435"></a><blockquote class="code"><p class="quoted">
To decide what number is the layering depth of (chosen garment - a thing):
<br />&#160;&#160;&#160;&#160;let N be 0;
<br />&#160;&#160;&#160;&#160;if the chosen garment covers a body-part (called base):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be the number of steps via the overlying relation from the chosen garment to the base;
<br />&#160;&#160;&#160;&#160;decide on N.
</p></blockquote>
<!-- END CODE -->
<p>To help with modeling, we'll give everyone body parts, broken down according to their relevance to clothing:</p>
<!-- START CODE "c4294_435" -->
<a id="c4294_435"></a><blockquote class="code"><p class="quoted">
A body-part is a kind of garment-element. A torso, a seat, a head, pair of legs, and pair of feet are kinds of body-part.
</p></blockquote>
<!-- END CODE -->
<p>If we wanted to allow gloves, we might put in hands as well; but this is enough for now.</p>
<!-- START CODE "c4295_435" -->
<a id="c4295_435"></a><blockquote class="code"><p class="quoted">
One head is part of every person. One torso is part of every person. One pair of legs is part of every person. One pair of feet is part of every person. One seat is part of every person.
</p></blockquote>
<!-- END CODE -->
<p>And now we make some categories of clothing:</p>
<!-- START CODE "c4296_435" -->
<a id="c4296_435"></a><blockquote class="code"><p class="quoted">
A garment is a kind of garment-element. A garment can be transparent. A pair of pants, a pair of underpants, a foundation garment, a pair of socks, a pair of shoes, a jacket, a hat, a dress, and a shirt are kinds of garment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4297_435" -->
<a id="c4297_435"></a><blockquote class="code"><p class="quoted">
The plural of pair of pants is pairs of pants. The plural of pair of underpants is pairs of underpants. The plural of pair of socks is pairs of socks. The plural of pair of shoes is pairs of shoes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4298_435" -->
<a id="c4298_435"></a><blockquote class="code"><p class="quoted">
A pair of pants, a pair of underpants, a foundation garment, a pair of socks, a pair of shoes, a jacket, a hat, a dress, and a shirt are usually wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4299_435" -->
<a id="c4299_435"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;now every pair of socks overlies every pair of feet;
<br />&#160;&#160;&#160;&#160;now every pair of shoes overlies every pair of socks;
<br />&#160;&#160;&#160;&#160;now every pair of underpants overlies every seat;
<br />&#160;&#160;&#160;&#160;now every pair of pants overlies every pair of underpants;
<br />&#160;&#160;&#160;&#160;now every foundation garment overlies every torso;
<br />&#160;&#160;&#160;&#160;now every jacket overlies every shirt;
<br />&#160;&#160;&#160;&#160;now every jacket overlies every dress;
<br />&#160;&#160;&#160;&#160;now every hat overlies every head;
<br />&#160;&#160;&#160;&#160;now every dress overlies every pair of underpants;
<br />&#160;&#160;&#160;&#160;now every dress overlies every foundation garment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4300_435" -->
<a id="c4300_435"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4301_435" -->
<a id="c4301_435"></a><blockquote class="code"><p class="quoted">
The Dressing Room is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4302_435" -->
<a id="c4302_435"></a><blockquote class="code"><p class="quoted">
The player carries some capris, some jeans, a corset, a plunge bra, a thong, boy-shorts, black satin D'Orsay pumps, brown leather boots, a camisole, a cocktail dress, a bolero, a cashmere shrug, a sheer wrap, and a linen tunic.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4303_435" -->
<a id="c4303_435"></a><blockquote class="code"><p class="quoted">
The woolly socks are a pair of socks.
<br />The D'Orsay pumps and the brown leather boots are pairs of shoes.
<br />The thong and the boy-shorts are pairs of underpants.
<br />The capris and the jeans are pairs of pants.
<br />The tunic is a shirt.
<br />The camisole, the corset, and the plunge bra are foundation garments.
<br />The cocktail dress is a dress.
<br />The bolero, the cashmere shrug, and the sheer wrap are jackets. The shrug and the wrap are transparent.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c4304_435" -->
<a id="c4304_435"></a><blockquote class="code"><p class="quoted">
Test me with &quot;wear capris / wear jeans / i / wear thong / i / wear dress / wear corset / wear dress / i / wear wrap / i / wear boots / wear pumps / i&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "243: Mathematical view of relations" "e240" -->
<a id="e240"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e240" class="eglink"><b>243</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e240" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Mathematical view of relations</span></b></a><br />Some notes on relations from a mathematical point of view, provided only to clarify some technicalities for those who are interested.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_1.html#e240"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example240">
<p>Inform uses the term &quot;relation&quot; in a broader sense than mathematics. Properly speaking, the term &quot;relation&quot; in its mathematical sense only applies to the case where the domain for the left and right objects are the same: for simplicity's sake, let us talk only about the case where they are.</p>
<p>In mathematics, the properties most often looked for in a relation are that it should be:</p>
<p>(a) Reflexive: A &lt;=&gt; A for every A. This is not especially useful for Inform, and seldom appears in practical examples.</p>
<p>(b) Symmetric: A &lt;=&gt; B if and only if B &lt;=&gt; A. Generally, Inform relations are not symmetric, but there are two important cases which are:</p>
<!-- START CODE "c4305_240" -->
<a id="c4305_240"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
<br />Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>These are automatically symmetric, so that to assert one way round is to assert the other as well.</p>
<p>(c) Transitive: A &lt;=&gt; B and B &lt;=&gt; C means that A &lt;=&gt; C as well. Again, Inform relations are not generally transitive. In many relations, there can be long chains of things, each perhaps related to the one in front and the one behind, so that there is some indirect sense in which the two ends of the chain are connected to each other: but they are not related as such. For instance, a journey across the map might pass through ten rooms, each adjacent to the last and next, but the two ends would not themselves be adjacent. The concept we need is the &quot;transitive closure&quot; of the original relation, defined as the smallest transitive relation including the original. If R is a relation between &quot;things&quot;, then the following:</p>
<!-- START CODE "c4306_240" -->
<a id="c4306_240"></a><blockquote class="code"><p class="quoted">
TC relates a thing (called A) to a thing (called B) when the number of steps via R from A to B is greater than 0.
</p></blockquote>
<!-- END CODE -->
<p>is the transitive closure of R. In particular,</p>
<!-- START CODE "c4307_240" -->
<a id="c4307_240"></a><blockquote class="code"><p class="quoted">
Accessibility relates a room (called A) to a room (called B) when the number of moves from B to A is greater than 0. The verb to be accessible from means the accessibility relation.
</p></blockquote>
<!-- END CODE -->
<p>calculates the transitive closure of adjacency. Here, though, the way we normally understand &quot;accessible from&quot; suggests that it would be better to write:</p>
<!-- START CODE "c4308_240" -->
<a id="c4308_240"></a><blockquote class="code"><p class="quoted">
Accessibility relates a room (called A) to a room (called B) when the number of moves from B to A is at least 0.
</p></blockquote>
<!-- END CODE -->
<p>which is reflexive as well as transitive. The usefulness of Inform's &quot;next step via R from A to B&quot; construction, in a wide variety of settings, reflects the importance of transitivity as an idea.</p>
<p>A relation which has all three properties of being reflexive, symmetric and transitive is called an &quot;equivalence relation&quot;. (If all the map connections are two-way, then the accessibility relation above is symmetric and therefore a full equivalence relation: but if not, it may not be.) Inform has a special construction for making equivalence relations:</p>
<!-- START CODE "c4309_240" -->
<a id="c4309_240"></a><blockquote class="code"><p class="quoted">
Nationality relates people to each other in groups.
</p></blockquote>
<!-- END CODE -->
<p>This language - &quot;in groups&quot; - relies on the standard theorem that every equivalence relation on a set naturally defines a partition of that set, and vice versa. The &quot;groups&quot; referred to are what are normally called &quot;equivalence classes&quot;. (Inform does little with these equivalence classes: it might be interesting to do so, in effect forming quotient kinds.)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "244: Graph-theory view of relations" "e241" -->
<a id="e241"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_13.html#e241" class="eglink"><b>244</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_13.html#e241" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Graph-theory view of relations</span></b></a><br />Some notes on relations from the point of view of graph theory.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_1.html#e241"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example241">
<p>One way to look at a relation is to regard it as a directed graph: that is, a collection of things (&quot;vertices&quot;) with arrows drawn between them (&quot;edges&quot;). We write our items A, B, C, ... on a piece of paper: then, if A relates to B, we draw an arrow pointing from A to B, and so on. If we made this drawing for the adjacency relation, we would more or less have reconstructed the map (or at least a simplified one which does not care about precise directions, like the famous diagram of the London Underground). But the drawing can be made for any relation. If we define:</p>
<!-- START CODE "c4310_241" -->
<a id="c4310_241"></a><blockquote class="code"><p class="quoted">
Suspecting relates various people to one person.
</p></blockquote>
<!-- END CODE -->
<p>then, in the corresponding graph, each &quot;vertex&quot; will have at most one arrow leading away from it - though there could be many (or none) leading towards. Conversely, a one-to-various relation produces a graph where each vertex has at most one arrow coming in. A one-to-one relation means that the picture consists of some vertices on their own, with no arrows, a few perhaps with looped arrows leading from and to themselves, and then a collection of pairs joined by arrows. On the other hand, a various-to-various relation is just a free-for-all, with no restrictions on the arrows. The relations:</p>
<!-- START CODE "c4311_241" -->
<a id="c4311_241"></a><blockquote class="code"><p class="quoted">
Meeting relates people to each other.
<br />Marriage relates one person to another.
</p></blockquote>
<!-- END CODE -->
<p>always have the property of working both ways round, and these are easiest to visualise by forgetting the direction of the arrows, so that they just become lines joining the vertices.</p>
<p>Inform uses a different algorithm for finding routes (&quot;the next step via R from A to B&quot;) in each of these cases, and internally it stores relations in different formats in the different cases, because it makes a big difference to the efficiency of Inform to minimise the storage required for a relation and the time taken to explore it.</p>
<p>All the cases are benign except for &quot;various to various&quot; - the most useful - and for its closely related symmetrical version, &quot;relates... to each other&quot;. Inform cannot afford to assume that the relation will be &quot;sparse&quot; (that is: that no vertex will have more than a certain number of arrows, or that the total number of arrows will be small), because it has no idea how the arrows will come and go during play. It therefore uses 1 bit of storage for each pair of objects. This sounds harmless, but if there are 200 rooms, there are 40,000 pairs of rooms, which means a 5000-byte allocation of storage (plus a handful of bytes as overhead). Gratuitous various-to-various relations are therefore not a good idea.</p>
<p>There is a standard algorithm for calculating shortest paths through a directed graph, but Inform does not always use it, because there is not always memory to store the required matrix of partial results. Inform's slow method, likely to be used on the Z-machine, requires a storage overhead which is equal to the number of vertices, not the square of that number, but the worst-case running time can be bad: if there are N vertices, and the diameter of graph (the longest distance between vertices) is D, then the running time is proportional to D times N. The worst case in finding routes from A to B is when almost every vertex can reach B, some across long trails, but A cannot. In the case of finding routes across the game's map, this must be multiplied further by the number of possible directions - usually 16.</p>
<p>This does not sound too awful, but if one is trying to find (say) &quot;the most distant room from A&quot;, that means a further loop and now the running time will be D times N squared. Extension writers will need to be careful of this kind of thing: it is easy to write highly cool prototypes which work terribly slowly on larger, more realistic maps.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
