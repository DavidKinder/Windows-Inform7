<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Generated by indoc on 11 Aug 2016 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>Chapter 19: Rulebooks</title>
</head>
<body class="paper papertint"><p class="chapterheading">Chapter 19: Rulebooks</p>
<p class="chaptercontents"><a href="WI_19.html#s1" class="standardlink"><span class="chaptercontentsitem">§19.1. On rules</span></a>; <a href="WI_19.html#s2" class="standardlink"><span class="chaptercontentsitem">§19.2. Named rules and rulebooks</span></a>; <a href="WI_19.html#s3" class="standardlink"><span class="chaptercontentsitem">§19.3. New rules</span></a>; <a href="WI_19.html#s4" class="standardlink"><span class="chaptercontentsitem">§19.4. Listing rules explicitly</span></a>; <a href="WI_19.html#s5" class="standardlink"><span class="chaptercontentsitem">§19.5. Changing the behaviour of rules</span></a>; <a href="WI_19.html#s6" class="standardlink"><span class="chaptercontentsitem">§19.6. Sorting and indexing of rules</span></a>; <a href="WI_19.html#s7" class="standardlink"><span class="chaptercontentsitem">§19.7. The preamble of a rule</span></a>; <a href="WI_19.html#s8" class="standardlink"><span class="chaptercontentsitem">§19.8. New rulebooks</span></a>; <a href="WI_19.html#s9" class="standardlink"><span class="chaptercontentsitem">§19.9. Basis of a rulebook</span></a>; <a href="WI_19.html#s10" class="standardlink"><span class="chaptercontentsitem">§19.10. Rulebook variables</span></a>; <a href="WI_19.html#s11" class="standardlink"><span class="chaptercontentsitem">§19.11. Success and failure</span></a>; <a href="WI_19.html#s12" class="standardlink"><span class="chaptercontentsitem">§19.12. Named outcomes</span></a>; <a href="WI_19.html#s13" class="standardlink"><span class="chaptercontentsitem">§19.13. Rulebooks producing values</span></a>; <a href="WI_19.html#s14" class="standardlink"><span class="chaptercontentsitem">§19.14. Abide by</span></a>; <a href="WI_19.html#s15" class="standardlink"><span class="chaptercontentsitem">§19.15. Two rulebooks used internally</span></a>; <a href="WI_19.html#s16" class="standardlink"><span class="chaptercontentsitem">§19.16. The Laws for Sorting Rulebooks</span></a></p><table class="centredtable"><tr><td class="roadsigndirection"><a href="WI_1.html" class="standardlink"><img alt="arrow-up-left.png" src="images/arrow-up-left.png" /></a></td><td><a href="WI_1.html" class="standardlink">Contents of <i>Writing with Inform</i></a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_18.html" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_18.html" class="standardlink">Chapter 18: Activities</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20.html" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_20.html" class="standardlink">Chapter 20: Advanced Text</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><p class="sectionheading"><a id="s1"></a>§19.1. On rules</p>
<p>When we open the casing and look inside the machinery of Inform, what we see are rules and rulebooks. We seldom need to know how this machinery works, but every once in a while we want to replace components, or even install new mechanisms of our own. And as we shall see, creating new rulebooks can be a neat way to tackle complicated simulations full of exceptions and special cases.</p>
<p>So far we have seen many rules, and the term &quot;rulebook&quot; has frequently but vaguely been used. Here is a summary of the rulebooks seen so far:</p>
<!-- START CODE "c7360" -->
<a id="c7360"></a><blockquote class="code"><p class="quoted">
before
<br />instead
<br />after
<br />check taking, carry out taking, report taking
<br /><span class="italic">and three similar rulebooks for each of the 90 or so actions</span>
<br />persuasion
<br />unsuccessful attempt
<br />reaching inside
<br />reaching outside
<br />visibility
<br />does the player mean
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7361" -->
<a id="c7361"></a><blockquote class="code"><p class="quoted">
when play begins
<br />when play ends
<br />every turn
<br />when Confrontation Scene begins
<br />when Confrontation Scene ends
<br /><span class="italic">and two similar rulebooks for each scene we create, if any</span>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7362" -->
<a id="c7362"></a><blockquote class="code"><p class="quoted">
before printing the name of
<br />for printing the name of
<br />after printing the name of
<br /><span class="italic">and three similar rulebooks for each of the 20 or so activities</span>
</p></blockquote>
<!-- END CODE -->
<p>Which makes around 340 rulebooks before we even start to write. All the same, not everything in Inform belongs to a rulebook - timed events, for example, are rules which normally live outside of rulebooks; and other constructions, such as newly-created phrases, or definitions, may look vaguely like rules, but they aren't. So the following are not rulebooks:</p>
<!-- START CODE "c7363" -->
<a id="c7363"></a><blockquote class="code"><p class="quoted">
At 11:10 PM: ...
<br />To dislodge the shelf: ...
<br />Definition: ...
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_18.html#s40" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_18.html#s40" class="standardlink">Back to Chapter 18: Activities: §18.40. Starting the virtual machine</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s2" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s2" class="standardlink">Onward to §19.2. Named rules and rulebooks</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s2"></a>§19.2. Named rules and rulebooks</p>
<p>Most of the rules built into Inform have names. For instance, a rule called &quot;the advance time rule&quot; is the one which increments the number of turns and advances the clock, values which are usually not visible, but are ticking away behind the scenes.</p>
<p>A rulebook is a list of rules to be followed in sequence until one of them makes a decision. For instance, when actions get to the &quot;instead&quot; stage, each &quot;instead&quot; rule is tried until one of them chooses to do something. If the source text contains the rules</p>
<!-- START CODE "c7364" -->
<a id="c7364"></a><blockquote class="code"><p class="quoted">
Instead of taking something: say &quot;You have no particular need just now.&quot;
<br />Instead of taking a fish: say &quot;It's all slimy.&quot;
</p></blockquote>
<!-- END CODE -->
<p>and a command to TAKE something is tried, then only one of these rules will have any effect. The &quot;instead&quot; rulebook contains:</p>
<!-- START CODE "c7365" -->
<a id="c7365"></a><blockquote class="code"><p class="quoted">
Rule (1) to be applied if the action matches &quot;taking a fish&quot;
<br />Rule (2) to be applied if the action matches &quot;taking something&quot;
</p></blockquote>
<!-- END CODE -->
<p>Inside their rulebook, the rules are not listed in the order of definition in the source text. Rule (1) comes before rule (2) because it applies in more specific circumstances. This is the main idea: a rulebook gathers together rules about making some decision, or taking some action, and sorts them in order to give the more specific rules first choice about whether they want to intervene.</p>
<p>Whereas only some rules are named (the two &quot;instead&quot; rules above have no name, for instance), every rulebook has a name. For convenience, the following forms of rule and rulebook name are synonymous:</p>
<!-- START CODE "c7366" -->
<a id="c7366"></a><blockquote class="code"><p class="quoted">
advance time = the advance time rule
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7367" -->
<a id="c7367"></a><blockquote class="code"><p class="quoted">
the instead rules = instead rulebook = instead
</p></blockquote>
<!-- END CODE -->
<p>The names of built-in rules have been chosen as descriptively as possible: the &quot;can't go through closed doors rule&quot;, for instance. Names for rules tend to be verbose, but this is a situation where clarity is very much better than brevity.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s1" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s1" class="standardlink">Back to §19.1. On rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s3" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s3" class="standardlink">Onward to §19.3. New rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e420" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e420" class="standardlink">Example 388: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Nine AM Appointment</b>&#160;&#160;&#160; A WAIT [number] MINUTES command which advances through an arbitrary number of turns.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e421" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e421" class="standardlink">Example 389: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Delayed Gratification</b>&#160;&#160;&#160; A WAIT UNTIL [time] command which advances until the game clock reaches the correct hour.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s3"></a>§19.3. New rules</p>
<p>Stretching a point seasonally, we might write:</p>
<!-- START CODE "c7368" -->
<a id="c7368"></a><blockquote class="code"><p class="quoted">
Every turn, say &quot;The summer breeze shakes the apple-blossom.&quot;
</p></blockquote>
<!-- END CODE -->
<p>This rule is nameless. It needs no name because it will never need to be referred to: by identifying it as an every turn rule we have already said enough to lodge it in the &quot;every turn&quot; rulebook. In fact, though, it is easy to create a named rule:</p>
<!-- START CODE "c7369" -->
<a id="c7369"></a><blockquote class="code"><p class="quoted">
This is the blossom shaking rule: say &quot;The summer breeze shakes the apple-blossom.&quot;
</p></blockquote>
<!-- END CODE -->
<p>The name of a rule must always end with the word &quot;rule&quot;, for clarity's sake. (The phrasing &quot;This is the ... rule&quot; is used because &quot;The ... rule&quot; would be open to misinterpretation.)</p>
<p>Previously we had a rule which had no name, but belonged to a rulebook: now we have the opposite, because although the &quot;blossom shaking rule&quot; has a name, it has not been placed in any rulebook. That means it will probably never be applied, unless we give specific instructions for that.</p>
<p>Alternatively, it is possible to both name and place a rule in a single sentence:</p>
<!-- START CODE "c7370" -->
<a id="c7370"></a><blockquote class="code"><p class="quoted">
Every turn (this is the alternative blossom rule): say &quot;The summer breeze shakes the apple-blossom.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Now the &quot;alternative blossom rule&quot; is a named rule in the &quot;every turn&quot; rulebook.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s2" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s2" class="standardlink">Back to §19.2. Named rules and rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s4" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s4" class="standardlink">Onward to §19.4. Listing rules explicitly</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e97" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e97" class="standardlink">Example 390: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>The Crane's Leg 2</b>&#160;&#160;&#160; A description text generated based on the propensities of the player-character, following different rulebooks for different characters.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e363" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e363" class="standardlink">Example 391: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Stone</b>&#160;&#160;&#160; A soup to which the player can add ingredients, which will have different effects when the player eats.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e172" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e172" class="standardlink">Example 392: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Bribery</b>&#160;&#160;&#160; A GIVE command that gets rid of Inform's default refusal message in favor of something a bit more sophisticated.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s4"></a>§19.4. Listing rules explicitly</p>
<p>If rules can manage perfectly well without, why bother to have names for rules?</p>
<p>The answer is that although Inform contains an elaborate mechanism for placing rules into the correct rulebook at the correct position, and this happens automatically, Inform will sometimes get it wrong. It will use a rule we do not want, or place them in an order which does not suit us. To put this right, we can give explicit instructions which take precedence over Inform's normal practice. This is done with the &quot;to list&quot; verb, as in the following examples.</p>
<p>1. The simplest usage is to place a named rule, which currently has no home, in any rulebook of our choice. (This looks redundant, but just occasionally we want the same rule to appear in two different rulebooks.)</p>
<!-- START CODE "c7371" -->
<a id="c7371"></a><blockquote class="code"><p class="quoted">
The blossom rule is listed in the every turn rules.
</p></blockquote>
<!-- END CODE -->
<p>A rule can appear in more than one rulebook, but within any single rulebook it can only appear once.</p>
<p>2. We can also specify that the rule needs to appear before, or after, some other named rule in the same rulebook:</p>
<!-- START CODE "c7372" -->
<a id="c7372"></a><blockquote class="code"><p class="quoted">
The collapsing bridge rule is listed before the moving doorways rule in the instead rules.
</p></blockquote>
<!-- END CODE -->
<p>Instead of being placed in specificity order in the whole &quot;instead&quot; rulebook, the &quot;collapsing bridge&quot; rule would now be placed in specificity order only in the first half of the &quot;instead&quot; rulebook - the rules from the start up to (but not including) the &quot;moving doorways&quot; rule. To reiterate: that doesn't necessarily mean it will be immediately before the &quot;moving doorways&quot; rule; it will be placed according to Inform's usual sorting rules within that range.</p>
<p>&quot;Listed&quot; sentences are obeyed by Inform in sequence, so if later ones issue instructions contradicting earlier ones, it's the later ones which win out. Thus if we say &quot;A is listed before B in X&quot; and then &quot;B is listed before A in X&quot;, the result is that B comes before A.</p>
<p>3. We can specify that a rule needs to appear first or last in a given rulebook:</p>
<!-- START CODE "c7373" -->
<a id="c7373"></a><blockquote class="code"><p class="quoted">
The collapsing bridge rule is listed first in the instead rules.
</p></blockquote>
<!-- END CODE -->
<p>Again, if we make several such instructions about the same rulebook then the most recent one wins: &quot;A is listed first in X. B is listed first in X. C is listed first in X.&quot; causes rulebook X to begin C, B, A.</p>
<p>4. We can also substitute one rule for another:</p>
<!-- START CODE "c7374" -->
<a id="c7374"></a><blockquote class="code"><p class="quoted">
My darkness rule is listed instead of the can't act in the dark rule in the visibility rules.
</p></blockquote>
<!-- END CODE -->
<p>If rule A is listed instead of rule B in rulebook X, and A was already a rule in rulebook X, then A will move from its previous position to occupy the place where B was, and B will disappear. (In particular rule A will not be duplicated, which would break the principle that no rule occurs twice in the same rulebook.)</p>
<p>5. And we can strike down existing rules, either specifically or in all their applications:</p>
<!-- START CODE "c7375" -->
<a id="c7375"></a><blockquote class="code"><p class="quoted">
The can't act in the dark rule is not listed in the visibility rules.
<br />The can't remove from people rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<p>This does not actually destroy the rules in question: they could still, for instance, be put into another rulebook, or even be applied explicitly, as we shall see. But unless we take deliberate action to the contrary, un-listing a rule amounts to abolishing it forever. This is a little drastic, and more subtle effects can be seen in the next section.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s3" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s3" class="standardlink">Back to §19.3. New rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s5" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s5" class="standardlink">Onward to §19.5. Changing the behaviour of rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e337" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e337" class="standardlink">Example 393: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Saint Eligius</b>&#160;&#160;&#160; Adding a first look rule that comments on locations when we visit them for the first time, inserting text after objects are listed but before any "every turn" rules might occur.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e405" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e405" class="standardlink">Example 394: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Uptempo</b>&#160;&#160;&#160; Adjust time advancement so the game clock moves fifteen minutes each turn.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e412" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e412" class="standardlink">Example 395: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Verbosity 2</b>&#160;&#160;&#160; Making rooms give full descriptions each time we enter, even if we have visited before, and disallowing player use of BRIEF and SUPERBRIEF.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e350" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e350" class="standardlink">Example 396: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Slouching</b>&#160;&#160;&#160; A system of postures allowing the player and other characters to sit, stand, or lie down explicitly or implicitly on a variety of enterable supporters or containers, or in location.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e371" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e371" class="standardlink">Example 397: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Swigmore U.</b>&#160;&#160;&#160; Adding a new kind of supporter called a perch, where everything dropped lands on the floor.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s5"></a>§19.5. Changing the behaviour of rules</p>
<p>Here is another way to abolish an already-existing rule:</p>
<!-- START CODE "c7376" -->
<a id="c7376"></a><blockquote class="code"><p class="quoted">
The print final score rule does nothing.
</p></blockquote>
<!-- END CODE -->
<p>The rule continues to be listed in any rulebook it would normally be listed in: but now it doesn't do anything. More usefully, we can attach a condition:</p>
<!-- START CODE "c7377" -->
<a id="c7377"></a><blockquote class="code"><p class="quoted">
The print final score rule does nothing if the score is 0.
</p></blockquote>
<!-- END CODE -->
<p>or:</p>
<!-- START CODE "c7378" -->
<a id="c7378"></a><blockquote class="code"><p class="quoted">
The print final score rule does nothing unless the score is 100.
</p></blockquote>
<!-- END CODE -->
<p>We can also substitute a rule of our own:</p>
<!-- START CODE "c7379" -->
<a id="c7379"></a><blockquote class="code"><p class="quoted">
This is the print fancy final score rule:
<br />&#160;&#160;&#160;&#160;say &quot;Oh my, you scored a mammoth [score]!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7380" -->
<a id="c7380"></a><blockquote class="code"><p class="quoted">
The print fancy final score rule substitutes for the print final score rule.
</p></blockquote>
<!-- END CODE -->
<p>and once again a condition can be applied:</p>
<!-- START CODE "c7381" -->
<a id="c7381"></a><blockquote class="code"><p class="quoted">
The print fancy final score rule substitutes for the print final score rule when the score is greater than 100.
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s4" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s4" class="standardlink">Back to §19.4. Listing rules explicitly</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s6" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s6" class="standardlink">Onward to §19.6. Sorting and indexing of rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e227" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e227" class="standardlink">Example 398: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Access All Areas</b>&#160;&#160;&#160; The Pointy Hat of Liminal Transgression allows its wearer to walk clean through closed doors.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s6"></a>§19.6. Sorting and indexing of rules</p>
<p>The Rules page of the index for a project offers a view of the rulebooks and their contents, with two major exceptions: built-in rules for specific actions are left to the Actions page, and any rules for scene endings or beginnings are left to the Scenes page.</p>
<p>As we have seen, we need to know the name of a rule before we can change its rulebook listing or alter its applicability. The Rules and Actions index pages show the names of the built-in rules, which are not worth memorising. (Typing can be saved by using the paste-into-source buttons, or by selecting a rule's name and copying and pasting it by hand.)</p>
<p>In the Rules index, each rulebook is named and then followed by a list of the rules within it, one on each line: if nothing follows, then the rulebook is currently empty. The rules are given in order, and icons are used which indicate which rules are more specific than which others. Hovering the mouse over such an icon should bring up a &quot;tooltip&quot; which explains Inform's reasoning.</p>
<p>As this suggests, Inform performs its automatic sorting using a precise collection of Laws (the term &quot;rules&quot; would be ambiguous here, so we call these guidelines Laws instead), and the tooltip shows which Law was applied. It is bad style to write source text which absolutely depends on detailed points of these Laws, but they are documented at the end of this chapter for those who do wish to see the full details.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s5" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s5" class="standardlink">Back to §19.5. Changing the behaviour of rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s7" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s7" class="standardlink">Onward to §19.7. The preamble of a rule</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s7"></a>§19.7. The preamble of a rule</p>
<p>In general, a rule looks like this:</p>
<!-- START CODE "c7382" -->
<a id="c7382"></a><blockquote class="code"><p class="quoted">
preamble : list of one or more phrases divided by semicolons
</p></blockquote>
<!-- END CODE -->
<p>though in a few common cases (where the preamble begins with Before, After, Instead of, Every turn, or When, and there is only one phrase in the list) the colon can be replaced with a comma. Three kinds of declaration are special, and these we can tell apart by the first word:</p>
<!-- START CODE "c7383" -->
<a id="c7383"></a><blockquote class="code"><p class="quoted">
To ... - a new phrase: see the chapter on Phrases
<br />At ... - something due to happen at a given time: see Time
<br />Definition: ... - a new adjective: see Descriptions
</p></blockquote>
<!-- END CODE -->
<p>All other declarations (that is, starting with any other word) create rules fit for going into rulebooks. The preamble can either just be a name, which is required to end with the word &quot;rule&quot;, or it can give circumstances and have no name, or it can do both:</p>
<!-- START CODE "c7384" -->
<a id="c7384"></a><blockquote class="code"><p class="quoted">
This is the ...name of rule...
<br />...circumstances...
<br />...circumstances... (this is the ...name of rule...)
</p></blockquote>
<!-- END CODE -->
<p>The circumstances should be a sequence of the following ingredients, each of which is optional except the name of the rulebook:</p>
<!-- START CODE "c7385" -->
<a id="c7385"></a><blockquote class="code"><p class="quoted">
first <span class="italic">or</span> last
<br /><span class="italic">followed by</span> ...rulebook name...
<br /><span class="italic">followed by</span> about <span class="italic">or</span> for <span class="italic">or</span> of <span class="italic">or</span> on <span class="italic">or</span> rule
<br /><span class="italic">followed by</span> ...what to apply to...
<br /><span class="italic">followed by</span> while <span class="italic">or</span> when ...condition...
<br /><span class="italic">followed by</span> during ...a scene...
</p></blockquote>
<!-- END CODE -->
<p>The word &quot;first&quot; or &quot;last&quot;, if present, is significant: it tells Inform exactly where the new rule should be placed into its rulebook, and so overrides the normal practice of placing the rule according to how specific it is.</p>
<p>On the other hand, the use of any of the following:</p>
<!-- START CODE "c7386" -->
<a id="c7386"></a><blockquote class="code"><p class="quoted">
for
<br />of
<br />rule about
<br />rule for
<br />rule on
</p></blockquote>
<!-- END CODE -->
<p>is purely to make the text easier to read: Inform does not make any direct use of these words (except perhaps that it may help to avoid ambiguities by separating the rulebook name from what is being applied to). Thus in the rule</p>
<!-- START CODE "c7387" -->
<a id="c7387"></a><blockquote class="code"><p class="quoted">
Instead of kissing Clark: ...
</p></blockquote>
<!-- END CODE -->
<p>the word &quot;instead&quot; is the rulebook's name, while &quot;of&quot; is technically optional. &quot;Instead rule about kissing Clark: ...&quot; would work just as well.</p>
<p>In this whole list of possible ingredients, only the rulebook name is compulsory. We could define a rule called simply &quot;Instead: ...&quot; if we wanted - though its universal applicability would make it pretty disruptive, with every action stopped in its tracks.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s6" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s6" class="standardlink">Back to §19.6. Sorting and indexing of rules</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s8" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s8" class="standardlink">Onward to §19.8. New rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e42" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e42" class="standardlink">Example 399: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Backus-Naur form for rules</b>&#160;&#160;&#160; The full grammar Inform uses to parse rule definitions, in a standard computer-science notation.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s8"></a>§19.8. New rulebooks</p>
<p>Creating a new rulebook is also straightforward, as we see in the following modest example story:</p>
<!-- START CODE "c7388" -->
<a id="c7388"></a><blockquote class="code"><p class="quoted">
&quot;Appraisal&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7389" -->
<a id="c7389"></a><blockquote class="code"><p class="quoted">
The Passage is east of the Tomb. The green-eyed idol is in the Tomb. A Speak-Your-Progress machine is in the Passage.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7390" -->
<a id="c7390"></a><blockquote class="code"><p class="quoted">
Appraisal rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7391" -->
<a id="c7391"></a><blockquote class="code"><p class="quoted">
An appraisal rule: say &quot;Click... whirr... the score is [the score in words] points.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7392" -->
<a id="c7392"></a><blockquote class="code"><p class="quoted">
An appraisal rule:
<br />&#160;&#160;&#160;&#160;if we have taken the idol, say &quot;Most importantly of all, the idol has been found.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7393" -->
<a id="c7393"></a><blockquote class="code"><p class="quoted">
Instead of switching on the machine, follow the appraisal rules.
</p></blockquote>
<!-- END CODE -->
<p>The creation of the rulebook is all very well, but without the final sentence it would never be used. The crucial new phrase here is:</p>
<!-- START PHRASE "defn273" -->
<div class="definition"><a id="defn273"></a><p class="defnprototype"><b>follow </b>(rule)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_follow -->

<p>This phrase causes the rule to be obeyed immediately (rather than simply at predetermined times such as when a particular action is being tried, or at the end of every turn, and such). Example:</p>
<!-- START CODE "c7394" -->
<a id="c7394"></a><blockquote class="code"><p class="quoted">
follow the advance time rule;
<br />follow the appraisal rulebook;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>Like &quot;number&quot; or &quot;text&quot;, &quot;rule&quot; and &quot;rulebook&quot; are kinds of value built into Inform: &quot;the blossom rule&quot; is a value whose kind is &quot;rule&quot;, whereas &quot;the every turn rules&quot; is a value whose kind is &quot;rulebook&quot;. In fact, Inform considers a rulebook to be a special case of a rule, so that whenever a rule is required it is legal to name a rulebook instead, but not vice versa. The &quot;follow&quot; phrase here...</p>
<!-- START CODE "c7395" -->
<a id="c7395"></a><blockquote class="code"><p class="quoted">
Instead of switching on the machine, follow the appraisal rules.
</p></blockquote>
<!-- END CODE -->
<p>...expects to be applied to a value of kind &quot;rule&quot;; &quot;the appraisal rules&quot; is in fact a rulebook, but since that counts as a rule the phrase makes sense to Inform. To follow a rulebook means to run through all its rules in turn, stopping when one rule reaches an outcome; to follow a single rule means just that one, of course.</p>
<p>When created, a rulebook starts out with no rules in it - in this example, of course, we quickly defined a couple of rules to go into it. But it's often the case in Inform that a rulebook exists without ever being stocked up, especially if the rulebook is for some obscure purpose never needed. The built-in adjectives &quot;empty&quot; and &quot;non-empty&quot;, applied to a rulebook, test whether any rule is present or not.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s7" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s7" class="standardlink">Back to §19.7. The preamble of a rule</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s9" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s9" class="standardlink">Onward to §19.9. Basis of a rulebook</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e353" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e353" class="standardlink">Example 400: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Solitude</b>&#160;&#160;&#160; Novice mode that prefaces every prompt with a list of possible commands the player could try, and highlights every important word used, to alert players to interactive items in the scenery.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e47" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e47" class="standardlink">Example 401: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>In Fire or in Flood</b>&#160;&#160;&#160; A BURN command; flammable objects which light other items in their vicinity and can burn for different periods of time; the possibility of having parts or contents of a flaming item which survive being burnt.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e167" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e167" class="standardlink">Example 402: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Patient Zero</b>&#160;&#160;&#160; People who wander around the map performing various errands, and in the process spread a disease which only the player can eradicate.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s9"></a>§19.9. Basis of a rulebook</p>
<p>Every rulebook works on a value supplied to it, though it doesn't always look that way. The kind of the value is called its &quot;basis&quot;; for example, if a rulebook works on a number, it's called a &quot;number based rulebook&quot;. Most of the rulebooks seen up to now have been action based rulebooks:</p>
<!-- START CODE "c7396" -->
<a id="c7396"></a><blockquote class="code"><p class="quoted">
Instead of eating the cake: ...
</p></blockquote>
<!-- END CODE -->
<p>&quot;Instead&quot; is an action based rulebook, and the action it works on is the one currently being processed. Besides before, after and instead, other action based rulebooks include the check, carry out, and report rules; general rulebooks such as every turn rules, the visibility rules, the turn sequence rules; and rules specially for dealing with the actions of other characters, such as the persuasion and unsuccessful attempt rules. But we have also seen object based rulebooks:</p>
<!-- START CODE "c7397" -->
<a id="c7397"></a><blockquote class="code"><p class="quoted">
Rule for reaching inside the flask: ...
</p></blockquote>
<!-- END CODE -->
<p>&quot;Reaching inside&quot; is an object based rulebook, and here we're giving it a rule which applies if the object is the flask. Inform would reject something like:</p>
<!-- START CODE "c7398" -->
<a id="c7398"></a><blockquote class="code"><p class="quoted">
Rule for reaching inside 100: ...
</p></blockquote>
<!-- END CODE -->
<p>because 100 has the wrong kind to fit - it's a number, not an object. There are many object based rulebooks, because most activities built-in to Inform act on objects. For example, the &quot;printing the name of&quot; activity has three rulebooks attached to it: before printing the name of, for printing the name of, after printing the name of. All of these are object based rulebooks.</p>
<p>Finally, we've also seen scene based rulebooks (which is how rules like &quot;when a recurring scene ends&quot; worked, in the Scenes chapter).</p>
<p>If a rulebook is declared like so:</p>
<!-- START CODE "c7399" -->
<a id="c7399"></a><blockquote class="code"><p class="quoted">
Marvellous reasoning is a rulebook.
</p></blockquote>
<!-- END CODE -->
<p>then it is an action based rulebook. If we want something different, we must write something like this:</p>
<!-- START CODE "c7400" -->
<a id="c7400"></a><blockquote class="code"><p class="quoted">
Grading is a number based rulebook.
<br />Grading 5: say &quot;It's five. What can I say?&quot; instead.
<br />Grading an odd number (called N): say &quot;There's something odd about [N].&quot; instead.
<br />Grading a number (called N): say &quot;Just [N].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7401" -->
<a id="c7401"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />repeat with N running from 1 to 10:
<br />&#160;&#160;&#160;&#160;say &quot;Grading [N]: &quot;;
<br />&#160;&#160;&#160;&#160;follow the grading rulebook for N.
</p></blockquote>
<!-- END CODE -->
<p>which produces:</p>
<!-- START CODE "c7402" -->
<a id="c7402"></a><blockquote class="code"><p class="quoted">
Grading 1: There's something odd about 1.
<br />Grading 2: Just 2.
<br />Grading 3: There's something odd about 3.
<br />Grading 4: Just 4.
<br />Grading 5: It's five. What can I say?
<br />Grading 6: Just 6.
<br />Grading 7: There's something odd about 7.
<br />Grading 8: Just 8.
<br />Grading 9: There's something odd about 9.
<br />Grading 10: Just 10.
</p></blockquote>
<!-- END CODE -->
<p>Here we needed a variation on &quot;follow&quot; which supplies the value to apply to:</p>
<!-- START PHRASE "defn274" -->
<div class="definition"><a id="defn274"></a><p class="defnprototype"><b>follow </b>(values based rule producing values)<b> for </b>(value)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_followfor -->

<p>This phrase causes the rule to be obeyed immediately (rather than simply at predetermined times such as when a particular action is being tried, or at the end of every turn, and such), and applies it to the value given, which must be of a matching kind. Example:</p>
<!-- START CODE "c7403" -->
<a id="c7403"></a><blockquote class="code"><p class="quoted">
follow the reaching inside rulebook for the electrified cage;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>And here is an example based on objects:</p>
<!-- START CODE "c7404" -->
<a id="c7404"></a><blockquote class="code"><p class="quoted">
The flotation rules are an object based rulebook.
<br />A flotation rule for the cork: rule succeeds.
<br />A flotation rule for an inflated thing: rule succeeds.
<br />A flotation rule: rule fails.
</p></blockquote>
<!-- END CODE -->
<p>And we might use the flotation rules in a circumstance like this:</p>
<!-- START CODE "c7405" -->
<a id="c7405"></a><blockquote class="code"><p class="quoted">
After inserting something into the well:
<br />&#160;&#160;&#160;&#160;follow the flotation rules for the noun;
<br />&#160;&#160;&#160;&#160;if the rule succeeded:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] bobs on the surface.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is nowhere;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] sinks out of sight.&quot;
</p></blockquote>
<!-- END CODE -->
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s8" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s8" class="standardlink">Back to §19.8. New rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s10" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s10" class="standardlink">Onward to §19.10. Rulebook variables</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e148" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e148" class="standardlink">Example 403: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Flotation</b>&#160;&#160;&#160; Objects that can sink or float in a well, depending on their own properties and the state of the surrounding environment.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s10"></a>§19.10. Rulebook variables</p>
<p>When a rulebook is intended to perform some complicated task or calculation, it is sometimes useful for earlier rules to be able to leave information which will help later ones.</p>
<p>For instance, suppose we want a rulebook which is intended to print out the player's current aptitude. We will suppose that this is a number from 0 upwards: the higher, the apter. The player gets bonus aptitude marks for achievements, but marks deducted for accidents, and so on. Moreover, we want to design this system so that it's easy to add further rules. The natural solution is to have a number which varies (or 'variable') acting as the running aptitude total: it should start at 0 and be altered up or down by subsequent rules. First, we should make the rulebook, and then add a variable:</p>
<!-- START CODE "c7406" -->
<a id="c7406"></a><blockquote class="code"><p class="quoted">
Aptitude is a rulebook. The aptitude rulebook has a number called the aptitude mark.
</p></blockquote>
<!-- END CODE -->
<p>The new value 'aptitude mark' is shared by the rules of the rulebook: nobody else can see it. It is created at the start of the rulebook being followed, and destroyed at the end. (If the rulebook should be followed a second time inside of itself, a new copy is created which does not disturb the old one.) So, in this case, 'aptitude mark' is started as 0 (since it is a number) each time the aptitude rules run. We can then write whatever rules we please to modify it:</p>
<!-- START CODE "c7407" -->
<a id="c7407"></a><blockquote class="code"><p class="quoted">
An aptitude rule:
<br />&#160;&#160;&#160;&#160;if in darkness:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrease the aptitude mark by 3.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7408" -->
<a id="c7408"></a><blockquote class="code"><p class="quoted">
An aptitude rule:
<br />&#160;&#160;&#160;&#160;if we have taken the idol:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase the aptitude mark by 10.
</p></blockquote>
<!-- END CODE -->
<p>And we had better do something with the result:</p>
<!-- START CODE "c7409" -->
<a id="c7409"></a><blockquote class="code"><p class="quoted">
The last aptitude rule: say &quot;Your aptitude rating is [aptitude mark].&quot;
</p></blockquote>
<!-- END CODE -->
<p>A rulebook can have any number of variables like this. They behave much like &quot;let&quot; values except that they last for a whole rulebook, not an individual rule or To phrase definition. (Well, strictly speaking they are accessible not just to the rules which belong to the rulebook, but also to any rules which previously belonged to the rulebook but were kicked out by means of an explicit rule-listing sentence. This is good because otherwise they will suddenly cause problem messages when unlisted.)</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s9" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s9" class="standardlink">Back to §19.9. Basis of a rulebook</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s11" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s11" class="standardlink">Onward to §19.11. Success and failure</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s11"></a>§19.11. Success and failure</p>
<p>Though we have blurred over this point so far, each rule must ordinarily end with one of three outcomes: success, failure and neither (&quot;no outcome&quot;).</p>
<p>When a rulebook is followed, what happens is that each of its rules is followed in turn <span class="boldface">until one of them ends in success or failure</span> - if ever: it is possible that each rule is tried and each ends with no outcome, so that the rulebook simply runs out of rules to try.</p>
<p>For some rulebooks, these are not useful ideas: &quot;every turn&quot; rules, for instance, by default never produce an outcome, which is why the &quot;every turn&quot; rulebook normally runs through all its rules at the end of each turn. (Use of the phrases below can change that, so it's best not to use them in &quot;every turn&quot; rules.) But for other rulebooks, such as &quot;check taking&quot;, it's important that a rule which fails will stop the whole rulebook. For instance, we might find that the &quot;can't take yourself rule&quot; produces no outcome (because we aren't trying to do that), and then likewise the &quot;can't take other people rule&quot; (ditto) but that the &quot;can't take component parts rule&quot; prints up a complaint, and fails the action: the rulebook stops, and never goes on to (for instance) the &quot;can't take scenery rule&quot;. This is good, because an impossible action often fails for several reasons at once, and we only want to print up one objection, not a whole list.</p>
<p>To follow the working of this mechanism, we need to be able to predict the outcome of any given rule. Sometimes this is easy to spot. For instance, in a rule which works on actions:</p>
<!-- START CODE "c7410" -->
<a id="c7410"></a><blockquote class="code"><p class="quoted">
continue the action; <span class="italic">means</span> &quot;end this rule with no outcome&quot;
<br />stop the action; <span class="italic">means</span> &quot;end this rule in failure&quot;
<br />... instead; <span class="italic">means</span> &quot;end this rule in failure&quot;
</p></blockquote>
<!-- END CODE -->
<p>(&quot;Success&quot; and &quot;failure&quot; are technical terms here: they do not mean that the player has or hasn't got what he wanted.) This is why the rule:</p>
<!-- START CODE "c7411" -->
<a id="c7411"></a><blockquote class="code"><p class="quoted">
Before taking something: say &quot;The sentry won't let you!&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>ends in failure, and therefore stops the &quot;before&quot; rulebook. Another easy-to-spot case is when a rule makes use of the explicit phrases:</p>
<!-- START PHRASE "defn275" -->
<div class="definition"><a id="defn275"></a><p class="defnprototype"><b>rule succeeds</b></p>
<!-- END PHRASE -->
<!-- definition of ph_succeeds -->

<p>This causes the current rule to end immediately, with its outcome considered to be a success. The rulebook being worked through also ends, and is also a success.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn276" -->
<div class="definition"><a id="defn276"></a><p class="defnprototype"><b>rule fails</b></p>
<!-- END PHRASE -->
<!-- definition of ph_fails -->

<p>This causes the current rule to end immediately, with its outcome considered to be a failure. The rulebook being worked through also ends, and is also a failure.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn277" -->
<div class="definition"><a id="defn277"></a><p class="defnprototype"><b>make no decision</b></p>
<!-- END PHRASE -->
<!-- definition of ph_nodecision -->

<p>This causes the current rule to end immediately, but with no outcome. That means the rulebook being worked through will continue to run on, beginning with the next rule.</p>

<!-- end definition -->
</div>

<p>But what happens if a rule simply doesn't say whether it succeeds, fails or has no outcome? In that case <span class="boldface">it depends on the rulebook</span>. For almost all rulebooks, a rule which doesn't make a choice has no outcome, as in the following example:</p>
<!-- START CODE "c7412" -->
<a id="c7412"></a><blockquote class="code"><p class="quoted">
Before taking something: say &quot;The sentry looks at you anxiously!&quot;
</p></blockquote>
<!-- END CODE -->
<p>This rule, if it takes effect, ends with no outcome - so the action continues. But other rulebooks have a different convention: the most important is &quot;instead&quot;, where a rule making no explicit choice is deemed to end in failure. For instance:</p>
<!-- START CODE "c7413" -->
<a id="c7413"></a><blockquote class="code"><p class="quoted">
Instead of taking something: say &quot;The sentry prods you with his rifle!&quot;
</p></blockquote>
<!-- END CODE -->
<p>This rule, if it takes effect, ends in failure and therefore stops the action.</p>
<p>We call this the <span class="boldface">default outcome</span> of a rulebook. The default outcome of &quot;before&quot; (and of almost all rulebooks, in fact) is no outcome; the default outcome of &quot;instead&quot; is failure; the default outcome of &quot;after&quot; is success. The few exceptional cases with default outcome success or failure are marked as such in the Rules index.</p>
<p>When we create a rulebook, it will default to &quot;no outcome&quot;. But we can specify otherwise with sentences like so:</p>
<!-- START CODE "c7414" -->
<a id="c7414"></a><blockquote class="code"><p class="quoted">
The cosmic analysis rules are a rulebook. The cosmic analysis rules have default failure.
</p></blockquote>
<!-- END CODE -->
<p>Finally, note that the default outcome for a rulebook is really the default outcome for any rule in that rulebook: if no rules in the rulebook ever apply, for instance if there aren't any and the rulebook is empty, then the rulebook ends with no outcome at all.</p>
<p>We can test the latest outcome like so:</p>
<!-- START PHRASE "defn278" -->
<div class="definition"><a id="defn278"></a><p class="defnprototype"><b>if rule succeeded:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_succeeded -->

<p>This condition is true if the most recently followed rule or rulebook ended in success. Example:</p>
<!-- START CODE "c7415" -->
<a id="c7415"></a><blockquote class="code"><p class="quoted">
follow the hypothetical clever rule;
<br />if rule succeeded:
<br />&#160;&#160;&#160;&#160;...
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<!-- START PHRASE "defn279" -->
<div class="definition"><a id="defn279"></a><p class="defnprototype"><b>if rule failed:</b></p>
<!-- END PHRASE -->
<!-- definition of ph_failed -->

<p>This condition is true if the most recently followed rule or rulebook ended in failure. Example:</p>
<!-- START CODE "c7416" -->
<a id="c7416"></a><blockquote class="code"><p class="quoted">
follow the hypothetical clever rule;
<br />if rule failed:
<br />&#160;&#160;&#160;&#160;...
</p></blockquote>
<!-- END CODE -->
<p>Note that this is not the opposite of &quot;rule succeeded&quot;, because there's a third possibility: that it ended with no outcome.</p>

<!-- end definition -->
</div>

<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s10" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s10" class="standardlink">Back to §19.10. Rulebook variables</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s12" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s12" class="standardlink">Onward to §19.12. Named outcomes</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e381" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e381" class="standardlink">Example 404: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Kyoto</b>&#160;&#160;&#160; Expanding the effects of the THROW something AT something command so that objects do make contact with one another.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s12"></a>§19.12. Named outcomes</p>
<p>We have seen that the terms &quot;success&quot; and &quot;failure&quot; can be misleading - after all, it might be a good thing for a particular rulebook to &quot;fail&quot;. At any rate, these are vague terms, and we don't want to have to remember the conventions used by every rulebook. This is why certain rulebooks have explicitly named outcomes instead. For instance, the &quot;visibility&quot; rules are allowed to have the outcomes:</p>
<!-- START CODE "c7417" -->
<a id="c7417"></a><blockquote class="code"><p class="quoted">
there is sufficient light;
<br />there is insufficient light;
</p></blockquote>
<!-- END CODE -->
<p>These look like phrases, but are in fact named outcomes which can only be used in visibility rules. (They would make no sense elsewhere, and Inform will not allow their use if they are clearly out of context.) Such named outcomes are listed in the Rules index.</p>
<p>There can be any number of named outcomes. For instance, the Standard Rules define:</p>
<!-- START CODE "c7418" -->
<a id="c7418"></a><blockquote class="code"><p class="quoted">
The does the player mean rules are a rulebook. The does the player mean rules have outcomes it is very likely, it is likely, it is possible, it is unlikely and it is very unlikely.
</p></blockquote>
<!-- END CODE -->
<p>which makes five possible outcomes. Five outcomes seems to contradict the principle that there are only three possible outcomes for a rule: in fact, though, the five are counted as five different forms of &quot;success&quot;, and any of them will cause a &quot;does the player mean&quot; rule to succeed. If we do not want this, we can instead specify explicitly how the named outcomes correspond to success, failure or &quot;no outcome&quot;:</p>
<!-- START CODE "c7419" -->
<a id="c7419"></a><blockquote class="code"><p class="quoted">
Visibility rules have outcomes there is sufficient light (failure) and there is insufficient light (success).
</p></blockquote>
<!-- END CODE -->
<p>Again, see the Rules index for examples.</p>
<p>The same named outcome can be used for more than one rulebook, and can have different meanings in the context of different rulebooks - &quot;good news&quot; could be defined as success in one rulebook and failure in another, for instance. (This means that rulebook creators need not worry about name clashes and is an important difference in behaviour between rulebook outcomes and kinds of value.) We can even name a specific named outcome as the default outcome for rules in this rulebook:</p>
<!-- START CODE "c7420" -->
<a id="c7420"></a><blockquote class="code"><p class="quoted">
Audibility rules have outcomes high background noise (failure), low background noise (success - the default) and absolute silence (success).
</p></blockquote>
<!-- END CODE -->
<p>After a rulebook using named outcomes has run, we can test which outcome occurred by using the phrase:</p>
<!-- START PHRASE "defn280" -->
<div class="definition"><a id="defn280"></a><p class="defnprototype"><b>outcome of the rulebook ... rulebook outcome</b></p>
<!-- END PHRASE -->
<!-- definition of ph_rulebookoutcome -->

<p>This phrase produces the (named) outcome of the phrase most recently followed. Example:</p>
<!-- START CODE "c7421" -->
<a id="c7421"></a><blockquote class="code"><p class="quoted">
follow the audibility rules;
<br />if the outcome of the rulebook is the absolute silence outcome:
<br />&#160;&#160;&#160;&#160;say &quot;You could hear a pin drop in here.&quot;
</p></blockquote>
<!-- END CODE -->

<!-- end definition -->
</div>

<p>Each named outcome is a value if followed by the word &quot;outcome&quot;, which is how &quot;absolute silence&quot; has become &quot;the absolute silence outcome&quot;. Named outcomes can be said, so we could use the text substitution &quot;[outcome of the rulebook]&quot;, for instance. A final caveat: it is perfectly legal to create a named outcome which means &quot;no outcome&quot;, but if so then this will never be &quot;the outcome of the rulebook&quot; because &quot;no outcome&quot; is not an outcome.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s11" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s11" class="standardlink">Back to §19.11. Success and failure</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s13" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s13" class="standardlink">Onward to §19.13. Rulebooks producing values</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e287" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e287" class="standardlink">Example 405: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Being Peter</b>&#160;&#160;&#160; A set of rules determining the attitude a character will take when asked about certain topics.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s13"></a>§19.13. Rulebooks producing values</p>
<p>We have now seen two ways to write the outcome of a rule: as simple success or failure, with more or less explicit phrases like:</p>
<!-- START CODE "c7422" -->
<a id="c7422"></a><blockquote class="code"><p class="quoted">
rule succeeds;
<br />rule fails;
<br />continue the action;
<br />stop the action;
</p></blockquote>
<!-- END CODE -->
<p>and by using a named outcome for the current rulebook as if it were a phrase, as in:</p>
<!-- START CODE "c7423" -->
<a id="c7423"></a><blockquote class="code"><p class="quoted">
low background noise;
</p></blockquote>
<!-- END CODE -->
<p>There is still a third way: we can stop a rule and at the same time produce a value. This isn't needed very often - none of the built-in rulebooks in the Standard Rules produces a value.</p>
<p>As we've seen, every rulebook has one kind of value as its basis, and it also has another kind of value for it to produce. If we call these K and L, then we have altogether four ways to write down the kind of a rulebook:</p>
<!-- START CODE "c7424" -->
<a id="c7424"></a><blockquote class="code"><p class="quoted">
rulebook
<br />K based rulebook
<br />rulebook producing L
<br />K based rulebook producing L
</p></blockquote>
<!-- END CODE -->
<p>If we don't mention K, Inform assumes the rulebook is action based. If we don't mention L, Inform assumes L is &quot;nothing&quot;, that is, Inform assumes no value is ever produced. Thus</p>
<!-- START CODE "c7425" -->
<a id="c7425"></a><blockquote class="code"><p class="quoted">
Drum summons rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<p>is equivalent to</p>
<!-- START CODE "c7426" -->
<a id="c7426"></a><blockquote class="code"><p class="quoted">
Drum summons rules is an action based rulebook producing nothing.
</p></blockquote>
<!-- END CODE -->
<p>But let's now look at a rulebook which does produce something.</p>
<!-- START CODE "c7427" -->
<a id="c7427"></a><blockquote class="code"><p class="quoted">
The cat behavior rules is a rulebook producing an object.
</p></blockquote>
<!-- END CODE -->
<p>This rulebook works out which thing the cat will destroy next. We might have rules like this one:</p>
<!-- START CODE "c7428" -->
<a id="c7428"></a><blockquote class="code"><p class="quoted">
Cat behavior when Austin can see the ball of wool:
<br />&#160;&#160;&#160;&#160;rule succeeds with result the ball of wool.
</p></blockquote>
<!-- END CODE -->
<p>The value is produced only when a rule succeeds, using this phrase:</p>
<!-- START PHRASE "defn281" -->
<div class="definition"><a id="defn281"></a><p class="defnprototype"><b>rule succeeds with result </b>(value)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_succeedswith -->

<p>This phrase can only be used in a rule which produces a value, and the value given must be of the right kind. It causes the current rule to finish immediately, to succeed, and to produce the value given.</p>

<!-- end definition -->
</div>

<p>How are we to use the cat behavior rulebook? If we write:</p>
<!-- START CODE "c7429" -->
<a id="c7429"></a><blockquote class="code"><p class="quoted">
follow cat behavior
</p></blockquote>
<!-- END CODE -->
<p>then the rulebook runs just as any other rulebook would, but the value produced is lost at the end, which defeats the point. Instead, we might write:</p>
<!-- START CODE "c7430" -->
<a id="c7430"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let the destroyed object be the object produced by the cat behavior rules;
<br />&#160;&#160;&#160;&#160;if the destroyed object is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Austin pounces on [the destroyed object] in a flurry.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destroyed object is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>The key phrase here is</p>
<!-- START CODE "c7431" -->
<a id="c7431"></a><blockquote class="code"><p class="quoted">
object produced by the cat behavior rules
</p></blockquote>
<!-- END CODE -->
<p>which accesses the value this rulebook produces. In general, we write:</p>
<!-- START PHRASE "defn282" -->
<div class="definition"><a id="defn282"></a><p class="defnprototype"><b></b>(name of kind)<b> produced by </b>(rule producing values)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_producedby -->

<p>This phrase is used to follow the named rule, and to collect the resulting value.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn283" -->
<div class="definition"><a id="defn283"></a><p class="defnprototype"><b></b>(name of kind)<b> produced by </b>(values based rule producing values)<b> for </b>(value)<b> ... value</b></p>
<!-- END PHRASE -->
<!-- definition of ph_producedbyfor -->

<p>This phrase is used to follow the named rule based on the value given, and to collect the resulting value.</p>

<!-- end definition -->
</div>

<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s12" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s12" class="standardlink">Back to §19.12. Named outcomes</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s14" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s14" class="standardlink">Onward to §19.14. Abide by</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e138" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e138" class="standardlink">Example 406: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Feline Behavior</b>&#160;&#160;&#160; A cat which reacts to whatever items it has handy, returning the result of a rulebook for further processing.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e384" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e384" class="standardlink">Example 407: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Tilt 2</b>&#160;&#160;&#160; A deck of cards with fully implemented individual cards; when the player has a full poker hand, the inventory listing describes the resulting hand accordingly.</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s14"></a>§19.14. Abide by</p>
<p>It often happens that one rule needs to invoke another one. Most of the time, the best way to do this is with &quot;follow&quot;:</p>
<!-- START CODE "c7432" -->
<a id="c7432"></a><blockquote class="code"><p class="quoted">
follow the magical mystery tour rule;
</p></blockquote>
<!-- END CODE -->
<p>More often, though, we want not only to invoke another rule, but also to be guided by its advice. For this, we use the otherwise identical phrase:</p>
<!-- START PHRASE "defn284" -->
<div class="definition"><a id="defn284"></a><p class="defnprototype"><b>abide by </b>(rule)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_abide -->

<p>This phrase applies the given rule, and makes its result the result of the present rule. If the rule being abided by succeeds or fails then the original rule also stops, at once and without going on to any further instructions. Example:</p>
<!-- START CODE "c7433" -->
<a id="c7433"></a><blockquote class="code"><p class="quoted">
The omnibus rule:
<br />&#160;&#160;&#160;&#160;abide by the first rule;
<br />&#160;&#160;&#160;&#160;abide by the second rule;
<br />&#160;&#160;&#160;&#160;abide by the third rule;
<br />&#160;&#160;&#160;&#160;abide by the fourth rule.
</p></blockquote>
<!-- END CODE -->
<p>This duplicates the effect of a rulebook of four rules: the &quot;omnibus rule&quot; tries each in turn, and stops as soon as any of them stop.</p>

<!-- end definition -->
</div>

<!-- START PHRASE "defn285" -->
<div class="definition"><a id="defn285"></a><p class="defnprototype"><b>abide by </b>(values based rule producing values)<b> for </b>(value)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_abidefor -->

<p>This phrase applies the given rule to the given value, and makes its result the result of the present rule. If the rule being abided by succeeds or fails then the original rule also stops, at once and without going on to any further instructions.</p>

<!-- end definition -->
</div>

<p>Abide might be used in examples like this one:</p>
<!-- START CODE "c7434" -->
<a id="c7434"></a><blockquote class="code"><p class="quoted">
A thing can be fragile or robust.
<br />This is the can't handle fragile things roughly rule: if the noun is fragile, say &quot;[The noun] is too fragile for such rough handling.&quot; instead.
<br />A check dropping rule: abide by the can't handle fragile things roughly rule. A check throwing it at rule: abide by the can't handle fragile things roughly rule.
</p></blockquote>
<!-- END CODE -->
<p>Had we used &quot;follow&quot; instead of &quot;abide by&quot;, then in the event of the player typing &quot;drop angel&quot; the text &quot;The glass angel is too fragile for such rough handling&quot; would be printed, which is correct - but then the action would continue as though no difficulty had occurred, which is definitely not correct.</p>
<p>Finally, we can &quot;anonymously abide&quot;:</p>
<!-- START PHRASE "defn286" -->
<div class="definition"><a id="defn286"></a><p class="defnprototype"><b>anonymously abide by </b>(rule)<b></b></p><br /><i>or:</i>&#160;&#160;&#160;<p class="defnprototype"><b>anonymously abide by </b>(values based rule producing values)<b> for </b>(value)<b></b></p>
<!-- END PHRASE -->
<!-- definition of ph_abideanon -->

<p>This phrase applies the given rule, and makes its result the result of the present rule. If the rule being abided by succeeds or fails then the original rule also stops, at once and without going on to any further instructions. However, the rule deemed to have decided the outcome is the one abided by, not the one doing the abiding.</p>

<!-- end definition -->
</div>

<p>This is only useful in complicated situations where one rulebook uses another which... and so on. Its effect is exactly the same as &quot;abide&quot;, except that the rule deemed to have decided the outcome is the one abided by, not the one doing the abiding. It thus allows a rule or rulebook to act purely as a middle-man, never getting the blame or the credit for what happens. The rule which made the decision is often not very relevant anyway, but it's used as the source of the value &quot;reason the action failed&quot; (see the Advanced Actions chapter).</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s13" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s13" class="standardlink">Back to §19.13. Rulebooks producing values</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s15" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s15" class="standardlink">Onward to §19.15. Two rulebooks used internally</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s15"></a>§19.15. Two rulebooks used internally</p>
<p>Rulebooks handle almost all of the important tasks which an Inform work of IF must carry out in order to keep play going. We have seen them used in clarifying the player's command, supplying missing ingredients, processing the action to see what should happen, responding, and so on: by this point in the documentation, it must look as if Inform uses rulebooks for everything.</p>
<p>This is nearly true. There is not actually a super-rulebook controlling everything. (Such a super-rulebook would need to repeat itself and never finish, something a rulebook is not allowed to do.) Instead, what happens during play looks like so:</p>
<!-- START CODE "c7435" -->
<a id="c7435"></a><blockquote class="code"><p class="quoted">
1. Following the &quot;when play begins&quot; rulebook.
<br />2. Repeating:
<br />&#160;&#160;&#160;&#160;2(a). Reading and parsing a command into an action;
<br />&#160;&#160;&#160;&#160;2(b). Following the &quot;action processing&quot; rulebook;
<br />&#160;&#160;&#160;&#160;2(c). Following the &quot;turn sequence&quot; rulebook.
<br />until the story has finished.
<br />3. Following the &quot;when play ends&quot; rulebook.
</p></blockquote>
<!-- END CODE -->
<p>The command parser occasionally calls on the services of activity rulebooks to help it, but otherwise gets on with its job in ways that we do not &quot;see&quot; as Inform 7 users. The rest of what happens involves rulebooks, and in particular two important beneath-the-surface rulebooks: action processing and turn sequence.</p>
<p>The <span class="boldface">action processing rules</span> are used whenever an action must be tried, by whoever tries it. This usually happens in response to player commands, but not always: it might happen because of a &quot;try...&quot;, and it can certainly interrupt an existing action.</p>
<p>The <span class="boldface">turn sequence rules</span> are used at the end of each turn, and include housekeeping as well as timekeeping. They consult the &quot;every turn&quot; rulebook, and advance the time of day, among other useful tasks.</p>
<p>In general, we should only modify the operation of these two crucial rulebooks as a last resort. Play can evidently fall to pieces if they cease to work normally.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s14" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s14" class="standardlink">Back to §19.14. Abide by</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s16" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_19.html#s16" class="standardlink">Onward to §19.16. The Laws for Sorting Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e116" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e116" class="standardlink">Example 408: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Electrified</b>&#160;&#160;&#160; Adding a rule before the basic accessibility rule that will prevent the player from touching electrified objects under the wrong circumstances.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e387" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e387" class="standardlink">Example 409: <img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Timeless</b>&#160;&#160;&#160; A set of actions which do not take any game time at all.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e122" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e122" class="standardlink">Example 410: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Endurance</b>&#160;&#160;&#160; Giving different actions a range of durations using a time allotment rulebook.</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#e127" class="standardlink"><img alt="arrow-down.png" src="images/arrow-down.png" /></a></td><td><a href="WI_19.html#e127" class="standardlink">Example 411: <img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /> <b>Escape from the Seraglio</b>&#160;&#160;&#160; Replacing the usual response to TAKE ALL so that instead of output such as "grapes: Taken. orange: Taken.", Inform produces variable responses in place of "grapes:".</a></td></tr>
</table><hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
<p class="sectionheading"><a id="s16"></a>§19.16. The Laws for Sorting Rulebooks</p>
<p>Large works created by Inform are heaped high with rules, most of them instead rules, but with a leavening of befores and afters as well. What will happen if these conflict with each other? For instance:</p>
<!-- START CODE "c7436" -->
<a id="c7436"></a><blockquote class="code"><p class="quoted">
Instead of opening a container, say &quot;Your mother-in-law looks on with such evident disappointment that you withdraw your hand again.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7437" -->
<a id="c7437"></a><blockquote class="code"><p class="quoted">
Instead of opening an open container, say &quot;Your daughter tuts in theatrical exasperation at your, like, lameness.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Such clashes are resolved by sorting the rulebooks in order of specificity: thus your daughter gets in before your mother-in-law, because although both have rules hanging on the &quot;opening&quot; action, &quot;an open container&quot; is more specific than &quot;a container&quot;. The full set of Laws used by Inform to sort rulebooks is quite elaborate. As we've seen, practical consequences can be investigated using the Rules index; and in most cases, the results are either natural (as above) or irrelevant (because the two rules being compared could not both activate at the same time anyway); but the full set of Laws is laid out below, for reference. It is probably a bad idea to write source text which absolutely relies on non-obvious rule sorting conventions, just the same, because this will make the source text harder to read and understand.</p>
<p>Sorting is done by comparing rules in pairs to decide which is more specific. We shall call these rules X and Y. The Laws are tried in sequence; the first Law to distinguish X and Y gets to decide which is more specific. If no Law is able to decide, X and Y go into the rulebook in order of their appearance in the source text - that is, whichever is defined first appears earlier in the rulebook and therefore takes priority.</p>
<p><span class="boldface">Law I - Number of aspects constrained</span>. For action-based rulebooks, rules are scored from 0 to 6 according to whether they constrain any of: (i) the exotic &quot;going&quot; clauses (pushing, by and through), (ii) the location of the action (in, from and to), (iii) the things directly involved (actor, noun, second noun, &quot;nowhere&quot; in the case of &quot;going&quot;), (iv) the presence of others (in the presence of...), (v) the time at which the action occurs (when, or &quot;for the nth time&quot; or &quot;for the nth turn&quot;), and/or (vi) the scene the action occurs in (during). For value based rulebooks, rules are scored from 0 to 3 according to whether they constrain: (i) the value parameter, (ii) the scene in which the rulebook is followed (when, during), and/or (iii) any condition which must hold or activities going on at the same time (when/while). A higher score is more specific than a lower one.</p>
<p><span class="boldface">Law II - When/while requirement</span>. A rule with a when/while restriction beats one without.</p>
<p><span class="boldface">Law III - Action requirement</span>. A rule with a more specific action requirement beats one with a more general action requirement. (Or similarly, for value based rulebooks, a rule with a more specific parameter requirement beats a more general one.) Details are given below.</p>
<p><span class="boldface">Law IV - Scene requirement</span>. A rule with a scene restriction (&quot;during&quot;) beats one without.</p>
<p>Details of Law III now follow:</p>
<p><span class="boldface">Law III.1 - Object To Which Rule Applies</span>. For value based rulebooks only: the more specific value requirement wins.</p>
<p><span class="boldface">Law III.2.1 - Action/Where/Going In Exotic Ways</span>. A more specific combination of &quot;...pushing...&quot;, &quot;... by ...&quot;, and &quot;... through ...&quot; clauses in a &quot;going&quot; action beats a less specific. (Placing conditions on all three of these clauses beats placing conditions on any two, which beats any one, which beats none at all.) In cases where X and Y each place, let's say, two such conditions, they are considered in the order &quot;...pushing...&quot;, &quot;...by...&quot; and then &quot;...through...&quot; until one wins. (The idea here is that pushing something from room to room is rarer than travelling in a vehicle, which in turn is rarer than going through a door. The rarer action goes first, as more specific.)</p>
<p><span class="boldface">Law III.2.2 - Action/Where/Room Where Action Takes Place</span>. A more specific combination of conditions on the room in which the action starts, and in which it ends, beats a less specific. For all actions other than &quot;going&quot;, there is no combination to be considered, and what we do is to look at the specificity of the &quot;... in ...&quot; clause. (So &quot;Before looking in the Taj Mahal&quot; beats &quot;Before looking&quot;.)</p>
<p>For &quot;going&quot; actions, there are strictly speaking three possible room clauses: &quot;... in ...&quot;, &quot;... from ...&quot; and &quot;... to ...&quot;. However, &quot;... in ...&quot; and &quot;... from ...&quot; cannot both be present, so that in practice a &quot;going&quot; rule constraining two rooms beats a &quot;going&quot; rule constraining only one.</p>
<p>If both the room gone from (the &quot;...in...&quot; or &quot;...from...&quot; room, whichever is given) and the room gone to (the &quot;... to...&quot; room) are constrained, then the constraints are looked at in the order from-room followed by to-room, since an action which goes to room Z could start in many different places and thus is likely to be more general.</p>
<p>Giving a place as a specific room beats giving only the name of a region; if region R is entirely within region S, then a rule applying in R beats a rule applying in S. (Note that regions can only overlap if one is contained in the other, so this does not lead to ambiguity.)</p>
<p><span class="boldface">Law III.2.3 - Action/Where/In The Presence Of</span>. A more specific &quot;...in the presence of...&quot; clause beats a less specific one. (This is again a constraint on where the action can take place, but it's now a potentially a constraint which could be passed in many different places at different times, so it's the most likely to be achieved and therefore the last to be considered of the Laws on Where.)</p>
<p><span class="boldface">Law III.3.1 - Action/What/Second Thing Acted On</span>. A more specific constraint on the second noun beats a less specific. Thus &quot;putting something in the wooden box&quot; beats &quot;putting something in a container&quot;.</p>
<p><span class="boldface">Law III.3.2 - Action/What/Thing Acted On</span>. A more specific constraint on the first noun beats a less specific. Thus &quot;taking a container which is on a supporter&quot; beats &quot;taking a container&quot;.</p>
<p>In the case of &quot;going&quot; actions, the first noun is a direction. The special constraint &quot;going nowhere&quot; (which means: a direction in which the actor's location has no map connection) is considered more general than any other constraint placed on the first noun, but more specific than having no constraint at all. Thus &quot;Instead of going north&quot; beats &quot;Instead of going nowhere&quot; which beats &quot;Instead of going&quot;.</p>
<p><span class="boldface">Law III.3.3 - Action/What/Actor Performing Action</span>. A more specific constraint on the actor beats a less specific.</p>
<p><span class="boldface">Law III.4.1 - Action/How/What Happens</span>. A more specific set of actions beats a less specific. For instance, &quot;taking&quot; beats &quot;taking or dropping&quot; beats &quot;doing something other than looking&quot; beats &quot;doing something&quot;. A named kind of action (such as &quot;behaving badly&quot;) is more specific than &quot;doing something&quot;, but considered less specific than any explicitly spelled out list of actions.</p>
<p><span class="boldface">Law III.5.1 - Action/When/Duration</span>. An action with a constraint on its history (&quot;for the fifth time&quot;, say, or &quot;for the fifth turn&quot;) beats one without. If both rules place constraints on history, then the one occurring on the smaller number of possible turns wins (thus &quot;for the third to seventh time&quot; - 5 possible turns of applicability - beats &quot;for less than the tenth turn&quot; - 9 possible turns).</p>
<p><span class="boldface">Law III.5.2 - Action/When/Circumstances</span>. A more specific condition under &quot;...when...&quot; beats a less specific one. These conditions could potentially be complex: Inform judges how specific they are by counting the clauses found in them. The more clauses, the more specific the condition, it is assumed.</p>
<p><span class="boldface">Law III.6.1 - Action/Name/Is This Named</span>. A rule with a name (&quot;the apple blossom rule&quot;, say) beats a rule without.</p>
<hr />
<div class="roadsigns">
<table><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of Chapter 19: Rulebooks</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_19.html#s15" class="standardlink"><img alt="arrow-left.png" src="images/arrow-left.png" /></a></td><td><a href="WI_19.html#s15" class="standardlink">Back to §19.15. Two rulebooks used internally</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20.html#s1" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_20.html#s1" class="standardlink">Onward to Chapter 20: Advanced Text: §20.1. Changing texts</a></td></tr>
</table><hr />
</div>
<div class="bookexamples">
<p class="chapterheading">Examples from Chapter 19: Rulebooks</p><table class="centredtable"><tr><td class="roadsigndirection"><a href="WI_19.html" class="standardlink"><img alt="arrow-up.png" src="images/arrow-up.png" /></a></td><td><a href="WI_19.html" class="standardlink">Start of this chapter</a></td></tr>
<tr><td class="roadsigndirection"><a href="WI_20.html" class="standardlink"><img alt="arrow-right.png" src="images/arrow-right.png" /></a></td><td><a href="WI_20.html" class="standardlink">Chapter 20: Advanced Text</a></td></tr>
<tr><td class="roadsigndirection"><a href="examples_alphabetical.html" class="standardlink"><img alt="arrow-down-right.png" src="images/arrow-down-right.png" /></a></td><td><a href="examples_alphabetical.html" class="standardlink">Indexes of the examples</a></td></tr>
</table><!-- START EXAMPLE "388: Nine AM Appointment" "e420" -->
<a id="e420"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e420" class="eglink"><b>388</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e420" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Nine AM Appointment</span></b></a><br />A WAIT [number] MINUTES command which advances through an arbitrary number of turns.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e420"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example420">
<p>If there's some reason the player needs to be at a specific place and time, we might want to allow him to wait a number of minutes at once.</p>
<!-- START CODE "c7438_420" -->
<a id="c7438_420"></a><blockquote class="code"><p class="quoted">
&quot;Nine AM Appointment&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7439_420" -->
<a id="c7439_420"></a><blockquote class="code"><p class="quoted">
Waiting more is an action applying to one number.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7440_420" -->
<a id="c7440_420"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait [a time period]&quot; or &quot;wait for [a time period]&quot; or &quot;wait for a/an [a time period]&quot; or &quot;wait a/an [a time period]&quot; as waiting more.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7441_420" -->
<a id="c7441_420"></a><blockquote class="code"><p class="quoted">
Carry out waiting more:
<br />&#160;&#160;&#160;&#160;let the target time be the time of day plus the time understood;
<br />&#160;&#160;&#160;&#160;decrease the target time by one minute;
<br />&#160;&#160;&#160;&#160;while the time of day is not the target time:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<p>The one nuance here is that after our wait command occurs, the turn sequence rules will occur one more time. So we need to subtract one minute from the parsed time to make the turn end on the desired number of minutes.</p>
<!-- START CODE "c7442_420" -->
<a id="c7442_420"></a><blockquote class="code"><p class="quoted">
Report waiting more:
<br />&#160;&#160;&#160;&#160;say &quot;It is now [time of day + 1 minute].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And if we want to ensure that the player doesn't (accidentally or intentionally) put the interpreter through a really long loop, we could put an upper limit on his patience:</p>
<!-- START CODE "c7443_420" -->
<a id="c7443_420"></a><blockquote class="code"><p class="quoted">
Check waiting more:
<br />&#160;&#160;&#160;&#160;if the time understood is greater than one hour, say &quot;You really haven't got that kind of patience.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7444_420" -->
<a id="c7444_420"></a><blockquote class="code"><p class="quoted">
The Specialist's Office is a room. The secretary is a woman in the Office. Instead of asking the secretary about &quot;[appointment]&quot;, say &quot;'Hang on just five more minutes,' she says, in a distracted manner.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7445_420" -->
<a id="c7445_420"></a><blockquote class="code"><p class="quoted">
Understand &quot;appointment&quot; or &quot;specialist&quot; or &quot;doctor&quot; as &quot;[appointment]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7446_420" -->
<a id="c7446_420"></a><blockquote class="code"><p class="quoted">
At 9:45 AM: say &quot;At [the time of day in words], secretary glances at you and gives a reassuring smile.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7447_420" -->
<a id="c7447_420"></a><blockquote class="code"><p class="quoted">
Test me with &quot;ask secretary about appointment / wait five minutes / g / g / wait 61 minutes / wait for half an hour / wait for a quarter of an hour / wait for an hour&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "389: Delayed Gratification" "e421" -->
<a id="e421"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e421" class="eglink"><b>389</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e421" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Delayed Gratification</span></b></a><br />A WAIT UNTIL [time] command which advances until the game clock reaches the correct hour.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e421"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example421">
<!-- START CODE "c7448_421" -->
<a id="c7448_421"></a><blockquote class="code"><p class="quoted">
&quot;Delayed Gratification&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7449_421" -->
<a id="c7449_421"></a><blockquote class="code"><p class="quoted">
Hanging around until is an action applying to one time.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7450_421" -->
<a id="c7450_421"></a><blockquote class="code"><p class="quoted">
Check hanging around until:
<br />&#160;&#160;&#160;&#160;if the time of day is the time understood, say &quot;It is [time understood] now!&quot; instead;
<br />&#160;&#160;&#160;&#160;if the time of day is after the time understood, say &quot;It is too late for that now.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7451_421" -->
<a id="c7451_421"></a><blockquote class="code"><p class="quoted">
Carry out hanging around until:
<br />&#160;&#160;&#160;&#160;while the time of day is before the time understood:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7452_421" -->
<a id="c7452_421"></a><blockquote class="code"><p class="quoted">
Report hanging around until:
<br />&#160;&#160;&#160;&#160;say &quot;You yawn until [time understood].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7453_421" -->
<a id="c7453_421"></a><blockquote class="code"><p class="quoted">
Understand &quot;wait until [time]&quot; as hanging around until.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7454_421" -->
<a id="c7454_421"></a><blockquote class="code"><p class="quoted">
The Empty Field is a room. &quot;It's an ordinary empty field. Nothing to see here at all-- yet. Wait until 11:45 PM, though.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7455_421" -->
<a id="c7455_421"></a><blockquote class="code"><p class="quoted">
At 11:45 PM:
<br />&#160;&#160;&#160;&#160;say &quot;Suddenly the air is filled with light and the sounds of an approaching band. Over the crest of the hill comes a parade of singing, stomping, hooting people: and not just people, but dogs, horses, elephants, giraffes... There are banners, and candles, and a flag that glows eerie-green in the dark; there is a float shaped like an enormous turtle, its shell covered with winking green lights; there is an old man dressed as a skeleton, carried in a litter, his neck garlanded with dried chiles. There are small girls throwing rose petals from a basket, and grown women half-naked carrying the emblems of Bacchic revelry, and two little boys each with a silver basin of clear water. All these go by in procession, and you join on at the end.&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7456_421" -->
<a id="c7456_421"></a><blockquote class="code"><p class="quoted">
Test me with &quot;look / z / z / wait until 11:45 PM&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "390: The Crane's Leg 2" "e97" -->
<a id="e97"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e97" class="eglink"><b>390</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e97" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Crane's Leg 2</span></b></a><br />A description text generated based on the propensities of the player-character, following different rulebooks for different characters.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_5.html#e97"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example97">
<p>Names of rules can be listed in tables. This is convenient if, for instance, we decide that we'd like to swap the rules we use for a specific purpose, as in this continuation of our earlier example of automated description:</p>
<!-- START CODE "c7457_97" -->
<a id="c7457_97"></a><blockquote class="code"><p class="quoted">
&quot;The Crane's Leg, Grown Longer&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7458_97" -->
<a id="c7458_97"></a><blockquote class="code"><p class="quoted">
Material is a kind of value. The materials are wood, glass, stone, cloth, paper, clay, and metal. A thing has a material.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7459_97" -->
<a id="c7459_97"></a><blockquote class="code"><p class="quoted">
Color is a kind of value. The colors are red, orange, yellow, green, blue, indigo, violet, black, brown, and white. A thing has a color. A thing is usually white.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7460_97" -->
<a id="c7460_97"></a><blockquote class="code"><p class="quoted">
A height is a kind of value. 3 feet 11 inches specifies a height. A thing has a height. Definition: a thing is tall if its height is 6 feet 0 inches or more. Definition: a thing is short if its height is 2 feet 0 inches or less.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7461_97" -->
<a id="c7461_97"></a><blockquote class="code"><p class="quoted">
Imitation relates various things to one thing (called the ideal). The verb to imitate means the imitation relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7462_97" -->
<a id="c7462_97"></a><blockquote class="code"><p class="quoted">
A table is a kind of supporter. A table is usually wood. The height of a table is usually 3 feet 8 inches. The ordinary table is a table. Every table imitates the ordinary table.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7463_97" -->
<a id="c7463_97"></a><blockquote class="code"><p class="quoted">
A rock is a kind of thing. A rock is usually stone. The ordinary rock is a rock. The height of a rock is usually 0 feet 3 inches. Every rock imitates the ordinary rock.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7464_97" -->
<a id="c7464_97"></a><blockquote class="code"><p class="quoted">
The description of a thing is usually &quot;[comparison with ideal][run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7465_97" -->
<a id="c7465_97"></a><blockquote class="code"><p class="quoted">
To say comparison with ideal:
<br />&#160;&#160;&#160;&#160;say &quot;You observe [the noun]:[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;choose row with character of the player in Table of Descriptive Reporting;
<br />&#160;&#160;&#160;&#160;follow instructions entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7466_97" -->
<a id="c7466_97"></a><blockquote class="code"><p class="quoted">
This is the comparative observation rule:
<br />&#160;&#160;&#160;&#160;let the sample be the ideal of the noun;
<br />&#160;&#160;&#160;&#160;if the sample is not a thing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Nothing special, really.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;if the material of the noun is not the material of the sample:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the height of the noun is not the height of the sample:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun is shorter than the sample, say &quot;Unusually short at [height of the noun], and made of [material of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;Unusually tall at [height of the noun], and made of [material of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Distinct mostly in being made of [material of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the height of the noun is not the height of the sample:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun is shorter than the sample, say &quot;Unusually short at [height of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;Unusually tall at [height of the noun].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;In every respect [a sample].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7467_97" -->
<a id="c7467_97"></a><blockquote class="code"><p class="quoted">
The Pleasure Garden is a room. &quot;At the riverbank, a pleasing garden, having many curving paths and one straight.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7468_97" -->
<a id="c7468_97"></a><blockquote class="code"><p class="quoted">
The low table is a table in the Pleasure Garden. The height of the low table is 2 feet 3 inches. On the low table is a yellow metal rock called a gold nugget. A willow is in the Pleasure Garden. The height of the willow is 20 feet 2 inches.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7469_97" -->
<a id="c7469_97"></a><blockquote class="code"><p class="quoted">
Understand &quot;possess [any person]&quot; or &quot;be [any person]&quot; as possessing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7470_97" -->
<a id="c7470_97"></a><blockquote class="code"><p class="quoted">
Possessing is an action applying to one thing. Carry out possessing: now the player is the noun; say &quot;You swap bodies!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7471_97" -->
<a id="c7471_97"></a><blockquote class="code"><p class="quoted">
The crane is a person in the Garden. The height of the crane is 4 feet 0 inches.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7472_97" -->
<a id="c7472_97"></a><blockquote class="code"><p class="quoted">
Table of Descriptive Reporting
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">character</p></td><td class="quotedtablecell"><p class="quoted">instructions</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">yourself</p></td><td class="quotedtablecell"><p class="quoted">comparative observation rule</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">crane</p></td><td class="quotedtablecell"><p class="quoted">bird observation rule</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7473_97" -->
<a id="c7473_97"></a><blockquote class="code"><p class="quoted">
This is the bird observation rule:
<br />&#160;&#160;&#160;&#160;if the noun is shorter than the player, say &quot;Small, like a duck[if the color of the noun is not white]; and [color of the noun][end if].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Supremely tall[if the color of the noun is not white] and [color of the noun][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7474_97" -->
<a id="c7474_97"></a><blockquote class="code"><p class="quoted">
Test me with &quot;examine table / examine nugget / examine willow / possess crane / examine table / examine nugget / examine willow&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "391: Stone" "e363" -->
<a id="e363"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e363" class="eglink"><b>391</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e363" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Stone</span></b></a><br />A soup to which the player can add ingredients, which will have different effects when the player eats.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_9.html#e363"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example363">
<p>A thing can have a rule as a property, if we like. Here we are going to allow the player to make a soup whose effects will depend on its ingredients. Each ingredient will have its own &quot;food effect&quot; rule, to be followed when the food is eaten.</p>
<p>Note that there are other, slightly less cumbersome ways to do the same thing -- we will see in the chapter on Rulebooks that we could make a &quot;food effects rulebook&quot; and then write a number of rules such as &quot;food effects rule for carrots&quot; or &quot;food effects rule for the stone&quot;. Nonetheless, we demonstrate rules-as-properties here for the sake of thoroughness.</p>
<p>So:</p>
<!-- START CODE "c7475_363" -->
<a id="c7475_363"></a><blockquote class="code"><p class="quoted">
&quot;Stone&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7476_363" -->
<a id="c7476_363"></a><blockquote class="code"><p class="quoted">
A food is a kind of thing that is edible. A food has a rule called the food effect.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7477_363" -->
<a id="c7477_363"></a><blockquote class="code"><p class="quoted">
Carry out eating a food:
<br />&#160;&#160;&#160;&#160;if a food is part of the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through things which are part of the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if item is a food, follow the food effect of the item;
<br />&#160;&#160;&#160;&#160;follow the food effect of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7478_363" -->
<a id="c7478_363"></a><blockquote class="code"><p class="quoted">
Report eating a food:
<br />&#160;&#160;&#160;&#160;say &quot;You eat [the noun]. [diagnosis of the player]&quot;;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7479_363" -->
<a id="c7479_363"></a><blockquote class="code"><p class="quoted">
To say diagnosis of (victim - a person):
<br />&#160;&#160;&#160;&#160;if the victim is ill:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are ill.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are healthy. &quot;;
<br />&#160;&#160;&#160;&#160;if the victim is awake, say &quot;You are wide awake. &quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You are sleepy. &quot;;
<br />&#160;&#160;&#160;&#160;if the victim is bright-eyed, say &quot;Your eyesight is clear. &quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Your eyesight is dim. &quot;;
<br />&#160;&#160;&#160;&#160;if the victim is weak, say &quot;You are weak. &quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You are strong. &quot;;
<br />&#160;&#160;&#160;&#160;if the victim is hungry, say &quot;You are hungry.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;You are well-fed.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And now to provide some particular foods:</p>
<!-- START CODE "c7480_363" -->
<a id="c7480_363"></a><blockquote class="code"><p class="quoted">
Some carrots are a food. The food effect of carrots is the bright-eye rule. This is the bright-eye rule: now the player is bright-eyed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7481_363" -->
<a id="c7481_363"></a><blockquote class="code"><p class="quoted">
Some potatoes are a food. The food effect of the potatoes is the sleepiness rule. This is the sleepiness rule: now the player is sleepy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7482_363" -->
<a id="c7482_363"></a><blockquote class="code"><p class="quoted">
The broth is a food. The indefinite article of the broth is &quot;some&quot;. The food effect of broth is the filling rule. This is the filling rule: now the player is full.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7483_363" -->
<a id="c7483_363"></a><blockquote class="code"><p class="quoted">
The hambone is a food. The food effect of the hambone is the heartiness rule. This is the heartiness rule: now the player is strong. Instead of eating the hambone: say &quot;You cannot just eat a bone!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7484_363" -->
<a id="c7484_363"></a><blockquote class="code"><p class="quoted">
The poison ivy is a food. &quot;Poison ivy grows nearby.&quot; The food effect of poison is the illness rule. This is the illness rule: now the player is ill.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7485_363" -->
<a id="c7485_363"></a><blockquote class="code"><p class="quoted">
A person can be bright-eyed or blind. The player is blind.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7486_363" -->
<a id="c7486_363"></a><blockquote class="code"><p class="quoted">
A person can be well or ill. The player is well.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7487_363" -->
<a id="c7487_363"></a><blockquote class="code"><p class="quoted">
A person can be hungry or full. The player is full.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7488_363" -->
<a id="c7488_363"></a><blockquote class="code"><p class="quoted">
A person can be strong or weak. The player is weak.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7489_363" -->
<a id="c7489_363"></a><blockquote class="code"><p class="quoted">
A person can be awake or sleepy. The player is sleepy.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7490_363" -->
<a id="c7490_363"></a><blockquote class="code"><p class="quoted">
The broth is in the kettle. The kettle is on the fire. The fire is in the Clearing. The Clearing is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7491_363" -->
<a id="c7491_363"></a><blockquote class="code"><p class="quoted">
The player carries the hambone, the potatoes, and the carrots. The ivy is in the clearing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7492_363" -->
<a id="c7492_363"></a><blockquote class="code"><p class="quoted">
Instead of examining the broth:
<br />&#160;&#160;&#160;&#160;if something is part of the broth, say &quot;In the broth, [a list of things that are part of the broth] float[if exactly one thing is part of the broth]s[end if].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;It is just a thin broth with no other ingredients.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7493_363" -->
<a id="c7493_363"></a><blockquote class="code"><p class="quoted">
Instead of inserting something into the broth: try inserting the noun into the holder of the broth.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7494_363" -->
<a id="c7494_363"></a><blockquote class="code"><p class="quoted">
Instead of taking the broth: say &quot;You cannot take the broth in your bare hands.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And the following is a relatively unimportant nicety:</p>
<!-- START CODE "c7495_363" -->
<a id="c7495_363"></a><blockquote class="code"><p class="quoted">
To sink is a verb.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7496_363" -->
<a id="c7496_363"></a><blockquote class="code"><p class="quoted">
After inserting a food which is not the broth into a container which contains the broth:
<br />&#160;&#160;&#160;&#160;now the noun is part of the broth;
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] [sink] into [the second noun], making the broth richer.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7497_363" -->
<a id="c7497_363"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x broth / eat hambone / put hambone in kettle / x broth / put potatoes in broth / x broth / eat carrots / eat broth / put ivy in kettle / eat ivy&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "392: Bribery" "e172" -->
<a id="e172"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e172" class="eglink"><b>392</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e172" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Bribery</span></b></a><br />A GIVE command that gets rid of Inform's default refusal message in favor of something a bit more sophisticated.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e172"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example172">
<p>If we want to rewrite the functionality of a command that usually ends with a &quot;block...&quot; rule, we will have to begin by turning the blocking off.</p>
<!-- START CODE "c7498_172" -->
<a id="c7498_172"></a><blockquote class="code"><p class="quoted">
&quot;Bribery&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7499_172" -->
<a id="c7499_172"></a><blockquote class="code"><p class="quoted">
The block giving rule is not listed in the check giving it to rules.
</p></blockquote>
<!-- END CODE -->
<p>As it happens, correct behavior is built into the GIVE command once &quot;block giving&quot; is turned off, so we do not have to write a replacement report or carry-out rule; the object will be transferred to the possession of the caterpillar. But we do want to adjust the action just a little so that our gift cheers up the recipient:</p>
<!-- START CODE "c7500_172" -->
<a id="c7500_172"></a><blockquote class="code"><p class="quoted">
Carry out giving (this is the gratitude for gifts rule): improve the mood of the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7501_172" -->
<a id="c7501_172"></a><blockquote class="code"><p class="quoted">
Mood is a kind of value. The moods are hostile, suspicious, indifferent, friendly, and adoring. An animal has a mood. An animal is usually indifferent.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7502_172" -->
<a id="c7502_172"></a><blockquote class="code"><p class="quoted">
To improve the mood of (character - an animal):
<br />&#160;&#160;&#160;&#160;if the mood of character is less than friendly, now the mood of the character is the mood after the mood of the character.
</p></blockquote>
<!-- END CODE -->
<p>Now whenever we give something to an animal, the animal will be pleased about the present. Of course, we might also want to add a check rule to giving, to see whether the offering is something the recipient really wants:</p>
<!-- START CODE "c7503_172" -->
<a id="c7503_172"></a><blockquote class="code"><p class="quoted">
Check giving (this is the polite refusal of unwanted objects rule):
<br />&#160;&#160;&#160;&#160;unless the noun interests the second noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The second noun] disdainfully refuses [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7504_172" -->
<a id="c7504_172"></a><blockquote class="code"><p class="quoted">
To decide whether (item - a thing) interests (character - a person):
<br />&#160;&#160;&#160;&#160;if the character has the item, no;
<br />&#160;&#160;&#160;&#160;if the item is edible, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7505_172" -->
<a id="c7505_172"></a><blockquote class="code"><p class="quoted">
Instead of showing something to someone:
<br />try giving the noun to the second noun.
</p></blockquote>
<!-- END CODE -->
<p>There is already a perfectly workable report rule that will describe what happens when we give something to someone, but let's say we want to report on the recipient's changed mood, too:</p>
<!-- START CODE "c7506_172" -->
<a id="c7506_172"></a><blockquote class="code"><p class="quoted">
After giving something to someone:
<br />&#160;&#160;&#160;&#160;say &quot;You give [the noun] to [the second noun], who appears mollified and is now merely [mood of the second noun].&quot;
</p></blockquote>
<!-- END CODE -->
<p>And the rest is all scenario:</p>
<!-- START CODE "c7507_172" -->
<a id="c7507_172"></a><blockquote class="code"><p class="quoted">
The Leafy Branch is a room. &quot;You stand on smooth bark dappled by sunlight. The scent-trail runs forward to home.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7508_172" -->
<a id="c7508_172"></a><blockquote class="code"><p class="quoted">
The branch continues forward and backward from here, and a stem extends forward-up.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7509_172" -->
<a id="c7509_172"></a><blockquote class="code"><p class="quoted">
Instead of going south in Leafy Branch, say &quot;You must not back down! The scent trail leads onward!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7510_172" -->
<a id="c7510_172"></a><blockquote class="code"><p class="quoted">
The Very Hungry Caterpillar is a hostile animal in the Leafy Branch. &quot;[The Caterpillar] looks [mood].&quot; Instead of examining the Caterpillar, say &quot;[The caterpillar] appears [mood].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7511_172" -->
<a id="c7511_172"></a><blockquote class="code"><p class="quoted">
The player carries an edible thing called a peanut crumb. The carrying capacity of the player is 1. After taking something, say &quot;You lift [the noun], though it is nearly your own size.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7512_172" -->
<a id="c7512_172"></a><blockquote class="code"><p class="quoted">
Instead of going north in the presence of a hostile caterpillar:
<br />&#160;&#160;&#160;&#160;say &quot;[The Caterpillar] moves to block your exit, glaring down at you with all the bristles on its skin extended to full size.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7513_172" -->
<a id="c7513_172"></a><blockquote class="code"><p class="quoted">
Instead of going north in the presence of a suspicious caterpillar:
<br />&#160;&#160;&#160;&#160;say &quot;[The Caterpillar] moves to block your exit, though it might allow you past if you offered further tribute.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7514_172" -->
<a id="c7514_172"></a><blockquote class="code"><p class="quoted">
The Leaf Face is above the branch. &quot;The smooth and shiny surface of the leaf extends forward from here, but you have lost the scent-trail. This is not the way home.&quot;  The pear fragment is an edible thing in Leaf Face. The dead aphid is a thing in Leaf Face.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7515_172" -->
<a id="c7515_172"></a><blockquote class="code"><p class="quoted">
The Twig is north of Leafy Branch. &quot;The scent-trail is weak but not entirely gone, and you pursue it faithfully...&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7516_172" -->
<a id="c7516_172"></a><blockquote class="code"><p class="quoted">
After going to the Twig:
<br />&#160;&#160;&#160;&#160;say &quot;The scent-trail is weak but not entirely gone, and you pursue it faithfully...&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7517_172" -->
<a id="c7517_172"></a><blockquote class="code"><p class="quoted">
Understand &quot;forward-up&quot; as up. Understand &quot;forward&quot; as north. Understand &quot;backward&quot; as south.  Understand &quot;backward-down&quot; as down.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7518_172" -->
<a id="c7518_172"></a><blockquote class="code"><p class="quoted">
Test me with &quot;forward / give crumb to caterpillar / forward / forward-up / get aphid / get fragment / down / give aphid to caterpillar / drop aphid / forward-up / get fragment / down / give fragment / forward&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "393: Saint Eligius" "e337" -->
<a id="e337"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e337" class="eglink"><b>393</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e337" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Saint Eligius</span></b></a><br />Adding a first look rule that comments on locations when we visit them for the first time, inserting text after objects are listed but before any "every turn" rules might occur.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e337"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example337">
<p>A not-infrequent desire in IF is to provide a few lines of comment when the player first enters a new room, after the objects are described but before anything else (such as an every turn rule) can fire. The cleanest, most systematic solution is to add a rule to the carry out looking rulebook, so:</p>
<!-- START CODE "c7519_337" -->
<a id="c7519_337"></a><blockquote class="code"><p class="quoted">
&quot;Saint Eligius&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7520_337" -->
<a id="c7520_337"></a><blockquote class="code"><p class="quoted">
The first look rule is listed after the room description paragraphs about objects rule in the carry out looking rules. A room can be commented or uncommented. A room is usually uncommented.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7521_337" -->
<a id="c7521_337"></a><blockquote class="code"><p class="quoted">
This is the first look rule:
<br />&#160;&#160;&#160;&#160;if the location is uncommented, carry out the gawking at activity with the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7522_337" -->
<a id="c7522_337"></a><blockquote class="code"><p class="quoted">
Gawking at something is an activity.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7523_337" -->
<a id="c7523_337"></a><blockquote class="code"><p class="quoted">
Rule for gawking at the Diamond Market:
<br />&#160;&#160;&#160;&#160;say &quot;Your throat closes and your eyes begin to sting. You have long disdained pomp and luxury, and railed against the oppression that brings such wealth to some men at the cost of the lives of others; you were not prepared for the magnificence.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7524_337" -->
<a id="c7524_337"></a><blockquote class="code"><p class="quoted">
After gawking at a room (called the target): now the target is commented.
</p></blockquote>
<!-- END CODE -->
<p>And now the scene itself:</p>
<!-- START CODE "c7525_337" -->
<a id="c7525_337"></a><blockquote class="code"><p class="quoted">
The Cobbled Alley is a room. &quot;The Alley has never been made into a proper street: the buildings on either side are simply too important to tear down. For all that, there isn't much sign of the magnificence nearby. The entrance you seek is set below street level, four grimy steps down to a half-basement.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7526_337" -->
<a id="c7526_337"></a><blockquote class="code"><p class="quoted">
After going to Diamond Market:
<br />&#160;&#160;&#160;&#160;say &quot;You descend the steps quickly and step into the small foyer, allowing yourself to be searched for weapons, before going on to...&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7527_337" -->
<a id="c7527_337"></a><blockquote class="code"><p class="quoted">
Diamond Market is down from Cobbled Alley. &quot;The roof is vaulted and painted in allegorical images representing Plenty, the Riches of the Earth, and Saint Eligius, patron of goldsmiths and jewelers.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7528_337" -->
<a id="c7528_337"></a><blockquote class="code"><p class="quoted">
Under their watchful eye, dozens of men in sober black robes sit; and on the tables before them are rubies, emeralds, sapphires from oversea, but most of all diamonds, both raw and cut.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7529_337" -->
<a id="c7529_337"></a><blockquote class="code"><p class="quoted">
The burly guard is a man in Diamond Market. &quot;A burly guard patrols quite close to you, but even he is more sumptuously dressed than the average burly guard, and his buttons shine.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7530_337" -->
<a id="c7530_337"></a><blockquote class="code"><p class="quoted">
Test me with &quot;d / look&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "394: Uptempo" "e405" -->
<a id="e405"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e405" class="eglink"><b>394</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e405" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Uptempo</span></b></a><br />Adjust time advancement so the game clock moves fifteen minutes each turn.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_4.html#e405"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example405">
<p>Suppose a game in which all actions take a very long time. Here's a simple implementation:</p>
<!-- START CODE "c7531_405" -->
<a id="c7531_405"></a><blockquote class="code"><p class="quoted">
&quot;Uptempo&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7532_405" -->
<a id="c7532_405"></a><blockquote class="code"><p class="quoted">
The fast time rule is listed instead of the advance time rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7533_405" -->
<a id="c7533_405"></a><blockquote class="code"><p class="quoted">
This is the fast time rule:
<br />&#160;&#160;&#160;&#160;increment the turn count;
<br />&#160;&#160;&#160;&#160;increase the time of day by 15 minutes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7534_405" -->
<a id="c7534_405"></a><blockquote class="code"><p class="quoted">
When play begins: now the right hand status line is &quot;[time of day]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7535_405" -->
<a id="c7535_405"></a><blockquote class="code"><p class="quoted">
The Temporal Hot Spot is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7536_405" -->
<a id="c7536_405"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This works fine as it stands, but we may run into some difficulty with it if we add scheduled events:</p>
<!-- START CODE "c7537_405" -->
<a id="c7537_405"></a><blockquote class="code"><p class="quoted">
At 9:30 AM:
<br />&#160;&#160;&#160;&#160;say &quot;Two turtles run by, almost too fast to see.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7538_405" -->
<a id="c7538_405"></a><blockquote class="code"><p class="quoted">
At 9:37 AM:
<br />&#160;&#160;&#160;&#160;say &quot;A snail blitzes past.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7539_405" -->
<a id="c7539_405"></a><blockquote class="code"><p class="quoted">
At 9:42 AM:
<br />&#160;&#160;&#160;&#160;say &quot;The grass grows.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7540_405" -->
<a id="c7540_405"></a><blockquote class="code"><p class="quoted">
At 9:50 AM:
<br />&#160;&#160;&#160;&#160;say &quot;Several flowers burst open.&quot;
</p></blockquote>
<!-- END CODE -->
<p>Time is counted forward after the schedule has already been consulted, so that only the 9:30 AM event happens between 9:30 and 9:45; the next two appear to occur between 9:45 and 10:00 AM, and the 9:50 AM event is not reported until the 10:00 AM to 10:15 wait. To get around this, we might schedule events only on the fifteen-minute mark when we want them to occur. Alternatively, we might try instead</p>
<!-- START CODE "c7541_405" -->
<a id="c7541_405"></a><blockquote class="code"><p class="quoted">
&quot;Uptempo&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7542_405" -->
<a id="c7542_405"></a><blockquote class="code"><p class="quoted">
The fast time rule is listed before the timed events rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7543_405" -->
<a id="c7543_405"></a><blockquote class="code"><p class="quoted">
The advance time rule is not listed in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7544_405" -->
<a id="c7544_405"></a><blockquote class="code"><p class="quoted">
This is the fast time rule:
<br />&#160;&#160;&#160;&#160;increment the turn count;
<br />&#160;&#160;&#160;&#160;increase the time of day by 15 minutes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7545_405" -->
<a id="c7545_405"></a><blockquote class="code"><p class="quoted">
When play begins: now the right hand status line is &quot;[time of day]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7546_405" -->
<a id="c7546_405"></a><blockquote class="code"><p class="quoted">
The Temporal Hot Spot is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7547_405" -->
<a id="c7547_405"></a><blockquote class="code"><p class="quoted">
At 9:30 AM:
<br />&#160;&#160;&#160;&#160;say &quot;Two turtles run by, almost too fast to see.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7548_405" -->
<a id="c7548_405"></a><blockquote class="code"><p class="quoted">
At 9:37 AM:
<br />&#160;&#160;&#160;&#160;say &quot;A snail blitzes past.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7549_405" -->
<a id="c7549_405"></a><blockquote class="code"><p class="quoted">
At 9:42 AM:
<br />&#160;&#160;&#160;&#160;say &quot;The grass grows.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7550_405" -->
<a id="c7550_405"></a><blockquote class="code"><p class="quoted">
At 9:50 AM:
<br />&#160;&#160;&#160;&#160;say &quot;Several flowers burst open.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7551_405" -->
<a id="c7551_405"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This time our revised time-advancing rule is listed just before the event scheduler, not just afterwards.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "395: Verbosity 2" "e412" -->
<a id="e412"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e412" class="eglink"><b>395</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e412" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Verbosity 2</span></b></a><br />Making rooms give full descriptions each time we enter, even if we have visited before, and disallowing player use of BRIEF and SUPERBRIEF.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e412"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example412">
<p>Suppose that we want the player always to see full room descriptions, even if he tries to reset the defaults -- perhaps because there is vital information there which he will miss if he turns off full-length room descriptions.</p>
<p>To do this, we might want to remove the standard behavior of the three actions associated with BRIEF, SUPERBRIEF, and VERBOSE, replacing them with explanatory messages about how the game behaves. We cannot use Instead to override these actions, because Instead rules do not apply to actions out of world. Instead, we will want to remove and replace the carry out rules.</p>
<p>We can do this easily by going to the Actions Index, looking up the detail panel for, say, &quot;preferring abbreviated room descriptions&quot;, and click the &quot;unlist&quot; button to paste in the sentence that will remove this rule from the rulebook.</p>
<p>Let's remove all three of the carry out rules and substitute our own:</p>
<!-- START CODE "c7552_412" -->
<a id="c7552_412"></a><blockquote class="code"><p class="quoted">
&quot;Verbosity 2&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7553_412" -->
<a id="c7553_412"></a><blockquote class="code"><p class="quoted">
Section 1 - Procedure
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7554_412" -->
<a id="c7554_412"></a><blockquote class="code"><p class="quoted">
The prefer unabbreviated room descriptions rule is not listed in the carry out preferring unabbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7555_412" -->
<a id="c7555_412"></a><blockquote class="code"><p class="quoted">
The prefer sometimes abbreviated room descriptions rule is not listed in the carry out preferring sometimes abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7556_412" -->
<a id="c7556_412"></a><blockquote class="code"><p class="quoted">
The prefer abbreviated room descriptions rule is not listed in the carry out preferring abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7557_412" -->
<a id="c7557_412"></a><blockquote class="code"><p class="quoted">
Carry out preferring unabbreviated room descriptions:
<br />&#160;&#160;&#160;&#160;say &quot;[story title] always provides full-length descriptions for your reading pleasure.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7558_412" -->
<a id="c7558_412"></a><blockquote class="code"><p class="quoted">
Carry out preferring sometimes abbreviated room descriptions:
<br />&#160;&#160;&#160;&#160;say &quot;For your playing protection, [story title] provides only full-length room descriptions.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7559_412" -->
<a id="c7559_412"></a><blockquote class="code"><p class="quoted">
Carry out preferring abbreviated room descriptions:
<br />&#160;&#160;&#160;&#160;try preferring sometimes abbreviated room descriptions instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7560_412" -->
<a id="c7560_412"></a><blockquote class="code"><p class="quoted">
The standard report preferring abbreviated room descriptions rule is not listed in the report preferring abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7561_412" -->
<a id="c7561_412"></a><blockquote class="code"><p class="quoted">
The standard report preferring unabbreviated room descriptions rule is not listed in the report preferring unabbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7562_412" -->
<a id="c7562_412"></a><blockquote class="code"><p class="quoted">
The standard report preferring sometimes abbreviated room descriptions rule is not listed in the report preferring sometimes abbreviated room descriptions rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7563_412" -->
<a id="c7563_412"></a><blockquote class="code"><p class="quoted">
Use full-length room descriptions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7564_412" -->
<a id="c7564_412"></a><blockquote class="code"><p class="quoted">
Section 2 - Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7565_412" -->
<a id="c7565_412"></a><blockquote class="code"><p class="quoted">
The Wilkie Memorial Research Wing is a room. &quot;The research wing was built onto the science building in 1967, when the college's finances were good but its aesthetic standards at a local minimum. A dull brown corridor recedes both north and south; drab olive doors open onto the laboratories of individual faculty members. The twitchy fluorescent lighting makes the whole thing flicker, as though it might wink out of existence at any moment.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7566_412" -->
<a id="c7566_412"></a><blockquote class="code"><p class="quoted">
The Men's Restroom is immediately west of this point.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7567_412" -->
<a id="c7567_412"></a><blockquote class="code"><p class="quoted">
The Men's Restroom is west of the Research Wing. &quot;Well, yes, you really shouldn't be in here. But the nearest women's room is on the other side of the building, and at this hour you have the labs mostly to yourself. All the same, you try not to read any of the things scrawled over the urinals which might have been intended in confidence.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7568_412" -->
<a id="c7568_412"></a><blockquote class="code"><p class="quoted">
Test me with &quot;west / east / brief / w / e / superbrief / w / e / verbose&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "396: Slouching" "e350" -->
<a id="e350"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e350" class="eglink"><b>396</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e350" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Slouching</span></b></a><br />A system of postures allowing the player and other characters to sit, stand, or lie down explicitly or implicitly on a variety of enterable supporters or containers, or in location.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_5.html#e350"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example350">
<p>Suppose we want to let the player explicitly sit, stand, or lie down on different enterable objects. (Normally Inform treats all these actions as entering, but there may be cases where we want to distinguish between the player sitting on a chair and the player standing on it.)</p>
<p>Our implementation gives each kind of enterable a range of allowed postures, and one preferred posture. If the player enters the supporter or container without specifying a posture (as in ENTER CHAIR), he will be put in the preferred posture. If he explicitly says, e.g., STAND ON CHAIR, he will be put in the standing position as long as standing is a posture that suits the chair.</p>
<!-- START CODE "c7569_350" -->
<a id="c7569_350"></a><blockquote class="code"><p class="quoted">
 &quot;Slouching&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7570_350" -->
<a id="c7570_350"></a><blockquote class="code"><p class="quoted">
Section 1 - Posture Rules
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7571_350" -->
<a id="c7571_350"></a><blockquote class="code"><p class="quoted">
A posture is a kind of value. The postures are seated, standing, and reclining.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7572_350" -->
<a id="c7572_350"></a><blockquote class="code"><p class="quoted">
A person has a posture. The posture of a person is usually standing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7573_350" -->
<a id="c7573_350"></a><blockquote class="code"><p class="quoted">
A supporter has a posture. A container has a posture.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7574_350" -->
<a id="c7574_350"></a><blockquote class="code"><p class="quoted">
Posture-permission relates various things to various postures. The verb to allow means the posture-permission relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7575_350" -->
<a id="c7575_350"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;stand&quot; and &quot;sit&quot; and &quot;lie&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7576_350" -->
<a id="c7576_350"></a><blockquote class="code"><p class="quoted">
Understand &quot;sit on/in [something]&quot; as sitting on.
<br />Understand &quot;lie on/in [something]&quot; as lying on.
<br />Understand &quot;stand on/in [something]&quot; as standing up on.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7577_350" -->
<a id="c7577_350"></a><blockquote class="code"><p class="quoted">
Sitting on is an action applying to one thing.
<br />Lying on is an action applying to one thing.
<br />Standing up on is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7578_350" -->
<a id="c7578_350"></a><blockquote class="code"><p class="quoted">
Carry out an actor sitting on:
<br />&#160;&#160;&#160;&#160;if the holder of the actor is not the noun, silently try the actor entering the noun;
<br />&#160;&#160;&#160;&#160;if the holder of the actor is the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is not seated, try the actor taking position seated;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise follow the report taking position rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7579_350" -->
<a id="c7579_350"></a><blockquote class="code"><p class="quoted">
Carry out an actor lying on:
<br />&#160;&#160;&#160;&#160;if the holder of the actor is not the noun, silently try the actor entering the noun;
<br />&#160;&#160;&#160;&#160;if the holder of the actor is the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is not reclining, try the actor taking position reclining;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise follow the report taking position rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7580_350" -->
<a id="c7580_350"></a><blockquote class="code"><p class="quoted">
Carry out an actor standing up on:
<br />&#160;&#160;&#160;&#160;if the holder of the actor is not the noun, silently try the actor entering the noun;
<br />&#160;&#160;&#160;&#160;if the holder of the actor is the noun:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is not standing, try the actor taking position standing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise follow the report taking position rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7581_350" -->
<a id="c7581_350"></a><blockquote class="code"><p class="quoted">
Understand &quot;lie down&quot; as lying down.
<br />Understand &quot;sit down&quot; or &quot;sit&quot; or &quot;sit up&quot; as sitting down.
<br />Understand &quot;stand&quot; or &quot;stand up&quot; as standing up.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7582_350" -->
<a id="c7582_350"></a><blockquote class="code"><p class="quoted">
Lying down is an action applying to nothing.
<br />Sitting down is an action applying to nothing.
<br />Standing up is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7583_350" -->
<a id="c7583_350"></a><blockquote class="code"><p class="quoted">
Taking position is an action applying to one posture.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7584_350" -->
<a id="c7584_350"></a><blockquote class="code"><p class="quoted">
Instead of an actor lying down:
<br />&#160;&#160;&#160;&#160;try the actor taking position reclining; rule succeeds.
<br />Instead of an actor sitting down:
<br />&#160;&#160;&#160;&#160;try the actor taking position seated; rule succeeds.
<br />Instead of an actor standing up:
<br />&#160;&#160;&#160;&#160;try the actor taking position standing; rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7585_350" -->
<a id="c7585_350"></a><blockquote class="code"><p class="quoted">
Check an actor taking position:
<br />&#160;&#160;&#160;&#160;if the holder of the actor is not a room and the holder of the actor does not allow the posture understood:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You can't take that position [in-on the holder of the actor].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise if the actor is visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The actor] can't take that position.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7586_350" -->
<a id="c7586_350"></a><blockquote class="code"><p class="quoted">
Check an actor taking position:
<br />&#160;&#160;&#160;&#160;if the posture understood is the posture of the actor:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You are already [the posture understood].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is visible, say &quot;[The actor] is already [the posture understood].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7587_350" -->
<a id="c7587_350"></a><blockquote class="code"><p class="quoted">
Carry out an actor taking position:
<br />&#160;&#160;&#160;&#160;now the posture of the actor is the posture understood.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7588_350" -->
<a id="c7588_350"></a><blockquote class="code"><p class="quoted">
Report someone taking position (this is the position-report rule):
<br />&#160;&#160;&#160;&#160;say &quot;[The actor] is now [the posture of the actor][if the holder of the actor is not the location of the actor] [in-on the holder of the actor][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7589_350" -->
<a id="c7589_350"></a><blockquote class="code"><p class="quoted">
Report taking position:
<br />&#160;&#160;&#160;&#160;say &quot;You are now [the posture of the player][if the holder of the player is not the location] [in-on the holder of the player][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7590_350" -->
<a id="c7590_350"></a><blockquote class="code"><p class="quoted">
To say in-on (item - a thing):
<br />&#160;&#160;&#160;&#160;if the item is a container, say &quot;in [the item]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;on [the item]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7591_350" -->
<a id="c7591_350"></a><blockquote class="code"><p class="quoted">
Carry out an actor exiting (this is the departure-posture rule):
<br />&#160;&#160;&#160;&#160;let N be the holder of the actor;
<br />&#160;&#160;&#160;&#160;if N is a container or N is a supporter,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the posture of the actor is the posture of N;
<br />&#160;&#160;&#160;&#160;otherwise now the posture of the actor is standing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7592_350" -->
<a id="c7592_350"></a><blockquote class="code"><p class="quoted">
The departure-posture rule is listed after the standard exiting rule in the carry out exiting rulebook.
<br />The departure-posture rule is listed after the standard getting off rule in the carry out getting off rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7593_350" -->
<a id="c7593_350"></a><blockquote class="code"><p class="quoted">
Carry out an actor entering something (this is the arrival-posture rule):
<br />&#160;&#160;&#160;&#160;if the noun is a container or the noun is a supporter,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the posture of the actor is the posture of the noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7594_350" -->
<a id="c7594_350"></a><blockquote class="code"><p class="quoted">
The arrival-posture rule is listed after the standard entering rule in the carry out entering rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7595_350" -->
<a id="c7595_350"></a><blockquote class="code"><p class="quoted">
Check an actor going somewhere:
<br />&#160;&#160;&#160;&#160;if the actor is in a room and the actor is not standing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;([if the actor is not the player][the actor] [end if]first standing up)[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;silently try the actor taking position standing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is not standing, stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7596_350" -->
<a id="c7596_350"></a><blockquote class="code"><p class="quoted">
Section 2 - Some Generic Kinds
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7597_350" -->
<a id="c7597_350"></a><blockquote class="code"><p class="quoted">
A chair is a kind of supporter. A chair is always enterable. Every chair allows seated and standing. A chair is usually seated.
<br />A sofa is a kind of supporter. A sofa is always enterable. Every sofa allows seated, standing and reclining. A sofa is usually seated.
<br />A hammock is a kind of container. A hammock is always enterable. Every hammock allows seated and reclining. A hammock is usually reclining.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7598_350" -->
<a id="c7598_350"></a><blockquote class="code"><p class="quoted">
Section 3 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7599_350" -->
<a id="c7599_350"></a><blockquote class="code"><p class="quoted">
The Resort is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7600_350" -->
<a id="c7600_350"></a><blockquote class="code"><p class="quoted">
The banana hammock is a hammock in the Resort. The stone bench is a sofa in the resort.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7601_350" -->
<a id="c7601_350"></a><blockquote class="code"><p class="quoted">
Clark is a man in the Resort. A persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7602_350" -->
<a id="c7602_350"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about someone (called target):
<br />&#160;&#160;&#160;&#160;say &quot;[The target] is [posture] [if the holder of the target is the location]nearby[otherwise][in-on the holder of the target][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7603_350" -->
<a id="c7603_350"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about something which encloses an unmentioned person (called target):
<br />&#160;&#160;&#160;&#160;carry out the writing a paragraph about activity with the target instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7604_350" -->
<a id="c7604_350"></a><blockquote class="code"><p class="quoted">
Test me with &quot;sit on bench / stand on bench / get up / lie on hammock / sit up / g / clark, sit on bench / look / clark, lie down / g / look / clark, get up / look / clark, lie down / look / enter bench&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "397: Swigmore U." "e371" -->
<a id="e371"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e371" class="eglink"><b>397</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e371" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Swigmore U.</span></b></a><br />Adding a new kind of supporter called a perch, where everything dropped lands on the floor.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_8.html#e371"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example371">
<p>Inform's default assumption is that if a player on an enterable object drops something, the dropped article winds up beside him on the same supporter or in the same container. This makes lots of sense for a dais, say, or a king-sized bed. It's a little less sensible if the enterable supporter in question is a bar stool or the like. So suppose we want to add a new kind of supporter called a perch, where everything dropped lands on the floor.</p>
<p>There are actually several ways of implementing this, but one of them is to reach right into the drop action and replace the &quot;standard dropping rule&quot; with a different one of our own invention -- like this:</p>
<!-- START CODE "c7605_371" -->
<a id="c7605_371"></a><blockquote class="code"><p class="quoted">
&quot;Swigmore U.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7606_371" -->
<a id="c7606_371"></a><blockquote class="code"><p class="quoted">
Moe's Tavern is a room. The bar is an enterable supporter in Moe's. A drink is a kind of thing. On the bar is a drink called a flaming Homer.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7607_371" -->
<a id="c7607_371"></a><blockquote class="code"><p class="quoted">
A perch is a kind of supporter. A perch is always enterable. The stool is a perch in Moe's.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7608_371" -->
<a id="c7608_371"></a><blockquote class="code"><p class="quoted">
The player carries a dead field mouse and a tomacco fruit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7609_371" -->
<a id="c7609_371"></a><blockquote class="code"><p class="quoted">
The sophisticated dropping rule is listed instead of the standard dropping rule in the carry out dropping rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7610_371" -->
<a id="c7610_371"></a><blockquote class="code"><p class="quoted">
This is the sophisticated dropping rule:
<br />&#160;&#160;&#160;&#160;if the player is on a perch (called the awkward position):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let place be the holder of the awkward position;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the place;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the holder of the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7611_371" -->
<a id="c7611_371"></a><blockquote class="code"><p class="quoted">
Test me with &quot;sit on stool / drop mouse / look / get up / look&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Now the carry-out behavior of the dropping action has been changed, but we haven't had to interfere in the checks or reporting at all. The rest of the action works just as it always did.</p>
<p>Of course, maybe we do want to change the way the action is reported, to make it clearer to the player where the dropped article wound up:</p>
<!-- START CODE "c7612_371" -->
<a id="c7612_371"></a><blockquote class="code"><p class="quoted">
The sophisticated report dropping rule is listed instead of the standard report dropping rule in the report dropping rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7613_371" -->
<a id="c7613_371"></a><blockquote class="code"><p class="quoted">
This is the sophisticated report dropping rule:
<br />&#160;&#160;&#160;&#160;say &quot;You drop [the noun] on [if the holder of the noun is a room]the ground[otherwise][the holder of the noun][end if].&quot;
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "398: Access All Areas" "e227" -->
<a id="e227"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e227" class="eglink"><b>398</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e227" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Access All Areas</span></b></a><br />The Pointy Hat of Liminal Transgression allows its wearer to walk clean through closed doors.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e227"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example227">
<p>If somebody tries to walk through a closed door, the &quot;can't go through closed doors rule&quot; usually stops them. This is a rule belonging to the &quot;check going&quot; rulebook. These names are fairly explanatory when written out, but hard to remember: fortunately we don't need to remember them, as the Index panel contains a full inventory of the check, carry out and report rules for every action, showing all of their names and the order in which they are checked. (We can also find out which rules are stopping an action by typing the testing command ACTIONS.)</p>
<p>Here we make the rule do nothing provided a condition holds:</p>
<!-- START CODE "c7614_227" -->
<a id="c7614_227"></a><blockquote class="code"><p class="quoted">
&quot;Access All Areas&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7615_227" -->
<a id="c7615_227"></a><blockquote class="code"><p class="quoted">
The extremely difficult door is north of the Standing Room and south of the Room of Walking Upside Down.  It is a locked door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7616_227" -->
<a id="c7616_227"></a><blockquote class="code"><p class="quoted">
The player is carrying the Pointy Hat of Liminal Transgression. The hat is wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7617_227" -->
<a id="c7617_227"></a><blockquote class="code"><p class="quoted">
The can't go through closed doors rule does nothing when the Hat is worn.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7618_227" -->
<a id="c7618_227"></a><blockquote class="code"><p class="quoted">
Test me with &quot;n / wear hat / n&quot;.
</p></blockquote>
<!-- END CODE -->
<p>(The Pointy Hat may be useful in debugging a game, even if it never makes it into the final published work.)</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "399: Backus-Naur form for rules" "e42" -->
<a id="e42"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e42" class="eglink"><b>399</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e42" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Backus-Naur form for rules</span></b></a><br />The full grammar Inform uses to parse rule definitions, in a standard computer-science notation.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_1.html#e42"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example42">
<p>Backus-Naur form, or BNF, is a standard notation used by computer scientists to specify more or less precisely what the valid programs are for a given programming language. It tends to provide a good description for a language such as C or Pascal, where contextual rules are limited, but the authors of Inform are doubtful that it is such a good tool for a natural-language system. For those who are interested, though, the following gives a formal specification for Inform's rules.</p>
<!-- START CODE "c7619_42" -->
<a id="c7619_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; ::=
<br />&#160;&#160;&#160;&#160;Definition : A/an &lt;kind&gt; is &lt;new adjectival name&gt; if/unless &lt;definition&gt;
<br />&#160;&#160;&#160;&#160;| &lt;preamble&gt; : &lt;phrases&gt;
<br />&#160;&#160;&#160;&#160;| &lt;preamble&gt; , &lt;phrase&gt;    (* only allowed for a few cases: see below)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7620_42" -->
<a id="c7620_42"></a><blockquote class="code"><p class="quoted">
&lt;definition&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;condition&gt;
<br />&#160;&#160;&#160;&#160;| its/his/her/their &lt;value property name&gt; is/are &lt;value&gt; or less/more
<br />&#160;&#160;&#160;&#160;| : &lt;phrases&gt;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7621_42" -->
<a id="c7621_42"></a><blockquote class="code"><p class="quoted">
&lt;preamble&gt; ::=
<br />&#160;&#160;&#160;&#160;To &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| To decide if/whether &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| To decide which/what &lt;kind of value&gt; is &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| This is the &lt;rule name&gt;
<br />&#160;&#160;&#160;&#160;| [[A] Rule for] &lt;circumstances&gt; [(this is the &lt;rule name&gt;)]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7622_42" -->
<a id="c7622_42"></a><blockquote class="code"><p class="quoted">
&lt;circumstances&gt; ::=
<br />&#160;&#160;&#160;&#160;At &lt;time&gt;
<br />&#160;&#160;&#160;&#160;| When &lt;event name&gt;
<br />&#160;&#160;&#160;&#160;| [&lt;placement&gt;] &lt;rulebook reference&gt; [while/when &lt;condition&gt;] [during &lt;scene name&gt;]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7623_42" -->
<a id="c7623_42"></a><blockquote class="code"><p class="quoted">
&lt;rulebook reference&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;rulebook name&gt; [about/for/of/on/rule] [&lt;action pattern&gt;]
<br />&#160;&#160;&#160;&#160;| &lt;object-based-rulebook name&gt; [about/for/of/on/rule] [&lt;description&gt;]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7624_42" -->
<a id="c7624_42"></a><blockquote class="code"><p class="quoted">
&lt;placement&gt; ::=
<br />&#160;&#160;&#160;&#160;a/an
<br />&#160;&#160;&#160;&#160;| [the] first
<br />&#160;&#160;&#160;&#160;| [the] last
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7625_42" -->
<a id="c7625_42"></a><blockquote class="code"><p class="quoted">
&lt;phrases&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;phrase&gt;
<br />&#160;&#160;&#160;&#160;| &lt;phrases&gt; ; &lt;phrase&gt;
</p></blockquote>
<!-- END CODE -->
<p>The following examples show how Inform breaks down some typical rules using the system above:</p>
<!-- START CODE "c7626_42" -->
<a id="c7626_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = At 2:09 PM: increase the score by 2; say &quot;Progress!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = At 2:09 PM
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = At 2:09 PM
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;At
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;time&gt; = 2:09 PM
<br />&#160;&#160;&#160;&#160;:
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = increase the score by 2; say &quot;Progress!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = increase the score by 2
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;Progress&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7627_42" -->
<a id="c7627_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = Instead of eating the ostrich during Formal Dinner (this is the cuisine rule), say &quot;It's greasy!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = Instead of eating the ostrich during Formal Dinner (this is the cuisine rule)
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = Instead of eating the ostrich during Formal Dinner
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook reference&gt; = Instead of eating the ostrich
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook name&gt; = Instead
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;action pattern&gt; = eating the ostrich
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;during
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;scene name&gt; = Formal Dinner
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;this
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rule name&gt; = cuisine rule
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;)
<br />&#160;&#160;&#160;&#160;,
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = say &quot;It's greasy!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;It's greasy!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7628_42" -->
<a id="c7628_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = After printing the name of a container: say &quot;!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook reference&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;object-based-rulebook name&gt; = After printing the name
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;description&gt; = a container
<br />&#160;&#160;&#160;&#160;:
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = say &quot;!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;!&quot;
</p></blockquote>
<!-- END CODE -->
<p>(*) The colon dividing a rule preamble from its definition can be replaced by a comma only if the preamble begins with the words &quot;Instead of&quot;, &quot;Before&quot;, &quot;After&quot;, &quot;Every turn&quot; or &quot;When&quot;, and if the definition consists only of a single phrase.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "400: Solitude" "e353" -->
<a id="e353"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e353" class="eglink"><b>400</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e353" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Solitude</span></b></a><br />Novice mode that prefaces every prompt with a list of possible commands the player could try, and highlights every important word used, to alert players to interactive items in the scenery.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_11.html#e353"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example353">
<p>Observation of novice IF players suggests that they often have a hard time figuring out how to get started, especially if they are encountering the game in a context where they don't have time to settle in and read instructions. Here we provide some training wheels to help them learn to communicate.</p>
<p>This is divided into several parts. The first part is the system of rules for general guidance, which could be excerpted and used anywhere. The second part is a scenario using these rules.</p>
<!-- START CODE "c7629_353" -->
<a id="c7629_353"></a><blockquote class="code"><p class="quoted">
&quot;Solitude&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7630_353" -->
<a id="c7630_353"></a><blockquote class="code"><p class="quoted">
Part 1 - General Rules
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7631_353" -->
<a id="c7631_353"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;say &quot;Have you played interactive fiction before? &gt;&quot;;
<br />&#160;&#160;&#160;&#160;now novice mode is whether or not the player consents.
</p></blockquote>
<!-- END CODE -->
<p>The rationale for asking the question this way, and not another, is that novices asked whether they would like instructions very often say no, even if they need them.</p>
<!-- START CODE "c7632_353" -->
<a id="c7632_353"></a><blockquote class="code"><p class="quoted">
Novice mode is a truth state that varies. Novice mode is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7633_353" -->
<a id="c7633_353"></a><blockquote class="code"><p class="quoted">
Stopping novice mode is an action out of world.
<br />Starting novice mode is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7634_353" -->
<a id="c7634_353"></a><blockquote class="code"><p class="quoted">
Understand &quot;novice mode off&quot; or &quot;novice off&quot; as stopping novice mode.
<br />Understand &quot;novice mode on&quot; or &quot;novice on&quot; as starting novice mode.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7635_353" -->
<a id="c7635_353"></a><blockquote class="code"><p class="quoted">
Carry out stopping novice mode: now novice mode is false.
<br />Carry out starting novice mode: now novice mode is true.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7636_353" -->
<a id="c7636_353"></a><blockquote class="code"><p class="quoted">
Report stopping novice mode: say &quot;Novice mode is now off.&quot;
<br />Report starting novice mode: say &quot;Novice mode is now on.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7637_353" -->
<a id="c7637_353"></a><blockquote class="code"><p class="quoted">
Before reading a command when novice mode is true:
<br />&#160;&#160;&#160;&#160;say &quot;[line break]Some options to try:[line break]&quot;;
<br />&#160;&#160;&#160;&#160;follow the novice suggestion rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7638_353" -->
<a id="c7638_353"></a><blockquote class="code"><p class="quoted">
The novice suggestion rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7639_353" -->
<a id="c7639_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he look rule):
<br />&#160;&#160;&#160;&#160;if not looking and not going, say &quot;  [bold type]look[roman type]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7640_353" -->
<a id="c7640_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he check inventory rule):
<br />&#160;&#160;&#160;&#160;if the player carries something and we are not taking inventory, say &quot;  [bold type]inventory[roman type] (I)&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7641_353" -->
<a id="c7641_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he put things on rule):
<br />&#160;&#160;&#160;&#160;if the player carries something and a free-standing supporter is relevant, say &quot;  [bold type]put[roman type] something [bold type]on[roman type] [the list of relevant supporters]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7642_353" -->
<a id="c7642_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he take things rule):
<br />&#160;&#160;&#160;&#160;if a gettable thing is relevant, say &quot;  [bold type]take[roman type] [the list of gettable relevant things]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7643_353" -->
<a id="c7643_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he examine things rule):
<br />&#160;&#160;&#160;&#160;if an unexamined thing is relevant, say &quot;  [bold type]examine[roman type] (X) [the list of unexamined relevant things]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7644_353" -->
<a id="c7644_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he enter things rule):
<br />&#160;&#160;&#160;&#160;if a relevant thing is worth entering, say &quot;  [bold type]enter[roman type] [the list of worth entering relevant things], or [bold type]get out[roman type]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7645_353" -->
<a id="c7645_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he open things rule):
<br />&#160;&#160;&#160;&#160;if an unlocked openable thing is relevant, say &quot;  [bold type]open[roman type] or [bold type]close[roman type] [the list of unlocked openable relevant things]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7646_353" -->
<a id="c7646_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he lock things rule):
<br />&#160;&#160;&#160;&#160;if a closed lockable thing is relevant, say &quot;  [bold type]lock[roman type] or [bold type]unlock[roman type] [the list of closed lockable relevant things]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7647_353" -->
<a id="c7647_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he eat things rule):
<br />&#160;&#160;&#160;&#160;if the player carries an edible relevant thing, say &quot;  [bold type]eat[roman type] [the list of edible relevant things carried by the player]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7648_353" -->
<a id="c7648_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he wear things rule):
<br />&#160;&#160;&#160;&#160;if the player carries a wearable relevant thing, say &quot;  [bold type]wear[roman type] [the list of wearable relevant things carried by the player]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7649_353" -->
<a id="c7649_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he turn things on rule):
<br />&#160;&#160;&#160;&#160;if a device is relevant, say &quot;  [bold type]turn on[roman type] or [bold type]turn off[roman type] [the list of relevant devices]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7650_353" -->
<a id="c7650_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he go places rule):
<br />&#160;&#160;&#160;&#160;if a room is adjacent, say &quot;  [bold type]go[roman type][exit list][if in darkness] or try other directions in the dark[otherwise]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7651_353" -->
<a id="c7651_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he enter doors rule):
<br />&#160;&#160;&#160;&#160;if an open door is relevant, say &quot;  [bold type]go through[roman type] [the list of relevant open doors]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7652_353" -->
<a id="c7652_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he interact with people rule):
<br />&#160;&#160;&#160;&#160;if another person is relevant, say &quot;  [bold type]kiss[roman type] or [bold type]wake[roman type] [the list of relevant other people][if the player carries something], or [bold type]give[roman type] things [bold type]to[roman type] someone[end if]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7653_353" -->
<a id="c7653_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he ask for help rule):
<br />&#160;&#160;&#160;&#160;say &quot;  [bold type]help[roman type] to see a more complete set of instructions&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7654_353" -->
<a id="c7654_353"></a><blockquote class="code"><p class="quoted">
A novice suggestion rule (this is the suggestion that he turn off help rule):
<br />&#160;&#160;&#160;&#160;say &quot;  [bold type]novice mode off[roman type] to turn off this guidance&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7655_353" -->
<a id="c7655_353"></a><blockquote class="code"><p class="quoted">
Last novice suggestion rule:
<br />&#160;&#160;&#160;&#160;say &quot;[line break]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The suggestion about asking for help is no good unless we provide some. This might take any of a number of forms, but for the sake of example we'll use an easy way out:</p>
<!-- START CODE "c7656_353" -->
<a id="c7656_353"></a><blockquote class="code"><p class="quoted">
Include Basic Screen Effects by Emily Short. Include Menus by Emily Short. Include Basic Help Menu by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7657_353" -->
<a id="c7657_353"></a><blockquote class="code"><p class="quoted">
After taking inventory when novice mode is true: say &quot;To get rid of any of these objects, [bold type]drop[roman type] it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7658_353" -->
<a id="c7658_353"></a><blockquote class="code"><p class="quoted">
A thing can be examined or unexamined. Carry out examining something: now the noun is examined.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7659_353" -->
<a id="c7659_353"></a><blockquote class="code"><p class="quoted">
A thing can be seen or unseen. A thing is usually unseen.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7660_353" -->
<a id="c7660_353"></a><blockquote class="code"><p class="quoted">
Definition: a thing is relevant if it is seen and it is visible. Before printing the name of something (called the target): now the target is seen; if novice mode is true, say &quot;[bold type]&quot;. After printing the name of something: say &quot;[roman type]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7661_353" -->
<a id="c7661_353"></a><blockquote class="code"><p class="quoted">
Definition: a supporter is worth entering:
<br />&#160;&#160;&#160;&#160;if the player carries it, no;
<br />&#160;&#160;&#160;&#160;if it is enterable, yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7662_353" -->
<a id="c7662_353"></a><blockquote class="code"><p class="quoted">
Definition: a container is worth entering:
<br />&#160;&#160;&#160;&#160;if the player carries it, no;
<br />&#160;&#160;&#160;&#160;if it is enterable and it is open, yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7663_353" -->
<a id="c7663_353"></a><blockquote class="code"><p class="quoted">
Definition: a person is other if it is not the player. Definition: a person is another if it is other.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7664_353" -->
<a id="c7664_353"></a><blockquote class="code"><p class="quoted">
Definition: a thing is free-standing if it is in a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7665_353" -->
<a id="c7665_353"></a><blockquote class="code"><p class="quoted">
To say exit list:
<br />&#160;&#160;&#160;&#160;let place be location;
<br />&#160;&#160;&#160;&#160;let count be 0;
<br />&#160;&#160;&#160;&#160;repeat with way running through directions:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let place be the room way from the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if place is a room:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if count is greater than 1] or[end if] [bold type][way][roman type]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7666_353" -->
<a id="c7666_353"></a><blockquote class="code"><p class="quoted">
Definition: a thing is gettable:
<br />&#160;&#160;&#160;&#160;if it is scenery, no;
<br />&#160;&#160;&#160;&#160;if it is fixed in place, no;
<br />&#160;&#160;&#160;&#160;if it is a person, no;
<br />&#160;&#160;&#160;&#160;if the player is carrying it, no;
<br />&#160;&#160;&#160;&#160;if the player is wearing it, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7667_353" -->
<a id="c7667_353"></a><blockquote class="code"><p class="quoted">
Part 2 - On the Ground
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7668_353" -->
<a id="c7668_353"></a><blockquote class="code"><p class="quoted">
Antarctic Research Station is a room. &quot;Though not always the most stimulating of environments, the station is far from your ex-wife and most of the things in the world that annoy you, namely the other 6+ billion people. There is a second room to the south.&quot; The station contains a radio. The radio is a device. It is fixed in place.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7669_353" -->
<a id="c7669_353"></a><blockquote class="code"><p class="quoted">
South of the Station is Sitting Room. The description of the Sitting Room is &quot;Just big enough for a very [comfortable chair].&quot; The Sitting Room contains an enterable supporter called a comfortable chair. The chair is scenery. A monograph about penguins is in the Sitting Room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7670_353" -->
<a id="c7670_353"></a><blockquote class="code"><p class="quoted">
Blistering Cold is a room. &quot;It is white out here and very very very cold.&quot; The white door is a door. &quot;[The white door] leads to [the other side of the white door].&quot;  It is west of the Blistering Cold and east of the Antarctic Research Station.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7671_353" -->
<a id="c7671_353"></a><blockquote class="code"><p class="quoted">
Test me with &quot;i / x radio / x door / s / i / x chair / x monograph / sit in chair / get up / n / open door / enter door&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "401: In Fire or in Flood" "e47" -->
<a id="e47"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e47" class="eglink"><b>401</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e47" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">In Fire or in Flood</span></b></a><br />A BURN command; flammable objects which light other items in their vicinity and can burn for different periods of time; the possibility of having parts or contents of a flaming item which survive being burnt.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e47"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example47">
<!-- START CODE "c7672_47" -->
<a id="c7672_47"></a><blockquote class="code"><p class="quoted">
&quot;In Fire or in Flood&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7673_47" -->
<a id="c7673_47"></a><blockquote class="code"><p class="quoted">
Part I - Rules for combustion
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7674_47" -->
<a id="c7674_47"></a><blockquote class="code"><p class="quoted">
Heat is a kind of value. The heats are whole, damp, and flaming. A thing has a heat. A thing is usually whole.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7675_47" -->
<a id="c7675_47"></a><blockquote class="code"><p class="quoted">
A thing has a number called endurance. The endurance of a thing is usually 5. A thing has a number called turns of burning. A thing can be flammable or flame-retardant.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7676_47" -->
<a id="c7676_47"></a><blockquote class="code"><p class="quoted">
Before printing the name of something flaming:
<br />&#160;&#160;&#160;&#160;say &quot;flaming &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7677_47" -->
<a id="c7677_47"></a><blockquote class="code"><p class="quoted">
Before burning something when the player is not carrying something flaming:
<br />&#160;&#160;&#160;&#160;if a flaming portable thing (called the lighter) is touchable:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(with [the lighter], which you first take)[command clarification break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try taking the lighter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7678_47" -->
<a id="c7678_47"></a><blockquote class="code"><p class="quoted">
Instead of burning something when the player is not carrying something flaming:
<br />&#160;&#160;&#160;&#160;say &quot;You would first need a fire source.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7679_47" -->
<a id="c7679_47"></a><blockquote class="code"><p class="quoted">
Instead of burning something flame-retardant:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] is not the sort of thing that catches fire.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7680_47" -->
<a id="c7680_47"></a><blockquote class="code"><p class="quoted">
Instead of burning something flammable when the player is carrying something flaming (called the flame source):
<br />&#160;&#160;&#160;&#160;say &quot;You light [the noun] with [the flame source].&quot;;
<br />&#160;&#160;&#160;&#160;now the heat of the noun is flaming.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7681_47" -->
<a id="c7681_47"></a><blockquote class="code"><p class="quoted">
Instead of burning something when the player is in the noun:
<br />&#160;&#160;&#160;&#160;say &quot;That seems dangerous given that you yourself are in [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7682_47" -->
<a id="c7682_47"></a><blockquote class="code"><p class="quoted">
Instead of burning something when the player is on the noun:
<br />&#160;&#160;&#160;&#160;say &quot;That seems dangerous given that you yourself are on [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7683_47" -->
<a id="c7683_47"></a><blockquote class="code"><p class="quoted">
Instead of examining something:
<br />&#160;&#160;&#160;&#160;say &quot;Hm, the [printed name] appears to be [heat].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7684_47" -->
<a id="c7684_47"></a><blockquote class="code"><p class="quoted">
Before taking a flaming thing:
<br />&#160;&#160;&#160;&#160;let turns remaining be the endurance of the noun minus the turns of burning of the noun;
<br />&#160;&#160;&#160;&#160;if turns remaining is less than two, say &quot;There's no portion of [the noun] sufficiently cool for you to pick up.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>But that's only a small part of the battle. The thing about fire is that it keeps on doing fiery things even when the player is otherwise occupied: destroying items that are on fire, and spreading to other things nearby. So we need a set of rules for the fire's behavior.</p>
<!-- START CODE "c7685_47" -->
<a id="c7685_47"></a><blockquote class="code"><p class="quoted">
Every turn when something is flaming:
<br />&#160;&#160;&#160;&#160;follow the fire rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7686_47" -->
<a id="c7686_47"></a><blockquote class="code"><p class="quoted">
The fire rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7687_47" -->
<a id="c7687_47"></a><blockquote class="code"><p class="quoted">
A fire rule (this is the can't hold flaming objects rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is held by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let turns remaining be the endurance of the item minus the turns of burning of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if turns remaining is less than two:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The item] becomes too hot to hold! &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try dropping the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the item is held by the player, say &quot;This is certainly painful.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7688_47" -->
<a id="c7688_47"></a><blockquote class="code"><p class="quoted">
A fire rule (this is the flames spread rule):
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the turns of burning of the item is one:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;spread the flames from the item.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7689_47" -->
<a id="c7689_47"></a><blockquote class="code"><p class="quoted">
A fire rule (this is the fire destroys things rule):
<br />&#160;&#160;&#160;&#160;now started printing is false;
<br />&#160;&#160;&#160;&#160;repeat with item running through flaming things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the turns of burning of the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the turns of burning of the item is greater than the endurance of the item, destroy the item;
<br />&#160;&#160;&#160;&#160;if started printing is true, say &quot;[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;now started printing is false.
</p></blockquote>
<!-- END CODE -->
<p>Because we've labelled all the fire rules, we could swap their order, or turn some of them off, while allowing the others run as usual. For instance, if there were a pair of fireproof gloves in the game, we might want to turn off the &quot;can't hold flaming objects rule&quot; whenever the player is wearing them.</p>
<p>This sort of flexibility is especially useful in the context of extensions. Someone writing an extension about burning would have no way of anticipating the need for a Fireproof Gauntlet of Thog, but the author would nonetheless be able to implement one easily.</p>
<!-- START CODE "c7690_47" -->
<a id="c7690_47"></a><blockquote class="code"><p class="quoted">
Definition: a thing is vulnerable if it is flammable and it is whole.
</p></blockquote>
<!-- END CODE -->
<p>The contact between things is a critical factor when it comes to fire, so we might add a couple of conditional relations do determine what is touching what.</p>
<!-- START CODE "c7691_47" -->
<a id="c7691_47"></a><blockquote class="code"><p class="quoted">
Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7692_47" -->
<a id="c7692_47"></a><blockquote class="code"><p class="quoted">
Contact relates a thing (called X) to a thing (called Y) when X is relying on Y or Y is relying on X. The verb to be joined to means the contact relation.
</p></blockquote>
<!-- END CODE -->
<p>Having these at our disposal makes it much tidier to write what happens next:</p>
<!-- START CODE "c7693_47" -->
<a id="c7693_47"></a><blockquote class="code"><p class="quoted">
To spread the flames from (item - a thing):
<br />&#160;&#160;&#160;&#160;now started printing is false;
<br />&#160;&#160;&#160;&#160;if the item is joined to a flammable whole thing (called the sacrifice):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the sacrifice is visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now started printing is true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Flames engulf [the list of flammable whole things which are joined to the item].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all the flammable whole things joined to the item are flaming.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7694_47" -->
<a id="c7694_47"></a><blockquote class="code"><p class="quoted">
Started printing is a truth state that varies. Started printing is false.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7695_47" -->
<a id="c7695_47"></a><blockquote class="code"><p class="quoted">
To destroy (item - a thing):
<br />&#160;&#160;&#160;&#160;let home be the holder of the item;
<br />&#160;&#160;&#160;&#160;if the item is part of something (called the superstructure), let home be the holder of the superstructure;
<br />&#160;&#160;&#160;&#160;if the item is visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now started printing is true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The item] burns away[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if]. &quot;;
<br />&#160;&#160;&#160;&#160;if something is relying on the item,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all the things which are relying on the item are in the home;
<br />&#160;&#160;&#160;&#160;now the item is nowhere;
<br />&#160;&#160;&#160;&#160;now the item is damp;
<br />&#160;&#160;&#160;&#160;now every flaming thing which is part of the item is damp.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7696_47" -->
<a id="c7696_47"></a><blockquote class="code"><p class="quoted">
To destroy (item - a door):
<br />&#160;&#160;&#160;&#160;let home be the holder of the item;
<br />&#160;&#160;&#160;&#160;if item is visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now started printing is true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The item] burns away[if something flame-retardant is part of the item], leaving [a list of flame-retardant parts of the item] behind[end if]. &quot;;
<br />&#160;&#160;&#160;&#160;if home is a room, now all of the flame-retardant parts of the item are in the home;
<br />&#160;&#160;&#160;&#160;now the item is damp;
<br />&#160;&#160;&#160;&#160;now the item is open;
<br />&#160;&#160;&#160;&#160;now the item is unopenable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7697_47" -->
<a id="c7697_47"></a><blockquote class="code"><p class="quoted">
Before printing the name of a damp door:
<br />&#160;&#160;&#160;&#160;say &quot;burnt-out frame of &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7698_47" -->
<a id="c7698_47"></a><blockquote class="code"><p class="quoted">
Instead of opening or closing a damp door:
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] can no longer be opened or closed in any meaningful sense.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7699_47" -->
<a id="c7699_47"></a><blockquote class="code"><p class="quoted">
Instead of doing something other than examining or dropping to a flaming thing when the turns of burning of the noun is greater than 1:
<br />&#160;&#160;&#160;&#160;say &quot;Fire has too thoroughly engulfed [the noun] for that to be a good idea.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7700_47" -->
<a id="c7700_47"></a><blockquote class="code"><p class="quoted">
Instead of taking something when the noun is in a flaming thing (called the receptacle):
<br />&#160;&#160;&#160;&#160;say &quot;You don't quite dare reach into [the receptacle].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7701_47" -->
<a id="c7701_47"></a><blockquote class="code"><p class="quoted">
Instead of touching something which is within a flaming thing (called the receptacle):
<br />&#160;&#160;&#160;&#160;say &quot;It seems a little risky since [the receptacle] is on fire.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7702_47" -->
<a id="c7702_47"></a><blockquote class="code"><p class="quoted">
Instead of turning something when the noun is contained in a flaming thing (called the receptacle):
<br />&#160;&#160;&#160;&#160;say &quot;It seems a little risky since [the receptacle] is on fire.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7703_47" -->
<a id="c7703_47"></a><blockquote class="code"><p class="quoted">
Instead of pushing or pulling something when the noun is inside a flaming thing (called the receptacle):
<br />&#160;&#160;&#160;&#160;say &quot;[The receptacle] deters you.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7704_47" -->
<a id="c7704_47"></a><blockquote class="code"><p class="quoted">
Before burning something which is in a container when the holder of the noun contains the player:
<br />&#160;&#160;&#160;&#160;say &quot;This could make things toasty for you...&quot;
</p></blockquote>
<!-- END CODE -->
<p>And that completes the rules which cover burning: things can catch fire, fire will spread, and gradually consume the world in flames. All of that was general and could be used in any setting, but we now provide a small game to show it off.</p>
<!-- START CODE "c7705_47" -->
<a id="c7705_47"></a><blockquote class="code"><p class="quoted">
Part II - Escape from the Library of the Dead
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7706_47" -->
<a id="c7706_47"></a><blockquote class="code"><p class="quoted">
The Library of the Dead is a room. &quot;This room -- little, dank, stone -- is filling with some miasma you do not quite dare breathe. It is imperative that you get out.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7707_47" -->
<a id="c7707_47"></a><blockquote class="code"><p class="quoted">
The desk is a flammable supporter in the Library. A drawer is part of the desk. The drawer is a flammable closed container. It is openable, lockable, and locked. The desk is scenery.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7708_47" -->
<a id="c7708_47"></a><blockquote class="code"><p class="quoted">
A box is in the Library. A metal hinge is part of the box. The hinge is flame-retardant. The box is open, flammable, and openable. The shroud of Laertes is a flammable thing in the box.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7709_47" -->
<a id="c7709_47"></a><blockquote class="code"><p class="quoted">
Instead of examining something when something is part of the noun:
<br />&#160;&#160;&#160;&#160;say &quot;You note [the list of things which are part of the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7710_47" -->
<a id="c7710_47"></a><blockquote class="code"><p class="quoted">
The world's last manuscript of the Psychagogoi by Aeschylus is on the desk. The manuscript is flammable. The manuscript has endurance 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7711_47" -->
<a id="c7711_47"></a><blockquote class="code"><p class="quoted">
The torch is a flammable flaming thing carried by the player. It has endurance 60. The asbestos sack is a flame-retardant player's holdall in the drawer.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7712_47" -->
<a id="c7712_47"></a><blockquote class="code"><p class="quoted">
The trapdoor is up of the Library and east of the Plaza. The trapdoor is a door. It is flammable, closed, lockable, and locked. &quot;A trapdoor in the ceiling is your only hope of escape[if flaming]. Fortunately, it is rapidly burning through[end if].&quot; The trapdoor has endurance 15.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7713_47" -->
<a id="c7713_47"></a><blockquote class="code"><p class="quoted">
Instead of going through the closed trapdoor, say &quot;[The trapdoor] is closed.&quot;
</p></blockquote>
<!-- END CODE -->
<p>We can then add a special fire rule to handle the trapdoor, which will be called as part of the same sequence. Again, this would be most important if the fire rules were part of a standard extension, and the trapdoor fire rule the author's own addition.</p>
<!-- START CODE "c7714_47" -->
<a id="c7714_47"></a><blockquote class="code"><p class="quoted">
A fire rule:
<br />&#160;&#160;&#160;&#160;if the trapdoor is flaming and a random chance of 1 in 3 succeeds:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the caught thing be a random flammable whole thing which can be touched by the trapdoor;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the caught thing is a thing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;A spark from [the trapdoor] catches [the caught thing]!&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the caught thing is flaming.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7715_47" -->
<a id="c7715_47"></a><blockquote class="code"><p class="quoted">
Instead of going to the Plaza:
<br />&#160;&#160;&#160;&#160;say &quot;Out at last!&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7716_47" -->
<a id="c7716_47"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get manuscript / get shroud / light desk / look / g / open drawer / look / g / g / g / get sack / put shroud in sack / put manuscript in sack / close sack / light trapdoor / look / g / g / g / g / g / g / g / g / g / g / g / g / g / g / up&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "402: Patient Zero" "e167" -->
<a id="e167"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e167" class="eglink"><b>402</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e167" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Patient Zero</span></b></a><br />People who wander around the map performing various errands, and in the process spread a disease which only the player can eradicate.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e167"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example167">
<!-- START CODE "c7717_167" -->
<a id="c7717_167"></a><blockquote class="code"><p class="quoted">
&quot;Patient Zero&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7718_167" -->
<a id="c7718_167"></a><blockquote class="code"><p class="quoted">
Use the serial comma and no scoring.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7719_167" -->
<a id="c7719_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;about&quot; as asking for information. Asking for information is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7720_167" -->
<a id="c7720_167"></a><blockquote class="code"><p class="quoted">
Carry out asking for information: say &quot;An implementation of the following creative brief:
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7721_167" -->
<a id="c7721_167"></a><blockquote class="code"><p class="quoted">
People wander around some small map, on errands. One, sad to tell, has Gelato's Syndrome, a tragic condition turning one's skin the colour of a random flavour of ice cream (raspberry ripple, neapolitan, etc.). When two people are in the same room, there's a 1/3 chance that an infected person will infect a non-infected one. The player can cure any single person: victory condition - to stamp out the disease.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7722_167" -->
<a id="c7722_167"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;say &quot;Gelato's Syndrome. It's struck, and it's struck hard. In these sticky summer months, there's no telling who will contract the disease next.&quot;;
<br />&#160;&#160;&#160;&#160;now the command prompt is &quot;[if the destination of the player is not blank](heading to [destination of the player]) [end if]&gt;&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7723_167" -->
<a id="c7723_167"></a><blockquote class="code"><p class="quoted">
Section 1 - Errands
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7724_167" -->
<a id="c7724_167"></a><blockquote class="code"><p class="quoted">
The current actor is a person which varies. The current owner is a person which varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7725_167" -->
<a id="c7725_167"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if player is active, follow the character movement rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7726_167" -->
<a id="c7726_167"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;now the last person named is the player;
<br />&#160;&#160;&#160;&#160;now the last thing named is the player;
<br />&#160;&#160;&#160;&#160;now every person is active.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7727_167" -->
<a id="c7727_167"></a><blockquote class="code"><p class="quoted">
A person can be active or passive. The player is passive.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7728_167" -->
<a id="c7728_167"></a><blockquote class="code"><p class="quoted">
The character movement rules are a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7729_167" -->
<a id="c7729_167"></a><blockquote class="code"><p class="quoted">
The first character movement rule:
<br />&#160;&#160;&#160;&#160;now group size is 1;
<br />&#160;&#160;&#160;&#160;now the last person named is the player;
<br />&#160;&#160;&#160;&#160;now the last thing named is the player;
<br />&#160;&#160;&#160;&#160;now the player is passive.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7730_167" -->
<a id="c7730_167"></a><blockquote class="code"><p class="quoted">
A character movement rule:
<br />&#160;&#160;&#160;&#160;repeat with mover running through innocent people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the current actor is the mover;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the shopper rules;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the current actor is passive;
<br />&#160;&#160;&#160;&#160;follow the movement reporting rule.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7731_167" -->
<a id="c7731_167"></a><blockquote class="code"><p class="quoted">
A character movement rule:
<br />&#160;&#160;&#160;&#160;repeat with next mover running through mercantile people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the current owner is the next mover;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the shopowner rules;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the current owner is passive;
<br />&#160;&#160;&#160;&#160;follow the infection rule.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7732_167" -->
<a id="c7732_167"></a><blockquote class="code"><p class="quoted">
To decide whether movement has not yet occurred:
<br />&#160;&#160;&#160;&#160;if the player is passive, no;
<br />&#160;&#160;&#160;&#160;yes.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7733_167" -->
<a id="c7733_167"></a><blockquote class="code"><p class="quoted">
Definition: a person is mercantile if it owns a room. Definition: a person is innocent if it is not mercantile and it is not the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7734_167" -->
<a id="c7734_167"></a><blockquote class="code"><p class="quoted">
The shopowner rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7735_167" -->
<a id="c7735_167"></a><blockquote class="code"><p class="quoted">
A shopowner rule:
<br />&#160;&#160;&#160;&#160;let the shop be a random room owned by the current owner;
<br />&#160;&#160;&#160;&#160;if the shop is air-conditioned and an open door (called the escape) protects the shop, try the current owner closing the escape instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7736_167" -->
<a id="c7736_167"></a><blockquote class="code"><p class="quoted">
Report someone closing a door when the person asked owns the location:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked], muttering darkly about air-conditioning and electricity, closes [the noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7737_167" -->
<a id="c7737_167"></a><blockquote class="code"><p class="quoted">
Report Vanessa closing the metal door when the metal door is visible:
<br />&#160;&#160;&#160;&#160;if Vanessa is visible, say &quot;Vanessa watches serenely as the metal door slides automatically back in place, sealing Cold Comfort.&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;The metal door slides heavily back into place.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7738_167" -->
<a id="c7738_167"></a><blockquote class="code"><p class="quoted">
A shopowner rule:
<br />&#160;&#160;&#160;&#160;if the location of the current owner encloses a submitted artwork (called the target):
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try the current owner filing the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7739_167" -->
<a id="c7739_167"></a><blockquote class="code"><p class="quoted">
Filing is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7740_167" -->
<a id="c7740_167"></a><blockquote class="code"><p class="quoted">
Before someone filing something which is not carried by the person asked:
<br />&#160;&#160;&#160;&#160;try the person asked taking the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7741_167" -->
<a id="c7741_167"></a><blockquote class="code"><p class="quoted">
Carry out someone filing:
<br />&#160;&#160;&#160;&#160;if the person asked does not carry the noun and the person asked is visible, say &quot;[The person asked] tries unsuccessfully to get [the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7742_167" -->
<a id="c7742_167"></a><blockquote class="code"><p class="quoted">
Report someone filing:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked] registers [the noun] and files it away.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7743_167" -->
<a id="c7743_167"></a><blockquote class="code"><p class="quoted">
The shopper rules is a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7744_167" -->
<a id="c7744_167"></a><blockquote class="code"><p class="quoted">
A shopper rule:
<br />&#160;&#160;&#160;&#160;if the current actor carries something (called the problem), try the current actor resolving the problem instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7745_167" -->
<a id="c7745_167"></a><blockquote class="code"><p class="quoted">
A shopper rule:
<br />&#160;&#160;&#160;&#160;if the current actor is not in the pool hall and the air conditioner is switched on:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try the current actor approaching the pool hall;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let way be a random direction;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try the current actor going the way.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7746_167" -->
<a id="c7746_167"></a><blockquote class="code"><p class="quoted">
Definition: a room is air-conditioned:
<br />&#160;&#160;&#160;&#160;if it is outdoors, no;
<br />&#160;&#160;&#160;&#160;if it is the Pool Hall and the air conditioner is switched off, no;
<br />&#160;&#160;&#160;&#160;if it is protected by a door, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7747_167" -->
<a id="c7747_167"></a><blockquote class="code"><p class="quoted">
Protection relates a door (called X) to a room (called Y) when the front side of X is Y or the back side of X is Y. The verb to protect means the protection relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7748_167" -->
<a id="c7748_167"></a><blockquote class="code"><p class="quoted">
Ownership relates one person to various rooms. The verb to own means the ownership relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7749_167" -->
<a id="c7749_167"></a><blockquote class="code"><p class="quoted">
Resolving is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7750_167" -->
<a id="c7750_167"></a><blockquote class="code"><p class="quoted">
An artwork is a kind of thing. Before printing the name of an artwork, say italic type. After printing the name of an artwork, say roman type. An artwork can be submitted or reserved.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7751_167" -->
<a id="c7751_167"></a><blockquote class="code"><p class="quoted">
A book is a kind of artwork.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7752_167" -->
<a id="c7752_167"></a><blockquote class="code"><p class="quoted">
Before someone resolving a book when the person asked is not in the Public Library:
<br />&#160;&#160;&#160;&#160;try the person asked approaching the Public Library instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7753_167" -->
<a id="c7753_167"></a><blockquote class="code"><p class="quoted">
Carry out someone resolving a book:
<br />&#160;&#160;&#160;&#160;move the noun to the Public Library;
<br />&#160;&#160;&#160;&#160;now the noun is submitted.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7754_167" -->
<a id="c7754_167"></a><blockquote class="code"><p class="quoted">
Report someone resolving a book:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked] turns in [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7755_167" -->
<a id="c7755_167"></a><blockquote class="code"><p class="quoted">
Before listing contents: group books together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7756_167" -->
<a id="c7756_167"></a><blockquote class="code"><p class="quoted">
Before grouping together books: say &quot;books entitled &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7757_167" -->
<a id="c7757_167"></a><blockquote class="code"><p class="quoted">
A stamped envelope is a kind of thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7758_167" -->
<a id="c7758_167"></a><blockquote class="code"><p class="quoted">
Before someone resolving a stamped envelope when the person asked is not in the Post Office:
<br />&#160;&#160;&#160;&#160;try the person asked approaching the Post Office instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7759_167" -->
<a id="c7759_167"></a><blockquote class="code"><p class="quoted">
Carry out someone resolving a stamped envelope:
<br />&#160;&#160;&#160;&#160;now the noun is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7760_167" -->
<a id="c7760_167"></a><blockquote class="code"><p class="quoted">
Report someone resolving a stamped envelope:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked] slips [a noun] into the outgoing mail slot.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7761_167" -->
<a id="c7761_167"></a><blockquote class="code"><p class="quoted">
Instead of someone resolving a stamped envelope when the person asked carries at least two stamped envelopes:
<br />&#160;&#160;&#160;&#160;if the person asked is visible, say &quot;[The person asked] shoves into the mail slot [a list of stamped envelopes carried by the person asked].&quot;;
<br />&#160;&#160;&#160;&#160;repeat with item running through stamped envelopes carried by the person asked:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is nowhere.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7762_167" -->
<a id="c7762_167"></a><blockquote class="code"><p class="quoted">
A DVD is a kind of artwork.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7763_167" -->
<a id="c7763_167"></a><blockquote class="code"><p class="quoted">
Before someone resolving a DVD when the person asked is not in the Rental Store:
<br />&#160;&#160;&#160;&#160;try the person asked approaching the Rental Store instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7764_167" -->
<a id="c7764_167"></a><blockquote class="code"><p class="quoted">
Carry out someone resolving a DVD:
<br />&#160;&#160;&#160;&#160;now the noun is submitted;
<br />&#160;&#160;&#160;&#160;move the noun to the Movie Rental Store.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7765_167" -->
<a id="c7765_167"></a><blockquote class="code"><p class="quoted">
Report someone resolving a DVD:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked] returns [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7766_167" -->
<a id="c7766_167"></a><blockquote class="code"><p class="quoted">
Instead of someone resolving a DVD when the person asked carries at least two DVDs:
<br />&#160;&#160;&#160;&#160;if the person asked is visible, say &quot;[The person asked] turns in [a list of DVDs carried by the person asked].&quot;;
<br />&#160;&#160;&#160;&#160;now every DVD carried by the person asked is submitted;
<br />&#160;&#160;&#160;&#160;now every DVD carried by the person asked is in the location of the person asked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7767_167" -->
<a id="c7767_167"></a><blockquote class="code"><p class="quoted">
Before listing contents: group DVDs together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7768_167" -->
<a id="c7768_167"></a><blockquote class="code"><p class="quoted">
Before grouping together DVDs: say &quot;DVDs of &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7769_167" -->
<a id="c7769_167"></a><blockquote class="code"><p class="quoted">
Approaching is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7770_167" -->
<a id="c7770_167"></a><blockquote class="code"><p class="quoted">
Carry out someone approaching:
<br />&#160;&#160;&#160;&#160;let the way be the best route from the location of the person asked to the noun, using doors;
<br />&#160;&#160;&#160;&#160;if the way is a direction, try the person asked going the way;
<br />&#160;&#160;&#160;&#160;otherwise stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7771_167" -->
<a id="c7771_167"></a><blockquote class="code"><p class="quoted">
A coupon is a kind of thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7772_167" -->
<a id="c7772_167"></a><blockquote class="code"><p class="quoted">
Carry out someone resolving a coupon:
<br />&#160;&#160;&#160;&#160;try the person asked giving the noun to Vanessa.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7773_167" -->
<a id="c7773_167"></a><blockquote class="code"><p class="quoted">
The block giving rule is not listed in any rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7774_167" -->
<a id="c7774_167"></a><blockquote class="code"><p class="quoted">
Check giving something to someone (this is the block player giving rule):
<br />&#160;&#160;&#160;&#160;abide by the block giving rule.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7775_167" -->
<a id="c7775_167"></a><blockquote class="code"><p class="quoted">
Before someone resolving a coupon when the person asked is not in Cold Comfort:
<br />&#160;&#160;&#160;&#160;try the person asked approaching Cold Comfort instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7776_167" -->
<a id="c7776_167"></a><blockquote class="code"><p class="quoted">
After someone giving a coupon to Vanessa:
<br />&#160;&#160;&#160;&#160;let the reward be a random ice cream cone;
<br />&#160;&#160;&#160;&#160;let the new flavor be a random infection color;
<br />&#160;&#160;&#160;&#160;now the infection color of the reward is the new flavor;
<br />&#160;&#160;&#160;&#160;move the reward to the person asked;
<br />&#160;&#160;&#160;&#160;now the noun is nowhere;
<br />&#160;&#160;&#160;&#160;if Vanessa is visible, say &quot;[The person asked] trades in [the noun] and receives [a reward] from Vanessa.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7777_167" -->
<a id="c7777_167"></a><blockquote class="code"><p class="quoted">
Infection color is a kind of value. The infection colors are french vanilla, whole-bean vanilla, mint, chocolate, dark chocolate, chocolate chip, chocolate fudge, mint chocolate chip, chocolate chocolate chip, triple chocolate, white chocolate, white chocolate chip, aztec cocoa-chili, raspberry ripple, neapolitan, rum raisin, dulce de leche, strawberry chunk, rocky road, blackberry sorbet, lemon sherbet, lime ice, caramel swirl, mango, saffron silk, and cookie dough cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7778_167" -->
<a id="c7778_167"></a><blockquote class="code"><p class="quoted">
To say list of flavors:
<br />&#160;&#160;&#160;&#160;let current color be french vanilla;
<br />&#160;&#160;&#160;&#160;while current color is not cookie dough cream:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[current color], &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now current color is the infection color after the current color;
<br />&#160;&#160;&#160;&#160;say &quot;and [current color]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7779_167" -->
<a id="c7779_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;ask vanessa for [flavored ice cream]&quot; as buying the flavor. Understand &quot;buy [flavored ice cream]&quot; as buying the flavor.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7780_167" -->
<a id="c7780_167"></a><blockquote class="code"><p class="quoted">
Buying the flavor is an action applying to one infection color.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7781_167" -->
<a id="c7781_167"></a><blockquote class="code"><p class="quoted">
Check buying the flavor:
<br />&#160;&#160;&#160;&#160;unless the player can see Vanessa:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;It would help if you were in the presence of an ice cream salesperson.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7782_167" -->
<a id="c7782_167"></a><blockquote class="code"><p class="quoted">
Carry out buying the flavor: say &quot;'Do you have a coupon?' Vanessa demands. You admit you do not. 'No [infection color understood] for you!'&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7783_167" -->
<a id="c7783_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;ice cream&quot; or &quot;cream&quot; or &quot;ice&quot; or &quot;sherbet&quot; or &quot;sorbet&quot; as &quot;[ice cream]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7784_167" -->
<a id="c7784_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;[infection color]&quot; or &quot;[infection color] [ice cream]&quot; as &quot;[flavored ice cream]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7785_167" -->
<a id="c7785_167"></a><blockquote class="code"><p class="quoted">
An ice cream cone is a kind of thing. An ice cream cone is always edible. An ice cream cone has an infection color. An ice cream cone can be half-eaten or fresh. Understand the infection color property as referring to an ice cream cone.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7786_167" -->
<a id="c7786_167"></a><blockquote class="code"><p class="quoted">
Carry out someone resolving an ice cream cone:
<br />&#160;&#160;&#160;&#160;try the person asked eating the noun instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7787_167" -->
<a id="c7787_167"></a><blockquote class="code"><p class="quoted">
Instead of someone eating a fresh ice cream cone:
<br />&#160;&#160;&#160;&#160;now the noun is half-eaten;
<br />&#160;&#160;&#160;&#160;if the person asked is visible, say &quot;[The person asked] licks [the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7788_167" -->
<a id="c7788_167"></a><blockquote class="code"><p class="quoted">
Report someone eating an ice cream cone:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked] pops the end of [the noun] into [if the person asked is female]her[otherwise]his[end if] mouth and swallows.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7789_167" -->
<a id="c7789_167"></a><blockquote class="code"><p class="quoted">
Before printing the name of an ice cream cone:
<br />&#160;&#160;&#160;&#160;say &quot;[if half-eaten]half-eaten [end if][infection color] &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7790_167" -->
<a id="c7790_167"></a><blockquote class="code"><p class="quoted">
Section 2 - Infection Rules
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7791_167" -->
<a id="c7791_167"></a><blockquote class="code"><p class="quoted">
This is the infection rule:
<br />&#160;&#160;&#160;&#160;if an infected person (called typhoid mary) can see a clean person (called random bystander) and a random chance of 1 in 3 succeeds:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try typhoid mary sneezing on the random bystander.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7792_167" -->
<a id="c7792_167"></a><blockquote class="code"><p class="quoted">
A person can be infected or clean. A person has an infection color.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7793_167" -->
<a id="c7793_167"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if the player is infected, say &quot;You feel itchy.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7794_167" -->
<a id="c7794_167"></a><blockquote class="code"><p class="quoted">
Definition: a person is other if it is not the player. Definition: a person is another if it is other.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7795_167" -->
<a id="c7795_167"></a><blockquote class="code"><p class="quoted">
When play begins: now right hand status line is &quot;Sick: [number of infected people]/[number of people]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7796_167" -->
<a id="c7796_167"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;if every person is infected, end the story saying &quot;Everyone succumbs&quot;;
<br />&#160;&#160;&#160;&#160;if every person is clean, end the story finally saying &quot;The Syndrome is eradicated&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7797_167" -->
<a id="c7797_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;sneeze on [something]&quot; as sneezing on. Sneezing on is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7798_167" -->
<a id="c7798_167"></a><blockquote class="code"><p class="quoted">
Check sneezing on:
<br />&#160;&#160;&#160;&#160;if the player is clean, say &quot;You're not sickly.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is the player, say &quot;Ew.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is not a person, say &quot;[The noun] cannot be infected.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7799_167" -->
<a id="c7799_167"></a><blockquote class="code"><p class="quoted">
Carry out sneezing on:
<br />&#160;&#160;&#160;&#160;now the noun is infected;
<br />&#160;&#160;&#160;&#160;now the infection color of the noun is a random infection color.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7800_167" -->
<a id="c7800_167"></a><blockquote class="code"><p class="quoted">
Carry out someone sneezing on:
<br />&#160;&#160;&#160;&#160;now the noun is infected;
<br />&#160;&#160;&#160;&#160;now the infection color of the noun is a random infection color.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7801_167" -->
<a id="c7801_167"></a><blockquote class="code"><p class="quoted">
Report sneezing on:
<br />&#160;&#160;&#160;&#160;say  &quot;Unable to control yourself, you sneeze on [noun].&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7802_167" -->
<a id="c7802_167"></a><blockquote class="code"><p class="quoted">
Report someone sneezing on:
<br />&#160;&#160;&#160;&#160;say &quot;[The person asked] sneezes on [if the noun is the player]you[otherwise][noun][end if]!&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7803_167" -->
<a id="c7803_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;inject [someone] with [something]&quot; as injecting it with. Understand &quot;inject [someone] with [syringe]&quot; as injecting it with. Understand &quot;use [syringe] on [someone]&quot; as injecting it with. Understand the commands &quot;innoculate&quot; and &quot;vaccinate&quot; as &quot;inject&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7804_167" -->
<a id="c7804_167"></a><blockquote class="code"><p class="quoted">
Injecting it with is an action applying to two things.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7805_167" -->
<a id="c7805_167"></a><blockquote class="code"><p class="quoted">
Check injecting it with:
<br />&#160;&#160;&#160;&#160;if the second noun is not the syringe, say &quot;[The second noun] cannot inject anything.&quot; instead;
<br />&#160;&#160;&#160;&#160;if the noun is clean:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the noun is the player, say &quot;You're not infected yet.&quot; instead;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] is not infected, and the syringe contains a cure, not a vaccine.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7806_167" -->
<a id="c7806_167"></a><blockquote class="code"><p class="quoted">
Carry out injecting it with: now the noun is clean.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7807_167" -->
<a id="c7807_167"></a><blockquote class="code"><p class="quoted">
After injecting the player with something: say &quot;You inject yourself, wincing at the sting. But the itching fades almost at once.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7808_167" -->
<a id="c7808_167"></a><blockquote class="code"><p class="quoted">
Report injecting it with: say &quot;You inject [the noun], who is now cured (but could easily be reinfected).&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7809_167" -->
<a id="c7809_167"></a><blockquote class="code"><p class="quoted">
Section 3 - Geography
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7810_167" -->
<a id="c7810_167"></a><blockquote class="code"><p class="quoted">
Include Locksmith by Emily Short.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7811_167" -->
<a id="c7811_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;go to/toward/into [any room]&quot; as going toward.  Understand &quot;enter [any room]&quot; as going toward.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7812_167" -->
<a id="c7812_167"></a><blockquote class="code"><p class="quoted">
A person has a room called the destination.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7813_167" -->
<a id="c7813_167"></a><blockquote class="code"><p class="quoted">
Going toward is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7814_167" -->
<a id="c7814_167"></a><blockquote class="code"><p class="quoted">
Check going toward:
<br />&#160;&#160;&#160;&#160;if the noun is the location, say &quot;You're already in [the location].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7815_167" -->
<a id="c7815_167"></a><blockquote class="code"><p class="quoted">
Carry out going toward:
<br />&#160;&#160;&#160;&#160;now the destination of the player is the noun;
<br />&#160;&#160;&#160;&#160;let heading be the best route from the location to the noun, using even locked doors;
<br />&#160;&#160;&#160;&#160;if heading is not a direction, say &quot;You can't think how to get there from here.&quot; instead;
<br />&#160;&#160;&#160;&#160;try going heading;
<br />&#160;&#160;&#160;&#160;if the location is the destination of the player, now the destination of the player is blank.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7816_167" -->
<a id="c7816_167"></a><blockquote class="code"><p class="quoted">
Instead of waiting when the destination of the player is not blank:
<br />&#160;&#160;&#160;&#160;if the destination of the player is the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destination of the player is blank;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going toward destination of the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the location is the destination of the player, now the destination of the player is blank.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7817_167" -->
<a id="c7817_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;stop&quot; or &quot;cease&quot; as stopping. Stopping is an action applying to nothing. Carry out stopping: now the destination of the player is blank. Report stopping: say &quot;You stop in your tracks.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7818_167" -->
<a id="c7818_167"></a><blockquote class="code"><p class="quoted">
After going to an air-conditioned room:
<br />&#160;&#160;&#160;&#160;say &quot;You step into the mercifully air-conditioned surroundings of...&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7819_167" -->
<a id="c7819_167"></a><blockquote class="code"><p class="quoted">
After going from an air-conditioned room:
<br />&#160;&#160;&#160;&#160;say &quot;You emerge from the air-conditioning into heat like a wall...&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7820_167" -->
<a id="c7820_167"></a><blockquote class="code"><p class="quoted">
Instead of listening to an air-conditioned room:
<br />&#160;&#160;&#160;&#160;say &quot;The air-conditioning hums softly.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7821_167" -->
<a id="c7821_167"></a><blockquote class="code"><p class="quoted">
The Alfred Cralle Pool Hall is a room. &quot;The town's most popular gathering-place, the pool hall is decorated in honor of the inventor of the ice cream scoop.&quot; The air conditioner is a device in the Pool Hall. &quot;[if switched off]An air conditioner sits in the corner, unhappily inert[otherwise]The air conditioner hums briskly[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7822_167" -->
<a id="c7822_167"></a><blockquote class="code"><p class="quoted">
The felt door is west of the Pool Hall. The felt door is a door. The felt door is open. The felt door is lockable and unlocked. The key to the city unlocks the felt door. The description of the felt door is &quot;It has a prominent lock, designed for an old-fashioned key.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7823_167" -->
<a id="c7823_167"></a><blockquote class="code"><p class="quoted">
After locking a door with something in the presence of an other person (called audience):
<br />&#160;&#160;&#160;&#160;say &quot;[The audience] looks a little non-plussed when you lock [the noun], but shrugs.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7824_167" -->
<a id="c7824_167"></a><blockquote class="code"><p class="quoted">
Nancy Johnson Memorial Square is west of the felt door. The description of Nancy Johnson Memorial Square is &quot;Waves of August heat rise from the pavement: more than once you've had the fancy that your shoes are simply going to stick. At the center of the square, rubbed to a brownish polish by many adoring hands, is the statue of Mrs. Nancy Johnson of New Jersey.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7825_167" -->
<a id="c7825_167"></a><blockquote class="code"><p class="quoted">
The statue is scenery in Memorial Square. Understand &quot;nancy&quot; or &quot;johnson&quot; or &quot;mrs&quot; as the statue. The description of the statue is &quot;Mrs. Johnson is pictured with a hand-cranked ice cream freezer tucked under one arm. Her other hand grips an ice cream scoop, ready to serve frozen dessert to the huddled masses.&quot; A hand-cranked ice cream freezer is part of the statue. The description is &quot;The hand-cranked ice cream freezer was Mrs. Johnson's invention in 1846, though it was William Young who had the sense to patent the thing in 1848.&quot; The scoop is part of the statue. The description of the scoop is &quot;An anachronism: Alfred Cralle would not invent the tool until 1897.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7826_167" -->
<a id="c7826_167"></a><blockquote class="code"><p class="quoted">
The Post Office is northwest of Nancy Johnson Memorial Square. &quot;Service at the post office is on the slow side since everything went automated.&quot; The slot is scenery in the post office. The slot is a container. Carry out inserting something into the slot: now the noun is nowhere. Report inserting something into the slot: say &quot;[The noun] falls out of sight, and you know you will never see it again.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7827_167" -->
<a id="c7827_167"></a><blockquote class="code"><p class="quoted">
Hamwi Street is northeast of an iron gate. &quot;A U-shaped street running from Main Street around to the Memorial Square, Hamwi Street was recently added by ambitious city planners. The small and straggly line of trees has yet to grow enough to provide perceptible shade, so the street is even hotter and more unforgiving than the other parts of town.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7828_167" -->
<a id="c7828_167"></a><blockquote class="code"><p class="quoted">
The iron gate is northeast of Nancy Johnson Memorial Square. The iron gate is a door. It is lockable and unlocked.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7829_167" -->
<a id="c7829_167"></a><blockquote class="code"><p class="quoted">
Before printing the name of the iron gate while not opening or closing or locking or unlocking:
<br />&#160;&#160;&#160;&#160;if the person asked is the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the gate is open, say &quot;open &quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the gate is locked:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;locked &quot;;
<br />&#160;&#160;&#160;&#160;otherwise if the gate is closed:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;closed &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7830_167" -->
<a id="c7830_167"></a><blockquote class="code"><p class="quoted">
Cold Comfort Ice Cream is north of a metal door. The metal door is north of Hamwi Street. A poster is fixed in place in Cold Comfort. &quot;A poster fills one wall with the blazing promise of treats to come.&quot; The description of the poster is &quot;Coming soon! Thai ice creams! Durian, jackfruit, taro, and coconut flavors!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7831_167" -->
<a id="c7831_167"></a><blockquote class="code"><p class="quoted">
The metal door is a door. &quot;A frosty metallic door separates [the location] from [the other side of the metal door].&quot; The metal door is lockable and unlocked. The key to the city unlocks the metal door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7832_167" -->
<a id="c7832_167"></a><blockquote class="code"><p class="quoted">
Marciony Street is southeast of Nancy Johnson Memorial Square. &quot;A semi-circular terrace, named somewhat fancifully after one claimant to the invention of the ice cream cone -- though Hamwi Street competes for the same honor. There are wedges of cool shadow here and there thanks to the buildings, but for the most part the southern exposure keeps Marciony unpleasantly hot.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7833_167" -->
<a id="c7833_167"></a><blockquote class="code"><p class="quoted">
The Movie Rental Store is west of a glass door. The glass door is a door. It is west of Marciony Street.  The glass door is lockable and unlocked. The key to the city unlocks the glass door.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7834_167" -->
<a id="c7834_167"></a><blockquote class="code"><p class="quoted">
Main Street is southeast of Hamwi Street. Main Street is northeast of some bronze gates.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7835_167" -->
<a id="c7835_167"></a><blockquote class="code"><p class="quoted">
The emergency box is in Main Street. The emergency box is fixed in place. &quot;A fire-red box with a glass front faces the sidewalk, with 'In case of emergency, BREAK GLASS' lettered on it.&quot; The emergency box is closed and transparent. Understand &quot;glass&quot; as the box. Instead of attacking the closed emergency box: say &quot;You hit the emergency box, which shatters open.&quot;; now the emergency box is open. Instead of attacking the open emergency box: say &quot;The glass has already been thoroughly broken.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7836_167" -->
<a id="c7836_167"></a><blockquote class="code"><p class="quoted">
The syringe is in the emergency box. The description of the syringe is &quot;It contains the cure for Gelato's Syndrome. You can inject anyone you like with it.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7837_167" -->
<a id="c7837_167"></a><blockquote class="code"><p class="quoted">
The bronze gates are northeast of Marciony Street. The bronze gates are a door. The bronze gates are lockable and unlocked.  The description of the bronze gates is &quot;Erected during the milk-taint revolution of 1937, they were designed to keep Main Street safe from the depredations of dairy-starved rioters.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7838_167" -->
<a id="c7838_167"></a><blockquote class="code"><p class="quoted">
The Public Library is east of Main Street. &quot;Built in the 1920s during the height of the dairy boom, the public library has lush pink velvet seats, marble walls the color of fresh cream, and a motif of cherries carved around every doorframe. An incongruous sign hangs from the ceiling.&quot; The incongruous sign is scenery in the Public Library. The description of the incongruous sign is &quot;Eating and drinking in the library is STRICTLY PROHIBITED.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7839_167" -->
<a id="c7839_167"></a><blockquote class="code"><p class="quoted">
Town Hall is southeast of Main Street. &quot;Town Hall was built during the slow days of the ice-cream bust, and therefore it is as joyless and utilitarian as the Public Library is ridiculous. Unwilling to be reminded of their pain, the inhabitants steered clear of any decoration that might remotely be construed to resemble a scoop of anything: so there are no curves, only disciplined right angles.&quot; The key to the city is in Town Hall. It unlocks the iron gate. It unlocks the bronze gates.  The description of the key to the city is &quot;A skeleton key.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7840_167" -->
<a id="c7840_167"></a><blockquote class="code"><p class="quoted">
A room can be indoors or outdoors. The Post Office, the Alfred Cralle Pool Hall, the Store, Cold Comfort, Town Hall, and the Library are indoors.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7841_167" -->
<a id="c7841_167"></a><blockquote class="code"><p class="quoted">
Use full-length room descriptions.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7842_167" -->
<a id="c7842_167"></a><blockquote class="code"><p class="quoted">
After looking in an outdoors room:
<br />&#160;&#160;&#160;&#160;let started printing be false;
<br />&#160;&#160;&#160;&#160;now every proximate door is not mentioned;
<br />&#160;&#160;&#160;&#160;if an indoors room is adjacent:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let started printing be true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;From here you can head into [the list of adjacent indoors rooms][if a proximate door is not mentioned], or go through [the list of proximate doors which are not mentioned][end if]. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;if an outdoors room is adjacent:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You could[if started printing is true] also[end if] go &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let count be the number of adjacent outdoors rooms;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let index be count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with next room running through adjacent outdoors rooms:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let way be the best route from the location to the next room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[way] to [the next room]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement index;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;make delimiter index of count, continuing;
<br />&#160;&#160;&#160;&#160;if a proximate door is not mentioned:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let started printing be true;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if started printing is true]Also available[otherwise]Your available exits[end if] [is-are the list of proximate doors which are not mentioned].&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if started printing is true, say paragraph break.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7843_167" -->
<a id="c7843_167"></a><blockquote class="code"><p class="quoted">
Definition: a door is proximate:
<br />&#160;&#160;&#160;&#160;if the front side of it is the location, yes;
<br />&#160;&#160;&#160;&#160;if the back side of it is the location, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7844_167" -->
<a id="c7844_167"></a><blockquote class="code"><p class="quoted">
Before exiting when the player is in an indoors room:
<br />&#160;&#160;&#160;&#160;if the player can see a door (called nearest exit), try entering the nearest exit instead;
<br />&#160;&#160;&#160;&#160;repeat with way running through directions:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let next room be the room way from the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the next room is a room, try going way instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7845_167" -->
<a id="c7845_167"></a><blockquote class="code"><p class="quoted">
Blank is a room. The destination of the player is Blank. Blank contains 15 ice cream cones.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7846_167" -->
<a id="c7846_167"></a><blockquote class="code"><p class="quoted">
Section 4 - Other Players
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7847_167" -->
<a id="c7847_167"></a><blockquote class="code"><p class="quoted">
Vanessa is a woman in Cold Comfort. Vanessa owns Cold Comfort.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7848_167" -->
<a id="c7848_167"></a><blockquote class="code"><p class="quoted">
Francine is a woman in the Public Library. Francine carries a book called Phlox for Phyllis. Francine carries a stamped envelope called a pink stamped envelope.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7849_167" -->
<a id="c7849_167"></a><blockquote class="code"><p class="quoted">
Lewis is a man in the Alfred Cralle Pool Hall. Lewis carries 3 stamped envelopes. Lewis carries a book called Idiot's Guide to Dating. Lewis carries a book called How to Meet Women. Lewis carries a book called Seduction in Three Easy Steps. Lewis carries a DVD called Sleepless in Seattle.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7850_167" -->
<a id="c7850_167"></a><blockquote class="code"><p class="quoted">
Gene is a man in Nancy Johnson Memorial Square. Gene carries a stamped envelope. Gene carries a DVD called Casablanca. Gene carries a coupon.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7851_167" -->
<a id="c7851_167"></a><blockquote class="code"><p class="quoted">
Rhoda is a woman in Marciony Street. Rhoda carries a book called The Marciony Street Murders. Rhoda carries a DVD called Unsolved Serial Killings XVIII. Rhoda carries a stamped envelope called a squashy package.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7852_167" -->
<a id="c7852_167"></a><blockquote class="code"><p class="quoted">
Martin is a man in Main Street. Martin carries a DVD called The Lifecycle of the South Sea Tortoise. Martin carries a coupon.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7853_167" -->
<a id="c7853_167"></a><blockquote class="code"><p class="quoted">
Antony is a man in Movie Rental. Antony carries a coupon. Antony carries a stamped envelope called a postcard.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7854_167" -->
<a id="c7854_167"></a><blockquote class="code"><p class="quoted">
Shelby is a man in the Town Hall. Shelby carries a DVD called  Conducting An Orderly Meeting. Shelby carries 5 stamped envelopes. Shelby carries an ice cream cone. Shelby carries a coupon.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7855_167" -->
<a id="c7855_167"></a><blockquote class="code"><p class="quoted">
Christopher is a man in the Library. Christopher owns the Library.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7856_167" -->
<a id="c7856_167"></a><blockquote class="code"><p class="quoted">
Linnea is a woman in the Alfred Cralle Pool Hall. Linnea owns the Alfred Cralle Pool Hall.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7857_167" -->
<a id="c7857_167"></a><blockquote class="code"><p class="quoted">
Ned is a man in the Movie Rental Store. Ned owns the Movie Rental.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7858_167" -->
<a id="c7858_167"></a><blockquote class="code"><p class="quoted">
After printing the name of someone (called target) while listing contents: if the target owns the location of the target, say &quot; (the owner)&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7859_167" -->
<a id="c7859_167"></a><blockquote class="code"><p class="quoted">
The description of a person is usually &quot;[The noun] [if the noun is clean]looks healthy[otherwise]is the color of [infection color of the noun][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7860_167" -->
<a id="c7860_167"></a><blockquote class="code"><p class="quoted">
After examining another person who is carrying something: say &quot;[if the noun is female]She[otherwise]He[end if] is carrying [a list of things carried by the noun].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7861_167" -->
<a id="c7861_167"></a><blockquote class="code"><p class="quoted">
When play begins: let Patient Zero be a random other person; now patient zero is infected.
</p></blockquote>
<!-- END CODE -->
<p>This is a light variation of a previous example, but we use it here because it is convenient:</p>
<!-- START CODE "c7862_167" -->
<a id="c7862_167"></a><blockquote class="code"><p class="quoted">
Section 5 - Conversation
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7863_167" -->
<a id="c7863_167"></a><blockquote class="code"><p class="quoted">
A person has a table name called conversation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7864_167" -->
<a id="c7864_167"></a><blockquote class="code"><p class="quoted">
Instead of asking someone about something:
<br />&#160;&#160;&#160;&#160;let the source be the conversation of the noun;
<br />&#160;&#160;&#160;&#160;if topic understood is a topic listed in source:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a turn stamp entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You have already heard that [summary entry].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now turn stamp entry is the turn count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the character entry is the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[reply entry][paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] stares at you blankly.&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7865_167" -->
<a id="c7865_167"></a><blockquote class="code"><p class="quoted">
Instead of telling someone about something:
<br />&#160;&#160;&#160;&#160;try asking the noun about it.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7866_167" -->
<a id="c7866_167"></a><blockquote class="code"><p class="quoted">
Understand &quot;recap&quot; or &quot;recall&quot; or &quot;review&quot; as recalling conversations.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7867_167" -->
<a id="c7867_167"></a><blockquote class="code"><p class="quoted">
Recalling conversations is an action applying to nothing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7868_167" -->
<a id="c7868_167"></a><blockquote class="code"><p class="quoted">
Carry out recalling conversations:
<br />&#160;&#160;&#160;&#160;repeat with speaker running through other people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let source be the conversation of the speaker;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sort source in turn stamp order;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The speaker] has so far told you: [line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let index be 0;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat through source:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a turn stamp entry and the speaker is character entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let index be 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;  [summary entry][line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if index is 0, say &quot;  absolutely nothing[line break]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say line break.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7869_167" -->
<a id="c7869_167"></a><blockquote class="code"><p class="quoted">
The conversation of a person is usually Table of General ChitChat.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7870_167" -->
<a id="c7870_167"></a><blockquote class="code"><p class="quoted">
Table of General ChitChat
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td><td class="quotedtablecell"><p class="quoted">summary</p></td><td class="quotedtablecell"><p class="quoted">turn stamp</p></td><td class="quotedtablecell"><p class="quoted">character</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;weather/heat/warmth&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'It's appalling, isn't it? You'd think we didn't pay our taxes.'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the weather is appalling&quot;</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td><td class="quotedtablecell"><p class="quoted">a person</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;sun/sunlight&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Good thing the town mostly switched to solar power, har, har.'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the town is mostly relying on solar power&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;rain&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Nope, there isn't going to be rain for 132 days,' replies [the noun].&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that rain is not expected for another 132 days&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;snow/hail/ice&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;This hilarious sally is greeted with hoots of laughter only.&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the concept of snow is downright laughable&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;disease/sickness/illness/syndrome&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;You get a cold, fixed stare in response. 'That's not funny,' [the noun] replies finally.&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that discussing the disease is more or less taboo&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;cold comfort&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'If you haven't tried it, you should,' says [the noun]. 'Best ice cream in town, and that's saying something, you bet.'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that Cold Comfort has the best ice cream in town&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;town/city/village&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Yeah, it's a mite odd,' allows [the noun]. 'Not to everyone's taste, like...' [the noun as pronoun] considers for a moment. 'Like ginger ice cream. Big pieces of crystallized ginger... not everyone likes that.'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the town is a mite odd&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;forecast/weatherman&quot; or &quot;weather forecast/man&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'Oh, the weather man's gotten a lot more reliable since the gummint started making it for us,' says [the noun]. 'Now he just reads off the schedule on the air every morning. Pretty much takes the fun right out of the news, if you ask me.'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the weather is all generated by schedule&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;taxes/tax&quot; or &quot;weather tax&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;A snort. 'You'd think for the rates we pay we'd get something a little pleasanter, don't you?'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the weather tax really ought to be paying for something nicer than what you get&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;job/employment/work&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'[if the noun owns a room (called the shop)]I own [the shop],' replies [the noun][otherwise]Work at the creamery, like most folk around here,' answers [the noun].&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;this and that about employment in town&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;book/books/reading&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'The Public Library has a good selection, excepting only the cookbook section,' says [the noun]. 'That got censored way back when-- well, way back.'&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the Public Library has a good collection, except for the cookbook section&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7871_167" -->
<a id="c7871_167"></a><blockquote class="code"><p class="quoted">
The conversation of Vanessa is the Table of Vanessa Chatter.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7872_167" -->
<a id="c7872_167"></a><blockquote class="code"><p class="quoted">
Table of Vanessa Chatter
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">topic</p></td><td class="quotedtablecell"><p class="quoted">reply</p></td><td class="quotedtablecell"><p class="quoted">summary</p></td><td class="quotedtablecell"><p class="quoted">turn stamp</p></td><td class="quotedtablecell"><p class="quoted">character</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ice cream&quot; or &quot;sorbet/sherbet/flavor/flavors/flavour/flavours/ice/ices&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;'The flavors are [list of flavors],' she responds promptly, without needing to draw breath.&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;that the flavors are [list of flavors]&quot;</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td><td class="quotedtablecell"><p class="quoted">a person</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7873_167" -->
<a id="c7873_167"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;while player's command includes &quot;the&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut the matched text.
</p></blockquote>
<!-- END CODE -->
<p>This strips 'the' out of the command, so that ASK PERSON ABOUT THE RAIN will be understood as well as ASK PERSON ABOUT RAIN.</p>
<p>Now we try something a bit unusual. Inform on its own will report each action on its own line, so that each character who walks into or out of a room will be described in a separate paragraph. This is usually fine, but in a game with a lot of characters moving around simultaneously, it can become a bit overwhelming. Instead, we may want to condense these reports into a single line, such as &quot;Ben and Jerry enter from the south&quot;. The following accomplishes that goal by replacing some of the reporting rules, storing the information in a table, and then reading the table back later, once all the character movement has been resolved and the reports can usefully be collated:</p>
<!-- START CODE "c7874_167" -->
<a id="c7874_167"></a><blockquote class="code"><p class="quoted">
Section 6 - Movement Description
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7875_167" -->
<a id="c7875_167"></a><blockquote class="code"><p class="quoted">
A person has some text called walk style. The walk style of a man is usually &quot;stride&quot;. The walk style of a woman is usually &quot;strut&quot;. The walk style of Gene is &quot;[one of]wander[or]stroll[purely at random]&quot;. The walk style of Francine is &quot;waddle&quot;. The walk style of Antony is &quot;scamper&quot;. The walk style of Rhoda is &quot;sashay&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7876_167" -->
<a id="c7876_167"></a><blockquote class="code"><p class="quoted">
Table of Visible Exits
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">character</p></td><td class="quotedtablecell"><p class="quoted">second</p></td><td class="quotedtablecell"><p class="quoted">third</p></td><td class="quotedtablecell"><p class="quoted">heading chosen</p></td><td class="quotedtablecell"><p class="quoted">total</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">a person</p></td><td class="quotedtablecell"><p class="quoted">a person</p></td><td class="quotedtablecell"><p class="quoted">a person</p></td><td class="quotedtablecell"><p class="quoted">a direction</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">with 10 blank rows.</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7877_167" -->
<a id="c7877_167"></a><blockquote class="code"><p class="quoted">
Table of Visible Entrances
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">character</p></td><td class="quotedtablecell"><p class="quoted">second</p></td><td class="quotedtablecell"><p class="quoted">third</p></td><td class="quotedtablecell"><p class="quoted">heading chosen</p></td><td class="quotedtablecell"><p class="quoted">total</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">a person</p></td><td class="quotedtablecell"><p class="quoted">a person</p></td><td class="quotedtablecell"><p class="quoted">a person</p></td><td class="quotedtablecell"><p class="quoted">a direction</p></td><td class="quotedtablecell"><p class="quoted">a number</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">with 10 blank rows.</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7878_167" -->
<a id="c7878_167"></a><blockquote class="code"><p class="quoted">
To clear (current table - a table name):
<br />&#160;&#160;&#160;&#160;repeat through current table:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7879_167" -->
<a id="c7879_167"></a><blockquote class="code"><p class="quoted">
To tidy departures of (current table - a table name):
<br />&#160;&#160;&#160;&#160;let next direction be up;
<br />&#160;&#160;&#160;&#160;repeat through current table:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if heading chosen entry is next direction:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let accomplice be character entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row with heading chosen of next direction in the current table;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if total entry is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now second entry is accomplice;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now total entry is 2;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if total entry is 2:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unless the second entry is accomplice:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now third entry is accomplice;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now total entry is 3;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row with character of accomplice in the current table;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blank out the whole row;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let next direction be heading chosen entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7880_167" -->
<a id="c7880_167"></a><blockquote class="code"><p class="quoted">
A door has a person called last opener.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7881_167" -->
<a id="c7881_167"></a><blockquote class="code"><p class="quoted">
Report someone opening a door:
<br />&#160;&#160;&#160;&#160;now group size is 1;
<br />&#160;&#160;&#160;&#160;now the last opener of the noun is the person asked;
<br />&#160;&#160;&#160;&#160;if the person asked is visible, say &quot;[The person asked] opens [the noun]. [run paragraph on]&quot; instead;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The noun] opens from the other side. [run paragraph on]&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7882_167" -->
<a id="c7882_167"></a><blockquote class="code"><p class="quoted">
Report someone going through a door (called route):
<br />&#160;&#160;&#160;&#160;if the person asked is not the last opener of the route, continue the action;
<br />&#160;&#160;&#160;&#160;if the person asked is the last person named, say &quot;[The person asked as pronoun]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;[The person asked]&quot;;
<br />&#160;&#160;&#160;&#160;say &quot; [if the person asked is in the location]comes[otherwise]goes[end if] through[if the last thing named is not the route] [the route][end if].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7883_167" -->
<a id="c7883_167"></a><blockquote class="code"><p class="quoted">
The last thing named is a thing that varies. Before printing the name of something (called target) which is not a person: now the last thing named is the target.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7884_167" -->
<a id="c7884_167"></a><blockquote class="code"><p class="quoted">
Report someone going a direction:
<br />&#160;&#160;&#160;&#160;if the person asked is in the location,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose a blank row in the table of visible entrances;
<br />&#160;&#160;&#160;&#160;otherwise choose a blank row in the table of visible exits;
<br />&#160;&#160;&#160;&#160;now character entry is the person asked;
<br />&#160;&#160;&#160;&#160;now total entry is 1;
<br />&#160;&#160;&#160;&#160;if the person asked is in the location,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now heading chosen entry is the opposite of the noun;
<br />&#160;&#160;&#160;&#160;otherwise now heading chosen entry is the noun;
<br />&#160;&#160;&#160;&#160;stop the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7885_167" -->
<a id="c7885_167"></a><blockquote class="code"><p class="quoted">
This is the movement reporting rule:
<br />&#160;&#160;&#160;&#160;sort the Table of Visible Entrances in heading chosen order;
<br />&#160;&#160;&#160;&#160;tidy departures of the table of visible entrances;
<br />&#160;&#160;&#160;&#160;sort the Table of Visible exits in heading chosen order;
<br />&#160;&#160;&#160;&#160;tidy departures of the table of visible exits;
<br />&#160;&#160;&#160;&#160;let total row count be the number of filled rows in the Table of Visible Entrances plus the number of filled rows in the Table of Visible Exits;
<br />&#160;&#160;&#160;&#160;if total row count is 0, rule succeeds;
<br />&#160;&#160;&#160;&#160;generate descriptions from the Table of Visible Entrances;
<br />&#160;&#160;&#160;&#160;generate descriptions from the Table of Visible Exits;
<br />&#160;&#160;&#160;&#160;clear the Table of Visible Entrances; clear the Table of Visible Exits.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7886_167" -->
<a id="c7886_167"></a><blockquote class="code"><p class="quoted">
To generate descriptions from (current table - a table name):
<br />&#160;&#160;&#160;&#160;let count be the number of filled rows in the current table;
<br />&#160;&#160;&#160;&#160;if count is 0, rule succeeds;
<br />&#160;&#160;&#160;&#160;let index be count;
<br />&#160;&#160;&#160;&#160;repeat through the current table:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let accomplice be character entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if character entry is a person, now character entry is marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a second entry and second entry is a person, now second entry is marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if there is a third entry and third entry is a person, now third entry is marked for listing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let target be the room the heading chosen entry from the location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if total entry is 3, say &quot;[The character entry], [the second entry][optional comma] and [the third entry] &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if total entry is 2, say &quot;[The character entry] and [the second entry] &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if total entry is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the character entry is the last person named, say &quot;[The character entry as pronoun] &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[The character entry] &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if total entry is 1, say &quot;[walk style of the character entry]s &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;walk[if total entry is 1]s[end if] &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the character entry is in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is indoors and target is indoors, say &quot;over from &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is outdoors and target is indoors, say &quot;out of &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is indoors and target is outdoors, say &quot;in from &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is outdoors and target is outdoors, say &quot;over from &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is indoors and target is indoors, say &quot;over to &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is outdoors and target is indoors, say &quot;into &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is indoors and target is outdoors, say &quot;out [if a door is visible][the random visible door][end if] to &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if location is outdoors and target is outdoors, say &quot;over to &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if target is outdoors, say &quot;[the heading chosen entry]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[the target]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the total entry is 1 and count is 1 and accomplice carries something, say &quot;, carrying [a list of things carried by the accomplice]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement index;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;make delimiter index of count, continuing;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now group size is total entry;
<br />&#160;&#160;&#160;&#160;if a marked for listing person is infected:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[eliminate the case in which we have already seen this description because we just typed LOOK and the patient was in the room at the time]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if looking and a marked for listing person is not in the location:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;clear marked people;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say paragraph break;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;describe patients;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;clear marked people;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say paragraph break.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7887_167" -->
<a id="c7887_167"></a><blockquote class="code"><p class="quoted">
The last person named is a person that varies. Before printing the name of a person (called target): now the last person named is the target. Group size is a number that varies. Group size is 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7888_167" -->
<a id="c7888_167"></a><blockquote class="code"><p class="quoted">
To clear marked people:
<br />&#160;&#160;&#160;&#160;repeat with named party running through people:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the named party is not marked for listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7889_167" -->
<a id="c7889_167"></a><blockquote class="code"><p class="quoted">
Before listing nondescript items:
<br />&#160;&#160;&#160;&#160;if the number of people who are marked for listing is 0, make no decision;
<br />&#160;&#160;&#160;&#160;say &quot;You can see [a list of people who are marked for listing] here. &quot;;
<br />&#160;&#160;&#160;&#160;now group size is the number of people who are marked for listing;
<br />&#160;&#160;&#160;&#160;describe patients;
<br />&#160;&#160;&#160;&#160;now every marked for listing person is not marked for listing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7890_167" -->
<a id="c7890_167"></a><blockquote class="code"><p class="quoted">
To describe patients:
<br />&#160;&#160;&#160;&#160;if every marked for listing person is infected and at least three people are marked for listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;They are all sick as dogs, every one.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;clear marked people;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the number of people who are marked for listing is greater than two and the number of infected people who are marked for listing is greater than the number of clean people who are marked for listing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Only [the list of clean people who are marked for listing] currently remain[if the number of clean people who are marked for listing is 1]s[end if] untainted.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;clear marked people;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;let count be the number of marked for listing other people who are infected;
<br />&#160;&#160;&#160;&#160;if count is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say paragraph break;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;make no decision;
<br />&#160;&#160;&#160;&#160;let index be count;
<br />&#160;&#160;&#160;&#160;repeat with patient running through marked for listing other people who are infected:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if index is count:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if count is 1 and the patient is the last person named:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The patient as pronoun]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The patient]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[the patient]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot; [looks as though dipped in for index] [infection color of the patient]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrement index;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;make delimiter index of count;
<br />&#160;&#160;&#160;&#160;clear marked people.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7891_167" -->
<a id="c7891_167"></a><blockquote class="code"><p class="quoted">
To say (named character - a man) as pronoun:
<br />&#160;&#160;&#160;&#160;if group size is 1, say &quot;He&quot;; if group size is 2, say &quot;The latter&quot;; if group size is greater than 2, say &quot;The last&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7892_167" -->
<a id="c7892_167"></a><blockquote class="code"><p class="quoted">
To say (named character - a woman) as pronoun: if group size is 1, say &quot;She&quot;; if group size is 2, say &quot;The latter&quot;; if group size is greater than 2, say &quot;The last&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7893_167" -->
<a id="c7893_167"></a><blockquote class="code"><p class="quoted">
To say looks as though dipped in for (index - a number):
<br />&#160;&#160;&#160;&#160;let divider be the number of filled rows in the Table of Dipping Phrases;
<br />&#160;&#160;&#160;&#160;if index is greater than 4, let index be the remainder after dividing index by divider;
<br />&#160;&#160;&#160;&#160;choose row index in the Table of Dipping Phrases;
<br />&#160;&#160;&#160;&#160;say dipping entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7894_167" -->
<a id="c7894_167"></a><blockquote class="code"><p class="quoted">
Table of Dipping Phrases
<br />dipping
<br />&quot;looks as though dipped in&quot;
<br />&quot;could have been rolling in&quot;
<br />&quot;has a bad case of&quot;
<br />&quot;suffers from&quot;
<br />&quot;contracted a virulent&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7895_167" -->
<a id="c7895_167"></a><blockquote class="code"><p class="quoted">
A door is usually scenery.
</p></blockquote>
<!-- END CODE -->
<p>The next part could be simpler, but for rigor we will write it in such a way that it will work whether or not the serial comma is in use. This requires some extra work.</p>
<!-- START CODE "c7896_167" -->
<a id="c7896_167"></a><blockquote class="code"><p class="quoted">
To make delimiter (index - a number) of (count - a number), continuing or halting:
<br />&#160;&#160;&#160;&#160;if index is 0:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if continuing, say &quot;. [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise if index is 1:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if count is 2, say &quot; and &quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[optional comma] and &quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;, &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7897_167" -->
<a id="c7897_167"></a><blockquote class="code"><p class="quoted">
To say optional comma:
<br />&#160;&#160;&#160;&#160;if the serial comma option is active:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;,&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7898_167" -->
<a id="c7898_167"></a><blockquote class="code"><p class="quoted">
Test me with &quot;go to cold comfort / z / z / z / z / ask vanessa for french vanilla / ask vanessa for chocolate / ask vanessa about flavors / ask vanessa for chocolate chocolate chip&quot;.
</p></blockquote>
<!-- END CODE -->
<p>Because so much of this game is randomized, it will not be possible to provide a test command that systematically solves it. A good strategy is to go to Main Street, get the syringe; go to the Town Hall and get the key; then visit the shops, inject everyone, and lock them in when they've all been injected. Then go to the Pool Hall, turn on the air conditioner, and wait for the remaining parties to show up.</p>
<p>This is also something that could get fairly slow if we added many more rooms and characters to it. In that case, we might want to select fast route-finding so that character movement won't take as long. This will cost memory, possibly forcing the game into Glulx format if it isn't already, but significantly reduce the run-time for large maps with numerous people moving each turn:</p>
<!-- START CODE "c7899_167" -->
<a id="c7899_167"></a><blockquote class="code"><p class="quoted">
Use fast route-finding.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "403: Flotation" "e148" -->
<a id="e148"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e148" class="eglink"><b>403</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e148" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Flotation</span></b></a><br />Objects that can sink or float in a well, depending on their own properties and the state of the surrounding environment.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e148"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example148">
<p>Here we want a rulebook to determine whether objects float or sink, so we create an object-based rulebook for the purpose. The more specific rules here, pertaining to corks and to inflated things, will be consulted first; then, as a default, the general flotation rule.</p>
<p>We also want a switch that can turn flotation off at will. The rule about the big switch will be observed before the others because the when... clause makes it more specific than the other rules in the flotation rulebook.</p>
<p>If we wanted, we could also put these rules into a rulebook in an explicit order, overriding Inform's automatic sorting by specificity.</p>
<!-- START CODE "c7900_148" -->
<a id="c7900_148"></a><blockquote class="code"><p class="quoted">
&quot;Flotation&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7901_148" -->
<a id="c7901_148"></a><blockquote class="code"><p class="quoted">
The Pumping House is a room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7902_148" -->
<a id="c7902_148"></a><blockquote class="code"><p class="quoted">
A well is a fixed in place container in the Pumping House.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7903_148" -->
<a id="c7903_148"></a><blockquote class="code"><p class="quoted">
Instead of examining the well:
<br />&#160;&#160;&#160;&#160;say &quot;[if something is in the well]On the surface of the water you can see [a list of things in the well][otherwise]There is nothing on the surface of the water, nor can you see into the depths[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7904_148" -->
<a id="c7904_148"></a><blockquote class="code"><p class="quoted">
The well bottom is a container.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7905_148" -->
<a id="c7905_148"></a><blockquote class="code"><p class="quoted">
The cork, the rubber ring and a lead ingot are in the Pumping House.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7906_148" -->
<a id="c7906_148"></a><blockquote class="code"><p class="quoted">
A big switch is a fixed in place device in the Pumping House. &quot;A big switch labelled 'MAKE EVERYTHING SINK' is mounted on one wall[if switched on]. It crackles with electricity[otherwise]. It is currently switched off and silent[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7907_148" -->
<a id="c7907_148"></a><blockquote class="code"><p class="quoted">
A thing can be inflated or uninflated. A thing is usually uninflated. Before printing the name of an inflated thing: say &quot;inflated &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7908_148" -->
<a id="c7908_148"></a><blockquote class="code"><p class="quoted">
The rubber ring is inflated.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7909_148" -->
<a id="c7909_148"></a><blockquote class="code"><p class="quoted">
The flotation rules are an object-based rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7910_148" -->
<a id="c7910_148"></a><blockquote class="code"><p class="quoted">
A flotation rule for the cork: rule succeeds.
<br />A flotation rule for an inflated thing: rule succeeds.
<br />A flotation rule when the big switch is switched on: rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7911_148" -->
<a id="c7911_148"></a><blockquote class="code"><p class="quoted">
After inserting something into the well:
<br />&#160;&#160;&#160;&#160;follow the flotation rules for the noun;
<br />&#160;&#160;&#160;&#160;if the rule succeeded:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] bobs on the surface.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the well bottom;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] sinks out of sight.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7912_148" -->
<a id="c7912_148"></a><blockquote class="code"><p class="quoted">
A thing can be sinking, rising, or static. A thing is usually static.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7913_148" -->
<a id="c7913_148"></a><blockquote class="code"><p class="quoted">
Definition: a thing is wet:
<br />&#160;&#160;&#160;&#160;if it is in the well, yes;
<br />&#160;&#160;&#160;&#160;if it is in the well bottom, yes;
<br />&#160;&#160;&#160;&#160;no.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7914_148" -->
<a id="c7914_148"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;now every thing is static;
<br />&#160;&#160;&#160;&#160;repeat with item running through wet things:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the flotation rules for the item;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the rule failed and the item is in the well, now the item is sinking;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the rule succeeded and the item is in the well bottom, now the item is rising;
<br />&#160;&#160;&#160;&#160;now every rising thing is in the well;
<br />&#160;&#160;&#160;&#160;now every sinking thing is in the well bottom;
<br />&#160;&#160;&#160;&#160;if something is rising, say &quot;[The list of rising things] rise[if the number of rising things is 1]s[end if] to the surface of the well.&quot;;
<br />&#160;&#160;&#160;&#160;if something is sinking, say &quot;[The list of sinking things] sink[if the number of sinking things is 1]s[end if] out of sight.&quot;
</p></blockquote>
<!-- END CODE -->
<p>And finally a few description rules to make things look prettier:</p>
<!-- START CODE "c7915_148" -->
<a id="c7915_148"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about the well when the well contains something:
<br />&#160;&#160;&#160;&#160;say &quot;The chief feature of the room is a concrete-sided well in which there float[if the number of things in the well is 1]s[end if] [a list of things in the well].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7916_148" -->
<a id="c7916_148"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about the well:
<br />&#160;&#160;&#160;&#160;say &quot;The chief feature of the room is a concrete-sided well full of water.&quot;
</p></blockquote>
<!-- END CODE -->
<p>As we recall from the chapter on activities, &quot;writing a paragraph about...&quot; is an activity; activities are themselves structured as sets of object-based rulebooks. The activity &quot;writing a paragraph about&quot; uses three object-based rulebooks (before writing..., for writing..., after writing...). We could have made a flotation activity as well, but in general it is overkill to make an activity to make success/failure decisions. For that purpose an object-based rulebook is sufficient.</p>
<!-- START CODE "c7917_148" -->
<a id="c7917_148"></a><blockquote class="code"><p class="quoted">
Test me with &quot;get all / put cork in well / put ring in well / put ingot in well / x well / get cork / get ring / switch switch on / put cork in well / put ring in well / x well / switch switch off / switch switch on&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "404: Kyoto" "e381" -->
<a id="e381"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e381" class="eglink"><b>404</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e381" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Kyoto</span></b></a><br />Expanding the effects of the THROW something AT something command so that objects do make contact with one another.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e381"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example381">
<p>Suppose we want to expand the function of the existing THROW SOMETHING AT command so that a thrown object actually does make contact most of the time. A glance at the Actions index tells us that the Throwing it at rulebook currently looks like this:</p>
<!-- START CODE "c7918_381" -->
<a id="c7918_381"></a><blockquote class="code"><p class="quoted">
Throwing something at something (past tense thrown it at)
<br />&#160;&#160;&#160;&#160;&quot;drop [something held] at/against/on/onto [something]&quot;
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">check</p></td><td class="quotedtablecell"><p class="quoted">an actor throwing something at</p></td><td class="quotedtablecell"><p class="quoted">implicitly remove thrown clothing rule</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">check</p></td><td class="quotedtablecell"><p class="quoted">an actor throwing something at</p></td><td class="quotedtablecell"><p class="quoted">futile to throw things at inanimate objects rule</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">check</p></td><td class="quotedtablecell"><p class="quoted">an actor throwing something at</p></td><td class="quotedtablecell"><p class="quoted">block throwing at rule</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<p>Some of those still look useful. We want to leave the &quot;implicitly remove thrown clothing&quot; rule, for instance -- no fair having the player throw a hat that's on his head. On the other hand, the &quot;futile to throw things at inanimate objects rule&quot; is going to have to go, because that would prevent us from ever being able to complete the throwing command. So let's get rid of that:</p>
<!-- START CODE "c7919_381" -->
<a id="c7919_381"></a><blockquote class="code"><p class="quoted">
&quot;Kyoto&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7920_381" -->
<a id="c7920_381"></a><blockquote class="code"><p class="quoted">
Part 1 - Throwing Rules
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7921_381" -->
<a id="c7921_381"></a><blockquote class="code"><p class="quoted">
The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.
</p></blockquote>
<!-- END CODE -->
<p>That &quot;block throwing at&quot; rule also looks sinister: any &quot;block...&quot; rule in the standard actions library is there to print a message telling the player he can't do what he's asked to do.</p>
<p>But it's not enough to ignore it, the way we did the &quot;futile&quot; rule. Since we are only expanding the command to affect inanimate objects, let's replace the &quot;block throwing at&quot; rule with a different one which will only prevent the player throwing things at people:</p>
<!-- START CODE "c7922_381" -->
<a id="c7922_381"></a><blockquote class="code"><p class="quoted">
The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7923_381" -->
<a id="c7923_381"></a><blockquote class="code"><p class="quoted">
This is the block throwing at people rule:
<br />&#160;&#160;&#160;&#160;if the second noun is a person, say &quot;That might be construed as an attack.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>Now we've changed the command so that some action can sometimes be carried out here -- but we don't have any rules for what happens. It's time to create some rules for our model world.</p>
<!-- START CODE "c7924_381" -->
<a id="c7924_381"></a><blockquote class="code"><p class="quoted">
A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.
</p></blockquote>
<!-- END CODE -->
<p>If we're actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:</p>
<!-- START CODE "c7925_381" -->
<a id="c7925_381"></a><blockquote class="code"><p class="quoted">
Check throwing it at (this is the block juggling rule):
<br />&#160;&#160;&#160;&#160;if the player is carrying the second noun, say &quot;It would be difficult to throw at something you are yourself holding.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7926_381" -->
<a id="c7926_381"></a><blockquote class="code"><p class="quoted">
Check throwing it at (this is the avoid throwing things into themselves rule):
<br />&#160;&#160;&#160;&#160;if the second noun is within the noun, say &quot;That would be a nice magic trick.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<p>And then the rules for the action itself:</p>
<!-- START CODE "c7927_381" -->
<a id="c7927_381"></a><blockquote class="code"><p class="quoted">
Carry out throwing it at (this is the check aerodynamics rule):
<br />&#160;&#160;&#160;&#160;if the noun is flat:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move noun to location;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun], unwieldy, flutters to the ground.&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>That &quot;rule succeeds&quot; ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:</p>
<!-- START CODE "c7928_381" -->
<a id="c7928_381"></a><blockquote class="code"><p class="quoted">
Carry out throwing it at (this is the contact rule):
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] hits [the second noun].[paragraph break]&quot;;
<br />&#160;&#160;&#160;&#160;if the second noun is fragile and the noun is hard:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;destroy the second noun.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7929_381" -->
<a id="c7929_381"></a><blockquote class="code"><p class="quoted">
Carry out throwing it at (this is the landing rule):
<br />&#160;&#160;&#160;&#160;let destination be the location;
<br />&#160;&#160;&#160;&#160;if the second noun is on a supporter (called endtable), let destination be the endtable;
<br />&#160;&#160;&#160;&#160;if the second noun is a supporter, let destination be the second noun;
<br />&#160;&#160;&#160;&#160;move the noun to the destination;
<br />&#160;&#160;&#160;&#160;if the noun is fragile and the second noun is hard:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;destroy the noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
<br />&#160;&#160;&#160;&#160;say &quot;[The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if].&quot;
</p></blockquote>
<!-- END CODE -->
<p>These rules are assuming some backup information, so let's provide that as well:</p>
<!-- START CODE "c7930_381" -->
<a id="c7930_381"></a><blockquote class="code"><p class="quoted">
Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7931_381" -->
<a id="c7931_381"></a><blockquote class="code"><p class="quoted">
To destroy (item - a thing):
<br />&#160;&#160;&#160;&#160;let home be the holder of the item;
<br />&#160;&#160;&#160;&#160;if the item is part of something (called the superstructure), let home be the holder of the superstructure;
<br />&#160;&#160;&#160;&#160;if the item is visible:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].&quot;;
<br />&#160;&#160;&#160;&#160;if something is relying on the item,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all the things which are relying on the item are in the home;
<br />&#160;&#160;&#160;&#160;now the item is nowhere.
</p></blockquote>
<!-- END CODE -->
<p>Now suppose we'd like to add some further cases for what happens if the player breaks a fragile door this way:</p>
<!-- START CODE "c7932_381" -->
<a id="c7932_381"></a><blockquote class="code"><p class="quoted">
To destroy (item - a door):
<br />&#160;&#160;&#160;&#160;now the item is open;
<br />&#160;&#160;&#160;&#160;now the item is unopenable;
<br />&#160;&#160;&#160;&#160;say &quot;[The item] smashes.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7933_381" -->
<a id="c7933_381"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of an unopenable open door while not throwing something at something:
<br />&#160;&#160;&#160;&#160;say &quot;open doorway&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7934_381" -->
<a id="c7934_381"></a><blockquote class="code"><p class="quoted">
Understand &quot;door&quot; or &quot;doorway&quot; as a door.
</p></blockquote>
<!-- END CODE -->
<p>This works, except that objects will continue to &quot;strike&quot; open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.</p>
<!-- START CODE "c7935_381" -->
<a id="c7935_381"></a><blockquote class="code"><p class="quoted">
This is the flying through doorways rule:
<br />&#160;&#160;&#160;&#160;if the second noun is an open door:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the distant room be the other side of the second noun;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the distant room;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] flies out of sight into [the distant room].&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:</p>
<!-- START CODE "c7936_381" -->
<a id="c7936_381"></a><blockquote class="code"><p class="quoted">
The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.
</p></blockquote>
<!-- END CODE -->
<p>The magic of rulebooks is that they allow authors to amend each other's work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.</p>
<p>Now for an actual scenario with which to test this:</p>
<!-- START CODE "c7937_381" -->
<a id="c7937_381"></a><blockquote class="code"><p class="quoted">
 Part 2 - The Study
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7938_381" -->
<a id="c7938_381"></a><blockquote class="code"><p class="quoted">
The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7939_381" -->
<a id="c7939_381"></a><blockquote class="code"><p class="quoted">
The player carries a netsuke and a shamisen. The description of the netsuke is &quot;A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.&quot; The netsuke is round, hard, and strong. Understand &quot;green&quot; or &quot;stone&quot; or &quot;bullfrog&quot; as the netsuke.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7940_381" -->
<a id="c7940_381"></a><blockquote class="code"><p class="quoted">
The description of the shamisen is &quot;An instrument you have only begun to learn to play.&quot; The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is &quot;[if the body is not part of the shamisen]shamisen [end if]body&quot;. The printed name of the neck is &quot;[if the neck is not part of the shamisen]shamisen [end if]neck&quot;. Understand &quot;shamisen&quot; as the body when the body is not part of the shamisen. Understand &quot;shamisen&quot; as the neck when the neck is not part of the shamisen.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7941_381" -->
<a id="c7941_381"></a><blockquote class="code"><p class="quoted">
The description of the Study is &quot;A restful three-tatami room.&quot; The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is &quot;A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.&quot; The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7942_381" -->
<a id="c7942_381"></a><blockquote class="code"><p class="quoted">
The description of the Moss Garden is &quot;Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.&quot; The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say &quot;You spent too long over their placement.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7943_381" -->
<a id="c7943_381"></a><blockquote class="code"><p class="quoted">
Test me with &quot;test one / test two&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7944_381" -->
<a id="c7944_381"></a><blockquote class="code"><p class="quoted">
Test one with &quot;open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7945_381" -->
<a id="c7945_381"></a><blockquote class="code"><p class="quoted">
Test two with &quot;throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "405: Being Peter" "e287" -->
<a id="e287"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e287" class="eglink"><b>405</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e287" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Being Peter</span></b></a><br />A set of rules determining the attitude a character will take when asked about certain topics.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_7.html#e287"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example287">
<p>Let's say that we're implementing a particularly irrational and volatile character. Some of the time she remains composed; some of the time she reacts with unexpected vehemence for reasons only partly related to what was said.</p>
<p>Moreover, her responses are divided between successful and failing outcomes, where success indicates that she's not too upset and failure means that she is distraught; we use this to determine how the rest of the room reacts.</p>
<!-- START CODE "c7946_287" -->
<a id="c7946_287"></a><blockquote class="code"><p class="quoted">
&quot;Being Peter&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7947_287" -->
<a id="c7947_287"></a><blockquote class="code"><p class="quoted">
The Drawing Room is a room. &quot;The company is assembled here for champagne. Most of it, anyway: Mary is on the phone to her babysitter, Roger is keeping her anxious company, and Carol doesn't drink. But everyone else.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7948_287" -->
<a id="c7948_287"></a><blockquote class="code"><p class="quoted">
Maggie is a woman in the Drawing Room.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7949_287" -->
<a id="c7949_287"></a><blockquote class="code"><p class="quoted">
The player wears a top hat.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7950_287" -->
<a id="c7950_287"></a><blockquote class="code"><p class="quoted">
Quizzing it about is an action applying to one thing and one visible thing. Understand &quot;ask [someone] about [any thing]&quot; as quizzing it about.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7951_287" -->
<a id="c7951_287"></a><blockquote class="code"><p class="quoted">
Instead of quizzing Maggie about something:
<br />&#160;&#160;&#160;&#160;follow the attitude rules;
<br />&#160;&#160;&#160;&#160;say &quot;Everyone waits to see what the reaction will be: [outcome of the rulebook].&quot;;
<br />&#160;&#160;&#160;&#160;if rule succeeded, say &quot;There is general relief.&quot;;
<br />&#160;&#160;&#160;&#160;otherwise say &quot;Everyone is pointedly silent.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7952_287" -->
<a id="c7952_287"></a><blockquote class="code"><p class="quoted">
The attitude rules are a rulebook. The attitude rules have outcomes she stays calm (no outcome - default), she gets angry (failure), she has a stroke (failure), she is only mildly annoyed (success), and she is elated (success).
</p></blockquote>
<!-- END CODE -->
<p>Here we want Inform to consult every appropriate attitude rule until it gets to some answer; if an attitude rule does not provide a result, the default 'no outcome' will mean that we go on to the next rule, and so on.</p>
<!-- START CODE "c7953_287" -->
<a id="c7953_287"></a><blockquote class="code"><p class="quoted">
A subject is a kind of thing. income, love life, and children are subjects.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7954_287" -->
<a id="c7954_287"></a><blockquote class="code"><p class="quoted">
An attitude rule for quizzing Maggie about love life:
<br />&#160;&#160;&#160;&#160;she gets angry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7955_287" -->
<a id="c7955_287"></a><blockquote class="code"><p class="quoted">
An attitude rule:
<br />&#160;&#160;&#160;&#160;if the player wears the top hat, she gets angry.
</p></blockquote>
<!-- END CODE -->
<p>Now, as we saw, the 'no outcome' result will never be returned and printed as Maggie's reaction, precisely because it is &quot;no outcome&quot;. Therefore, we provide a final attitude rule which will give her a default response to all statements:</p>
<!-- START CODE "c7956_287" -->
<a id="c7956_287"></a><blockquote class="code"><p class="quoted">
The last attitude rule:
<br />&#160;&#160;&#160;&#160;she is only mildly annoyed.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7957_287" -->
<a id="c7957_287"></a><blockquote class="code"><p class="quoted">
Test me with &quot;ask maggie about love / ask maggie about income / take off hat / ask maggie about income&quot;.
</p></blockquote>
<!-- END CODE -->
<p>There are plenty of contexts where we might want named outcomes for clarity but not want to print the results literally afterward.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "406: Feline Behavior" "e138" -->
<a id="e138"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e138" class="eglink"><b>406</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e138" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Feline Behavior</span></b></a><br />A cat which reacts to whatever items it has handy, returning the result of a rulebook for further processing.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_8.html#e138"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example138">
<p>Suppose we have a cat which is supposed to react to (and destroy) the most interesting thing in its environment. There are several ways we could approach this problem, but for the sake of demonstration, let's have it follow a rulebook to figure out which thing it most wants to interact with. We will then return the chosen object as &quot;the object produced by the cat behavior rules&quot;.</p>
<!-- START CODE "c7958_138" -->
<a id="c7958_138"></a><blockquote class="code"><p class="quoted">
&quot;Feline Behavior&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7959_138" -->
<a id="c7959_138"></a><blockquote class="code"><p class="quoted">
The Kitchen is a room. The cat is an animal in the Kitchen. In the Kitchen is a bowl, a ball of wool, a newspaper. The bowl contains a quantity of cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7960_138" -->
<a id="c7960_138"></a><blockquote class="code"><p class="quoted">
The cat is wearing a silver collar. The description of the cat is &quot;It is wearing [a list of things worn by the cat].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7961_138" -->
<a id="c7961_138"></a><blockquote class="code"><p class="quoted">
The player carries a closed openable container called a bag. The bag contains catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7962_138" -->
<a id="c7962_138"></a><blockquote class="code"><p class="quoted">
The cat behavior rules is a rulebook producing an object.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7963_138" -->
<a id="c7963_138"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the catnip:
<br />&#160;&#160;&#160;&#160;say &quot;The cat frolics with the catnip until nothing remains of it.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result catnip.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7964_138" -->
<a id="c7964_138"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the cream:
<br />&#160;&#160;&#160;&#160;say &quot;The cat laps up the cream.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result cream.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7965_138" -->
<a id="c7965_138"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the ball of wool:
<br />&#160;&#160;&#160;&#160;say &quot;The cat makes the ball of wool into a useless tangle which must be discarded.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result ball.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7966_138" -->
<a id="c7966_138"></a><blockquote class="code"><p class="quoted">
A cat behavior rule when the cat can touch the newspaper:
<br />&#160;&#160;&#160;&#160;say &quot;The cat bats playfully at the newspaper until all the nasty boring articles are destroyed.&quot;;
<br />&#160;&#160;&#160;&#160;rule succeeds with result newspaper.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7967_138" -->
<a id="c7967_138"></a><blockquote class="code"><p class="quoted">
A cat behavior rule:
<br />&#160;&#160;&#160;&#160;say &quot;The cat looks miffed at the lack of ready entertainment, and glares at you with yellow eyes as though wondering whether your pants leg is good for claw-sharpening.&quot;;
<br />&#160;&#160;&#160;&#160;rule fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7968_138" -->
<a id="c7968_138"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;let the destroyed object be the object produced by the cat behavior rules;
<br />&#160;&#160;&#160;&#160;if the destroyed object is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the destroyed object is nowhere;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[line break]Good thing you have no use for [the destroyed object] yourself.[paragraph break]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7969_138" -->
<a id="c7969_138"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / z / open bag / z / z&quot;.
</p></blockquote>
<!-- END CODE -->
<p>We include the if rule succeeded... condition here because nothing will be returned if the cat's search failed (as for instance in the result of the final rule).</p>
<p>Naturally, if we wanted we could equally well ask &quot;if rule failed...&quot;.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "407: Tilt 2" "e384" -->
<a id="e384"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e384" class="eglink"><b>407</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e384" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Tilt 2</span></b></a><br />A deck of cards with fully implemented individual cards; when the player has a full poker hand, the inventory listing describes the resulting hand accordingly.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_9.html#e384"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example384">
<p>In our previous implementations of playing cards, we've gotten as far as creating decks of individual cards that the player can draw and discard. But in a poker game, one doesn't just have a collection of cards: one has a hand of a specific kind.</p>
<p>Here we take on the job of writing an inventory listing for a poker hand that will reflect the real value of what the player has drawn. To do this, we create a rulebook to sort and assess the cards in the player's hand; its possible return values are limited to the kinds of poker hands that exist, from &quot;high card&quot; to &quot;royal flush&quot;.</p>
<p>The first three sections, creating the deck of cards and the means to parse their names, are identical to those we've already seen in Tilt 1; new material begins at section 4.</p>
<p>For the purposes of demonstration, we're simulating something akin to five-card draw without wilds; stud or hold-em variations would add some other complexities.</p>
<!-- START CODE "c7970_384" -->
<a id="c7970_384"></a><blockquote class="code"><p class="quoted">
&quot;Tilt&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7971_384" -->
<a id="c7971_384"></a><blockquote class="code"><p class="quoted">
Section 1 - Cards
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7972_384" -->
<a id="c7972_384"></a><blockquote class="code"><p class="quoted">
Suit is a kind of value. The suits are hearts, clubs, diamonds, and spades. Understand &quot;heart&quot; as hearts. Understand &quot;club&quot; as clubs. Understand &quot;diamond&quot; as diamonds. Understand &quot;spade&quot; as spades.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7973_384" -->
<a id="c7973_384"></a><blockquote class="code"><p class="quoted">
A card is a kind of thing.  A card has a suit. A card has a number called rank. Understand the suit property as describing a card. Understand the rank property as describing a card.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7974_384" -->
<a id="c7974_384"></a><blockquote class="code"><p class="quoted">
52 cards are in the card repository.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7975_384" -->
<a id="c7975_384"></a><blockquote class="code"><p class="quoted">
To say (count - a number) as a card value:
<br />&#160;&#160;&#160;&#160;choose row count in the Table of Value Names;
<br />&#160;&#160;&#160;&#160;say &quot;[term entry]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7976_384" -->
<a id="c7976_384"></a><blockquote class="code"><p class="quoted">
Rule for printing the name of a card (called target):
<br />&#160;&#160;&#160;&#160;say &quot;[rank of the target as a card value] of [suit of the target]&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7977_384" -->
<a id="c7977_384"></a><blockquote class="code"><p class="quoted">
Table of Value Names
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">term</p></td><td class="quotedtablecell"><p class="quoted">value</p></td><td class="quotedtablecell"><p class="quoted">topic</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ace&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;1&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;ace/A/one&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;deuce&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;2&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;deuce/two&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;3&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;three&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;4&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;four&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;5&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;five&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;6&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;six&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;7&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;seven&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;8&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;eight&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;9&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;nine&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;10&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;ten&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;jack&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;11&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;jack/knave/J&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;queen&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;12&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;queen/Q&quot;</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">&quot;king&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;13&quot;</p></td><td class="quotedtablecell"><p class="quoted">&quot;king/K&quot;</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7978_384" -->
<a id="c7978_384"></a><blockquote class="code"><p class="quoted">
After reading a command:
<br />&#160;&#160;&#160;&#160;if the player's command includes &quot;of [suit]&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while the player's command includes &quot;of&quot;:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cut the matched text;
<br />&#160;&#160;&#160;&#160;repeat through the Table of Value Names:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while the player's command includes topic entry:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;replace the matched text with value entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7979_384" -->
<a id="c7979_384"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;reconstitute deck.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7980_384" -->
<a id="c7980_384"></a><blockquote class="code"><p class="quoted">
To reconstitute deck:
<br />&#160;&#160;&#160;&#160;let current suit be hearts;
<br />&#160;&#160;&#160;&#160;now every card is in the card repository;
<br />&#160;&#160;&#160;&#160;while a card is in the card repository:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with current rank running from 1 to 13:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let item be a random card in card repository;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now rank of item is current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now suit of item is current suit;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now item is in the deck of cards;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now current suit is the suit after the current suit.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7981_384" -->
<a id="c7981_384"></a><blockquote class="code"><p class="quoted">
Section 2 - The Deck and the Discard Pile
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7982_384" -->
<a id="c7982_384"></a><blockquote class="code"><p class="quoted">
The Empty Room is a room. &quot;Nothing to see here.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7983_384" -->
<a id="c7983_384"></a><blockquote class="code"><p class="quoted">
The deck of cards is in the Empty Room. It is a closed unopenable container. The description is &quot;A standard poker deck.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7984_384" -->
<a id="c7984_384"></a><blockquote class="code"><p class="quoted">
The discard pile is a closed unopenable container. The description is &quot;Cards in this game are discarded face-down, so the discard pile is not very interesting to see. All you can observe is that it currently contains [if the number of cards which are in the discard pile is less than ten][the number of cards which are in the discard pile in words][otherwise]about [the rounded number of cards which are in the discard pile in words][end if] card[s].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7985_384" -->
<a id="c7985_384"></a><blockquote class="code"><p class="quoted">
To decide what number is the rounded number of (described set - a description of objects):
<br />&#160;&#160;&#160;&#160;let N be the number of members of the described set;
<br />&#160;&#160;&#160;&#160;let R be N divided by 5;
<br />&#160;&#160;&#160;&#160;let total be R times 5;
<br />&#160;&#160;&#160;&#160;decide on total.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7986_384" -->
<a id="c7986_384"></a><blockquote class="code"><p class="quoted">
Rule for printing room description details of something: do nothing instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7987_384" -->
<a id="c7987_384"></a><blockquote class="code"><p class="quoted">
Section 3 - Drawing and Discarding Actions
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7988_384" -->
<a id="c7988_384"></a><blockquote class="code"><p class="quoted">
Understand the commands &quot;take&quot; and &quot;carry&quot; and &quot;hold&quot; and &quot;get&quot; and &quot;drop&quot; and &quot;throw&quot; and &quot;discard&quot; as something new.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7989_384" -->
<a id="c7989_384"></a><blockquote class="code"><p class="quoted">
Understand &quot;take [text]&quot; or &quot;get [text]&quot; or &quot;drop [text]&quot; as a mistake (&quot;Here, you only draw and discard. Nothing else matters at the moment.&quot;).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7990_384" -->
<a id="c7990_384"></a><blockquote class="code"><p class="quoted">
Understand &quot;draw&quot; or &quot;draw card&quot; or &quot;draw a card&quot; as drawing. Drawing is an action applying to nothing. The drawing action has an object called the card drawn.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7991_384" -->
<a id="c7991_384"></a><blockquote class="code"><p class="quoted">
Setting action variables for drawing:
<br />&#160;&#160;&#160;&#160;now the card drawn is a random card which is in the deck of cards.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7992_384" -->
<a id="c7992_384"></a><blockquote class="code"><p class="quoted">
Check drawing:
<br />&#160;&#160;&#160;&#160;if the card drawn is nothing, say &quot;The deck is completely depleted.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7993_384" -->
<a id="c7993_384"></a><blockquote class="code"><p class="quoted">
Check drawing:
<br />&#160;&#160;&#160;&#160;if the number of cards carried by the player is greater than four,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;This is a five-card game; you must discard something before drawing anything further.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7994_384" -->
<a id="c7994_384"></a><blockquote class="code"><p class="quoted">
Carry out drawing:
<br />&#160;&#160;&#160;&#160;move the card drawn to the player.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7995_384" -->
<a id="c7995_384"></a><blockquote class="code"><p class="quoted">
Report drawing:
<br />&#160;&#160;&#160;&#160;say &quot;You draw [a card drawn].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7996_384" -->
<a id="c7996_384"></a><blockquote class="code"><p class="quoted">
Understand &quot;discard [card]&quot; as discarding. Discarding is an action applying to one thing.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7997_384" -->
<a id="c7997_384"></a><blockquote class="code"><p class="quoted">
Check discarding:
<br />&#160;&#160;&#160;&#160;if the player does not carry the noun, say &quot;You can only discard cards from your own hand.&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7998_384" -->
<a id="c7998_384"></a><blockquote class="code"><p class="quoted">
Carry out discarding:
<br />&#160;&#160;&#160;&#160;now the noun is in the discard pile;
<br />&#160;&#160;&#160;&#160;if the discard pile is not visible, move the discard pile to the location.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7999_384" -->
<a id="c7999_384"></a><blockquote class="code"><p class="quoted">
Report discarding:
<br />&#160;&#160;&#160;&#160;say &quot;You toss [the noun] nonchalantly onto the discard pile.&quot;
</p></blockquote>
<!-- END CODE -->
<p>New material begins here. We want to start by grouping cards together, but identifying poker hands only if the player holds a full five cards.</p>
<!-- START CODE "c8000_384" -->
<a id="c8000_384"></a><blockquote class="code"><p class="quoted">
Section 4 - Assessing Hands
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8001_384" -->
<a id="c8001_384"></a><blockquote class="code"><p class="quoted">
Before listing contents while taking inventory: group cards together.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8002_384" -->
<a id="c8002_384"></a><blockquote class="code"><p class="quoted">
Before grouping together cards:
<br />&#160;&#160;&#160;&#160;if the number of cards carried by the player is 5:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;follow the hand-ranking rules;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the rule succeeded, say &quot;[the outcome of the rulebook]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;some random cards&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the outcome of the rulebook is pair outcome, say &quot; of [rank of the first thing held by the player as a card value]s&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[number of cards carried by the player in words] assorted cards&quot;;
<br />&#160;&#160;&#160;&#160;say &quot; (&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8003_384" -->
<a id="c8003_384"></a><blockquote class="code"><p class="quoted">
Rule for grouping together cards:
<br />&#160;&#160;&#160;&#160;say &quot;[list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8004_384" -->
<a id="c8004_384"></a><blockquote class="code"><p class="quoted">
To say list hand:
<br />&#160;&#160;&#160;&#160;let chosen card be the first thing held by the player;
<br />&#160;&#160;&#160;&#160;while chosen card is a card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[chosen card]&quot;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now chosen card is the next thing held after chosen card;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if chosen card is a card, say &quot;, &quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8005_384" -->
<a id="c8005_384"></a><blockquote class="code"><p class="quoted">
After grouping together cards:
<br />&#160;&#160;&#160;&#160;say &quot;)&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The ranking of poker hands traditionally depends on three features: 1) whether all the cards are of the same suit (flush); 2) whether the cards constitute a numerical run of ranks (straight); and 3) how many cards or sets of cards are of matching rank (pairs, three of a kind, and four of a kind). Here we will start by assessing our hand to determine these qualities:</p>
<!-- START CODE "c8006_384" -->
<a id="c8006_384"></a><blockquote class="code"><p class="quoted">
The hand-ranking rules is a rulebook. The hand-ranking rules have outcomes royal flush, straight flush, four of a kind, full house, flush, straight, three of a kind, two pairs, pair, high card.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8007_384" -->
<a id="c8007_384"></a><blockquote class="code"><p class="quoted">
The hand-ranking rulebook has a truth state called the flushness.
<br />The hand-ranking rulebook has a truth state called the straightness.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8008_384" -->
<a id="c8008_384"></a><blockquote class="code"><p class="quoted">
The hand-ranking rulebook has a number called the pair count.
<br />The hand-ranking rulebook has a number called the triple count.
<br />The hand-ranking rulebook has a number called the quadruple count.
</p></blockquote>
<!-- END CODE -->
<p>For convenience in identifying hand features, and for elegance when we print the hand-listing, we start by sorting the cards in the player's hand so that the high-ranked cards are listed first. It is rare that we want to concern ourselves with this, but as we saw in the section on &quot;Looking at containment by hand&quot; in the chapter on Change, Inform keeps an ordered list of the items inside any given container; so it does order the objects in the player's hand, and the ordering depends on which things were added to the hand most recently. By moving something to the player's hand again (even if it was already there), we change this ordering, and wind up with a sorted hand.</p>
<!-- START CODE "c8009_384" -->
<a id="c8009_384"></a><blockquote class="code"><p class="quoted">
A card can be sorted or unsorted. A card is usually unsorted.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8010_384" -->
<a id="c8010_384"></a><blockquote class="code"><p class="quoted">
Definition: a card is high if its rank is 11 or more.
<br />Definition: a card is low if its rank is 4 or less.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8011_384" -->
<a id="c8011_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the initial sort rule):
<br />&#160;&#160;&#160;&#160;now every card is unsorted;
<br />&#160;&#160;&#160;&#160;while the player carries an unsorted card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let item be the lowest unsorted card held by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move item to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the item is sorted;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after initial sort: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<p>This last printing instruction is there for diagnostic purposes: later we'll add a testing command to turn debugging on and off; when it's on, the game will print out its card list at various stages in sorting, to help us trouble-shoot any problems. In normal play, however, this will be off.</p>
<p>Next up, a check to see whether the player has a flush:</p>
<!-- START CODE "c8012_384" -->
<a id="c8012_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the finding flushness rule):
<br />&#160;&#160;&#160;&#160;let called suit be the suit of a random card carried by the player;
<br />&#160;&#160;&#160;&#160;if every card carried by the player is called suit, now flushness is true.
</p></blockquote>
<!-- END CODE -->
<p>Now we check for straights; this is slightly complicated by the fact that an ace can be either the bottom of a low straight (lower than 2) or the top of a high straight (higher than king), so we explicitly check both possibilities.</p>
<!-- START CODE "c8013_384" -->
<a id="c8013_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the finding straightness rule):
<br />&#160;&#160;&#160;&#160;now straightness is true;
<br />&#160;&#160;&#160;&#160;let N be the rank of the highest card which is carried by the player;
<br />&#160;&#160;&#160;&#160;repeat with current rank running from N - 4 to N:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the test rank is the current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unless the player carries a matching card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current rank is N - 4 and the current rank is 9 and the player carries an ace card, do nothing; [this covers the case where an ace could be the top card of the sequence]
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise now straightness is false.
</p></blockquote>
<!-- END CODE -->
<p>And finally, we need to identify any groups of cards of the same rank. We want to know how many groups there are and how large each group is (though in practice there can only be one group of three or four in a standard-sized poker hand). We also want to mark any grouped cards so that we can move them to the front of the player's hand when we take inventory.</p>
<!-- START CODE "c8014_384" -->
<a id="c8014_384"></a><blockquote class="code"><p class="quoted">
A card can be quadrupled, tripled, paired or uncombined.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8015_384" -->
<a id="c8015_384"></a><blockquote class="code"><p class="quoted">
Test rank is a number that varies. Definition: a card is matching if its rank is the test rank.
</p></blockquote>
<!-- END CODE -->
<p>This definition is a convenience so that we don't have to write so many explicit loops in the following rule:</p>
<!-- START CODE "c8016_384" -->
<a id="c8016_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the counting multiples rule):
<br />&#160;&#160;&#160;&#160;now every card is uncombined;
<br />&#160;&#160;&#160;&#160;repeat with current rank running from 1 to 13:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now test rank is current rank;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let N be the number of matching cards held by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is 4:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the quadruple count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every matching card held by the player is quadrupled;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is 3:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the triple count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every matching card held by the player is tripled;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if N is 2:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the pair count;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every matching card held by the player is paired.
</p></blockquote>
<!-- END CODE -->
<p>Next we tweak our sorting to reflect the make-up of the hand. There are two reasons why this might differ from the straight highest-to-lowest sort we did earlier:</p>
<p>1) we want to list aces as high unless they are serving as the bottom of a low straight, in which case they should appear last;</p>
<p>2) we want combinations to appear at the front of the list, sorted from highest value to lowest value: larger combinations first, then smaller combinations, and combinations of equal size sorted by rank.</p>
<!-- START CODE "c8017_384" -->
<a id="c8017_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the move aces up unless there's a low straight rule):
<br />&#160;&#160;&#160;&#160;unless the straightness is true and the lowest card carried by the player is an ace card and the rank of the highest card carried by the player is 5,
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now every ace card which is carried by the player is carried by the player;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after ace movement rule: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8018_384" -->
<a id="c8018_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the move pairs forward rule):
<br />&#160;&#160;&#160;&#160;while the player carries a paired card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let selection be the lowest paired card which is carried by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the selection to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the selection is uncombined;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after pairs movement: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8019_384" -->
<a id="c8019_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the raise ace pairs rule):
<br />&#160;&#160;&#160;&#160;if the player carries exactly two ace cards:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with item running through ace cards which are carried by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move item to the player;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after paired-ace movement: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8020_384" -->
<a id="c8020_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the move multiples forward rule):
<br />&#160;&#160;&#160;&#160;while the player carries a tripled card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let selection be the lowest tripled card which is carried by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the selection to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the selection is uncombined;
<br />&#160;&#160;&#160;&#160;while the player carries a quadrupled card:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let selection be the lowest quadrupled card which is carried by the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the selection to the player;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the selection is uncombined;
<br />&#160;&#160;&#160;&#160;if sort-debugging is true, say &quot;-- after multiples movement rule: [list hand]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8021_384" -->
<a id="c8021_384"></a><blockquote class="code"><p class="quoted">
Definition: a card is ace if its rank is 1.
<br />Definition: a card is king if its rank is 13.
</p></blockquote>
<!-- END CODE -->
<p>Now, having determined the salient qualities of our hand, we run through rules in order from the highest kind of poker combination to the lowest. Because of the order of the source, Inform will choose whichever combination applies first.</p>
<!-- START CODE "c8022_384" -->
<a id="c8022_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the royal-flush rule):
<br />&#160;&#160;&#160;&#160;if flushness is true and straightness is true and the highest card carried by the player is king and the lowest card carried by the player is ace, royal flush.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8023_384" -->
<a id="c8023_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the straight-flushes rule):
<br />&#160;&#160;&#160;&#160;if flushness is true and straightness is true, straight flush.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8024_384" -->
<a id="c8024_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the four-of-a-kind rule):
<br />&#160;&#160;&#160;&#160;if the quadruple count is 1, four of a kind.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8025_384" -->
<a id="c8025_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the full-house rule):
<br />&#160;&#160;&#160;&#160;if the pair count is 1 and the triple count is 1, full house.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8026_384" -->
<a id="c8026_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the flushes rule):
<br />&#160;&#160;&#160;&#160;if flushness is true, flush.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8027_384" -->
<a id="c8027_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the straights rule):
<br />&#160;&#160;&#160;&#160;if straightness is true, straight.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8028_384" -->
<a id="c8028_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the three-of-a-kind rule):
<br />&#160;&#160;&#160;&#160;if triple count is 1, three of a kind.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8029_384" -->
<a id="c8029_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the two-pair rule):
<br />&#160;&#160;&#160;&#160;if the pair count is 2, two pairs.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8030_384" -->
<a id="c8030_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the pair rule):
<br />&#160;&#160;&#160;&#160;if the pair count is 1, pair.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8031_384" -->
<a id="c8031_384"></a><blockquote class="code"><p class="quoted">
A hand-ranking rule (this is the default rule):
<br />&#160;&#160;&#160;&#160;high card.
</p></blockquote>
<!-- END CODE -->
<p>And finally, we need to define our debugging variable here, even though we won't give the player the ability to turn it on and off except in the special testing section.</p>
<!-- START CODE "c8032_384" -->
<a id="c8032_384"></a><blockquote class="code"><p class="quoted">
Sort-debugging is a truth state that varies.
</p></blockquote>
<!-- END CODE -->
<p>For many examples, a test-me script is enough to prove that the example does what it ought. This example, though, is a bit more complicated, and hard to test randomly. The remainder of the source here shows how we might write a test to verify the desired behavior of our rulebook. Those who are only interested in the rulebook itself can stop reading at this point.</p>
<!-- START CODE "c8033_384" -->
<a id="c8033_384"></a><blockquote class="code"><p class="quoted">
Section 5 - Testing hand identification - Not for release
</p></blockquote>
<!-- END CODE -->
<p>For the sake of testing our rules, we provide an apparatus that will load the player's hand up with sample hands of each kind, then show the result to make sure that the hand is being correctly identified.</p>
<!-- START CODE "c8034_384" -->
<a id="c8034_384"></a><blockquote class="code"><p class="quoted">
Understand &quot;debug sorting&quot; as debugging hand sorting. Debugging hand sorting is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8035_384" -->
<a id="c8035_384"></a><blockquote class="code"><p class="quoted">
Carry out debugging hand sorting:
<br />&#160;&#160;&#160;&#160;if sort-debugging is false, now sort-debugging is true;
<br />&#160;&#160;&#160;&#160;otherwise now sort-debugging is false.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8036_384" -->
<a id="c8036_384"></a><blockquote class="code"><p class="quoted">
Report debugging hand sorting:
<br />&#160;&#160;&#160;&#160;say &quot;Sort debugging is now [if sort-debugging is true]on[otherwise]off[end if].&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8037_384" -->
<a id="c8037_384"></a><blockquote class="code"><p class="quoted">
Test me with &quot;draw / g / g / g / g / force hand / g / g / g / g / g / g / g / g / g / g / g / g&quot;.
</p></blockquote>
<!-- END CODE -->
<p>The somewhat rough-and-ready principle of this table is that we will overwrite the cards in the player's hand by resetting their ranks and suits; every five rows of the table represent a new poker hand for the game to attempt to sort and identify. These include one example of each of the major kinds of poker hand, plus a couple of variations involving aces which test the special sorting rules.</p>
<!-- START CODE "c8038_384" -->
<a id="c8038_384"></a><blockquote class="code"><p class="quoted">
Table of Testing Hands
<br /></p></blockquote><table class="codetable">
<tr><td class="quotedtablecell"><p class="quoted">set suit</p></td><td class="quotedtablecell"><p class="quoted">set rank</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[royal flush]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">12</p></td><td class="quotedtablecell"><p class="quoted">[straight flush]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">8</p></td><td class="quotedtablecell"><p class="quoted">[four of a kind]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">8</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[full house]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">[flush]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[straight]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">13</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">2</p></td><td class="quotedtablecell"><p class="quoted">[three of a kind]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">6</p></td><td class="quotedtablecell"><p class="quoted">[two pairs]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">6</p></td><td class="quotedtablecell"><p class="quoted">[two pairs, ace high]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">6</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">12</p></td><td class="quotedtablecell"><p class="quoted">[pair]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">12</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">10</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">13</p></td><td class="quotedtablecell"><p class="quoted">[high]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">11</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">9</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">clubs</p></td><td class="quotedtablecell"><p class="quoted">7</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">hearts</p></td><td class="quotedtablecell"><p class="quoted">1</p></td><td class="quotedtablecell"><p class="quoted">[tricky sorting: low straight]</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">2</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">spades</p></td><td class="quotedtablecell"><p class="quoted">3</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">4</p></td></tr>
<tr><td class="quotedtablecell"><p class="quoted">diamonds</p></td><td class="quotedtablecell"><p class="quoted">5</p></td></tr>
</table><blockquote><p>
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8039_384" -->
<a id="c8039_384"></a><blockquote class="code"><p class="quoted">
Understand &quot;force hand&quot; as forcing a hand. Forcing a hand is an action out of world.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8040_384" -->
<a id="c8040_384"></a><blockquote class="code"><p class="quoted">
Current marker is a number that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8041_384" -->
<a id="c8041_384"></a><blockquote class="code"><p class="quoted">
Carry out forcing a hand:
<br />&#160;&#160;&#160;&#160;repeat with item running through cards which are carried by the player:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment current marker;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if current marker is greater than the number of filled rows in the Table of Testing Hands, now current marker is 1;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;choose row current marker in the Table of Testing Hands;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the suit of item is the set suit entry;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the rank of item is the set rank entry.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8042_384" -->
<a id="c8042_384"></a><blockquote class="code"><p class="quoted">
Report forcing a hand:
<br />&#160;&#160;&#160;&#160;try taking inventory.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "408: Electrified" "e116" -->
<a id="e116"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e116" class="eglink"><b>408</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e116" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Electrified</span></b></a><br />Adding a rule before the basic accessibility rule that will prevent the player from touching electrified objects under the wrong circumstances.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_10.html#e116"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example116">
<p>Suppose we want to prevent the player from touching anything electrified -- not just as a response to TOUCH OBJECT, but at any time when the action would require contact with the object in question.</p>
<!-- START CODE "c8043_116" -->
<a id="c8043_116"></a><blockquote class="code"><p class="quoted">
&quot;Electrified&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8044_116" -->
<a id="c8044_116"></a><blockquote class="code"><p class="quoted">
A thing can be safe or electrified. A thing is usually safe.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8045_116" -->
<a id="c8045_116"></a><blockquote class="code"><p class="quoted">
The Open Field is a room. &quot;At this end of the field is a wire fence separating farm country from the government testing grounds beyond.&quot; The wire fence is an electrified thing in Open Field. It is scenery. The description of the wire fence is &quot;Built into the fence is [a list of things which are part of the fence].&quot; The scary box is an electrified container. It is part of wire fence. In the scary box is an alluring prize.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8046_116" -->
<a id="c8046_116"></a><blockquote class="code"><p class="quoted">
The player carries a flashlight, a grappling hook, a very thick rubber glove, and a length of rope. The glove is wearable.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8047_116" -->
<a id="c8047_116"></a><blockquote class="code"><p class="quoted">
This is the electrocution-wisdom rule:
<br />&#160;&#160;&#160;&#160;if the player wears the very thick rubber glove, make no decision;
<br />&#160;&#160;&#160;&#160;if the action requires a touchable noun and the noun is electrified, say &quot;You fear touching [the noun].&quot; instead;
<br />&#160;&#160;&#160;&#160;if the action requires a touchable second noun and the second noun is electrified, say &quot;You fear touching [the second noun].&quot; instead.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8048_116" -->
<a id="c8048_116"></a><blockquote class="code"><p class="quoted">
The electrocution-wisdom rule is listed before the basic accessibility rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8049_116" -->
<a id="c8049_116"></a><blockquote class="code"><p class="quoted">
Before touching the scary box:
<br />&#160;&#160;&#160;&#160;say &quot;You can't help noticing a bright red sticker on the surface of the box.&quot; [This rule will fire even if we are not wearing the glove, because Before rules occur before basic accessibility.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8050_116" -->
<a id="c8050_116"></a><blockquote class="code"><p class="quoted">
Instead of opening the scary box:
<br />&#160;&#160;&#160;&#160;say &quot;The scary box seems to be super-glued shut.&quot; [This one won't, because Instead rules occur after basic accessibility.]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8051_116" -->
<a id="c8051_116"></a><blockquote class="code"><p class="quoted">
Test me with &quot;touch fence / touch box / open box / wear glove / open box&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "409: Timeless" "e387" -->
<a id="e387"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e387" class="eglink"><b>409</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e387" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Timeless</span></b></a><br />A set of actions which do not take any game time at all.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_4.html#e387"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example387">
<p>In a game with tight timing, it is sometimes friendliest to the player to let him LOOK and EXAMINE as much as necessary without being penalized.</p>
<!-- START CODE "c8052_387" -->
<a id="c8052_387"></a><blockquote class="code"><p class="quoted">
&quot;Timeless&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8053_387" -->
<a id="c8053_387"></a><blockquote class="code"><p class="quoted">
Examining something is acting fast. Looking is acting fast.
</p></blockquote>
<!-- END CODE -->
<p>Now we need a rule which, just at the right moment, stops the turn sequence rulebook in the cast of our new fast-acting actions:</p>
<!-- START CODE "c8054_387" -->
<a id="c8054_387"></a><blockquote class="code"><p class="quoted">
The take visual actions out of world rule is listed before the every turn stage rule in the turn sequence rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8055_387" -->
<a id="c8055_387"></a><blockquote class="code"><p class="quoted">
This is the take visual actions out of world rule: if acting fast, rule succeeds.
</p></blockquote>
<!-- END CODE -->
<p>Thus the rest of the turn sequence rulebook is omitted for looking or examining: in effect, they become out-of-world actions like &quot;saving the game&quot;. If we wanted to add, say, taking inventory to the list of instant activities, we would just need to define it as acting fast, too.</p>
<p>Now the scenario for testing:</p>
<!-- START CODE "c8056_387" -->
<a id="c8056_387"></a><blockquote class="code"><p class="quoted">
When play begins:
<br />&#160;&#160;&#160;&#160;say &quot;You are cornered by a pack of zombie wolves, armed only with a torch and a pair of pinking shears. This may be your last moment on earth, unless you can think fast!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8057_387" -->
<a id="c8057_387"></a><blockquote class="code"><p class="quoted">
Cleft is a room. &quot;You're backed into a cleft in the granite: behind you are only steep, high faces of stone, and before you a narrow passage.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8058_387" -->
<a id="c8058_387"></a><blockquote class="code"><p class="quoted">
The plural of zombie wolf is zombie wolves. A zombie wolf is a kind of animal. Four zombie wolves are in Cleft.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8059_387" -->
<a id="c8059_387"></a><blockquote class="code"><p class="quoted">
Rule for writing a paragraph about zombie wolves:
<br />&#160;&#160;&#160;&#160;say &quot;The good news is that there isn't much space in which for the zombie wolves to attack.&quot;;
<br />&#160;&#160;&#160;&#160;now every zombie wolf is mentioned.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8060_387" -->
<a id="c8060_387"></a><blockquote class="code"><p class="quoted">
A steep high face of stone is scenery in Cleft. Understand &quot;rock&quot; as the stone. The description is &quot;Now that you look more closely, there appear to be pitons driven into the rock.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8061_387" -->
<a id="c8061_387"></a><blockquote class="code"><p class="quoted">
Some pitons are part of the stone. The description of the pitons is &quot;It looks as though someone else has made this ascent before.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8062_387" -->
<a id="c8062_387"></a><blockquote class="code"><p class="quoted">
Instead of climbing the stone, try going up. Instead of climbing the pitons, try going up.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8063_387" -->
<a id="c8063_387"></a><blockquote class="code"><p class="quoted">
Above the Cleft is Clifftop.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8064_387" -->
<a id="c8064_387"></a><blockquote class="code"><p class="quoted">
Every turn when the location is Cleft:
<br />&#160;&#160;&#160;&#160;say &quot;Alas, your time has run out. The alpha wolf springs--&quot;;
<br />&#160;&#160;&#160;&#160;end the story.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8065_387" -->
<a id="c8065_387"></a><blockquote class="code"><p class="quoted">
Every turn when the location is Clifftop:
<br />&#160;&#160;&#160;&#160;say &quot;After a breathless climb, you emerge at last onto the open clifftop.&quot;;
<br />&#160;&#160;&#160;&#160;end the story finally.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8066_387" -->
<a id="c8066_387"></a><blockquote class="code"><p class="quoted">
Test me with &quot;x me / x stone / x pitons / climb pitons&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "410: Endurance" "e122" -->
<a id="e122"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e122" class="eglink"><b>410</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e122" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Endurance</span></b></a><br />Giving different actions a range of durations using a time allotment rulebook.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_4.html#e122"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example122">
<p>Here we move to a systematic way of giving different durations to different actions, including even variations on the same act -- so that for instance climbing a steep hill might take several minutes more than other going actions. We do this by setting a number, &quot;work duration&quot;, to represent the number of minutes consumed by a given action, and then consulting a rulebook to find out how long the past turn's action should take. By default, an action will take 1 minute.</p>
<p>We'll start by emulating the behavior of &quot;Uptempo&quot;: each turn we'll set the clock forward most of the way, then check to see what has changed since the last turn, print any relevant events, and only then set the clock forward the final minute. The exception is when an action is set to take no time at all; in that case, we'll skip the rest of the turn sequence rules entirely.</p>
<!-- START CODE "c8067_122" -->
<a id="c8067_122"></a><blockquote class="code"><p class="quoted">
 &quot;Endurance&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8068_122" -->
<a id="c8068_122"></a><blockquote class="code"><p class="quoted">
Work duration is a number that varies.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8069_122" -->
<a id="c8069_122"></a><blockquote class="code"><p class="quoted">
Every turn:
<br />&#160;&#160;&#160;&#160;now work duration is 0;
<br />&#160;&#160;&#160;&#160;increment the turn count;
<br />&#160;&#160;&#160;&#160;follow the time allotment rules;
<br />&#160;&#160;&#160;&#160;if work duration is 0, rule succeeds;
<br />&#160;&#160;&#160;&#160;increase the time of day by (work duration minutes - 1 minute).
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8070_122" -->
<a id="c8070_122"></a><blockquote class="code"><p class="quoted">
The time allotment rules are a rulebook.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8071_122" -->
<a id="c8071_122"></a><blockquote class="code"><p class="quoted">
A time allotment rule for examining or looking:
<br />&#160;&#160;&#160;&#160;now work duration is 0;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8072_122" -->
<a id="c8072_122"></a><blockquote class="code"><p class="quoted">
A time allotment rule for going:
<br />&#160;&#160;&#160;&#160;now work duration is 2;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8073_122" -->
<a id="c8073_122"></a><blockquote class="code"><p class="quoted">
A time allotment rule for going up:
<br />&#160;&#160;&#160;&#160;now work duration is 5;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8074_122" -->
<a id="c8074_122"></a><blockquote class="code"><p class="quoted">
A time allotment rule for waiting:
<br />&#160;&#160;&#160;&#160;now work duration is 10;
<br />&#160;&#160;&#160;&#160;rule succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8075_122" -->
<a id="c8075_122"></a><blockquote class="code"><p class="quoted">
The last time allotment rule:
<br />&#160;&#160;&#160;&#160;now work duration is 1.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8076_122" -->
<a id="c8076_122"></a><blockquote class="code"><p class="quoted">
When play begins: now the right hand status line is &quot;[time of day]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8077_122" -->
<a id="c8077_122"></a><blockquote class="code"><p class="quoted">
The Quai is a room. &quot;An attractive park at the edge of the river Aude: here you can wander among palm trees, and watch cyclists go by on the bike path; in the water there are ducks. In the cafe to your north, patrons sip their pastis; and above you is the medieval walled city and its castle.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8078_122" -->
<a id="c8078_122"></a><blockquote class="code"><p class="quoted">
The Cafe is north of the Quai. &quot;A charming collection of umbrella-shaded tables, from which one can watch the river and the walls of the city beyond. The noise of traffic is only a minor distraction.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8079_122" -->
<a id="c8079_122"></a><blockquote class="code"><p class="quoted">
The City is above the Quai.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8080_122" -->
<a id="c8080_122"></a><blockquote class="code"><p class="quoted">
After going to the City:
<br />&#160;&#160;&#160;&#160;say &quot;You struggle uphill for some distance...&quot;;
<br />&#160;&#160;&#160;&#160;continue the action.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8081_122" -->
<a id="c8081_122"></a><blockquote class="code"><p class="quoted">
At 9:15 AM:
<br />&#160;&#160;&#160;&#160;say &quot;The bells ring out from Place Carnot.&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8082_122" -->
<a id="c8082_122"></a><blockquote class="code"><p class="quoted">
Test me with &quot;z / n / s / u&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
<!-- START EXAMPLE "411: Escape from the Seraglio" "e127" -->
<a id="e127"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="WI_19.html#e127" class="eglink"><b>411</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="WI_19.html#e127" class="eglink"><img class="asterisk" alt="*" src="images/asterisk.png" /><img class="asterisk" alt="*" src="images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Escape from the Seraglio</span></b></a><br />Replacing the usual response to TAKE ALL so that instead of output such as "grapes: Taken. orange: Taken.", Inform produces variable responses in place of "grapes:".</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="RB_6.html#e127"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example127">
<!-- START CODE "c8083_127" -->
<a id="c8083_127"></a><blockquote class="code"><p class="quoted">
&quot;Escape from the Seraglio&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8084_127" -->
<a id="c8084_127"></a><blockquote class="code"><p class="quoted">
Section 1 - Special Announcement Rules
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8085_127" -->
<a id="c8085_127"></a><blockquote class="code"><p class="quoted">
The number of takes this turn is a number that varies. Every turn: now the number of takes this turn is 0.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8086_127" -->
<a id="c8086_127"></a><blockquote class="code"><p class="quoted">
The friskily announce items from multiple object lists rule is listed instead of the announce items from multiple object lists rule in the action-processing rules.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8087_127" -->
<a id="c8087_127"></a><blockquote class="code"><p class="quoted">
This is the friskily announce items from multiple object lists rule:
<br />&#160;&#160;&#160;&#160;if taking:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increment the number of takes this turn;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[if number of takes this turn is 1]First [otherwise if the number of takes this turn is 2]And then [otherwise if the number of takes this turn is 3]And I suppose also [otherwise if the number of takes this turn is 7]And on we wearily go with [otherwise if the number of takes this turn is 9]Oh, and not forgetting [otherwise]And [end if][the current item from the multiple object list]: [run paragraph on]&quot;;
<br />&#160;&#160;&#160;&#160;otherwise:
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current item from the multiple object list is not nothing, say &quot;[current item from the multiple object list]: [run paragraph on]&quot;.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8088_127" -->
<a id="c8088_127"></a><blockquote class="code"><p class="quoted">
Rule for deciding whether all includes the person asked: it does not.
<br />Rule for deciding whether all includes a person when taking: it does not.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8089_127" -->
<a id="c8089_127"></a><blockquote class="code"><p class="quoted">
Section 2 - The Scenario
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8090_127" -->
<a id="c8090_127"></a><blockquote class="code"><p class="quoted">
The Palm Chamber is a room. Sarissa is a woman in the Palm Chamber.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8091_127" -->
<a id="c8091_127"></a><blockquote class="code"><p class="quoted">
The Palm Chamber contains a bottle of ink, a quill pen, a tangerine, a bunch of grapes, a length of silken rope, some perfume, a cake of incense, a fitted leather bodice, a sapphire anklet, an illustrated novel, a whip, and a heavy iron key.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8092_127" -->
<a id="c8092_127"></a><blockquote class="code"><p class="quoted">
A persuasion rule for asking Sarissa to try taking the key:
<br />&#160;&#160;&#160;&#160;say &quot;Sarissa nervously demurs, knowing that it is forbidden.&quot;;
<br />&#160;&#160;&#160;&#160;persuasion fails.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8093_127" -->
<a id="c8093_127"></a><blockquote class="code"><p class="quoted">
A persuasion rule: persuasion succeeds.
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c8094_127" -->
<a id="c8094_127"></a><blockquote class="code"><p class="quoted">
Test me with &quot;take all / drop all / sarissa, take all&quot;.
</p></blockquote>
<!-- END CODE -->
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<!-- END IGNORE -->
</body>
</html>
